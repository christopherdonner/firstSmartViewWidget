{"version":3,"sources":["../../src/widgets/search.custom/impl/form.view.js","../../src/widgets/search.custom/impl/customsearchform!hbs","../../src/widgets/search.custom/impl/customsearch.item!hbs","../../src/widgets/search.custom/impl/search.customFormView.js","../../src/widgets/search.custom/impl/search.customview.model.js","../../src/widgets/search.custom/impl/search.customview.factory.js","../../src/widgets/search.custom/impl/search.customquery.model.js","../../src/widgets/search.custom/impl/search.customquery.factory.js","../../src/widgets/search.custom/impl/nls/lang.js","../../src/widgets/search.custom/impl/nls/root/lang.js","../../src/widgets/search.custom/impl/customsearch.main!hbs","../../src/widgets/search.custom/impl/search.custom!css","../../src/widgets/search.custom/impl/search.object.view.js","../../src/widgets/search.custom/search.custom.view.js","../../src/widgets/search.results/impl/nls/lang.js","../../src/widgets/search.results/impl/nls/root/lang.js","../../src/widgets/search.results/impl/search.results.header!hbs","../../src/widgets/search.results/impl/search.results.header.title!hbs","../../src/widgets/search.results/nls/lang.js","../../src/widgets/search.results/nls/root/lang.js","../../src/widgets/search.results/impl/search.results!css","../../src/widgets/search.results/impl/search.results.header.title.view.js","../../src/widgets/search.results/impl/search.results.header.view.js","../../src/widgets/search.results/controls/sorting/impl/nls/localized.strings.js","../../src/widgets/search.results/controls/sorting/impl/nls/root/localized.strings.js","../../src/widgets/search.results/controls/sorting/impl/sort.menu!hbs","../../src/widgets/search.results/controls/sorting/sort.menu.view.js","../../src/widgets/search.results/impl/toolbaritems!csui-ext","../../src/widgets/search.results/impl/toolbaritems.js","../../src/widgets/search.results/toolbaritems.js","../../src/widgets/search.results/toolbaritems.masks.js","../../src/widgets/search.results/controls/expandall/impl/expandall!hbs","../../src/widgets/search.results/controls/expandall/impl/expandall!css","../../src/widgets/search.results/controls/expandall/expandall.view.js","../../src/widgets/search.results/impl/metadata/search.metadata!hbs","../../src/widgets/search.results/impl/metadata/search.metadata.view.js","../../src/widgets/search.results/impl/search.results!hbs","../../src/widgets/search.results/impl/search.result!hbs","../../src/widgets/search.results/impl/search.empty!hbs","../../src/widgets/search.results/search.results.view.js","../../src/widgets/search.custom/search.custom.manifest.json!json","../../src/widgets/search.results/search.results.manifest.json!json","../../src/widgets/search.custom/impl/nls/search.custom.manifest.js","../../src/widgets/search.custom/impl/nls/root/search.custom.manifest.js","../../src/widgets/search.custom/impl/nls/search.custom.manifest!i18n","../../src/widgets/search.results/impl/nls/search.results.manifest.js","../../src/widgets/search.results/impl/nls/root/search.results.manifest.js","../../src/widgets/search.results/impl/nls/search.results.manifest!i18n","csui-search.js"],"names":["csui","define","module","$","_","Marionette","Alpaca","FormView","extend","constructor","options","this","prototype","call","custom","adjustHeight","jQuery","that","customFlatten","x","result","prefix","isObject","each","v","k","test","customFilter","flattenData","objectList","getValues","customEndsWith","original_k","substr","lastIndexOf","push","string","substring","indexOf","length","data","list","item","flatten","$el","on","event","keyCode","target","type","value","trim","parent","stopImmediatePropagation","defaultValues","addClass","triggerSearch","removeClass","is","siblings","setTimeout","hasClass","closest","find","click","updateRenderedForm","onRenderForm","customView","triggerMethod","onChangeField","window","which","hbs","Handlebars","t","template","1","depth0","helpers","partials","blockParams","depths","stack1","isSetType","name","hash","fn","program","inverse","2","helper","escapeExpression","lambda","modelId","index","helperMissing","4","compiler","main","fields","noop","useData","useDepths","registerPartial","base","CustomSearchFormView","CustomSearchTemplate","CustomSearchItemTemplate","ItemView","tag","className","apply","arguments","model","errorHandle","onRender","e","_searchCustomFormViewEle","Region","el","formView","context","layoutMode","mode","templateId","attributes","show","objectView","Backbone","ConnectableMixin","FetchableMixin","Url","SearchCustomModel","Model","makeConnectable","makeFetchable","mixin","isFetchable","url","combine","connector","connection","nodeId","parse","response","text","ModelFactory","ConnectorFactory","propertyPrefix","customSearch","getObject","config","defaults","customQuery","property","fetch","models","node","savedSearchQueryId","CollectionFactory","CustomViewFactory","SearchCustomQueryCollection","widgetID","Collection","root","en-us","en","searchButtonMessage","title","messages","search","SearchCustomFormView","BlockingBehavior","SearchQueryModelFactory","SearchCustomQueryFactory","lang","SearchObjectTemplate","PerfectScrollingBehavior","NextNodeModelFactory","CompositeView","templateHelpers","behaviors","Blocking","behaviorClass","PerfectScrolling","contentParent","scrollYMarginOffset","getCollection","listenTo","render","_updateScrollBar","show.binf.dropdown","hide.binf.dropdown","change input","dp.show","events","click #csui-custom-search-form-submit","parentView","get","trigger","schemaSearchTitle","titleElement","html","attr","customValues","updateCustomSearch","updatedValues","_searchCustomFormView","customFormView","filter","map","values","val","onFieldUpdated","loadCustomSearch","updatedFormValues","dataModel","cloneUpdatedValues","dataVal","dataKey","Object","cVal","cKey","cV","cK","key","keyTokens","split","undefined","tempObj","parentAttr","parentObj","keyToken","queryModel","query","getModel","nextNode","isEmpty","history","pushState","id","location","href","clear","silent","params","curChild","childValue","childKey","resetPageDefaults","set","resetDefaults","TileView","DefaultActionBehavior","SearchCustomObjectView","icon","titleBarIcon","contentViewOptions","contentView","DefaultAction","onShow","updateTitle","loadingSearchResultMessage","noSearchResultMessage","searchQueryKeyboardShortcut","suggestionKeyword","searchSuggestion1","searchSuggestion2","searchSuggestion3","searchSuggestion4","failedSearchResultMessage","owner","created","createdBy","modified","size","items","searchResults","clearAll","about","expandAll","collapseAll","relevance","creationDate","showMore","showMoreAria","showLess","showLessAria","selectAll","selectAllAria","selectItem","selectItemAria","searchBackTooltip","searchBackTooltipTo","searchBackToHome","versionLabel","versionSeparator","filterExpandAria","filterCollapseAria","customSearchTab","searchFilterTab","mimeTypeAria","itemBreadcrumbAria","formatForNone","formatForOne","formatForTwo","formatForFive","filterAria","searchFilterTooltip","enableSearchFilter","aboutNHits","ToolbarItemReserve","ToolbarItemUnreserve","publicLang","ui","resultTitle","customSearchTitle","headerCount","searchHeaderCountLive","_assignTotalItemElem","count","countTxt","str","sformat","countTxtAria","empty","append","countTextAria","_updateSearchResultsTitle","searchHeaderTitle","tooltipText","useCustomTitle","setCustomSearchTitle","resultsTitle","PreviousNodeModelFactory","NamedSessionStorage","PerspectiveRouting","TabableRegionBehavior","headerTemplate","ApplicationScopeModelFactory","TitleView","enableFacetFilter","back","filterParent","click @ui.back","click @ui.parent","keypress @ui.back","click @ui.filter","keypress @ui.filter","click @ui.filterParent","currentlyFocusedElement","tabElements","prop","shiftKey","namedSessionStorage","View","collection","_collectionItemRemoved","previousNode","clone","searchQuery","applicationScope","previous","remove","initialize","titleView","totalCount","searching","result_title","triggerMethodOn","rendered","enableBackButton","backButtonToolTip","getInstance","hasRouted","state","_setBackButtonTitle","hide","onBeforeDestroy","destroy","location_id1","originalCount","onClickBack","stopPropagation","onClickFilter","originatingView","sortBy","sortByThis","sortOptionsAria","ascending","descending","sortButtonAria","listAria","sortEnable","require","log","selected","constants","DEFAULT_SORT","sorting","uniqueId","SORT_ASC","SORT_DESC","click .binf-dropdown-menu > li > a","click #search-sort-btn","keydown","toggle","selectedLabel","selectedIcon","sortOrderBtn","setOrder","orderBy","_refreshSelection","_updateSelection","binf_dropdown","sort","_setSelection","links","_addDropdownItems","titleD","titleA","onKeyInView","suppressScrollX","orderClicked","sortObj","replace","order","trimSortOptionName","titleVal","resetCollection","autoFetch","sortPage","preventDefault","currentTarget","join","activeOption","jqUl","self","activate","element","parentElement","resetSelection","onSortOptionClick","children","innerHTML","onSortOrderClick","extraToolItems","moduleToolItems","ToolItemsFactory","TooItemModel","oldExtraToolItems","addExtraToolItems","toolItems","targetToolbar","toolbarItems","Error","toolItem","addItem","filterToolbar","signature","ToolbarItemFilter","addTrailingDivider","otherToolbar","info","ToolbarItemInfo","share","ToolbarItemCopyLink","ToolbarItemShare","flyout","group","ToolbarItemEmailLink","promoted","edit","ToolbarItemEdit","ToolbarItemPermissions","ToolbarItemDownload","ToolbarItemCopy","ToolbarItemMove","ToolbarItemAddVersion","ToolbarItemDelete","maxItemsShown","dropDownText","ToolbarItemMore","dropDownIcon","addGroupSeparators","lazyActions","inlineToolbar","other","versionToolItems","ToolItemMask","GlobalMenuItemsMask","ToolbarItemsMasks","globalMask","toolbars","reduce","toolbar","mask","normalize","source","extendMask","storeMask","click .icon-expandArrowDown, .icon-expandArrowUp","expandAllSelector","classList","contains","_eleCollapse","_eleExpand","view","layoutView","updateScrollbar","pageChange","label","itemTemplate","SearchMetadataItemView","displayCount","searchItemModel","_index","rowId","getValueData","formattedValue","column","columnType","formatMessage","formatFriendlyFileSize","formatExactFileSize","formatExactDateTime","CollectionView","childView","fieldsToBeHiddenOnHover","childViewOptions","child","bindUIElements","3","enableCustomSearch","xif","versions","cid","version_number_name","5","7","9","description","11","version_id","13","inactiveclass","defaultActionUrl","search_result_metadata","enableBreadcrumb","summary","message","SearchResultsCollectionFactory","LayoutViewEventsPropagationMixin","HeaderView","TableToolbarView","PaginationView","SortingView","BlockingView","FavoritesView","CheckboxView","ExpandAllView","Reservation","SearchObjectView","SearchMetadataFactory","SearchMetadataView","GlobalMessage","TableActionBarView","NodeSpriteCollection","NodeTypeIconView","BreadcrumbsView","NodeAncestorCollection","NodeModelFactory","NodeModel","NodeCollection","PropertiesCommand","ToolbarCommandController","layoutTemplate","emptyTemplate","defaultActionItems","commands","ModalAlert","FacetPanelView","FacetBarView","nodeLinks","NoSearchResultView","SearchResultItemView","LayoutView","regions","favRegion","selectionRegion","searchMetadataRegion","breadcrumbRegion","reservationRegion","descriptionField","modifiedByField","metadataDetails","inlineToolbarContainer","click .csui-search-item-link","click .csui-search-version-label","click .icon-expandArrowUp","click .icon-expandArrowDown","defaultActionController","checkModelHasAction","hasAction","bind","inActiveClass","createdby","getUrl","ancestors","slice","parentName","showOwner","hasOwnProperty","itemBreadcrumb","openSearchItem","mime_type","collection_id","mime_type_search","findTypeByNode","_rowStates","rowStates","addOwnerDisplayName","addCreatedUserDisplayName","SearchResultsView","RowStatesSelectedRows","_selectionChanged","changed","has","updateItemdetails","isAppleMobile","_hoverStart","_hoverEnd","showInlineActions","hideInlineActions","rowStatesModel","deselected","difference","_checkboxView","setChecked","initActionViews","favView","tagName","focusable","tableView","selectedModelIds","checked","checkboxTitle","checkboxAriaLabel","selectable","disabled","ariaLabel","_markAsSelected","reservation","searchMetadataView","metadata","addBreadcrumbs","select","newSelectedModelIds","concat","without","autofetch","breadcrumbsView","synchronizeCollections","current_version","version_type","_nodeIconView","summ","hhRegEx","hhEndRegEx","modded","off","isOverflown","isTextOverflown","hasDescription","hasDescriptionText","_ellipsisEle","class","refresh","after","next","toggleClass","ownerDisplayName","owner_user_id_expand","getDisplayName","owner_display_name","createUserDisplayName","create_user_id_expand","create_user_display_name","userInfo","name_formatted","textContent","isOverflowing","style","curOverflow","overflow","clientWidth","scrollWidth","clientHeight","scrollHeight","versionId","selectedRow","args","sender","openVersionHistory","selectedNode","showMetadataInfo","hideMetadataInfo","SearchResultListView","emptyView","emptyViewOptions","emptyModel","childEvents","click:item","delegate","facetView","_refreshDom","collectionEvents","reset","updateLayoutView","expandAllView","onClickItem","onScrollTop","scrollTop","toolBarContainer","customSearchContainer","customViewTab","facetViewTab","searchResultsContent","searchResultsBody","searchSidePanel","click @ui.customViewTab","click @ui.facetViewTab","keypress @ui.customViewTab","keypress @ui.facetViewTab","headerRegion","toolbarRegion","resultsRegion","paginationRegion","selectAllRegion","expandAllRegion","sortingRegion","customSearchRegion","facetBarRegion","facetRegion","pageSize","toolbarItemsMasks","fetched","_originalScope","getResourceScope","setResourceScope","getDefaultResourceScope","setDefaultActionCommands","getAllCommandSignatures","setEnabledDelayRestCommands","delayedActions","request","error","showMessage","setLimit","_toggleCustomSearch","commandController","_toolbarCommandExecuted","setSearchHeader","headerView","_completeFilterCommand","_focusFilter","facetFilters","searchFacets","_setToolBar","setResultView","setPagination","setSelectAllView","setSortingView","setExpandAllView","setInlineActionBarEvents","_setFacetBarView","setCustomSearchView","customSearchView","updateHeaderTitle","blockingParentView","imbue","_updatePanels","clearFilter","paginationView","nodeChange","onSearchResultsFailed","_removeAllSelections","resetScrollToTop","blockActions","unblockActions","unblockSearchResultsAction","updateActionToolBar","_focusOnFirstSearchResultElement","isMozilla","propagateEventsToRegions","onWinRefresh","windowRefresh","listenToOnce","width","focus","RequestErrorMessage","showError","toString","keys","one","_transitionEnd","showTitle","openCustomView","openFacetView","_ensureFacetPanelViewDisplayed","onDestroy","unbind","_selectAllView","css","searchString","parentNode","toolbarView","toolbarCommandController","onKeyInViewInToolbarView","resultsView","defaultDDList","_calculateSelectAllCheckedStatus","all","_updateSelectAllCheckbox","setDisabled","cancel","sortingView","commandSignature","_updateToolItems","command","allowCollectionRefetch","topCount","_showInlineActionBarWithDelay","_actionBarShouldDestroy","_destroyInlineActionBar","nodes","findWhere","updateForSelectedChildren","_showInlineActionBar","_savedHoverEnterArgs","parentId","inlineToolbarView","toolItemsMask","container","containerCollection","_view","_showInlineActionbarTimeout","clearTimeout","lockedForOtherContols","status","selectedTab","execute","always","facetBarView","_setFacetPanelView","blockingLocal","_removeFacetFilter","_removeAll","_addToFacetFilter","_removeFacetPanelView","_handleFacetBarVisible","_handleFacetBarHidden","addFilter","setDefaultPageNum","removeFilter","flag","showSidePanel","isMSBrowser","once","transition","transitions","WebkitTransition","MozTransition","OTransition","document","createElement","$schema","kind","schema","properties","required","type_control","parameters","select_types","actions","toolItemMasks","widgetTitle","widgetDescription","savedSearchQueryTitle","savedSearchQueryDescription","otherToolbarTitle","otherToolbarDescription","inlineToolbarTitle","inlineToolbarDescription","styleLoad"],"mappings":"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","file":"csui-search.js","sourcesContent":["// Shows a form\r\ncsui.define('csui/widgets/search.custom/impl/form.view',['module', 'csui/lib/jquery',\r\n  'csui/lib/underscore',\r\n  'csui/lib/marionette',\r\n  'csui/lib/alpaca/js/alpaca',\r\n  'csui/controls/form/form.view'\r\n], function (module, $, _, Marionette, Alpaca, FormView) {\r\n\r\n  var CustomSearchFormView = FormView.extend({\r\n    constructor: function CustomSearchFormView(options) {\r\n      this.options = options || {};\r\n      FormView.prototype.constructor.call(this, _.extend(options, {custom: {adjustHeight: true}}));\r\n      this.jQuery = $;\r\n      var that = this;\r\n      //Custom Flatten the array object of set categories\r\n      this.customFlatten = function (x, result, prefix) {\r\n        if (_.isObject(x)) {\r\n          _.each(x, function (v, k) {\r\n            that.customFlatten(v, result, k);\r\n          });\r\n        } else {\r\n          if (/^(anydate|anyvalue)/i.test(x)) {\r\n            x = \"\";\r\n          }\r\n          result[prefix] = x;\r\n        }\r\n        return result;\r\n      };\r\n\r\n      this.customFilter = function () {\r\n        var that        = this,\r\n            result      = [],\r\n            flattenData = that.customFlatten(that.objectList(that.getValues()), {});\r\n        if (_.isObject(flattenData)) {\r\n          _.each(flattenData, function (v, k) {\r\n            if (that.customEndsWith(k, '_DFrom') || that.customEndsWith(k, '_DFor') ||\r\n                that.customEndsWith(k, '_DTo')) {\r\n              var original_k = k.substr(0, k.lastIndexOf('_'));\r\n              if (!v && !!flattenData[original_k]) {\r\n                flattenData[original_k] = \"\";\r\n              }\r\n            }\r\n            if (v) {\r\n              result.push(v);\r\n            }\r\n          });\r\n        }\r\n        return result;\r\n      };\r\n\r\n      this.customEndsWith = function (string, substring) {\r\n        return string.indexOf(substring, string.length - substring.length) !== -1;\r\n      };\r\n\r\n      this.objectList = function (data) {\r\n        var list = [];\r\n        _.each(data, function (item) {\r\n          if (_.isObject(item)) {\r\n            list.push(item);\r\n          }\r\n        });\r\n        return _.flatten(list);\r\n      };\r\n\r\n      this.$el.on(\"keydown\", function (event) {\r\n\r\n        if (event.keyCode === 13 &&\r\n            (event.target.type === \"text\" || event.target.type === 'search') &&\r\n            event.target.value.trim() !== \"\") {\r\n          //handling typeahead field (userfield)\r\n          if ($(event.target).is('input.typeahead') &&\r\n              $(event.target).siblings('.typeahead.scroll-container:visible').length !== 0) {\r\n            return;\r\n          }\r\n          that.triggerSearch(event);\r\n        } else if (event.keyCode === 13 &&\r\n                   that.jQuery(\".binf-dropdown-menu\").parent(\".binf-open\").length >= 1) {\r\n          event.stopImmediatePropagation();\r\n        } else if (event.keyCode === 13) {\r\n          if (event.target.value === \"\") {\r\n            var defaultValues = that.customFilter();\r\n            if (!!defaultValues && defaultValues.length === 0) {\r\n              that.jQuery(\".csui-custom-search-form-submit\").addClass(\"binf-disabled\").addClass(\r\n                  \"csui-search-form-submit-disabled\");\r\n            } else {\r\n              that.triggerSearch(event);\r\n            }\r\n          } else {\r\n            that.jQuery(\".csui-custom-search-form-submit\").removeClass(\"binf-disabled\").removeClass(\r\n                \"csui-search-form-submit-disabled\");\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$el.on(\"keyup\", function (event) {\r\n        if (event.target.type === \"text\") {\r\n          if (event.target.value === \"\") {\r\n            var defaultValues = that.customFilter();\r\n            if (!!defaultValues && defaultValues.length === 0) {\r\n              that.jQuery(\".csui-custom-search-form-submit\").addClass(\"binf-disabled\").addClass(\r\n                  \"csui-search-form-submit-disabled\");\r\n            }\r\n          } else {\r\n            that.jQuery(\".csui-custom-search-form-submit\").removeClass(\"binf-disabled\").removeClass(\r\n                \"csui-search-form-submit-disabled\");\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    triggerSearch: function (event) {\r\n      var that = this;\r\n      setTimeout(function (event) {\r\n        if (!that.jQuery(\".csui-custom-search-form-submit\").hasClass(\"binf-disabled\")) {\r\n          that.$el.closest('.csui-custom-view-search').find(\r\n              '.csui-custom-search-form-submit').click();\r\n        }\r\n      }, 50);\r\n    },\r\n\r\n    updateRenderedForm: function () {\r\n      return false;\r\n    },\r\n\r\n    onRenderForm: function () {\r\n      this.options.customView.triggerMethod(\"render:form\");\r\n    },\r\n\r\n    onChangeField: function (event) {\r\n      var defaultValues = this.customFilter();\r\n      if (defaultValues.length === 0) {\r\n        this.jQuery(\".csui-custom-search-form-submit\").addClass(\"binf-disabled\").addClass(\r\n            \"csui-search-form-submit-disabled\");\r\n      } else {\r\n        this.jQuery(\".csui-custom-search-form-submit\").removeClass(\"binf-disabled\").removeClass(\r\n            \"csui-search-form-submit-disabled\");\r\n      }\r\n      if (window.event && (window.event.keyCode === 13 || window.event.which === 13)) {\r\n        if (!!event.value) {\r\n          this.jQuery(\".csui-custom-search-form-submit\").removeClass(\"binf-disabled\").removeClass(\r\n              \"csui-search-form-submit-disabled\");\r\n          this.options.customView.triggerMethod(\"field:updated\");\r\n        } else {\r\n          if (!!defaultValues && defaultValues.length === 0) {\r\n            this.jQuery(\".csui-custom-search-form-submit\").addClass(\"binf-disabled\").addClass(\r\n                \"csui-search-form-submit-disabled\");\r\n          } else if (defaultValues && defaultValues.length !== 0) {\r\n            this.options.customView.triggerMethod(\"field:updated\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n  return CustomSearchFormView;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.custom/impl/customsearchform',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.isSetType : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(2, data, 0, blockParams, depths),\"inverse\":this.program(4, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\");\n},\"2\":function(depth0,helpers,partials,data,blockParams,depths) {\n    var helper;\n\n  return \"      <div class=\\\"binf-col-md-12 cs-form-singlecolumn cs-form-set\\\"\\r\\n           id=\\\"csfSingleCol_\"\n    + this.escapeExpression(this.lambda((depths[2] != null ? depths[2].modelId : depths[2]), depth0))\n    + this.escapeExpression(((helper = (helper = helpers.index || (data && data.index)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"index\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></div>\\r\\n\";\n},\"4\":function(depth0,helpers,partials,data,blockParams,depths) {\n    var helper;\n\n  return \"      <div class=\\\"binf-col-md-12 cs-form-doublecolumn\\\"\\r\\n           id=\\\"csfLeftCol_\"\n    + this.escapeExpression(this.lambda((depths[2] != null ? depths[2].modelId : depths[2]), depth0))\n    + this.escapeExpression(((helper = (helper = helpers.index || (data && data.index)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"index\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"<div class=\\\"binf-row\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.fields : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(1, data, 0, blockParams, depths),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</div>\\r\\n\";\n},\"useData\":true,\"useDepths\":true});\nHandlebars.registerPartial('csui_widgets_search.custom_impl_customsearchform', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.custom/impl/customsearch.item',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-custom-search-formitems\\\"></div>\";\n}});\nHandlebars.registerPartial('csui_widgets_search.custom_impl_customsearch.item', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/search.custom/impl/search.customFormView',['csui/lib/marionette',\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/utils/base',\r\n  'csui/widgets/search.custom/impl/form.view',\r\n  'hbs!csui/widgets/search.custom/impl/customsearchform',\r\n  'hbs!csui/widgets/search.custom/impl/customsearch.item'\r\n], function (Marionette, _, $, base, CustomSearchFormView, CustomSearchTemplate,\r\n    CustomSearchItemTemplate) {\r\n\r\n  var CustomSearchAttrItemView = Marionette.ItemView.extend({\r\n    tag: 'div',\r\n    className: \"customsearch-attr-container\",\r\n    constructor: function CustomSearchAttrItemView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n      this.model.on('error', this.errorHandle, this);\r\n    },\r\n    template: CustomSearchItemTemplate,\r\n    onRender: function (e) {\r\n      var _searchCustomFormViewEle = new Marionette.Region({\r\n            el: this.$el.find('.csui-custom-search-formitems')\r\n          }),\r\n          formView                 = new CustomSearchFormView({\r\n            context: this.options.context,\r\n            model: this.model,\r\n            layoutMode: 'singleCol',\r\n            mode: 'create',\r\n            customView: this,\r\n            templateId: this.model.attributes.data.templateId\r\n          });\r\n      _searchCustomFormViewEle.show(formView);\r\n      this.formView = formView;\r\n    },\r\n    onRenderForm: function () {\r\n      this.options.objectView.triggerMethod(\"render:form\");\r\n      return;\r\n    }\r\n  });\r\n\r\n  return CustomSearchAttrItemView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/search.custom/impl/search.customview.model',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/utils/url'\r\n], function (_, $, Backbone, ConnectableMixin, FetchableMixin, Url) {\r\n  var SearchCustomModel = Backbone.Model.extend({\r\n\r\n    constructor: function SearchCustomModel(attributes, options) {\r\n      options || (options = {});\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n      this.options = options;\r\n      this.makeConnectable(options).makeFetchable(options);\r\n    }\r\n  });\r\n\r\n  ConnectableMixin.mixin(SearchCustomModel.prototype);\r\n  FetchableMixin.mixin(SearchCustomModel.prototype);\r\n  _.extend(SearchCustomModel.prototype, {\r\n\r\n    isFetchable: function () {\r\n      return !!this.options;\r\n    },\r\n\r\n    url: function () {\r\n      return Url.combine(this.connector.connection.url,\r\n          'nodes/' + this.options.nodeId + '/customviewsearchforms');\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      response.name = response.text;\r\n      return response;\r\n    }\r\n  });\r\n\r\n  return SearchCustomModel;\r\n});\r\n\r\n\r\n\r\n\n","csui.define('csui/widgets/search.custom/impl/search.customview.factory',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/contexts/factories/factory', 'csui/utils/contexts/factories/connector',\r\n  'csui/widgets/search.custom/impl/search.customview.model'\r\n], function (module, _, Backbone, ModelFactory, ConnectorFactory, SearchCustomModel) {\r\n\r\n  var SearchCustomViewFactory = ModelFactory.extend({\r\n\r\n    propertyPrefix: 'customSearch',\r\n\r\n    constructor: function SearchCustomViewFactory(context, options) {\r\n      ModelFactory.prototype.constructor.apply(this, arguments);\r\n\r\n      var customSearch = this.options.customSearch || {};\r\n      if (!(customSearch instanceof Backbone.Model)) {\r\n        var connector = context.getObject(ConnectorFactory, options),\r\n            config = module.config();\r\n        customSearch = new SearchCustomModel(customSearch.attributes || config.attributes, _.defaults({\r\n          connector: connector,\r\n          nodeId: options.customQuery.nodeId\r\n        }, customSearch.options, config.options));\r\n      }\r\n      this.property = customSearch;\r\n    },\r\n\r\n    fetch: function (options) {\r\n      return this.property.fetch(options);\r\n    }\r\n\r\n  });\r\n\r\n  return SearchCustomViewFactory;\r\n\r\n});\r\n\n","csui.define('csui/widgets/search.custom/impl/search.customquery.model',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/utils/url'\r\n], function (_, $, Backbone, ConnectableMixin, FetchableMixin, Url) {\r\n  var SearchCustomModel = Backbone.Model.extend({\r\n\r\n    constructor: function SearchCustomModel(models, options) {\r\n      this.options = options || (options = {});\r\n      Backbone.Model.prototype.constructor.call(this, models, options);\r\n      this.makeConnectable(options).makeFetchable(options);\r\n    }\r\n  });\r\n\r\n  ConnectableMixin.mixin(SearchCustomModel.prototype);\r\n  FetchableMixin.mixin(SearchCustomModel.prototype);\r\n\r\n  _.extend(SearchCustomModel.prototype, {\r\n\r\n    isFetchable: function () {\r\n      return this.options.node.isFetchable();\r\n    },\r\n\r\n    url: function () {\r\n      return Url.combine(this.connector.connection.url,\r\n          'searchqueries/' + this.options.savedSearchQueryId);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      response.name = response.text;\r\n      return response;\r\n    }\r\n  });\r\n\r\n  return SearchCustomModel;\r\n});\r\n\r\n\r\n\r\n\n","csui.define('csui/widgets/search.custom/impl/search.customquery.factory',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/contexts/factories/factory',\r\n  'csui/widgets/search.custom/impl/search.customview.factory',\r\n  'csui/widgets/search.custom/impl/search.customquery.model',\r\n  'csui/utils/contexts/factories/connector'\r\n], function (module, _, Backbone, CollectionFactory, CustomViewFactory,\r\n    SearchCustomQueryCollection, ConnectorFactory) {\r\n\r\n  var CustomQueryCollectionFactory = CollectionFactory.extend({\r\n\r\n    propertyPrefix: 'customQuery',\r\n    widgetID: '',\r\n\r\n    constructor: function CustomQueryCollectionFactory(context, options) {\r\n      options || (options = {});\r\n      CollectionFactory.prototype.constructor.apply(this, arguments);\r\n      this.options.customQuery = this.options[this.widgetID] || {};\r\n\r\n      var customQuery = this.options.customQuery || {};\r\n      if (!(customQuery instanceof Backbone.Collection)) {\r\n        var connector = context.getObject(ConnectorFactory, options),\r\n            config    = module.config();\r\n        customQuery = new SearchCustomQueryCollection(customQuery.models, _.extend({\r\n          savedSearchQueryId: options.customQuery.savedSearchQueryId,\r\n          connector: connector\r\n        }, customQuery.options, config.options));\r\n      }\r\n      this.property = customQuery;\r\n    },\r\n\r\n    fetch: function (options) {\r\n      return this.property.fetch(this.options);\r\n    }\r\n\r\n  });\r\n\r\n  return CustomQueryCollectionFactory;\r\n\r\n});\r\n\n","csui.define('csui/widgets/search.custom/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/search.custom/impl/nls/root/lang',{\r\n  searchButtonMessage: \"Search\",\r\n  title: \"Custom View Search\"\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.custom/impl/customsearch.main',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"csui-saved-search-form\\\" id=\\\"csui-saved-search-form\\\"></div>\\r\\n<div class=\\\"csui-saved-search-submit-container\\\">\\r\\n  <button class=\\\"binf-btn binf-btn-primary csui-custom-search-form-submit\\\"\\r\\n          id=\\\"csui-custom-search-form-submit\\\" value=\\\"Search\\\"> \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.search : stack1), depth0))\n    + \" </button>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_search.custom_impl_customsearch.main', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/search.custom/impl/search.custom',[],function(){});\n","csui.define('csui/widgets/search.custom/impl/search.object.view',['csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/marionette',\r\n  'csui/lib/backbone',\r\n  'csui/widgets/search.custom/impl/search.customFormView',\r\n  'csui/controls/tile/behaviors/blocking.behavior',\r\n  'csui/utils/contexts/factories/search.query.factory',\r\n  'csui/widgets/search.custom/impl/search.customquery.factory',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'i18n!csui/widgets/search.custom/impl/nls/lang',\r\n  'hbs!csui/widgets/search.custom/impl/customsearch.main',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'css!csui/widgets/search.custom/impl/search.custom.css'\r\n], function (_, $, Marionette, Backbone, SearchCustomFormView, BlockingBehavior,\r\n    SearchQueryModelFactory, SearchCustomQueryFactory, FetchableMixin, lang, SearchObjectTemplate,\r\n    PerfectScrollingBehavior, NextNodeModelFactory) {\r\n\r\n  var SearchObjectView = Marionette.CompositeView.extend({\r\n    className: \"csui-custom-view-search\",\r\n\r\n    templateHelpers: function () {\r\n      var messages = {\r\n        search: lang.searchButtonMessage\r\n      };\r\n      return {\r\n        messages: messages\r\n      };\r\n    },\r\n    behaviors: {\r\n      Blocking: {\r\n        behaviorClass: BlockingBehavior\r\n      },\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: \".csui-saved-search-form\",\r\n        scrollYMarginOffset: 15\r\n      }\r\n    },\r\n    constructor: function SearchObjectView(options) {\r\n      options = options || {};\r\n      options.data || (options.data = {});\r\n      this.context = options.context;\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      SearchCustomQueryFactory.prototype.propertyPrefix = options.data.savedSearchQueryId ||\r\n                                                          options.savedSearchQueryId;\r\n      SearchCustomQueryFactory.prototype.widgetID = options.data.savedSearchQueryId ||\r\n                                                    options.savedSearchQueryId;\r\n      this.model = options.context.getCollection(SearchCustomQueryFactory, options);\r\n      this.listenTo(this.model, \"sync\", this.render);\r\n      FetchableMixin.mixin(SearchCustomQueryFactory);\r\n      var that             = this,\r\n          _updateScrollBar = function () {\r\n            setTimeout(function () {\r\n              that.triggerMethod('update:scrollbar', this);\r\n            }, 500);\r\n          };\r\n      this.$el.on({\r\n        \"show.binf.dropdown\": _updateScrollBar,\r\n        \"hide.binf.dropdown\": _updateScrollBar,\r\n        \"change input\": _updateScrollBar,\r\n        \"dp.show\": _updateScrollBar\r\n      });\r\n\r\n    },\r\n    template: SearchObjectTemplate,\r\n    events: {\r\n      \"click #csui-custom-search-form-submit\": \"loadCustomSearch\"\r\n    },\r\n    onRender: function (e) {\r\n      if (this.model.attributes && this.model.attributes.data) {\r\n        if (!!this.options.parentView) {\r\n          if (!!this.model.get(\"schema\").title) {\r\n            this.options.parentView.options.title = this.model.get(\"schema\").title;\r\n          } else {\r\n            //consider title from server in below precedence\r\n            //1. From server, 2. Widget options, 3. lang bundles\r\n            this.options.parentView.options.title = (!!this.options.parentView.options.data &&\r\n                                                     !!this.options.parentView.options.data.title) ?\r\n                                                    this.options.parentView.options.data.title :\r\n                                                    (this.options.parentView.options.title ||\r\n                                                     lang.title);\r\n          }\r\n          this.trigger(\"change:title\");\r\n        } else {\r\n          var schemaSearchTitle = !!this.model.get(\"schema\").title ?\r\n                                  this.model.get(\"schema\").title : lang.title;\r\n          if (!!this.options.titleElement) {\r\n            this.options.titleElement.html(schemaSearchTitle);\r\n            this.options.titleElement.attr(\"title\", schemaSearchTitle);\r\n          }\r\n        }\r\n        if (this.options.customValues) {\r\n          this.updateCustomSearch(this.options.customValues.updatedValues,\r\n              this.options.customValues.attributes, this.model.get(\"data\"));\r\n        }\r\n        this.options.objectView = this;\r\n        var _searchCustomFormView = new SearchCustomFormView(_.extend(this.options,\r\n            {model: this.model}));\r\n        var _searchCustomFormViewEle = new Marionette.Region({\r\n          el: this.$el.find('#csui-saved-search-form')\r\n        });\r\n        _searchCustomFormViewEle.show(_searchCustomFormView);\r\n        this.customFormView = _searchCustomFormView;\r\n        //Until user enters any value the search button should be in disable mode\r\n        var defaultValues = _.filter(_.flatten(_.map(this.model.get(\"data\"), _.values)),\r\n            function (val) {return val; });\r\n        if (!!defaultValues && defaultValues.length === 0) {\r\n          this.$(\".csui-custom-search-form-submit\").addClass(\"binf-disabled\").addClass(\r\n              \"csui-search-form-submit-disabled\");\r\n        } else {\r\n          this.$(\".csui-custom-search-form-submit\").removeClass(\"binf-disabled\").removeClass(\r\n              \"csui-search-form-submit-disabled\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onRenderForm: function () {\r\n      this.triggerMethod(\"dom:refresh\");\r\n      return;\r\n    },\r\n    onFieldUpdated: function () {\r\n      this.loadCustomSearch();\r\n    },\r\n\r\n    updateCustomSearch: function (updatedFormValues, updatedValues, dataModel) {\r\n      if (!!updatedFormValues) {\r\n        this.model.attributes.data = _.extend(this.model.attributes.data, updatedFormValues);\r\n      } else if (!!updatedValues) {\r\n        var self               = this,\r\n            cloneUpdatedValues = updatedValues;\r\n        _.each(dataModel, function (dataVal, dataKey) {\r\n          if (dataVal instanceof Object) {\r\n            _.each(dataVal, function (cVal, cKey) {\r\n              if (cVal instanceof Object) {\r\n                _.each(cVal, function (cV, cK) {\r\n                  if (!!cloneUpdatedValues[cK]) {\r\n                    cVal[cK] = cloneUpdatedValues[cK];\r\n                    delete cloneUpdatedValues[cK];\r\n                  }\r\n                });\r\n              } else if (!!cloneUpdatedValues[cKey]) {\r\n                dataVal[cKey] = cloneUpdatedValues[cKey];\r\n                delete cloneUpdatedValues[cKey];\r\n              }\r\n            });\r\n          }\r\n        });\r\n        //Add remaining values to model\r\n        _.each(cloneUpdatedValues, function (val, key) {\r\n          if (key !== \"query_id\") {\r\n            var keyTokens = (key.indexOf(\"__\") !== -1) ? key.split('__') : undefined,\r\n                tempObj   = {};\r\n            if (!!keyTokens) {\r\n              var parentAttr = (keyTokens[0].indexOf(\"_\") !== -1) ? key.split('_') : undefined;\r\n              if (!!parentAttr) {\r\n                tempObj[key] = val;\r\n                var parentObj = this.model.attributes.data[parentAttr[0]];\r\n                parentObj[keyTokens[0]] = _.extend(parentObj[keyTokens[0]], tempObj);\r\n              } else {\r\n                tempObj[key] = val;\r\n                this.model.attributes.data[keyTokens[0]] = _.extend(\r\n                    this.model.attributes.data[keyTokens[0]],\r\n                    tempObj);\r\n              }\r\n            } else {\r\n              var keyToken = (key.indexOf(\"_\") !== -1) ? key.split('_') : undefined;\r\n              tempObj[key] = val;\r\n              this.model.attributes.data[keyToken[0]] = _.extend(\r\n                  this.model.attributes.data[keyToken[0]],\r\n                  tempObj);\r\n            }\r\n          }\r\n        }, this);\r\n      }\r\n    },\r\n\r\n    loadCustomSearch: function () {\r\n      var defaultValues = this.customFormView.formView.customFilter();\r\n      if (!!defaultValues && defaultValues.length !== 0) {\r\n        if (this.$(\".csui-custom-search-form-submit\").hasClass(\"binf-disabled\")) {\r\n          this.$(\".csui-custom-search-form-submit\").removeClass(\"binf-disabled\").removeClass(\r\n              \"csui-search-form-submit-disabled\");\r\n        }\r\n        this.updatedFormValues = this.customFormView.formView.getValues();\r\n        this.queryModel = this.options.query || this.context.getModel(SearchQueryModelFactory);\r\n        this.nextNode = this.context.getModel(NextNodeModelFactory);\r\n        if (!this.options.query && _.isEmpty(this.queryModel.attributes) &&\r\n            _.isEmpty(this.nextNode.attributes)) {\r\n          history.pushState({\"search\": {name: undefined, id: undefined}}, \"\", location.href);\r\n        }\r\n        this.queryModel.clear({silent: true});\r\n        this.queryModel.updatedValues = this.updatedFormValues;\r\n        var params = {};\r\n        _.each(this.updatedFormValues, function (curChild) {\r\n          if (curChild instanceof Object) {\r\n            _.each(curChild, function (childValue, childKey) {\r\n                  if (childValue instanceof Object) {\r\n                    _.each(childValue, function (val, key) {\r\n                      params[key] = val;\r\n                    });\r\n                  } else {\r\n                    params[childKey] = childValue;\r\n                  }\r\n                }\r\n            );\r\n          }\r\n        });\r\n        params['query_id'] = this.model.get(\"data\").templateId;\r\n        this.resetPageDefaults();\r\n        this.queryModel.set(params);\r\n      } else {\r\n        this.$(\".csui-custom-search-form-submit\").addClass(\"binf-disabled\").addClass(\r\n            \"csui-search-form-submit-disabled\");\r\n      }\r\n    },\r\n\r\n    resetPageDefaults: function () {\r\n      this.queryModel.resetDefaults = true;\r\n    }\r\n  });\r\n  return SearchObjectView;\r\n});\r\n\n","csui.define('csui/widgets/search.custom/search.custom.view',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/handlebars',\r\n  'csui/lib/marionette',\r\n  'csui/lib/jquery',\r\n  'csui/controls/tile/tile.view',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/widgets/search.custom/impl/search.object.view',\r\n  'i18n!csui/widgets/search.custom/impl/nls/lang'\r\n], function (_, Handlebars, Marionette, $, TileView, DefaultActionBehavior,\r\n    SearchCustomObjectView, lang) {\r\n\r\n  var CustomSearchWidgetView = TileView.extend({\r\n    constructor: function CustomSearchWidgetView(options) {\r\n      options || (options = {});\r\n      options.title = options.title || lang.title;\r\n      options.icon = options.titleBarIcon || 'title-customviewsearch';\r\n      this.context = options.context;\r\n\r\n      TileView.prototype.constructor.call(this, options);\r\n\r\n      options = options.data ? _.extend(options, options.data) : options;\r\n      this.options = options;\r\n      this.options.parentView = this;\r\n      this.contentViewOptions = this.options;\r\n    },\r\n    contentView: SearchCustomObjectView,\r\n    behaviors: {\r\n      DefaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      }\r\n    },\r\n    onShow: function () {\r\n      this.$el.find('.tile-title .csui-heading').html('');\r\n      this.listenTo(this.contentView, \"change:title\", this.updateTitle);\r\n    },\r\n    updateTitle: function () {\r\n      this.$el.find('.tile-title .csui-heading').html(this.options.title);\r\n      this.$el.find('.tile-title').attr(\"title\", this.options.title);\r\n      this.$el.find('.tile-controls').attr(\"title\", this.options.title);\r\n    }\r\n  });\r\n  return CustomSearchWidgetView;\r\n});\r\n\n","csui.define('csui/widgets/search.results/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/search.results/impl/nls/root/lang',{\r\n  loadingSearchResultMessage: \"Loading search results...\",\r\n  noSearchResultMessage: \"No results found\",\r\n  searchQueryKeyboardShortcut:  \"Press Ctrl+F3 to go to the Search Query box\",\r\n  suggestionKeyword: \"Suggestions:\",\r\n  searchSuggestion1: \"Make sure all words are spelled correctly.\",\r\n  searchSuggestion2: \"Try different keywords.\",\r\n  searchSuggestion3: \"Try more general keywords.\",\r\n  searchSuggestion4: \"Try broadening or removing the location restriction.\",\r\n  failedSearchResultMessage: \"Loading search results failed.\",\r\n  owner: \"Owner\",\r\n  created: \"Created\",\r\n  createdBy: \"Created by\",\r\n  modified: \"Modified\",\r\n  size: \"Size\",\r\n  type: \"Type\",\r\n  items: \"Items\",\r\n  searchResults: \"Search Results\",\r\n  clearAll: \"Clear all\",\r\n  about: \"About\",\r\n  expandAll: \"Expand all\",\r\n  collapseAll: \"Collapse all\",\r\n  relevance: \"Relevance\",\r\n  name: \"Name\",\r\n  creationDate: \"CreationDate\",\r\n  showMore: \"Show more\",\r\n  showMoreAria: \"Show more metadata\",\r\n  showLess: \"Show less\",\r\n  showLessAria: \"Show less metadata\",\r\n  selectAll: \"Select all results on current page.\",\r\n  selectAllAria: 'Select all results on current page',\r\n  selectItem: 'Select {0}',\r\n  selectItemAria: 'Select {0}. When selected an action bar of options can be reached per shift-tab',\r\n  searchBackTooltip: 'Go back',\r\n  searchBackTooltipTo: 'to',\r\n  searchBackToHome: 'Home',\r\n  versionLabel: 'v',\r\n  versionSeparator: '.',\r\n  filter: 'Filter',\r\n  filterExpandAria: 'Show filter panel ',\r\n  filterCollapseAria: 'Hide filter panel ',\r\n  customSearchTab: 'Search',\r\n  searchFilterTab: 'Refine by',\r\n  mimeTypeAria: 'type {0}',\r\n  itemBreadcrumbAria: 'Breadcrumb {0}',\r\n  formatForNone: \"{0} items\",\r\n  formatForOne: \"{0} item\",\r\n  formatForTwo: \"{0} items\",\r\n  formatForFive: \"{0} items\"\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/impl/search.results.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"    <span class=\\\"csui-search-facet-filter-parent\\\">\\r\\n      <span class=\\\"csui-search-filter icon icon-toolbarFilter\\\" role=\\\"button\\\"\\r\\n            aria-label=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.filterAria : stack1), depth0))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.searchFilterTooltip : stack1), depth0))\n    + \"\\\"\\r\\n            tabindex=\\\"0\\\" aria-expanded=\\\"false\\\"></span>\\r\\n    </span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"csui-search-header\\\">\\r\\n   <span class=\\\"csui-search-arrow-back-parent\\\">\\r\\n   <span class=\\\"icon arrow_back cs-go-back\\\" aria-label=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.searchBackTooltip : stack1), depth0))\n    + \"\\\"\\r\\n         title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.searchBackTooltip : stack1), depth0))\n    + \"\\\" tabindex=\\\"0\\\" role=\\\"button\\\"></span>\\r\\n   </span>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.enableSearchFilter : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"  <div class=\\\"csui-search-header-title\\\"></div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_impl_search.results.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/impl/search.results.header.title',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-search-header-title-container csui-fadeout\\\">\\r\\n  <h2 id=\\\"resultsTitle\\\" class=\\\"csui-results-title\\\"></h2>\\r\\n  <div id=\\\"customSearchTitle\\\" class=\\\"csui-custom-search-title\\\"></div>\\r\\n</div>\\r\\n<span id=\\\"headerCount\\\" class=\\\"headerCount\\\"></span>\\r\\n<span id=\\\"searchHeaderCountLive\\\" role=\\\"status\\\" class=\\\"binf-sr-only\\\" aria-live=\\\"polite\\\"></span>\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_impl_search.results.header.title', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/search.results/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/search.results/nls/root/lang',{\r\n  aboutNHits: \"About {0} hits\",\r\n  ToolbarItemReserve: \"Reserve\",\r\n  ToolbarItemUnreserve: \"Unreserve\"\r\n});\r\n\n","\ncsui.define('css!csui/widgets/search.results/impl/search.results',[],function(){});\n","csui.define('csui/widgets/search.results/impl/search.results.header.title.view',[\r\n  'csui/lib/underscore', 'csui/lib/marionette',\r\n  'hbs!csui/widgets/search.results/impl/search.results.header.title',\r\n  'i18n!csui/widgets/search.results/nls/lang',\r\n  'i18n!csui/widgets/search.results/impl/nls/lang',\r\n  'css!csui/widgets/search.results/impl/search.results'\r\n], function (_, Marionette, template, publicLang, lang) {\r\n  'use strict';\r\n\r\n  var TitleView = Marionette.ItemView.extend({\r\n\r\n    template: template,\r\n\r\n    constructor: function TitleView(options) {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    ui: {\r\n      resultTitle: '#resultsTitle',\r\n      customSearchTitle: '#customSearchTitle',\r\n      headerCount: '#headerCount',\r\n      searchHeaderCountLive: '#searchHeaderCountLive'\r\n    },\r\n\r\n    _assignTotalItemElem: function () {\r\n      this.count = this.options.count || 0;\r\n      var countTxt     = _.str.sformat(publicLang.aboutNHits, this.count),\r\n          countTxtAria = \"\";\r\n      if (this.count !== 0) {\r\n        countTxtAria = countTxt;\r\n      } else {\r\n        countTxtAria = lang.noSearchResultMessage;\r\n      }\r\n      this.ui.headerCount.empty();\r\n      this.ui.headerCount.append(countTxt);\r\n\r\n      // with aria-live for the screen reader\r\n      this.countTextAria = lang.searchResults + \": \" + countTxtAria + \". \" +\r\n                           lang.searchQueryKeyboardShortcut;\r\n      this.ui.searchHeaderCountLive.text(this.countTextAria);\r\n\r\n      return true;\r\n    },\r\n\r\n    _updateSearchResultsTitle: function () {\r\n      var searchHeaderTitle, tooltipText;\r\n      if (!!this.options.useCustomTitle && !!this.title) {\r\n        this.ui.customSearchTitle.text(this.title);\r\n        tooltipText = lang.searchResults + ': ' + this.title;\r\n        searchHeaderTitle = lang.searchResults + ': ';\r\n      } else {\r\n        searchHeaderTitle = this.options.searchHeaderTitle || lang.searchResults;\r\n        tooltipText = searchHeaderTitle;\r\n      }\r\n      this.ui.resultTitle.text(searchHeaderTitle);\r\n      this.ui.resultTitle.parent().attr(\"title\", tooltipText);\r\n    },\r\n\r\n    setCustomSearchTitle: function (title) {\r\n      this.title = '\"' + title + '\"';\r\n      this.ui.customSearchTitle.text(title);\r\n      var resultsTitle = lang.searchResults + ': ';\r\n      this.ui.resultTitle.text(resultsTitle);\r\n      this.ui.resultTitle.parent().attr(\"title\", resultsTitle + this.title);\r\n    },\r\n\r\n    onRender: function () {\r\n      this._assignTotalItemElem();\r\n      this._updateSearchResultsTitle();\r\n    }\r\n\r\n  });\r\n\r\n  return TitleView;\r\n});\r\n\n","csui.define('csui/widgets/search.results/impl/search.results.header.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/contexts/factories/previous.node',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'csui/utils/namedsessionstorage',\r\n  'csui/utils/contexts/factories/search.query.factory',\r\n  'csui/pages/start/perspective.routing',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'i18n!csui/widgets/search.results/impl/nls/lang',\r\n  'hbs!csui/widgets/search.results/impl/search.results.header',\r\n  'csui/utils/contexts/factories/application.scope.factory',\r\n  'csui/widgets/search.results/impl/search.results.header.title.view',\r\n  'css!csui/widgets/search.results/impl/search.results'\r\n], function (_, $, Marionette, PreviousNodeModelFactory, NextNodeModelFactory,\r\n    NamedSessionStorage, SearchQueryModelFactory, PerspectiveRouting,\r\n    TabableRegionBehavior, lang, headerTemplate,\r\n    ApplicationScopeModelFactory, TitleView) {\r\n  \"use strict\";\r\n\r\n  var SearchHeaderView = Marionette.ItemView.extend({\r\n    className: \"csui-search-results-header\",\r\n    template: headerTemplate,\r\n    templateHelpers: function () {\r\n      var messages = {\r\n        searchResults: lang.searchResults,\r\n        clearAll: lang.clearAll,\r\n        about: lang.about,\r\n        searchBackTooltip: lang.searchBackTooltip,\r\n        searchFilterTooltip: lang.filter,\r\n        filterAria: lang.filterExpandAria,\r\n        enableSearchFilter: this.options.enableFacetFilter\r\n      };\r\n      return {\r\n        messages: messages\r\n      };\r\n    },\r\n    ui: {\r\n      back: '.cs-go-back',\r\n      parent: '.csui-search-arrow-back-parent',\r\n      filter: '.csui-search-filter',\r\n      filterParent: '.csui-search-facet-filter-parent',\r\n      resultTitle: '.csui-results-title',\r\n      searchHeaderTitle: '.csui-search-header-title'\r\n    },\r\n    events: {\r\n      'click @ui.back': 'onClickBack',\r\n      'click @ui.parent': 'onClickBack',\r\n      'keypress @ui.back': 'onClickBack',\r\n      'click @ui.filter': 'onClickFilter',\r\n      'keypress @ui.filter': 'onClickFilter',\r\n      'click @ui.filterParent': 'onClickFilter'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      var tabElements = this.$('*[tabindex]');\r\n      if (tabElements.length) {\r\n        tabElements.prop('tabindex', 0);\r\n      }\r\n      if (!!event && event.shiftKey) {\r\n        return $(tabElements[tabElements.length - 1]);\r\n      } else {\r\n        return $(tabElements[0]).hasClass('csui-acc-focusable-active') ? this.ui.filter :\r\n               $(tabElements[0]);\r\n      }\r\n    },\r\n    namedSessionStorage: new NamedSessionStorage(),\r\n    constructor: function SearchHeaderView(options) {\r\n      options || (options = {});\r\n      Marionette.View.prototype.constructor.apply(this, arguments); // apply (modified) options to this\r\n      if (this.collection) {\r\n        this.listenTo(this.collection, 'reset', this.render) // render after reset of collection\r\n            .listenTo(this.collection, 'remove', this._collectionItemRemoved);\r\n      }\r\n      // Use a local clone to remember the node, which may have been visited\r\n      // before the page with this widget got open; the original previousNode\r\n      // gets reset with every perspective change\r\n      this.previousNode = options.context.getModel(PreviousNodeModelFactory).clone();\r\n      this.nextNode = options.context.getModel(NextNodeModelFactory);\r\n      this.searchQuery = options.context.getModel(SearchQueryModelFactory);\r\n      this.applicationScope = options.context.getModel(ApplicationScopeModelFactory);\r\n      if (this.applicationScope.previous('id') === \"\") { /* Previous page is Home Page */\r\n        if (this.namedSessionStorage && this.namedSessionStorage.get(\"previousNodeId\")) {\r\n          /* Clear previous node info from sessionStorage as previous page is home page */\r\n          this.namedSessionStorage.remove(\"previousNodeName\");\r\n          this.namedSessionStorage.remove(\"previousNodeId\");\r\n        }\r\n      }\r\n    },\r\n    initialize: function () {\r\n      this.titleView = this.options.titleView || new TitleView({});\r\n    },\r\n    onRender: function () {\r\n      _.extend(this.titleView.options, {\r\n        count: this.collection.totalCount,\r\n        searchHeaderTitle: this.collection.searching ?\r\n                           this.collection.searching.result_title : lang.searchResults\r\n      });\r\n\r\n      this.titleView.render();\r\n\r\n      Marionette.triggerMethodOn(this.titleView, 'before:show', this.titleView, this);\r\n      this.ui.searchHeaderTitle.append(this.titleView.el);\r\n      Marionette.triggerMethodOn(this.titleView, 'show', this.titleView, this);\r\n\r\n      if (this.collection.length) {\r\n        this.ui.back.addClass('search_results_data');\r\n        this.ui.filter.addClass('search_results_data');\r\n      } else {\r\n        this.ui.back.addClass('search_results_nodata');\r\n        this.ui.filter.addClass('search_results_nodata');\r\n      }\r\n\r\n      this.rendered = true;\r\n      this.$el.show();\r\n      // This checks the whole browser history, since the page has been loaded;\r\n      // not just the history in the window, since the Smart UI has appeared there.\r\n      // Making the page behave differently, when opened in the browser directly\r\n      // and when navigating to it from some link is a bad practice.  UI breaks\r\n      // the principle, that the URL shows a resource in the same way.  *If you\r\n      // reload the page - it is just hitting F5 - the artificial state built\r\n      // among the internal navigation gets lost anyway*.  It is better to leave\r\n      // the browser history on the browser and its handling on the browser and\r\n      // its buttons and not trying to \"help the user\" by duplicating the\r\n      // functionality like this.\r\n      if (this.options.enableBackButton) {\r\n        this.ui.back.attr('title', this.options.backButtonToolTip);\r\n        this.ui.back.attr('aria-label', this.options.backButtonToolTip);\r\n      } else if (PerspectiveRouting.getInstance(this.options).hasRouted() || history.state ||\r\n                 this.previousNode.get('id') ||\r\n                 (!!this.namedSessionStorage && this.namedSessionStorage.get(\"previousNodeId\"))) {\r\n        // In integration scenario we cannot depend on history.state to show back button.\r\n        //So providing a option to show backbutton based on option\r\n        this._setBackButtonTitle();\r\n      } else {\r\n        this.ui.back.hide();\r\n        this.ui.parent.hide();\r\n      }\r\n    },\r\n    onBeforeDestroy: function () {\r\n      this.titleView.destroy();\r\n    },\r\n\r\n    _setBackButtonTitle: function () {\r\n      var name;\r\n      if (this.searchQuery.attributes.location_id1 === undefined && !this.previousNode.get('id') &&\r\n          !(this.namedSessionStorage && this.namedSessionStorage.get(\"previousNodeId\"))) {\r\n        name = lang.searchBackToHome;\r\n        this.namedSessionStorage = null;\r\n      }\r\n      else {\r\n        if (this.previousNode.get('id')) {\r\n          name = this.previousNode.get('name');\r\n          this.namedSessionStorage.set(\"previousNodeName\", this.previousNode.get('name'));\r\n          this.namedSessionStorage.set(\"previousNodeId\", this.previousNode.get('id'));\r\n        }\r\n        else {\r\n          name = this.namedSessionStorage.get(\"previousNodeName\");\r\n        }\r\n      }\r\n      this.ui.back.attr('title', lang.searchBackTooltip + \" \" + lang.searchBackTooltipTo +\r\n                                 \" '\" + name + \"'\");\r\n      this.ui.back.attr('aria-label', lang.searchBackTooltip + \" \" + lang.searchBackTooltipTo +\r\n                                 \" '\" + name + \"'\");\r\n    },\r\n\r\n    setCustomSearchTitle: function (title) {\r\n      !!this.titleView.setCustomSearchTitle &&\r\n      this.titleView.setCustomSearchTitle(title);\r\n    },\r\n    _collectionItemRemoved: function () {\r\n      var originalCount = this.collection.totalCount;\r\n      this.collection.totalCount = --this.totalCount;\r\n      this.render();\r\n      this.collection.totalCount = originalCount;\r\n    },\r\n    onClickBack: function (event) {\r\n      if ((event.type === 'keypress' && event.keyCode === 13) || (event.type === 'click')) {\r\n        if (this.options.enableBackButton) {\r\n          event.stopPropagation();\r\n          //To notify the caller about back button navigation\r\n          //as we dont have previousNode in integration scenario\r\n          this.trigger(\"go:back\");\r\n        } else if (this.previousNode.get('id') ||\r\n                   (!!this.namedSessionStorage && this.namedSessionStorage.get(\"previousNodeId\"))) {\r\n          this.nextNode.set('id', this.namedSessionStorage.get(\"previousNodeId\"));\r\n        } else {\r\n          this.applicationScope.set('id', '');\r\n        }\r\n      }\r\n    },\r\n\r\n    onClickFilter: function (event) {\r\n      if ((event.type === 'keypress' && event.keyCode === 13) || (event.type === 'click')) {\r\n        if (this.options.enableFacetFilter) {\r\n          event.stopPropagation();\r\n          this.trigger(\"toggle:filter\", this.options.originatingView);\r\n          this.trigger(\"focus:filter\", this.options.originatingView);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return SearchHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/search.results/controls/sorting/impl/nls/localized.strings',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/search.results/controls/sorting/impl/nls/root/localized.strings',{\r\n  sortBy: 'Sort by...',\r\n  sortByThis: 'Sort by {0}',\r\n  sortOptionsAria: 'Sort options',\r\n  ascending: '{0}: Click to sort ascending',\r\n  descending: '{0}: Click to sort descending'\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/controls/sorting/impl/sort.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"csui-search-sort-options \\\">\\r\\n    <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default binf-dropdown-toggle\\\"\\r\\n            data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sortButtonAria || (depth0 != null ? depth0.sortButtonAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sortButtonAria\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n      <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n      <span class=\\\"cs-icon icon-caret-down\\\"></span>\\r\\n    </button>\\r\\n    <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.listAria || (depth0 != null ? depth0.listAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"listAria\",\"hash\":{}}) : helper)))\n    + \"\\\"></ul>\\r\\n  </div>\\r\\n  <a href=\\\"javascript:void(0);\\\" id=\\\"search-sort-btn\\\" class=\\\"cs-icon icon-sortArrowDown\\\"></a>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.sortEnable : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_search.results_controls_sorting_impl_sort.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/search.results/controls/sorting/sort.menu.view',['module',\r\n  'require',\r\n  'csui/lib/jquery',\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/utils/log',\r\n  'i18n!csui/widgets/search.results/controls/sorting/impl/nls/localized.strings',\r\n  'hbs!csui/widgets/search.results/controls/sorting/impl/sort.menu',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/lib/binf/js/binf'\r\n], function (module, require, $, _, Backbone, Marionette, log, lang, template,\r\n    PerfectScrollingBehavior, TabableRegionBehavior) {\r\n\r\n  var SearchSortingView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-sort-links',\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var messages = {\r\n        sortBy: lang.sortBy\r\n      };\r\n      var selectedTitle = this.selected.get('title') ? this.selected.get('title') :\r\n                          this.constants.DEFAULT_SORT;\r\n      return {\r\n        messages: messages,\r\n        sortEnable: !!this.collection.sorting,\r\n        id: _.uniqueId('sortButton'),\r\n        sortButtonAria: lang.sortOptionsAria,\r\n        listAria: lang.sortOptionsAria\r\n      };\r\n    },\r\n\r\n    constants: {\r\n      SORT_ASC: \"asc\",\r\n      SORT_DESC: \"desc\",\r\n      DEFAULT_SORT: \"relevance\"\r\n    },\r\n\r\n    events: {\r\n      'click .binf-dropdown-menu > li > a': 'onSortOptionClick',\r\n      'click #search-sort-btn': 'onSortOrderClick',\r\n      \"keydown\": \"onKeyInView\"\r\n    },\r\n\r\n    ui: {\r\n      toggle: '>.csui-search-sort-options>.binf-dropdown-toggle',\r\n      selectedLabel: '>.csui-search-sort-options>.binf-dropdown-toggle >.cs-label',\r\n      selectedIcon: '>.csui-search-sort-options>.binf-dropdown-toggle >.cs-icon',\r\n      sortOrderBtn: '#search-sort-btn'\r\n    },\r\n\r\n    constructor: function SearchSortingView(options) {\r\n      Marionette.View.prototype.constructor.apply(this, arguments);\r\n\r\n      this.config = this.options.config || {};\r\n\r\n      this.selected = new Backbone.Model();\r\n      if (this.collection) {\r\n        this.collection.setOrder(this.options.orderBy, false);\r\n        this.listenTo(this.collection, 'reset', this.render); // render after reset of collection\r\n      }\r\n      this.listenTo(this.collection, 'change', this._refreshSelection);\r\n      this.listenTo(this.selected, 'change', this._updateSelection);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.ui.toggle.binf_dropdown();\r\n      this.ui.sortOrderBtn.hide();\r\n      if (this.collection.sorting !== undefined) {\r\n        if (this.collection.sorting.sort) {\r\n          this._setSelection(this.collection.sorting.links[this.collection.sorting.sort]);\r\n          this._addDropdownItems(this.collection.sorting.links, this.collection.sorting.sort[0]);\r\n          this.ui.sortOrderBtn.show();\r\n        } else {\r\n          this._setSelection(this.collection.sorting.links[this.constants.DEFAULT_SORT]);\r\n          this._addDropdownItems(this.collection.sorting.links, \"\");\r\n          this.$el.find(\".binf-dropdown-menu > :first-child\").addClass(\"binf-active\");\r\n          this.$el.find(\".binf-dropdown-menu > :first-child .cs-icon\").addClass(\"icon-listview-checkmark\");\r\n          this.ui.sortOrderBtn.hide();\r\n        }\r\n        this.ui.selectedLabel.text(this.selected.get('title'));\r\n        if (this.selected.get(\"order\") === this.constants.SORT_ASC) {\r\n          this.ui.sortOrderBtn.removeClass(\"icon-sortArrowDown\");\r\n          this.ui.sortOrderBtn.addClass(\"icon-sortArrowUp\");\r\n          var titleD = _.str.sformat(lang.descending, this.selected.get('title'));\r\n          this.ui.sortOrderBtn.attr('title', titleD).attr('aria-label', titleD);\r\n        } else {\r\n          this.ui.sortOrderBtn.removeClass(\"icon-sortArrowUp\");\r\n          this.ui.sortOrderBtn.addClass(\"icon-sortArrowDown\");\r\n          var titleA = _.str.sformat(lang.ascending, this.selected.get('title'));\r\n          this.ui.sortOrderBtn.attr('title', titleA).attr('aria-label', titleA);\r\n        }\r\n      }\r\n    },\r\n    onKeyInView: function (event) {\r\n      // Watch for tab key\r\n      if (event.keyCode === 9) {\r\n        !!this.$el.find('.binf-open') && this.$el.find('.binf-open').removeClass('binf-open');\r\n      }\r\n\r\n    },\r\n    behaviors: {\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: '.binf-dropdown-menu',\r\n        suppressScrollX: true\r\n      },\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      var tabElements = this.$('*[tabindex]');\r\n      if (tabElements.length) {\r\n        tabElements.prop('tabindex', 0);\r\n      }\r\n      if (!!event && event.shiftKey) {\r\n        return $(tabElements[tabElements.length - 1]);\r\n      } else {\r\n        if (this.orderClicked) {\r\n          return this.ui.sortOrderBtn;\r\n        } else {\r\n          return $(tabElements[0]);\r\n        }\r\n      }\r\n    },\r\n\r\n    _setSelection: function (model) {\r\n      var sortObj = {};\r\n      if (this.collection.sorting.sort) {\r\n        if (this.collection.sorting.sort[0].indexOf(this.constants.SORT_DESC) === 0) {\r\n          sortObj.id = this.collection.sorting.sort[0].replace(/desc_/g, '');\r\n          sortObj.order = this.constants.SORT_DESC;\r\n        }\r\n        if (this.collection.sorting.sort[0].indexOf(this.constants.SORT_ASC) === 0) {\r\n          sortObj.id = this.collection.sorting.sort[0].replace(/asc_/g, '');\r\n          sortObj.order = this.constants.SORT_ASC;\r\n        }\r\n      } else {\r\n        sortObj.id = \"\";\r\n        sortObj.order = this.constants.SORT_DESC;\r\n      }\r\n      sortObj.title = _.str.trim((model && model.name) ? this.trimSortOptionName(model.name) :\r\n                                 \"empty\");\r\n      var titleVal = _.str.sformat(lang.sortByThis, sortObj.title);\r\n      this.$el.find('.csui-search-sort-options \t.binf-dropdown-toggle').attr('title', titleVal);\r\n      this.selected.set(sortObj);\r\n    },\r\n\r\n    _updateSelection: function () {\r\n      this.ui.selectedLabel.text(this.selected.get('title'));\r\n    },\r\n\r\n    _refreshSelection: function (model) {\r\n      if (model.get('id') === this.selected.get('id')) {\r\n        this._setSelection(model);\r\n      }\r\n    },\r\n\r\n    resetCollection: function (filter, autoFetch) {\r\n      this.collection.setOrder(filter, true);\r\n    },\r\n\r\n    sortPage: function (e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      var orderBy = [];\r\n      if (e.currentTarget.id !== \"\") {\r\n        orderBy.push(e.currentTarget.id + \" \" + this.constants.SORT_DESC);\r\n      } else {\r\n        orderBy.push(e.currentTarget.id);\r\n      }\r\n      this.resetCollection(orderBy.join(), true);\r\n    },\r\n\r\n    _addDropdownItems: function (sorting, activeOption) {\r\n      var jqUl = this.$el.find('.binf-dropdown-menu'),\r\n          self = this;\r\n      if (sorting[this.constants.DEFAULT_SORT]) {\r\n        jqUl.append(\r\n            '<li role=\"presentation\"><a role=\"menuitem\" href=\"#\" class=\"csui-sort-option\" data-binf-toggle=\"tab\"><span class=\"cs-icon\"></span><span class=\"cs-label\" title=\"' +\r\n            self.trimSortOptionName(sorting[self.constants.DEFAULT_SORT].name) + '\">' +\r\n            self.trimSortOptionName(sorting[self.constants.DEFAULT_SORT].name) +\r\n            '</span></a></li>');\r\n        delete sorting[self.constants.DEFAULT_SORT];\r\n      }\r\n\r\n      for (var sort in sorting) {\r\n        if (sort.search(\"asc_\") === 0) {\r\n          delete sorting[sort];\r\n        } else {\r\n          if (activeOption.split(/_(.+)/, 2)[1] === sort.split(/_(.+)/, 2)[1]) {\r\n            jqUl.append('<li role=\"presentation\" class=\"binf-active\"><a role=\"menuitem\" id=\"' +\r\n                        sort.replace(/desc_/g, '') +\r\n                        '\" href=\"#\" class=\"csui-sort-option\" data-binf-toggle=\"tab\"><span class=\"cs-icon icon-listview-checkmark\"></span><span class=\"cs-label\" title=\"' +\r\n                        self.trimSortOptionName(sorting[sort].name) + '\">' +\r\n                        self.trimSortOptionName(sorting[sort].name) + '</span></a></li>');\r\n          } else {\r\n            jqUl.append('<li role=\"presentation\"><a role=\"menuitem\" id=\"' +\r\n                        sort.replace(/desc_/g, '') +\r\n                        '\" href=\"#\" class=\"csui-sort-option\" data-binf-toggle=\"tab\"><span class=\"cs-icon\"></span><span class=\"cs-label\" title=\"' +\r\n                        self.trimSortOptionName(sorting[sort].name) + '\">' +\r\n                        self.trimSortOptionName(sorting[sort].name) + '</span></a></li>');\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    activate: function (element) {\r\n      if (this.$el.find(\"li\").hasClass(\"binf-active\") === true) {\r\n        this.$el.find(\"li\").removeClass(\"binf-active\");\r\n        this.$el.find(\"li .cs-icon\").removeClass(\"icon-listview-checkmark\");\r\n      }\r\n      $(element.parentElement).addClass(\"binf-active\");\r\n      $(element).find(\"span.cs-icon\").addClass(\"icon-listview-checkmark\");\r\n    },\r\n\r\n    resetSelection: function (id, name) {\r\n      var sortObj = {};\r\n      sortObj.id = id;\r\n      sortObj.title = _.str.trim(name);\r\n      sortObj.order = this.constants.SORT_DESC;\r\n      this.selected.set(sortObj);\r\n    },\r\n\r\n    onSortOptionClick: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.ui.sortOrderBtn.hide();\r\n      this.orderClicked = false;\r\n      this.activate(event.currentTarget);\r\n      this.resetSelection(event.currentTarget.id, event.currentTarget.children[1].innerHTML);\r\n      this.sortPage(event);\r\n      this.ui.toggle.binf_dropdown('toggle');\r\n    },\r\n\r\n    onSortOrderClick: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.orderClicked = true;\r\n      var orderBy = [];\r\n      if (this.ui.sortOrderBtn.hasClass(\"icon-sortArrowDown\")) {\r\n        this.ui.sortOrderBtn.removeClass(\"icon-sortArrowDown\");\r\n        this.ui.sortOrderBtn.addClass(\"icon-sortArrowUp\");\r\n        orderBy.push(this.selected.id + \" \" + this.constants.SORT_ASC);\r\n      } else {\r\n        this.ui.sortOrderBtn.removeClass(\"icon-sortArrowUp\");\r\n        this.ui.sortOrderBtn.addClass(\"icon-sortArrowDown\");\r\n        orderBy.push(this.selected.id + \" \" + this.constants.SORT_DESC);\r\n      }\r\n      this.collection.setOrder(orderBy.join(), true);\r\n    },\r\n\r\n    trimSortOptionName: function (name) {\r\n      return name.replace(/\\(([;\\s\\w\\\"\\=\\,\\:\\.\\/\\~\\{\\}\\?\\!\\-\\%\\&\\#\\$\\^\\(\\)]*?)\\)/g, \"\");\r\n    }\r\n\r\n  });\r\n\r\n  return SearchSortingView;\r\n});\r\n\n","\n","csui.define('csui/widgets/search.results/impl/toolbaritems',['csui/lib/underscore', \"module\",\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/search.results/impl/toolbaritems'\r\n], function (_, module, extraToolItems) {\r\n\r\n  // TODO: Deprecate this module\r\n\r\n  if (extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      // TODO: log a deprecation warning\r\n    });\r\n  }\r\n\r\n  return extraToolItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/search.results/toolbaritems',[\r\n  'csui/lib/underscore',\r\n  'i18n!csui/widgets/search.results/nls/lang',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/search.results/toolbaritems',\r\n  // Load extra tool items from the previous module location\r\n  'csui/widgets/search.results/impl/toolbaritems'\r\n], function (_, publicLang, lang, ToolItemsFactory, TooItemModel, extraToolItems,\r\n             oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  // Keep the keys in sync with csui/widgets/search.results/toolbaritems.masks\r\n  var toolbarItems = {\r\n\r\n    filterToolbar: new ToolItemsFactory({\r\n        filter: [\r\n          {signature: \"Filter\", name: lang.ToolbarItemFilter, icon: \"icon icon-toolbarFilter\"}\r\n        ]\r\n      },\r\n      {\r\n        addTrailingDivider: false\r\n      }),\r\n    otherToolbar: new ToolItemsFactory({\r\n        info: [\r\n          {\r\n            signature: \"Properties\",\r\n            name: lang.ToolbarItemInfo,\r\n            icon: \"icon icon-toolbar-metadata\"\r\n          }\r\n        ],\r\n        share: [\r\n          {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink},\r\n          {\r\n            signature: 'Share',\r\n            name: lang.ToolbarItemShare,\r\n            flyout: 'share',\r\n            group: 'share'\r\n          },\r\n          {\r\n            signature: 'EmailLink',\r\n            name: lang.ToolbarItemEmailLink,\r\n            flyout: 'share',\r\n            promoted: true,\r\n            group: 'share'\r\n          }\r\n        ],\r\n        edit: [\r\n          {signature: \"Edit\", name: lang.ToolbarItemEdit, flyout: \"edit\", promoted: true},\r\n          {signature: \"EditActiveX\", name: \"EditActiveX\", flyout: \"edit\"},\r\n          {signature: \"EditOfficeOnline\", name: \"EditOfficeOnline\", flyout: \"edit\"},\r\n          {signature: \"EditWebDAV\", name: \"EditWebDAV\", flyout: \"edit\"}\r\n        ],\r\n        main: [\r\n          {signature: \"permissions\", name: lang.ToolbarItemPermissions},\r\n          {signature: \"Download\", name: lang.ToolbarItemDownload},\r\n          {signature: \"ReserveDoc\", name: publicLang.ToolbarItemReserve},\r\n          {signature: \"UnreserveDoc\", name: publicLang.ToolbarItemUnreserve},\r\n          {signature: \"Copy\", name: lang.ToolbarItemCopy},\r\n          {signature: \"Move\", name: lang.ToolbarItemMove},\r\n          {signature: \"AddVersion\", name: lang.ToolbarItemAddVersion},\r\n          {signature: \"Delete\", name: lang.ToolbarItemDelete}\r\n        ]\r\n      },\r\n      {\r\n        maxItemsShown: 5,\r\n        dropDownText: lang.ToolbarItemMore,\r\n        dropDownIcon: \"icon icon-toolbar-more\",\r\n        addGroupSeparators: false,\r\n        lazyActions:true\r\n      }),\r\n    inlineToolbar: new ToolItemsFactory({\r\n        info: [\r\n          {\r\n            signature: \"Properties\", name: lang.ToolbarItemInfo,\r\n            icon: \"icon icon-toolbar-metadata\"\r\n          }\r\n        ],\r\n        share: [\r\n          {\r\n            signature: \"CopyLink\", name: lang.ToolbarItemCopyLink,\r\n            icon: \"icon icon-toolbar-copylink\"\r\n          }\r\n        ],\r\n        edit: [\r\n          {signature: \"Edit\", name: lang.ToolbarItemEdit, icon: \"icon icon-toolbar-edit\"}\r\n        ],\r\n        other: [\r\n          {signature: \"permissions\", name: lang.ToolbarItemPermissions, icon: \"icon icon-toolbar-permissions\"},\r\n          {\r\n            signature: \"Download\", name: lang.ToolbarItemDownload,\r\n            icon: \"icon icon-toolbar-download\"\r\n          },\r\n          {\r\n            signature: \"ReserveDoc\", name: publicLang.ToolbarItemReserve,\r\n            icon: \"icon icon-toolbar-reserve\"\r\n          },\r\n          {\r\n            signature: \"UnreserveDoc\",\r\n            name: publicLang.ToolbarItemUnreserve,\r\n            icon: \"icon icon-toolbar-unreserve\"\r\n          },\r\n          {signature: \"Copy\", name: lang.ToolbarItemCopy, icon: \"icon icon-toolbar-copy\"},\r\n          {signature: \"Move\", name: lang.ToolbarItemMove, icon: \"icon icon-toolbar-move\"},\r\n          {\r\n            signature: \"AddVersion\",\r\n            name: lang.ToolbarItemAddVersion,\r\n            icon: \"icon icon-toolbar-add-version\"\r\n          },\r\n          {signature: \"Delete\", name: lang.ToolbarItemDelete, icon: \"icon icon-toolbar-delete\"}\r\n        ]\r\n      },\r\n      {\r\n        maxItemsShown: 6,\r\n        dropDownText: lang.ToolbarItemMore,\r\n        dropDownIcon: \"icon icon-toolbar-more\",\r\n        addGroupSeparators: false\r\n      }),\r\n    versionToolItems : ['properties', 'open', 'download', 'delete']\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n});\r\n\n","csui.define('csui/widgets/search.results/toolbaritems.masks',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  // Keep the keys in sync with csui/widgets/search.results/toolbaritems\r\n  var toolbars = ['otherToolbar', 'inlineToolbar'];\r\n\r\n  function ToolbarItemsMasks() {\r\n    var config = module.config(),\r\n        globalMask = new GlobalMenuItemsMask();\r\n    // Create and populate masks for every toolbar\r\n    this.toolbars = _.reduce(toolbars, function (toolbars, toolbar) {\r\n      var mask = new ToolItemMask(globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        source = source[toolbar];\r\n        if (source) {\r\n          mask.extendMask(source);\r\n        }\r\n      });\r\n      // Enable restoring the mask to its initial state\r\n      mask.storeMask();\r\n      toolbars[toolbar] = mask;\r\n      return toolbars;\r\n    }, {});\r\n  }\r\n\r\n  ToolbarItemsMasks.toolbars = toolbars;\r\n\r\n  return ToolbarItemsMasks;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/controls/expandall/impl/expandall',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"csui-search-expandall-wrapper\\\">\\r\\n  <div class=\\\"csui-search-expandall-text\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.expandAll : stack1), depth0))\n    + \"</div>\\r\\n  <button class=\\\"csui-search-header-expand-all icon-expandArrowDown\\\"\\r\\n     aria-label=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.expandAll : stack1), depth0))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.expandAll : stack1), depth0))\n    + \"\\\" aria-pressed=\\\"false\\\"></button>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_controls_expandall_impl_expandall', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/search.results/controls/expandall/impl/expandall',[],function(){});\n","csui.define('csui/widgets/search.results/controls/expandall/expandall.view',['csui/lib/jquery', 'csui/lib/marionette',\r\n  'hbs!csui/widgets/search.results/controls/expandall/impl/expandall',\r\n  'i18n!csui/widgets/search.results/impl/nls/lang',\r\n  'css!csui/widgets/search.results/controls/expandall/impl/expandall'\r\n], function ($, Marionette, template, lang) {\r\n\r\n  var expandAllView = Marionette.ItemView.extend({\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var messages = {\r\n        expandAll: lang.expandAll\r\n      };\r\n      return {\r\n        messages: messages\r\n      };\r\n    },\r\n\r\n    events: {\r\n      'click .icon-expandArrowDown, .icon-expandArrowUp': 'expandAll'\r\n    },\r\n\r\n    ui: {\r\n      expandAllSelector: '.csui-search-header-expand-all'\r\n    },\r\n\r\n    expandAll: function (event) {\r\n      if (this.collection.length > 0) {\r\n        var that = this;\r\n        if (this.ui.expandAllSelector[0].classList.contains(this.options._eleCollapse)) {\r\n          $(\".csui-search-expandall-text\").html(lang.expandAll);\r\n          $(\".csui-expand-all\").removeClass(\"csui-collapse-all\");\r\n          this.ui.expandAllSelector.removeClass(this.options._eleCollapse).addClass(\r\n              this.options._eleExpand).attr('title', lang.expandAll).attr('aria-pressed', 'false');\r\n          this.options.view.$el.find(\".\" + this.options._eleCollapse).each(function (e) {\r\n            $(this).trigger('click');\r\n          });\r\n          if (this.options.view.options.layoutView) {\r\n            this.options.view.options.layoutView.updateScrollbar();\r\n          }\r\n        } else {\r\n          $(\".csui-search-expandall-text\").html(lang.collapseAll);\r\n          $(\".csui-expand-all\").addClass(\"csui-collapse-all\");\r\n          this.ui.expandAllSelector.removeClass(this.options._eleExpand).addClass(\r\n              this.options._eleCollapse).attr('title', lang.collapseAll).attr('aria-pressed', 'true');\r\n          this.options.view.$el.find(\".\" + this.options._eleExpand).each(function (e) {\r\n            if (!$(this)[0].classList.contains(that.options._eleCollapse)) {\r\n              $(this).trigger('click');\r\n            }\r\n          });\r\n        }\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      }\r\n    },\r\n\r\n    pageChange: function () {\r\n      if (this.ui.expandAllSelector[0].classList.contains(this.options._eleCollapse)) {\r\n        this.ui.expandAllSelector.removeClass(this.options._eleCollapse).addClass(\r\n            this.options._eleExpand);\r\n        $(\".csui-search-expandall-text\").html(lang.expandAll);\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return expandAllView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/impl/metadata/search.metadata',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<span class=\\\"csui-search-metadata binf-col-lg-4 binf-col-md-4 binf-col-sm-4\\r\\n                    binf-col-xs-4\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"label\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"label\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n<span class=\\\"csui-search-metadata-spacer binf-col-lg-1 binf-col-md-1 binf-col-sm-1\\r\\n     binf-col-xs-1\\\"></span>\\r\\n<span class=\\\"searchDetails binf-col-lg-7 binf-col-md-7 binf-col-sm-7\\r\\n                    binf-col-xs-7\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.tooltipText || (depth0 != null ? depth0.tooltipText : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"tooltipText\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.value || (depth0 != null ? depth0.value : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"value\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_impl_metadata_search.metadata', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/search.results/impl/metadata/search.metadata.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/utils/base',\r\n  'i18n!csui/widgets/search.results/impl/nls/lang',\r\n  'hbs!csui/widgets/search.results/impl/metadata/search.metadata',\r\n  'css!csui/widgets/search.results/impl/search.results'\r\n], function (_, $, Backbone, Marionette, base, lang, itemTemplate) {\r\n  \"use strict\";\r\n\r\n  var SearchMetadataItemView = Marionette.ItemView.extend({\r\n    className: \"csui-search-item-details binf-col-lg-12\",\r\n    template: itemTemplate,\r\n    templateHelpers: function () {\r\n      var displayCount = 0;\r\n      if (this.options.searchItemModel.get(\"description\").length > 0 ||\r\n          this.options.searchItemModel.get(\"summary\").length > 0) {\r\n        displayCount = 3;\r\n      } else {\r\n        displayCount = 2;\r\n      }\r\n      if (this._index < displayCount) {\r\n        if (this._index < 2) {\r\n          this.$el.addClass(\"csui-search-result-item-tobe-hide\");\r\n        }\r\n      } else {\r\n        this.$el.addClass(\r\n            \"csui-search-hidden-items truncated-\" + this.options.rowId);\r\n      }\r\n      this.$el.attr('role', 'listitem');\r\n      var data = this.getValueData();\r\n      return {\r\n        label: this.model.get(\"column_name\"),\r\n        value: data.formattedValue,\r\n        tooltipText: data.value\r\n      };\r\n    },\r\n    getValueData: function () {\r\n      var model          = this.options.searchItemModel,\r\n          column         = this.model.get(\"key\"),\r\n          columnType     = this.model.get(\"column_type\"),\r\n          value          = model.get(column),\r\n          formattedValue = value;\r\n      if (column === 'size') {\r\n        var type = model.get('type');\r\n        formattedValue = model.get(column + \"_formatted\");\r\n        if (value === null) {\r\n          return '';\r\n        }\r\n        if (model.get('container') && type !== 202 && type !== 899) {\r\n          value = formattedValue = base.formatMessage(value, lang);\r\n        } else if (type === 144 || type === 749 || type === 736 || type === 30309) {\r\n          formattedValue = base.formatFriendlyFileSize(value);\r\n          value = base.formatExactFileSize(value);\r\n        }\r\n      }\r\n      if (columnType === 'date') {\r\n        value = formattedValue = base.formatExactDateTime(value);\r\n      }\r\n      return {\r\n        value: value,\r\n        formattedValue: formattedValue\r\n      };\r\n    }\r\n  });\r\n\r\n  var SearchMetadataCollectionView = Marionette.CollectionView.extend({\r\n    className: \"csui-search-items-metadata\",\r\n    childView: SearchMetadataItemView,\r\n    ui: {\r\n      fieldsToBeHiddenOnHover: '.csui-search-result-item-tobe-hide'\r\n    },\r\n    childViewOptions: function () {\r\n      return {\r\n        rowId: this.options.rowId,\r\n        searchItemModel: this.model\r\n      };\r\n    },\r\n    filter: function (child, index, collection) {\r\n      if (child.get('key') === 'size') {\r\n        return (this.model.get(child.get('key')) &&\r\n                this.model.get(child.get('key') + \"_formatted\") !== \"\");\r\n      } else {\r\n        return (this.model.get(child.get('key')) && this.model.get(child.get('key')) !== \"\");\r\n      }\r\n    },\r\n    onRender: function () {\r\n      var collection = this.collection;\r\n      this.bindUIElements();\r\n    }\r\n  });\r\n\r\n  return SearchMetadataCollectionView;\r\n});\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/impl/search.results',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"          <div class=\\\"csui-search-left-panel-tabs\\\">\\r\\n            <ul>\\r\\n              <li class=\\\"csui-tab csui-search-custom-tab\\\">\\r\\n                <a title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.customSearchTab : stack1), depth0))\n    + \"\\\" tabindex=\\\"0\\\">\\r\\n                  <span>\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.customSearchTab : stack1), depth0))\n    + \"</span>\\r\\n                </a>\\r\\n              </li>\\r\\n              <li class=\\\"csui-tab csui-search-facet-tab\\\">\\r\\n                <a title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.searchFilterTab : stack1), depth0))\n    + \"\\\" tabindex=\\\"0\\\">\\r\\n                  <span>\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.searchFilterTab : stack1), depth0))\n    + \"</span>\\r\\n                </a>\\r\\n              </li>\\r\\n            </ul>\\r\\n          </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"            <div class=\\\"csui-search-results-custom\\\">\\r\\n              <div id=\\\"csui-search-custom-container\\\"></div>\\r\\n            </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<!-- TODO: need to apply localization -->\\r\\n<div id=\\\"header\\\"></div>\\r\\n<div class=\\\"binf-container-fluid\\\">\\r\\n  <div class=\\\"csui-facet-table-container\\\">\\r\\n    <div class=\\\"csui-search-left-panel csui-popover-panel csui-is-hidden\\\">\\r\\n      <div class=\\\"csui-popover-panel-container\\\">\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.enableCustomSearch : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"        <div class=\\\"csui-search-left-panel-content\\\">\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.enableCustomSearch : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"          <div id=\\\"facetview\\\" class=\\\"csui-facetview\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"csui-search-results-body binf-col-lg-12 binf-col-md-12 binf-col-xs-12\\\">\\r\\n      <div id=\\\"csui-search-custom-results\\\">\\r\\n        <div class=\\\"csui-search-results-content binf-col-lg-12 binf-col-md-12\\\">\\r\\n          <div id=\\\"facetbarview\\\"></div>\\r\\n          <div\\r\\n              class=\\\"csui-search-tool-container binf-hidden binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n            <div\\r\\n                class=\\\"csui-search-header-left-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n              <div class=\\\"binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n                <div id=\\\"selectAllCheckBox\\\" class=\\\"csui-select-all csui-search-item-check\\\"></div>\\r\\n                <div id=\\\"toolbar\\\"\\r\\n                     class=\\\"csui-search-toolbar binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"csui-search-header-right-actions\\\">\\r\\n              <div class=\\\"binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n                <div\\r\\n                    class=\\\"csui-search-sorting binf-col-lg-6 binf-col-md-6 binf-col-sm-6 binf-col-xs-6\\\"\\r\\n                    id=\\\"csui-search-sort\\\"></div>\\r\\n                <div class=\\\"csui-expand-all binf-col-lg-6 binf-col-md-6 binf-col-sm-6 binf-col-xs-6\\\"\\r\\n                     id=\\\"expandAllArrow\\\"></div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div id=\\\"results\\\" tabindex=\\\"-1\\\"\\r\\n               class=\\\"csui-result-list binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n          <div\\r\\n              class=\\\"csui-search-row-divider binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n        </div>\\r\\n\\r\\n        <div id=\\\"pagination\\\"\\r\\n             class=\\\"binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_impl_search.results', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/impl/search.result',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = (helpers.xif || (depth0 && depth0.xif) || helpers.helperMissing).call(depth0,\"this.search_result_metadata.current_version === false || this\\r\\n                .search_result_metadata.version_type ==='minor' \",{\"name\":\"xif\",\"hash\":{},\"fn\":this.program(2, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n},\"2\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.versions : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"                    <div class=\\\"csui-search-results-version csui-search-item-version-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n                      <a href=\\\"javascript:void(0);\\\" class=\\\"csui-search-version-label\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.versionLabel : stack1), depth0))\n    + \" \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.versions : depth0)) != null ? stack1.version_number_name : stack1), depth0))\n    + \"\\r\\n                      </a>\\r\\n                    </div>\\r\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"            <div class=\\\"csui-search-item-breadcrumb csui-search-item-breadcrumb-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \"\\\"></div>\\r\\n            <div class=\\\"csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n\";\n},\"7\":function(depth0,helpers,partials,data) {\n    return \"\";\n},\"9\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"              \"\n    + this.escapeExpression(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"description\",\"hash\":{}}) : helper)))\n    + \"\\r\\n\";\n},\"11\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"              <div class=\\\"csui-search-item-action-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \"-\"\n    + this.escapeExpression(((helper = (helper = helpers.version_id || (depth0 != null ? depth0.version_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"version_id\",\"hash\":{}}) : helper)))\n    + \" csui-search-item-inline-actions\\\"></div>\\r\\n\";\n},\"13\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"              <div class=\\\"csui-search-item-action-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \" csui-search-item-inline-actions\\\"></div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"csui-search-item-row-wrapper csui-search-item-complete-row binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n  <div class=\\\"csui-search-item-row binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n    <h3 class=\\\"csui-search-item-hide-h3\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"</h3>\\r\\n    <div class=\\\"csui-search-item-check\\\"></div>\\r\\n    <div class=\\\"csui-search-item-icon \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.inactiveclass : stack1), depth0))\n    + \"\\\">\\r\\n      <span class=\\\"csui-type-icon\\\"></span>\\r\\n    </div>\\r\\n    <div class=\\\"csui-search-col2 binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n      <div class=\\\"csui-search-item-left-panel binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n        <div class=\\\"csui-search-item\\\">\\r\\n          <div class=\\\"\\\">\\r\\n            <div class=\\\"csui-search-item-name \\\">\\r\\n              <a href=\"\n    + this.escapeExpression(((helper = (helper = helpers.defaultActionUrl || (depth0 != null ? depth0.defaultActionUrl : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"defaultActionUrl\",\"hash\":{}}) : helper)))\n    + \" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \" \"\n    + this.escapeExpression(((helper = (helper = helpers.mimeTypeAria || (depth0 != null ? depth0.mimeTypeAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"mimeTypeAria\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n                 class=\\\"csui-search-item-link \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.inactiveclass : stack1), depth0))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"</a>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.search_result_metadata : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"              <div class=\\\"csui-icon csui-search-results-reservation csui-search-item-reservation\\r\\n                  csui-search-item-reservation-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \"\\\"></div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"csui-search-item-content-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,((stack1 = (depth0 != null ? depth0.messages : depth0)) != null ? stack1.enableBreadcrumb : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"          <p class=\\\"csui-search-item-desc csui-overflow-description binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.summary : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(7, data, 0),\"inverse\":this.program(9, data, 0)})) != null ? stack1 : \"\")\n    + \"          </p>\\r\\n        </div>\\r\\n        <div class=\\\"csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12\\r\\n        binf-col-xs-12 csui-search-row-spacer-divider\\\"></div>\\r\\n      </div>\\r\\n      <div class=\\\"csui-search-item-center-panel binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n      <div class=\\\"csui-search-item-right-panel\\\">\\r\\n        <div class=\\\"csui-search-item-control-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \" binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n          <div class=\\\"csui-search-toolbar-container binf-hidden binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\">\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.version_id : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(11, data, 0),\"inverse\":this.program(13, data, 0)})) != null ? stack1 : \"\")\n    + \"          </div>\\r\\n          <div class=\\\"csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n          <div role=\\\"list\\\" class=\\\"csui-search-item-details-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"csui-search-item-action-panel csui-search-item-action-panel-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n      <div class=\\\"csui-search-item-fav search-fav-\"\n    + this.escapeExpression(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cid\",\"hash\":{}}) : helper)))\n    + \"\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_impl_search.result', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/search.results/impl/search.empty',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"csui-no-result-message-wrapper\\\">\\r\\n    <p class=\\\"csui-no-result-message\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"message\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"message\",\"hash\":{}}) : helper)))\n    + \"</p>\\r\\n    <div class=\\\"csui-display-hide\\\">\\r\\n        <ul class=\\\"csui-search-suggestion-list\\\">\\r\\n            <li>\"\n    + this.escapeExpression(((helper = (helper = helpers.searchSuggestion1 || (depth0 != null ? depth0.searchSuggestion1 : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"searchSuggestion1\",\"hash\":{}}) : helper)))\n    + \"</li>\\r\\n            <li>\"\n    + this.escapeExpression(((helper = (helper = helpers.searchSuggestion2 || (depth0 != null ? depth0.searchSuggestion2 : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"searchSuggestion2\",\"hash\":{}}) : helper)))\n    + \"</li>\\r\\n            <li>\"\n    + this.escapeExpression(((helper = (helper = helpers.searchSuggestion3 || (depth0 != null ? depth0.searchSuggestion3 : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"searchSuggestion3\",\"hash\":{}}) : helper)))\n    + \"</li>\\r\\n            <li>\"\n    + this.escapeExpression(((helper = (helper = helpers.searchSuggestion4 || (depth0 != null ? depth0.searchSuggestion4 : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"searchSuggestion4\",\"hash\":{}}) : helper)))\n    + \"</li>\\r\\n        </ul>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_search.results_impl_search.empty', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/search.results/search.results.view',[\r\n  'module',\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/base',\r\n  'csui/utils/contexts/factories/search.query.factory',\r\n  'csui/utils/contexts/factories/search.results.factory',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/widgets/search.results/impl/search.results.header.view',\r\n  'csui/controls/tabletoolbar/tabletoolbar.view',\r\n  'csui/controls/pagination/nodespagination.view',\r\n  'csui/widgets/search.results/controls/sorting/sort.menu.view',\r\n  'csui/controls/progressblocker/blocker',\r\n  'csui/widgets/search.results/toolbaritems',\r\n  'csui/widgets/search.results/toolbaritems.masks',\r\n  'csui/controls/table/cells/favorite/favorite.view',\r\n  'csui/controls/checkbox/checkbox.view',\r\n  'csui/widgets/search.results/controls/expandall/expandall.view',\r\n  'csui/controls/table/cells/reservation/reservation.view',\r\n  'csui/widgets/search.custom/impl/search.object.view',\r\n  'csui/utils/contexts/factories/search.metadata.factory',\r\n  'csui/widgets/search.results/impl/metadata/search.metadata.view',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'i18n!csui/widgets/search.results/impl/nls/lang',\r\n  'csui/controls/tableactionbar/tableactionbar.view',\r\n  'csui/utils/nodesprites', 'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/controls/breadcrumbs/breadcrumbs.view',\r\n  'csui/models/nodeancestors',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/models/node/node.model',\r\n  'csui/models/nodes',\r\n  'csui/utils/commands/properties',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'hbs!csui/widgets/search.results/impl/search.results',\r\n  'hbs!csui/widgets/search.results/impl/search.result',\r\n  'hbs!csui/widgets/search.results/impl/search.empty',\r\n  'csui/utils/defaultactionitems',\r\n  'csui/utils/commands',\r\n  'csui/dialogs/modal.alert/modal.alert',\r\n  'csui/controls/facet.panel/facet.panel.view',\r\n  'csui/controls/facet.bar/facet.bar.view',\r\n  'csui/utils/node.links/node.links',\r\n  'csui/lib/handlebars.helpers.xif',\r\n  'css!csui/widgets/search.results/impl/search.results',\r\n  'csui/lib/jquery.mousehover'\r\n\r\n], function (module, _, $, Backbone, Marionette, base, SearchQueryModelFactory,\r\n    SearchResultsCollectionFactory, LayoutViewEventsPropagationMixin, HeaderView,\r\n    TableToolbarView, PaginationView, SortingView, BlockingView, toolbarItems,\r\n    ToolbarItemsMasks, FavoritesView, CheckboxView, ExpandAllView,\r\n    Reservation, SearchObjectView, SearchMetadataFactory, SearchMetadataView, GlobalMessage,\r\n    lang, TableActionBarView, NodeSpriteCollection, NodeTypeIconView, BreadcrumbsView,\r\n    NodeAncestorCollection, NodeModelFactory, NodeModel, NodeCollection, PropertiesCommand,\r\n    DefaultActionBehavior, PerfectScrollingBehavior, ToolbarCommandController, layoutTemplate,\r\n    itemTemplate, emptyTemplate, defaultActionItems, commands, ModalAlert,\r\n    FacetPanelView, FacetBarView, nodeLinks) {\r\n  'use strict';\r\n  var config = _.extend({\r\n    enableFacetFilter: true, // LPAD-60082: Enable/disable facets\r\n    enableBreadcrumb: true\r\n  }, module.config());\r\n\r\n  var NoSearchResultView = Marionette.ItemView.extend({\r\n\r\n    className: 'csui-empty',\r\n    template: emptyTemplate,\r\n\r\n    constructor: function NoSearchResultView(options) {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n      this.listenTo(this.model, 'change', this.render);\r\n    }\r\n\r\n  });\r\n\r\n  var SearchResultItemView = Marionette.LayoutView.extend({\r\n\r\n    className: 'binf-list-group-item binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12',\r\n    template: itemTemplate,\r\n\r\n    regions: {\r\n      favRegion: \".csui-search-item-fav\",\r\n      selectionRegion: \".csui-search-item-check\",\r\n      searchMetadataRegion: \".csui-search-item-details-wrapper\",\r\n      breadcrumbRegion: \".csui-search-item-breadcrumb\",\r\n      reservationRegion: \".csui-search-item-reservation\"\r\n    },\r\n\r\n    ui: {\r\n      descriptionField: '.csui-overflow-description',\r\n      modifiedByField: '.csui-search-modified-by',\r\n      metadataDetails: '.csui-search-item-details',\r\n      inlineToolbarContainer: '.csui-search-toolbar-container',\r\n      inlineToolbar: '.csui-search-item-row'\r\n    },\r\n\r\n    events: {\r\n      'click .csui-search-item-link': 'openSearchItem',\r\n      'click .csui-search-version-label': 'openVersionHistory',\r\n      'click .icon-expandArrowUp': 'showMetadataInfo',\r\n      'click .icon-expandArrowDown': 'hideMetadataInfo'\r\n    },\r\n\r\n    templateHelpers: function () {\r\n\r\n      var defaultActionController = this.options.defaultActionController,\r\n          checkModelHasAction     = defaultActionController.hasAction.bind(defaultActionController),\r\n          inActiveClass           = checkModelHasAction(this.model) ? \"\" :\r\n                                    \"csui-search-no-default-action\",\r\n          messages                = {\r\n            created: lang.created,\r\n            createdby: lang.createdBy,\r\n            modified: lang.modified,\r\n            owner: lang.owner,\r\n            type: lang.type,\r\n            items: lang.items,\r\n            showMore: lang.showMore, // where does this show up\r\n            showLess: lang.showLess,\r\n            versionLabel: lang.versionLabel,\r\n            versionSeparator: lang.versionSeparator,\r\n            inactiveclass: inActiveClass,\r\n            enableBreadcrumb: config.enableBreadcrumb\r\n          },\r\n          defaultActionUrl        = nodeLinks.getUrl(this.model),\r\n          parent                  = this.model.attributes.ancestors &&\r\n                                    this.model.attributes.ancestors.length > 0 ?\r\n                                    this.model.attributes.ancestors.slice(-1)[0] : undefined,\r\n          parentName              = parent && parent.attributes ? parent.attributes.name :\r\n                                    undefined;\r\n\r\n      return {\r\n        showOwner: this.model.attributes.hasOwnProperty('owner_user_id'), // LPAD-61022: hide owner, if not set in response\r\n        messages: messages,\r\n        defaultActionUrl: defaultActionUrl,\r\n        cid: this.cid,\r\n        itemBreadcrumb: _.str.sformat(lang.itemBreadcrumbAria, parentName),\r\n        mimeTypeAria: _.str.sformat(lang.mimeTypeAria, this.model.get('mime_type_search'))\r\n      };\r\n    },\r\n\r\n    openSearchItem: function (event) {\r\n      event.preventDefault();\r\n      this.trigger(\"click:item\", this.model);\r\n    },\r\n\r\n    constructor: function SearchResultItemView(options) {\r\n      options || (options = {});\r\n      Marionette.LayoutView.prototype.constructor.call(this, options);\r\n      this.model.attributes.mime_type = !!this.model.attributes.mime_type ?\r\n                                        this.model.attributes.mime_type :\r\n                                        (this.model.attributes.versions ?\r\n                                         this.model.attributes.versions.mime_type : \"\");\r\n      _.extend(this.model.attributes, {\r\n        collection_id: this.model.cid,\r\n        // TODO: Share the better type name used by NodeTypeIconView\r\n        mime_type_search: NodeSpriteCollection.findTypeByNode(this.model)\r\n      });\r\n\r\n      this._rowStates = options.rowStates;\r\n      this.addOwnerDisplayName();\r\n      this.addCreatedUserDisplayName();\r\n\r\n      this.listenTo(this._rowStates, 'change:' + SearchResultsView.RowStatesSelectedRows,\r\n          this._selectionChanged\r\n      );\r\n\r\n      this.listenTo(this.model, 'change', function () {\r\n        // Ignore the sole 'change:csuiDelayedActionsRetrieved' event and not re-render every row\r\n        // for all rows in the collection.  This has performance impact and flickering effect.\r\n        // Only the TableActionToolbar should be re-rendered, and it is already done by itself\r\n        // with delayedActions event listening.\r\n        if (_.size(this.model.changed) === 1 &&\r\n            _.has(this.model.changed, 'csuiDelayedActionsRetrieved')) {\r\n          return;\r\n        }\r\n        this.render();\r\n        this.updateItemdetails();\r\n      });\r\n\r\n      if (base.isAppleMobile() === false) {\r\n        this.$el.on('mouseenter.' + this.cid, '.csui-search-item-row',\r\n            _.bind(this._hoverStart, this));\r\n        this.$el.on('mouseleave.' + this.cid, '.csui-search-item-row',\r\n            _.bind(this._hoverEnd, this));\r\n      }\r\n    },\r\n\r\n    _hoverStart: function () {\r\n      this.showInlineActions();\r\n    },\r\n\r\n    _hoverEnd: function () {\r\n      this.hideInlineActions();\r\n    },\r\n\r\n    _selectionChanged: function (rowStatesModel) {\r\n      var previous = rowStatesModel.previous(SearchResultsView.RowStatesSelectedRows);\r\n      var changed = rowStatesModel.changed[SearchResultsView.RowStatesSelectedRows];\r\n\r\n      var deselected = _.difference(previous, changed);\r\n      var selected = _.difference(changed, previous);\r\n\r\n      var id = this.model.get('id');\r\n\r\n      if (_.contains(deselected, id)) {\r\n        this._checkboxView.setChecked(false);\r\n        this.ui.inlineToolbar.removeClass('selected');\r\n      }\r\n      if (_.contains(selected, id)) {\r\n        this._checkboxView.setChecked(true);\r\n        this.ui.inlineToolbar.addClass('selected');\r\n\r\n        this.hideInlineActions(); // hide if a item was selected by checkbox\r\n      }\r\n    },\r\n\r\n    initActionViews: function (options) {\r\n      this.favView = new FavoritesView({\r\n        tagName: 'div',\r\n        focusable: true,\r\n        model: options.model,\r\n        context: options.context,\r\n        tableView: options.tableView\r\n      });\r\n\r\n      var selectedModelIds = this._rowStates.get(SearchResultsView.RowStatesSelectedRows);\r\n      var checked = _.contains(selectedModelIds, this.model.get('id'));\r\n      var checkboxTitle = _.str.sformat(lang.selectItem, options.model.get('name'));\r\n      var checkboxAriaLabel = _.str.sformat(lang.selectItemAria, options.model.get('name'));\r\n\r\n      var selectable = options.model.get('selectable') !== false;\r\n      this._checkboxView = new CheckboxView({\r\n        checked: checked ? 'true' : 'false',\r\n        disabled: !selectable,\r\n        ariaLabel: checkboxAriaLabel,\r\n        title: checkboxTitle\r\n      });\r\n\r\n      this.listenTo(this._checkboxView.model, 'change:checked', function (event) {\r\n        this._markAsSelected(event.changed.checked === 'true');\r\n      });\r\n\r\n      this.reservation = new Reservation({\r\n        tagName: 'div',\r\n        model: options.model,\r\n        context: options.context\r\n      });\r\n\r\n      //options.models = SearchMetadataItems;\r\n      options.connector = options.model.connector;\r\n      this.searchMetadataView = new SearchMetadataView({\r\n        rowId: this.cid,\r\n        collection: this.options.metadata,\r\n        model: this.model\r\n      });\r\n      if (!!config.enableBreadcrumb) {\r\n        this.addBreadcrumbs(options);\r\n      }\r\n    },\r\n\r\n    _markAsSelected: function (select) {\r\n      var newSelectedModelIds;\r\n      var modelId = this.model.get('id');\r\n      var selectedModelIds = this._rowStates.get(SearchResultsView.RowStatesSelectedRows);\r\n      if (select) {\r\n        if (!_.contains(selectedModelIds, modelId)) {\r\n          newSelectedModelIds = selectedModelIds.concat([modelId]);\r\n          this._rowStates.set(SearchResultsView.RowStatesSelectedRows, newSelectedModelIds);\r\n        }\r\n      } else {\r\n        if (_.contains(selectedModelIds, modelId)) {\r\n          newSelectedModelIds = _.without(selectedModelIds, modelId);\r\n          this._rowStates.set(SearchResultsView.RowStatesSelectedRows, newSelectedModelIds);\r\n        }\r\n      }\r\n    },\r\n\r\n    addBreadcrumbs: function (options) {\r\n      var ancestors = new NodeAncestorCollection(\r\n          options.model.attributes.ancestors, {\r\n            node: options.model, autofetch: false\r\n          });\r\n      this.breadcrumbsView = new BreadcrumbsView({\r\n        context: options.context,\r\n        collection: ancestors\r\n        // TODO: Use {fetchOnCollectionUpdate: false} to prevent\r\n        // the control from an extra fetching of the collection.\r\n      });\r\n      this.breadcrumbsView.synchronizeCollections();\r\n      return true;\r\n    },\r\n\r\n    onRender: function (e) {\r\n      this.initActionViews(this.options);\r\n      this.reservationRegion.show(this.reservation);\r\n      if (!!this.model.get(\"search_result_metadata\") &&\r\n          (this.model.get(\"search_result_metadata\").current_version !== false &&\r\n          this.model.get(\"search_result_metadata\").version_type !== \"minor\") &&\r\n          this.model.get('favorite') !== undefined) { // LPAD-61021) {\r\n        this.favRegion.show(this.favView);\r\n      }\r\n      if (!!config.enableBreadcrumb) {\r\n        this.breadcrumbRegion.show(this.breadcrumbsView);\r\n        this.$el.find('ol.binf-breadcrumb').attr('aria-label',\r\n            this.templateHelpers().itemBreadcrumb);\r\n      }\r\n      this.selectionRegion.show(this._checkboxView);\r\n      this.searchMetadataRegion.show(this.searchMetadataView);\r\n\r\n      this._nodeIconView = new NodeTypeIconView({\r\n        el: this.$('.csui-type-icon').get(0),\r\n        node: this.model\r\n      });\r\n      this._nodeIconView.render();\r\n\r\n      var summ = this.model.get('summary');\r\n      if (summ.length > 0) {\r\n        summ = summ.replace(/</gi, '&lt;').replace(/>/gi, '&gt;');\r\n        var hhRegEx = /&lt;HH&gt;/gi;\r\n        var hhEndRegEx = /&lt;\\/HH&gt;/gi;\r\n        summ.replace(hhRegEx, '<span class=\"csui-summary-hh\">');\r\n        var modded = summ.replace(hhRegEx, '<span class=\"csui-summary-hh\">');\r\n        modded = modded.replace(hhEndRegEx, '</span>');\r\n        this.$el.find('.csui-search-item-desc').html(modded);\r\n      }\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this._nodeIconView) {\r\n        this._nodeIconView.destroy();\r\n      }\r\n      if (this.$el && base.isAppleMobile() === false) {\r\n        this.$el.off('mouseenter.' + this.cid, '.csui-search-item-row', this._hoverStart);\r\n        this.$el.off('mouseleave.' + this.cid, '.csui-search-item-row', this._hoverEnd);\r\n      }\r\n    },\r\n\r\n    onShow: function (e) {\r\n      this.updateItemdetails(e);\r\n    },\r\n\r\n    updateItemdetails: function (e) {\r\n      var self           = this,\r\n          isOverflown    = this.isTextOverflown(this.ui.descriptionField[0]),\r\n          hasDescription = this.hasDescriptionText(this.ui.descriptionField[0]); // for few objects it could be summary.\r\n\r\n      if (isOverflown) {\r\n        var _ellipsisEle = $(\"<span/>\", {\r\n          \"class\": \"csui-overflow-ellipsis\",\r\n          \"html\": \"&#133;\"\r\n        });\r\n        $(this.ui.descriptionField).append(_ellipsisEle);\r\n      }\r\n\r\n      if (!!config.enableBreadcrumb && this.breadcrumbsView) {\r\n        this.breadcrumbsView.refresh();\r\n      }\r\n\r\n      this.$el.find('.truncated-' + this.cid).hide();\r\n\r\n      this.$el.find('.csui-search-item-fav.search-fav-' + this.cid)\r\n          .after(\r\n              '<button class=\"search-results-item-expand icon-expandArrowDown\" title=\"' +\r\n              lang.showMore + '\" aria-expanded=\"false\" aria-label=\"' + lang.showMoreAria +\r\n              '\"></button>')\r\n          .next().on('click', function () {\r\n        $(this).toggleClass('icon-expandArrowUp');\r\n        $('.truncated-' + self.cid).toggle();\r\n        if (this.classList.contains(\"icon-expandArrowUp\")) {\r\n          $(this).removeClass('icon-expandArrowDown').addClass('icon-expandArrowUp').attr('title',\r\n              lang.showLess).attr('aria-expanded', 'true');\r\n          self.ui.descriptionField.addClass(\"csui-search-item-desc-height\").find(\r\n              \".csui-overflow-ellipsis\").hide();\r\n        } else {\r\n          $(this).removeClass('icon-expandArrowUp').addClass('icon-expandArrowDown').attr('title',\r\n              lang.showMore).attr('aria-expanded', 'false');\r\n          self.ui.descriptionField.removeClass(\"csui-search-item-desc-height\").find(\r\n              \".csui-overflow-ellipsis\").show();\r\n        }\r\n      });\r\n\r\n      if (!hasDescription) {   //when there is no description or summary, hide description field and 'Modified' metadata property\r\n        this.ui.descriptionField.addClass(\"binf-hidden\");\r\n        this.ui.modifiedByField.addClass(\"binf-hidden\");\r\n      }\r\n    },\r\n\r\n    addOwnerDisplayName: function () {\r\n      var ownerDisplayName = \"\";\r\n      if (!!this.model.attributes.owner_user_id_expand) {\r\n        ownerDisplayName = this.getDisplayName(this.model.attributes.owner_user_id_expand);\r\n      }\r\n      _.extend(this.model.attributes, {\r\n        owner_display_name: ownerDisplayName\r\n      });\r\n    },\r\n\r\n    addCreatedUserDisplayName: function () {\r\n      var createUserDisplayName = \"\";\r\n      if (!!this.model.attributes.create_user_id_expand) {\r\n        createUserDisplayName = this.getDisplayName(this.model.attributes.create_user_id_expand);\r\n      }\r\n      _.extend(this.model.attributes, {\r\n        create_user_display_name: createUserDisplayName\r\n      });\r\n    },\r\n\r\n    getDisplayName: function (userInfo) {\r\n      var displayName = !!userInfo.name_formatted ? userInfo.name_formatted : userInfo.name;\r\n      return displayName;\r\n    },\r\n\r\n    hasDescriptionText: function (el) {\r\n      return (el && el.textContent.trim().length > 0);\r\n    },\r\n\r\n    isTextOverflown: function (el) {\r\n      var isOverflowing = false;\r\n      if (!!el && el.style) {\r\n        var curOverflow = el.style.overflow;\r\n        if (!curOverflow || curOverflow === \"visible\") {\r\n          el.style.overflow = \"hidden\";\r\n        }\r\n        isOverflowing = el.clientWidth < el.scrollWidth\r\n                        || el.clientHeight < el.scrollHeight;\r\n        el.style.overflow = curOverflow;\r\n      }\r\n      return isOverflowing;\r\n    },\r\n\r\n    showInlineActions: function () {\r\n      if (this.ui.inlineToolbarContainer.find('.csui-table-actionbar').length === 0) {\r\n        if (this._rowStates.get(SearchResultsView.RowStatesSelectedRows).length > 0) {\r\n          // no inline bar if items are selected by checkbox\r\n          return;\r\n        }\r\n\r\n        this.searchMetadataView &&\r\n        this.searchMetadataView.ui.fieldsToBeHiddenOnHover.addClass(\"binf-hidden\");\r\n        if (this.$el.find(\".icon-expandArrowDown\").length > 0) {\r\n          this.ui.modifiedByField.addClass(\"binf-hidden\");\r\n        }\r\n\r\n        this.ui.inlineToolbarContainer.removeClass(\"binf-hidden\");\r\n\r\n        var versionId   = this.model.attributes.version_id ?\r\n                          \"-\" + this.model.attributes.version_id :\r\n                          \"\",\r\n            selectedRow = $(\".csui-search-item-action-\" + this.cid + versionId)[0];\r\n        var args = {\r\n          sender: this,\r\n          target: selectedRow,\r\n          node: this.model\r\n        };\r\n        this.trigger(\"enterSearchRow\", args);\r\n      }\r\n    },\r\n\r\n    hideInlineActions: function () {\r\n      this.ui.inlineToolbarContainer.addClass(\"binf-hidden\");\r\n      this.ui.metadataDetails.removeClass(\"binf-hidden\");\r\n      this.searchMetadataView &&\r\n      this.searchMetadataView.ui.fieldsToBeHiddenOnHover.removeClass(\"binf-hidden\");\r\n      if (this.$el.find(\".icon-expandArrowDown\").length > 0) {\r\n        var descLength = this.ui.descriptionField.html().trim().length;\r\n        if (descLength <= 0) {\r\n          this.ui.descriptionField.addClass(\"binf-hidden\");\r\n          this.ui.modifiedByField.addClass(\"binf-hidden\");\r\n        }\r\n      }\r\n\r\n      var versionId   = this.model.attributes.version_id ? \"-\" + this.model.attributes.version_id :\r\n                        \"\",\r\n          selectedRow = $(\".csui-search-item-action-\" + this.cid + versionId)[0];\r\n      var args = {\r\n        sender: this,\r\n        target: selectedRow,\r\n        node: []\r\n      };\r\n      this.trigger(\"leaveSearchRow\", args);\r\n    },\r\n\r\n    openVersionHistory: function (event) {\r\n      var self         = this,\r\n          args         = {},\r\n          selectedNode = [];\r\n      var versionId   = this.model.attributes.version_id ? \"-\" + this.model.attributes.version_id :\r\n                        \"\",\r\n          selectedRow = $(\".csui-search-item-action-\" + this.cid + versionId)[0];\r\n      selectedNode = this.model;\r\n      args = {\r\n        sender: self,\r\n        target: selectedRow,\r\n        node: selectedNode\r\n      };\r\n      self.trigger(\"openVersionHistory\", args);\r\n    },\r\n\r\n    showMetadataInfo: function (event) {\r\n      this.ui.descriptionField.removeClass(\"binf-hidden\");\r\n      this.ui.modifiedByField.removeClass(\"binf-hidden\");\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    },\r\n\r\n    hideMetadataInfo: function (event) {\r\n      var descLength = this.ui.descriptionField.html().trim().length;\r\n      if (descLength <= 0) {\r\n        this.ui.descriptionField.addClass(\"binf-hidden\");\r\n        this.ui.modifiedByField.addClass(\"binf-hidden\");\r\n      }\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n  });\r\n\r\n  var SearchResultListView = Marionette.CollectionView.extend({\r\n\r\n    className: 'binf-list-group',\r\n\r\n    childView: SearchResultItemView,\r\n    childViewOptions: function () {\r\n      return {\r\n        context: this.options.context,\r\n        tableView: this.options.layoutView,\r\n        defaultActionController: this.defaultActionController,\r\n        metadata: this.options.metadata,\r\n        rowStates: this._rowStates\r\n      };\r\n    },\r\n\r\n    emptyView: NoSearchResultView,\r\n    emptyViewOptions: function () {\r\n      return {\r\n        model: this.emptyModel\r\n      };\r\n    },\r\n\r\n    behaviors: {\r\n\r\n      DefaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      }\r\n\r\n    },\r\n\r\n    childEvents: {\r\n      'click:item': 'onClickItem'\r\n    },\r\n\r\n    constructor: function SearchResultListView(options) {\r\n      options || (options = {});\r\n      this.context = options.context;\r\n      this._rowStates = options.rowStates;\r\n      Marionette.CollectionView.prototype.constructor.apply(this, arguments);\r\n\r\n      BlockingView.delegate(this, options.layoutView);\r\n\r\n      this.collection.layoutView = options.layoutView;\r\n      this.emptyModel = new Backbone.Model({\r\n        message: lang.noSearchResultMessage,\r\n        suggestionKeyword: lang.suggestionKeyword,\r\n        searchSuggestion1: lang.searchSuggestion1,\r\n        searchSuggestion2: lang.searchSuggestion2,\r\n        searchSuggestion3: lang.searchSuggestion3,\r\n        searchSuggestion4: lang.searchSuggestion4\r\n      });\r\n      this.listenTo(this.collection, 'request', function () {\r\n        this.emptyModel.set('message', lang.loadingSearchResultMessage);\r\n      });\r\n      this.listenTo(this.collection, 'sync', function () {\r\n        this.emptyModel.set('message', lang.noSearchResultMessage);\r\n        this.$el.find(\".csui-no-result-message-wrapper\").show();\r\n        var tabElements = this.options.layoutView.facetView &&\r\n                          this.options.layoutView.facetView.$('.csui-facet');\r\n        if (tabElements && tabElements.length) {\r\n          tabElements.prop('tabindex', 0);\r\n        }\r\n      });\r\n      this.listenTo(this.collection, 'error', function () {\r\n        this.emptyModel.set('message', lang.failedSearchResultMessage);\r\n      });\r\n      this.listenTo(this, 'dom:refresh', this._refreshDom);\r\n    },\r\n\r\n    collectionEvents: {'reset': 'updateLayoutView'},\r\n\r\n    updateLayoutView: function () {\r\n      this.collection.layoutView.expandAllView.pageChange();\r\n    },\r\n\r\n    onClickItem: function (target) {\r\n      this.triggerMethod('execute:defaultAction', target.model);\r\n    },\r\n\r\n    onScrollTop: function () {\r\n      $('.binf-list-group').scrollTop(0);\r\n    },\r\n\r\n    _refreshDom: function () {\r\n      this.$el.addClass(\"list-group-height\");\r\n      this.onScrollTop();\r\n    }\r\n  });\r\n\r\n  var SearchResultsView = Marionette.LayoutView.extend({\r\n\r\n    className: 'csui-search-results binf-panel binf-panel-default',\r\n    template: layoutTemplate,\r\n    templateHelpers: function () {\r\n      var messages = {\r\n        customSearchTab: lang.customSearchTab,\r\n        searchFilterTab: lang.searchFilterTab,\r\n        enableCustomSearch: this.enableCustomSearch\r\n      };\r\n      return {\r\n        messages: messages\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      toolBarContainer: '.csui-search-tool-container',\r\n      customSearchContainer: '.csui-search-results-custom',\r\n      facetView: '#facetview',\r\n      customViewTab: '.csui-search-custom-tab',\r\n      facetViewTab: '.csui-search-facet-tab',\r\n      searchResultsContent: '.csui-search-results-content',\r\n      searchResultsBody: \".csui-search-results-body\",\r\n      searchSidePanel: \".csui-search-left-panel\"\r\n    },\r\n\r\n    events: {\r\n      'click @ui.customViewTab': 'openCustomView',\r\n      'click @ui.facetViewTab': 'openFacetView',\r\n      'keypress @ui.customViewTab': 'openCustomView',\r\n      'keypress @ui.facetViewTab': 'openFacetView'\r\n    },\r\n\r\n    regions: {\r\n      headerRegion: '#header',\r\n      toolbarRegion: '#toolbar',\r\n      resultsRegion: '#results',\r\n      paginationRegion: '#pagination',\r\n      selectAllRegion: '#selectAllCheckBox',\r\n      expandAllRegion: '#expandAllArrow',\r\n      sortingRegion: '#csui-search-sort',\r\n      customSearchRegion: '#csui-search-custom-container',\r\n      facetBarRegion: '#facetbarview',\r\n      facetRegion: '#facetview'\r\n    },\r\n\r\n    behaviors: {\r\n\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: '.csui-result-list',\r\n        suppressScrollX: true,\r\n        // like bottom padding of container, otherwise scrollbar is shown always\r\n        scrollYMarginOffset: 15\r\n      },\r\n      DefaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      }\r\n\r\n    },\r\n\r\n    constructor: function SearchResultsView(options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      options.pageSize || (options.pageSize = 10);\r\n\r\n      options.toolbarItems || (options.toolbarItems = toolbarItems);\r\n      options.toolbarItemsMasks || (options.toolbarItemsMasks = new ToolbarItemsMasks());\r\n\r\n      this.context = options.context;\r\n      if (!options.query) {\r\n        options.query = this.context.getModel(SearchQueryModelFactory);\r\n      }\r\n\r\n      if (options.collection) {\r\n        // If the collection was passed from outside and might be of a limited scope\r\n        if (!options.collection.fetched) {\r\n          // Store the scope to restore later and cancel limiting the scope of the response\r\n          this._originalScope = options.collection.getResourceScope();\r\n        }\r\n      } else {\r\n        options.collection = this.context.getModel(SearchResultsCollectionFactory, options);\r\n      }\r\n      if (!options.collection.fetched) {\r\n        // Ask the server to check for permitted actions V2 - only default actions\r\n        options.collection.setResourceScope(\r\n            SearchResultsCollectionFactory.getDefaultResourceScope());\r\n        options.collection.setDefaultActionCommands(\r\n            defaultActionItems.getAllCommandSignatures(commands));\r\n        options.collection.setEnabledDelayRestCommands(true);\r\n        if (options.collection.delayedActions) {\r\n          this.listenTo(options.collection.delayedActions, 'error',\r\n              function (collection, request, options) {\r\n                var error = new base.Error(request);\r\n                GlobalMessage.showMessage('error', error.message);\r\n              });\r\n        }\r\n      }\r\n\r\n      Marionette.LayoutView.prototype.constructor.call(this, options);\r\n      this._rowStates = new Backbone.Model();\r\n      this._rowStates.set(SearchResultsView.RowStatesSelectedRows, []);\r\n\r\n      this.metadata = options.metadata ||\r\n                      this.context.getCollection(SearchMetadataFactory, options);\r\n      this.query = options.query;\r\n      this.collection.setLimit(0, options.pageSize, false);\r\n      this._toggleCustomSearch();\r\n\r\n      this.commandController = new ToolbarCommandController({commands: commands});\r\n      // this.listenTo(this.commandController, 'before:execute:command', this._beforeExecuteCommand);\r\n      this.listenTo(this.commandController, 'after:execute:command', this._toolbarCommandExecuted);\r\n\r\n      this.setSearchHeader();\r\n      var self = this;\r\n      this.listenTo(this.headerView, \"go:back\", function () {\r\n        self.trigger(\"go:back\");\r\n      });\r\n      this.listenTo(this.headerView, \"toggle:filter\", this._completeFilterCommand);\r\n      this.listenTo(this.headerView, \"focus:filter\", this._focusFilter);\r\n\r\n      this.facetFilters = this.collection.searchFacets;\r\n      this._setToolBar();\r\n      this.setResultView();\r\n      this.setPagination();\r\n      this.setSelectAllView();\r\n      this.setSortingView();\r\n      this.setExpandAllView();\r\n      this.setInlineActionBarEvents();\r\n      this._setFacetBarView();\r\n      if (this.enableCustomSearch) {\r\n        this.setCustomSearchView();\r\n        this.listenTo(this.customSearchView, \"change:title\", this.updateHeaderTitle);\r\n      }\r\n\r\n      if (this.options.blockingParentView) {\r\n        BlockingView.delegate(this, this.options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      // Refresh the search results whenever the search query changes\r\n      // on the same perspective\r\n      this.listenTo(this.query, 'change', function () {\r\n        this._updatePanels();\r\n        if (this.collection.isFetchable()) {\r\n          this.facetFilters.clearFilter();\r\n          this.paginationView.nodeChange();\r\n          this.collection.fetch({\r\n            error: _.bind(this.onSearchResultsFailed, this, options)\r\n          });\r\n\r\n          this._removeAllSelections();\r\n          this.expandAllView.pageChange();\r\n          this.resetScrollToTop();\r\n        }\r\n      });\r\n      this.listenTo(this.options.context, 'request', this.blockActions)\r\n          .listenTo(this.options.context, 'sync', this.unblockActions)\r\n          .listenTo(this.options.context, 'error', this.unblockActions)\r\n          .listenTo(this.collection, \"request\", this.blockActions)\r\n          .listenTo(this.collection, \"sync\", this.unblockSearchResultsAction)\r\n          .listenTo(this.collection, \"sync\", this.updateActionToolBar)\r\n          .listenTo(this.collection, \"error\", this.unblockActions)\r\n          .listenTo(this.collection, \"destroy\", this.unblockActions)\r\n          .listenTo(this.collection, \"sync\", this.updateScrollbar)\r\n          .listenTo(this.collection, \"sync\", this._removeAllSelections)\r\n          .listenTo(this.collection, \"sync\", this._focusOnFirstSearchResultElement)\r\n          .listenTo(this.collection, \"new:page\", this.resetScrollToTop);\r\n\r\n      !base.isMozilla() && this.propagateEventsToRegions();\r\n      this.onWinRefresh = _.bind(this.windowRefresh, this);\r\n      $(window).bind(\"resize.app\", this.onWinRefresh);\r\n      if (this.enableCustomSearch) {\r\n        this.listenToOnce(this, 'dom:refresh', _.bind(function () {\r\n          if (this.$el.width() > 1023) {\r\n            this.ui.searchSidePanel.addClass('csui-is-visible');\r\n            this.ui.searchResultsBody.addClass('csui-search-results-body-right');\r\n          } else {\r\n            this.ui.searchSidePanel.addClass(\"search-side-panel-overlay\");\r\n            this.ui.searchSidePanel.addClass(\"search-side-panel-auto\");\r\n          }\r\n        }, this));\r\n      }\r\n    },\r\n\r\n    // don't call this before command is finished\r\n    _removeAllSelections: function () {\r\n      this._rowStates.set(SearchResultsView.RowStatesSelectedRows, []);\r\n    },\r\n\r\n    _focusFilter: function (view) {\r\n      !!view && view.headerView.ui.filter.focus();\r\n      if (this.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n        !!view && view.headerView.ui.filter.attr(\"aria-label\", lang.filterCollapseAria);\r\n        !!view && view.headerView.ui.filter.attr(\"aria-expanded\", true);\r\n      } else {\r\n        !!view && view.headerView.ui.filter.attr(\"aria-label\", lang.filterExpandAria);\r\n        !!view && view.headerView.ui.filter.attr(\"aria-expanded\", false);\r\n      }\r\n      var tabElements = this.facetView && this.facetView.$('.csui-facet');\r\n      if (tabElements && tabElements.length) {\r\n        tabElements.prop('tabindex', 0);\r\n      }\r\n    },\r\n    onSearchResultsFailed: function (model, request, message) {\r\n      var error = new base.RequestErrorMessage(message);\r\n      ModalAlert.showError(error.toString());\r\n    },\r\n    updateScrollbar: function () {\r\n      this.triggerMethod('update:scrollbar', this);\r\n    },\r\n    _focusOnFirstSearchResultElement: function () {\r\n      this.$el.find(\".binf-list-group-item:first-child .csui-search-item-name > a\").focus();\r\n    },\r\n    resetScrollToTop: function () {\r\n      var scrollContainer = this.$('#results');\r\n      scrollContainer.scrollTop(0);\r\n      // if needed: triggerMethod(this, \"update:scrollbar\");\r\n    },\r\n    updateActionToolBar: function () {\r\n      if (this.collection.totalCount === 0) {\r\n        this.ui.toolBarContainer.addClass('binf-hidden');\r\n        if (!this.enableCustomSearch) {\r\n          this.ui.customSearchContainer.addClass('binf-hidden');\r\n        }\r\n      } else {\r\n        this.ui.toolBarContainer.removeClass('binf-hidden');\r\n        this.ui.customSearchContainer.removeClass('binf-hidden');\r\n      }\r\n    },\r\n    unblockSearchResultsAction: function () {\r\n      this.unblockActions();\r\n      if (this.collection.models.length > 0) {\r\n        this.$el.find(\".binf-list-group\").removeClass(\"list-group-height-noresults\");\r\n        this.$el.find(\".csui-search-results-content\").removeClass(\"csui-search-noresults\");\r\n      } else {\r\n        this.$el.find(\".binf-list-group\").addClass(\"list-group-height-noresults\");\r\n        this.$el.find(\".csui-search-results-content\").addClass(\"csui-search-noresults\");\r\n      }\r\n    },\r\n    _toggleCustomSearch: function () {\r\n      this.enableCustomSearch = !!this.options.customSearchView || this.query.get(\"query_id\") &&\r\n                                Object.keys(\r\n                                    this.query.attributes).length >\r\n                                1;\r\n      if (this.enableCustomSearch) {\r\n        this.$el.find(\"#csui-search-custom-container\").addClass('csui-search-custom-container');\r\n        this.$el.find(\"#csui-search-custom-results\").addClass(\"csui-search-custom-results\");\r\n        this.$el.find(\".csui-search-custom-tab\").addClass('binf-active');\r\n      } else {\r\n        if (this.customSearchView && this.query.get(\"where\")) {\r\n          this.customSearchRegion.empty();\r\n          this.$el.find(\"#csui-search-custom-container\").removeClass(\r\n              'csui-search-custom-container');\r\n          this.$el.find(\"#csui-search-custom-results\").removeClass(\"csui-search-custom-results\");\r\n        }\r\n      }\r\n    },\r\n\r\n    _updatePanels: function () {\r\n      this._toggleCustomSearch();\r\n      if (!this.enableCustomSearch) {\r\n        if (this.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n          var view = this;\r\n          this.ui.searchSidePanel.one(this._transitionEnd(),\r\n              function () {\r\n                view.$el.find(\".csui-search-results-custom\").hide();\r\n                view.$el.find(\".csui-search-left-panel-tabs\").hide();\r\n                if (!view.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n                  view.ui.searchSidePanel.addClass('csui-is-hidden');\r\n                }\r\n                view.ui.facetView.show();\r\n              });\r\n          this.ui.searchResultsBody.removeClass(\"csui-search-results-body-right\");\r\n          this.ui.searchSidePanel.removeClass(\"csui-is-visible\");\r\n        } else {\r\n          this.$el.find(\".csui-search-results-custom\").hide();\r\n          this.$el.find(\".csui-search-left-panel-tabs\").hide();\r\n          this.ui.facetView.show();\r\n        }\r\n      } else {\r\n        this.$el.find(\".csui-search-results-custom\").show();\r\n        this.$el.find(\".csui-search-left-panel-tabs\").show();\r\n        this.ui.searchResultsBody.addClass(\"csui-search-results-body-right\");\r\n      }\r\n      if (this.headerView) {\r\n        this.headerView.options.useCustomTitle = this.enableCustomSearch;\r\n      }\r\n      if (this.facetView) {\r\n        this.facetView.options.data.showTitle = !this.enableCustomSearch;\r\n        //re-render facetView to show title\r\n        this.facetView.render();\r\n      }\r\n    },\r\n\r\n    openCustomView: function (e) {\r\n      //Show custom search panel, hide search facet\r\n      if (this.enableCustomSearch) {\r\n        if ((e.type === 'keypress' && e.keyCode === 13) || (e.type === 'click')) {\r\n          this.ui.facetView.hide();\r\n          this.$el.find(\".csui-search-results-custom\").show();\r\n          this.$el.find(\".csui-search-facet-tab\").removeClass('binf-active');\r\n          this.$el.find(\".csui-search-custom-tab\").addClass('binf-active');\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    },\r\n\r\n    openFacetView: function (e) {\r\n      //Show search facet panel, hide custom search panel\r\n      if (this.enableCustomSearch) {\r\n        this._ensureFacetPanelViewDisplayed();\r\n        if ((e.type === 'keypress' && e.keyCode === 13) || (e.type === 'click')) {\r\n          this.$el.find(\".csui-search-results-custom\").hide();\r\n          this.ui.facetView.show();\r\n          this.$el.find(\".csui-search-custom-tab\").removeClass('binf-active');\r\n          this.$el.find(\".csui-search-facet-tab\").addClass('binf-active');\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    },\r\n\r\n    onDestroy: function () {\r\n      $(window).unbind(\"resize.app\", this.onWinRefresh);\r\n      // If the collection was passed from outside and might be of a limited scope\r\n      if (this._originalScope) {\r\n        // Restore the scope of the response\r\n        this.options.collection.setResourceScope(this._originalScope);\r\n      }\r\n\r\n    },\r\n\r\n    // bubble to regions\r\n    //Dom refresh currently only needed for the Pagination view. When a refresh is called\r\n    //on the searchresultview, it causes the results to constantly expand its length without cause.\r\n    windowRefresh: function () {\r\n      // Window resizing can be triggered between the constructor and rendering;\r\n      // sub-views of this view are not created before the min view is rendered\r\n      this.facetView && this.facetView.triggerMethod('dom:refresh');\r\n      if (this._selectAllView) {\r\n        this._selectAllView.triggerMethod('dom:refresh');\r\n      }\r\n      if (this.expandAllView) {\r\n        this.expandAllView.triggerMethod('dom:refresh');\r\n      }\r\n      var panelPosition = this.ui.searchSidePanel.css(\"position\");\r\n      if (panelPosition != \"absolute\") {\r\n        if (this.$el.width() > 1023 &&\r\n            this.ui.searchSidePanel.hasClass(\"search-side-panel-overlay\")) {\r\n          //Entered from width <1024 to width >1024\r\n          this.ui.searchSidePanel.removeClass(\"search-side-panel-overlay\");\r\n          if (this.ui.searchSidePanel.hasClass(\"search-side-panel-auto\")) {\r\n            //open search facet\r\n            this.ui.searchSidePanel.removeClass(\"search-side-panel-auto\");\r\n            this._completeFilterCommand(this, true);\r\n          }\r\n        }\r\n      } else if (!this.ui.searchSidePanel.hasClass(\"search-side-panel-auto\") &&\r\n                 !this.ui.searchSidePanel.hasClass(\"search-side-panel-overlay\")) {\r\n        //Entered from width >1024 to width <1024\r\n        this.ui.searchSidePanel.addClass(\"search-side-panel-overlay\");\r\n        if (this.ui.searchSidePanel.hasClass(\"csui-is-visible\")) {\r\n          //should be opened automatically once width >1024\r\n          this.ui.searchSidePanel.addClass(\"search-side-panel-auto\");\r\n          //close search facet\r\n          this._completeFilterCommand(this, true);\r\n        }\r\n      }\r\n    }\r\n    ,\r\n\r\n    setSearchHeader: function () {\r\n      this.headerView = new HeaderView({\r\n        collection: this.collection,\r\n        filter: this.options.searchString,\r\n        context: this.options.context,\r\n        enableBackButton: this.options.enableBackButton,\r\n        backButtonToolTip: this.options.backButtonToolTip,\r\n        enableFacetFilter: config.enableFacetFilter, // LPAD-60082: Enable/disable facets\r\n        useCustomTitle: this.enableCustomSearch,\r\n        commands: commands,\r\n        originatingView: this,\r\n        titleView: this.options.titleView\r\n      });\r\n      return true;\r\n    },\r\n\r\n    _setToolBar: function () {\r\n      var self       = this,\r\n          parentNode = new NodeModel({id: undefined},\r\n              {connector: this.collection.connector});\r\n      this.collection.node = parentNode;\r\n\r\n      // toolbarItems is an object with several TooItemFactories in it (for each toolbar one)\r\n      this.toolbarView = new TableToolbarView({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMasks: this.options.toolbarItemsMasks,\r\n        collection: this.collection,\r\n        originatingView: this,\r\n        context: this.options.context,\r\n        toolbarCommandController: this.commandController,\r\n        events: function () {\r\n          return _.extend({}, TableToolbarView.prototype.events, {\r\n            'keydown': self.onKeyInViewInToolbarView\r\n          });\r\n        }\r\n      });\r\n      this.listenTo(this.toolbarView, 'refresh:tabindexes', function () {\r\n        // unlike in nodes table view, for header toolbar in search results has to navigate through\r\n        // tab key instead-of direction keys\r\n        this.toolbarView.$el.find('.csui-otherToolbar>ul>li>a:visible').attr('tabindex', 0);\r\n      });\r\n    },\r\n\r\n    onKeyInViewInToolbarView: function (event) {\r\n      switch (event.keyCode) {\r\n      case 37:\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        break;\r\n      case 39:\r\n        // right arrow\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        break;\r\n      }\r\n    },\r\n\r\n    setResultView: function () {\r\n      this.resultsView = new SearchResultListView({\r\n        context: this.options.context,\r\n        collection: this.collection,\r\n        layoutView: this,\r\n        filter: this.options.searchString,\r\n        metadata: this.metadata,\r\n        rowStates: this._rowStates\r\n      });\r\n      return true;\r\n    },\r\n\r\n    setPagination: function () {\r\n      this.paginationView = new PaginationView({\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: [10, 25, 50, 100] // LPAD-48290, to make consistent with classic console\r\n      });\r\n      return true;\r\n    },\r\n\r\n    _calculateSelectAllCheckedStatus: function () {\r\n      var selected = this._rowStates.get(SearchResultsView.RowStatesSelectedRows);\r\n      var all = selected.length === this.collection.length;\r\n      if (selected.length > 0 && !all) {\r\n        return 'mixed';\r\n      } else {\r\n        return selected.length > 0;\r\n      }\r\n    },\r\n\r\n    _updateSelectAllCheckbox: function () {\r\n      if (this._selectAllView) {\r\n        this._selectAllView.setChecked(this._calculateSelectAllCheckedStatus());\r\n        this._selectAllView.setDisabled(this.collection.length === 0);\r\n      }\r\n    },\r\n\r\n    setSelectAllView: function () {\r\n      this._selectAllView = new CheckboxView({\r\n        checked: this._calculateSelectAllCheckedStatus(),\r\n        disabled: this.collection.length === 0,\r\n        ariaLabel: lang.selectAllAria,\r\n        title: lang.selectAll\r\n      });\r\n\r\n      this.listenTo(this._selectAllView, 'clicked', function (e) {\r\n        e.cancel = true;  // don't update checkbox immediately\r\n\r\n        var checked = this._selectAllView.model.get('checked'); // state before clicking cb\r\n\r\n        switch (checked) {\r\n        case 'true':\r\n          // all rows are selected -> deselect all\r\n          this._rowStates.set(SearchResultsView.RowStatesSelectedRows, []);\r\n          break;\r\n        default:\r\n          // no or some rows are selected -> select all, except those that are not selectable\r\n          var selectedModelIds = [];\r\n          this.collection.each(function (model) {\r\n            if (model.get('selectable') !== false) {\r\n              selectedModelIds.push(model.get('id'));\r\n            }\r\n          });\r\n          this._rowStates.set(SearchResultsView.RowStatesSelectedRows, selectedModelIds);\r\n        }\r\n      });\r\n\r\n      this.listenTo(this._rowStates, 'change:' + SearchResultsView.RowStatesSelectedRows,\r\n          function () {\r\n            this._updateSelectAllCheckbox();\r\n          });\r\n\r\n      this.listenTo(this.collection, 'reset', function () {\r\n        this._updateSelectAllCheckbox();\r\n      });\r\n    },\r\n\r\n    setExpandAllView: function () {\r\n      this.expandAllView = new ExpandAllView({\r\n        collection: this.collection,\r\n        view: this.resultsView,\r\n        _eleCollapse: \"icon-expandArrowUp\",\r\n        _eleExpand: \"icon-expandArrowDown\"\r\n      });\r\n      return true;\r\n    },\r\n\r\n    setSortingView: function () {\r\n      this.sortingView = new SortingView({\r\n        collection: this.collection\r\n      });\r\n      return true;\r\n    },\r\n\r\n    setCustomSearchView: function () {\r\n      this.customSearchView = this.options.customSearchView || new SearchObjectView({\r\n        context: this.options.context,\r\n        savedSearchQueryId: this.query.get(\"query_id\"),\r\n        customValues: this.query,\r\n        parentView: this\r\n      });\r\n      return true;\r\n    },\r\n\r\n    // controller for the toolbar actions\r\n    _toolbarCommandExecuted: function (context) {\r\n      if (context && context.commandSignature) {\r\n\r\n        // the state of the selected nodes can be changed and other toolbar items might be enabled\r\n        this._updateToolItems();\r\n\r\n        // reducing performance to somewhat extent,\r\n        // such that collection will be refetched if it meets the following conditions:\r\n        // 1) if the current command allows to refetch from it's own implementation\r\n        // 2) if the total count is > current page size.\r\n        if (!!context.command && !!context.command.allowCollectionRefetch &&\r\n            this.collection.totalCount > this.collection.topCount) {\r\n          this.collection.fetch();\r\n        }\r\n      }\r\n    },\r\n\r\n    setInlineActionBarEvents: function () {\r\n      this.listenTo(this.resultsView, 'childview:enterSearchRow',\r\n          this._showInlineActionBarWithDelay);\r\n      this.listenTo(this.resultsView, 'childview:openVersionHistory',\r\n          this.openVersionHistory);\r\n      this.listenTo(this.resultsView, 'childview:leaveSearchRow', this._actionBarShouldDestroy);\r\n      this.listenTo(this.collection, \"reset\", this._destroyInlineActionBar);\r\n      this.listenTo(this.collection, \"remove\", this._updateToolItems);\r\n      this.listenTo(this._rowStates, 'change:' + SearchResultsView.RowStatesSelectedRows,\r\n          this._updateToolItems);\r\n    },\r\n\r\n    _updateToolItems: function () {\r\n      if (this.toolbarView) {\r\n        var selectedModelIds = this._rowStates.get(SearchResultsView.RowStatesSelectedRows);\r\n        var nodes = [];\r\n        _.each(selectedModelIds, function (id) {\r\n          nodes.push(this.collection.findWhere({id: id}));\r\n        }, this);\r\n        if (nodes && nodes.length === 1) {\r\n          this.toolbarView.options.collection.node = nodes[0].parent;\r\n        } else {\r\n          this.toolbarView.options.collection.node = new NodeModel({id: undefined},\r\n              {connector: this.collection.connector});\r\n        }\r\n        this.toolbarView.updateForSelectedChildren(nodes);\r\n      }\r\n    },\r\n\r\n    _showInlineActionBar: function (args) {\r\n      if (!!args) {\r\n        this._savedHoverEnterArgs = null;\r\n\r\n        var parentId = args.node.get('parent_id');\r\n        if (parentId instanceof Object) {\r\n          parentId = args.node.get('parent_id').id;\r\n        }\r\n        var parentNode = new NodeModel({id: parentId},\r\n            {connector: args.node.connector});\r\n\r\n        this.inlineToolbarView = new TableActionBarView(_.extend({\r\n              context: this.options.context,\r\n              commands: commands,\r\n              delayedActions: this.collection.delayedActions,\r\n              collection: this.options.toolbarItems.inlineToolbar,\r\n              toolItemsMask: this.options.toolbarItemsMasks.toolbars.inlineToolbar,\r\n              container: parentNode,\r\n              containerCollection: this.collection,\r\n              model: args.node,\r\n              originatingView: this\r\n            }, this.options.toolbarItems.inlineToolbar.options)\r\n        );\r\n\r\n        this.listenTo(this.inlineToolbarView, 'after:execute:command',\r\n            this._toolbarCommandExecuted);\r\n        this.inlineToolbarView.render();\r\n        this.listenTo(this.inlineToolbarView, 'destroy', function () {\r\n          this.inlineToolbarView = undefined;\r\n          if (this._savedHoverEnterArgs) {\r\n            this._showInlineActionBarWithDelay(this._savedHoverEnterArgs);\r\n          }\r\n        }, this);\r\n        $(args.target).append(this.inlineToolbarView.$el).css(\"display\", \"block\")\r\n            .addClass('csui-table-cell-name-appendix-full');\r\n        this.inlineToolbarView.triggerMethod(\"show\");\r\n      }\r\n    },\r\n\r\n    _showInlineActionBarWithDelay: function (_view, args) {\r\n      if (this._showInlineActionbarTimeout) {\r\n        clearTimeout(this._showInlineActionbarTimeout);\r\n      }\r\n      var self = this;\r\n      this._showInlineActionbarTimeout = setTimeout(function () {\r\n        self._showInlineActionbarTimeout = undefined;\r\n        if (!self.resultsView.lockedForOtherContols) {\r\n          // don't show the action bar control if the searchresult view is locked because a different\r\n          // control is already open\r\n          self._showInlineActionBar.call(self, args);\r\n        }\r\n      }, 200);\r\n    },\r\n\r\n    _actionBarShouldDestroy: function (_view, args) {\r\n      if (this._showInlineActionbarTimeout) {\r\n        clearTimeout(this._showInlineActionbarTimeout);\r\n        this._showInlineActionbarTimeout = undefined;\r\n      }\r\n      if (this.inlineToolbarView) {\r\n        //this.inlineToolbarView.updateForSelectedChildren(args.node);\r\n        this.inlineToolbarView.destroy();\r\n      }\r\n    },\r\n\r\n    _destroyInlineActionBar: function () {\r\n      if (this.inlineToolbarView) {\r\n        this.inlineToolbarView.destroy();\r\n        this.inlineToolbarView = undefined;\r\n      }\r\n    },\r\n\r\n    openVersionHistory: function (args) {\r\n      var nodes = new NodeCollection();\r\n      nodes.push(args.model);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: args.model.collection.node,\r\n        collection: args.model.collection,\r\n        selectedTab: new Backbone.Model({title: 'Versions'})\r\n      };\r\n      status = _.extend(status, {originatingView: this});\r\n      // view properties of an existing item\r\n      var propertiesCmd = new PropertiesCommand();\r\n      propertiesCmd.execute(status, this.options)\r\n          .always(function (args) {\r\n            //self.cancel();\r\n          });\r\n    },\r\n\r\n    onRender: function () {\r\n      var self = this;\r\n      this.headerRegion.show(this.headerView);\r\n      this.toolbarRegion.show(this.toolbarView);\r\n      this.resultsRegion.show(this.resultsView);\r\n      this.paginationRegion.show(this.paginationView);\r\n      this.selectAllRegion.show(this._selectAllView);\r\n      this.sortingRegion.show(this.sortingView);\r\n      this.expandAllRegion.show(this.expandAllView);\r\n      if (this.enableCustomSearch) {\r\n        this.customSearchRegion.show(this.customSearchView);\r\n      }\r\n      if (this.facetBarView) {\r\n        this.facetBarRegion.show(this.facetBarView);\r\n      }\r\n\r\n      if (this.enableCustomSearch) {\r\n        this.ui.facetView.hide();\r\n        this.ui.searchSidePanel.removeClass('csui-is-hidden');\r\n      } else {\r\n        this.ui.searchSidePanel.removeClass('csui-is-visible');\r\n        var view = this;\r\n        this.ui.searchSidePanel.one(this._transitionEnd(),\r\n            function () {\r\n              if (!view.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n                view.ui.searchSidePanel.addClass('csui-is-hidden');\r\n              }\r\n            });\r\n      }\r\n      this._toggleCustomSearch();\r\n\r\n      // perfect scrollbar stops 'scroll' event propagation, trigger it for elements to listen to\r\n      this.$('.csui-result-list').on('scroll', function () {\r\n        self.trigger('scroll');\r\n      });\r\n    },\r\n\r\n    _ensureFacetPanelViewDisplayed: function () {\r\n      if (this.facetView === undefined) {\r\n        this._setFacetPanelView();\r\n        this.facetRegion.show(this.facetView);\r\n      }\r\n    },\r\n\r\n    _setFacetPanelView: function () {\r\n      this.facetView = new FacetPanelView({\r\n        collection: this.facetFilters,\r\n        blockingLocal: true,\r\n        showTitle: !this.enableCustomSearch\r\n      });\r\n      this.listenTo(this.facetView, 'remove:filter', this._removeFacetFilter)\r\n          .listenTo(this.facetView, 'remove:all', this._removeAll)\r\n          .listenTo(this.facetView, 'apply:filter', this._addToFacetFilter);\r\n    },\r\n\r\n    _removeFacetPanelView: function () {\r\n      this.facetRegion.empty();\r\n      this.facetView = undefined;\r\n    },\r\n\r\n    _setFacetBarView: function () {\r\n      this.facetBarView = new FacetBarView({\r\n        collection: this.facetFilters\r\n      });\r\n      this.listenTo(this.facetBarView, 'remove:filter', this._removeFacetFilter)\r\n          .listenTo(this.facetBarView, 'remove:all', this._removeAll)\r\n          .listenTo(this.facetBarView, 'facet:bar:visible', this._handleFacetBarVisible)\r\n          .listenTo(this.facetBarView, 'facet:bar:hidden', this._handleFacetBarHidden);\r\n    },\r\n\r\n    _addToFacetFilter: function (filter) {\r\n      this.facetFilters.addFilter(filter);\r\n      this.collection.setDefaultPageNum();\r\n      this.collection.fetch();\r\n      this.resetScrollToTop();\r\n    },\r\n\r\n    _removeFacetFilter: function (filter) {\r\n      this.facetFilters.removeFilter(filter);\r\n      this.collection.setDefaultPageNum();\r\n      this.collection.fetch();\r\n      this.resetScrollToTop();\r\n    },\r\n\r\n    _removeAll: function () {\r\n      this.facetFilters.clearFilter();\r\n      this.collection.setDefaultPageNum();\r\n      this.collection.fetch();\r\n      this.resetScrollToTop();\r\n    },\r\n\r\n    _completeFilterCommand: function (view, flag) {\r\n      var panelPosition = view.ui.searchSidePanel.css(\"position\");\r\n      if (panelPosition === \"absolute\" && flag === undefined) {\r\n        view.ui.searchSidePanel.removeClass(\"search-side-panel-auto\");\r\n        view.ui.searchSidePanel.addClass(\"search-side-panel-overlay\");\r\n      }\r\n      view.showSidePanel = !view.ui.searchSidePanel.hasClass(\"csui-is-visible\");\r\n      if (view.showSidePanel) {\r\n        view._ensureFacetPanelViewDisplayed();\r\n        view.ui.searchSidePanel.removeClass('csui-is-hidden');\r\n        view.ui.searchSidePanel.one(view._transitionEnd(),\r\n            function () {\r\n              if (base.isMSBrowser()) {\r\n                if (view.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n                  view.ui.searchResultsBody.addClass('csui-search-results-body-right');\r\n                }\r\n              }\r\n              view.triggerMethod('dom:refresh');\r\n              if (view.paginationView) {\r\n                view.paginationView.triggerMethod('dom:refresh');\r\n              }\r\n            }).addClass('csui-is-visible');\r\n        if (!base.isMSBrowser()) {\r\n          if (view.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n            view.ui.searchResultsBody.addClass('csui-search-results-body-right');\r\n          }\r\n        }\r\n      } else {\r\n        view.ui.searchSidePanel.one(view._transitionEnd(),\r\n            function () {\r\n              if (!view.ui.searchSidePanel.hasClass('csui-is-visible')) {\r\n                view.ui.searchSidePanel.addClass('csui-is-hidden');\r\n              }\r\n              view.triggerMethod('dom:refresh');\r\n              view._removeFacetPanelView();\r\n              if (view.paginationView) {\r\n                view.paginationView.triggerMethod('dom:refresh');\r\n              }\r\n            }).removeClass('csui-is-visible');\r\n        view.ui.searchResultsBody.removeClass('csui-search-results-body-right');\r\n      }\r\n      this.facetView && this.facetView.triggerMethod('dom:refresh');\r\n    },\r\n    _transitionEnd: _.once(\r\n        function () {\r\n          var transitions = {\r\n                transition: 'transitionend',\r\n                WebkitTransition: 'webkitTransitionEnd',\r\n                MozTransition: 'transitionend',\r\n                OTransition: 'oTransitionEnd otransitionend'\r\n              },\r\n              element     = document.createElement('div'),\r\n              transition;\r\n          for (transition in transitions) {\r\n            if (typeof element.style[transition] !== 'undefined') {\r\n              return transitions[transition];\r\n            }\r\n          }\r\n        }\r\n    ),\r\n\r\n    updateHeaderTitle: function () {\r\n      this.headerView.setCustomSearchTitle(this.options.title);\r\n    },\r\n\r\n    _handleFacetBarVisible: function () {\r\n      this.ui.searchResultsContent.addClass('csui-facetbarviewOpened');\r\n      this.ui.searchResultsContent.find(\".csui-facet-list-bar .csui-facet-item:last a\").focus();\r\n    },\r\n\r\n    _handleFacetBarHidden: function () {\r\n      this.ui.searchResultsContent.removeClass('csui-facetbarviewOpened');\r\n      this.headerView.trigger(\"refresh:tabindexes\");\r\n    }\r\n  }, {\r\n    RowStatesSelectedRows: 'selected'\r\n  });\r\n\r\n  _.extend(SearchResultsView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return SearchResultsView;\r\n\r\n});\r\n\n","\ncsui.define('json!csui/widgets/search.custom/search.custom.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"tile\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"savedSearchQueryId\": {\r\n        \"title\": \"{{savedSearchQueryTitle}}\",\r\n        \"description\": \"{{savedSearchQueryDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\r\n      \"savedSearchQueryId\"\r\n    ]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"savedSearchQueryId\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": [258]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/search.results/search.results.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {},\r\n  \"options\": {},\r\n  \"actions\": [\r\n    {\r\n      \"toolItems\": \"csui/widgets/search.results/toolbaritems\",\r\n      \"toolItemMasks\": \"csui/widgets/search.results/toolbaritems.masks\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"otherToolbar\",\r\n          \"title\": \"{{otherToolbarTitle}}\",\r\n          \"description\": \"{{otherToolbarDescription}}\"\r\n        },\r\n        {\r\n          \"id\": \"inlineToolbar\",\r\n          \"title\": \"{{inlineToolbarTitle}}\",\r\n          \"description\": \"{{inlineToolbarDescription}}\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n);\n\n","csui.define('csui/widgets/search.custom/impl/nls/search.custom.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/search.custom/impl/nls/root/search.custom.manifest',{\r\n  \"widgetTitle\": \"Custom View Search\",\r\n  \"widgetDescription\": \"Shows custom view search form for the given saved search query.\",\r\n  \"savedSearchQueryTitle\": \"Search query\",\r\n  \"savedSearchQueryDescription\": \"An existing saved search query object\"\r\n});\r\n\n","\n","csui.define('csui/widgets/search.results/impl/nls/search.results.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/search.results/impl/nls/root/search.results.manifest',{\r\n  \"widgetTitle\": \"Search Results\",\r\n  \"widgetDescription\": \"Shows objects found by a full-text search query and offers the most important actions for them.\",\r\n  \"otherToolbarTitle\": \"List Header Toolbar\",\r\n  \"otherToolbarDescription\": \"Toolbar, which is activated in the list header, once a list item is selected.\",\r\n  \"inlineToolbarTitle\": \"Inline Toolbar\",\r\n  \"inlineToolbarDescription\": \"Toolbar, which is displayed on the right side of a list item, when the mouse cursor is moving above it.\"\r\n});\r\n\n","\n","csui.define('bundles/csui-search',[\r\n  // Application widgets\r\n  'csui/widgets/search.custom/search.custom.view',\r\n  'csui/widgets/search.results/search.results.view',\r\n  'csui/widgets/search.results/toolbaritems',\r\n  'csui/widgets/search.results/impl/toolbaritems',\r\n\r\n  // Application widgets manifests\r\n  'json!csui/widgets/search.custom/search.custom.manifest.json',\r\n  'json!csui/widgets/search.results/search.results.manifest.json',\r\n  'i18n!csui/widgets/search.custom/impl/nls/search.custom.manifest',\r\n  'i18n!csui/widgets/search.results/impl/nls/search.results.manifest',\r\n\r\n  // Tool items and tool item masks\r\n  'csui/widgets/search.results/toolbaritems',\r\n  'csui/widgets/search.results/toolbaritems.masks'\r\n\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n\r\n  css.styleLoad(require, 'csui/bundles/csui-search', true);\r\n\r\n});\r\n\n"]}