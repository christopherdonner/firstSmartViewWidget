csui.define("csui/widgets/search.custom/impl/form.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/alpaca/js/alpaca","csui/controls/form/form.view"],function(e,s,t,i,o,n){return n.extend({"constructor":function(e){this.options=e||{},n.prototype.constructor.call(this,t.extend(e,{"custom":{"adjustHeight":!0}})),this.jQuery=s;var i=this;this.customFlatten=function(e,s,o){return t.isObject(e)?t.each(e,function(e,t){i.customFlatten(e,s,t)}):(/^(anydate|anyvalue)/i.test(e)&&(e=""),s[o]=e),s},this.customFilter=function(){var e=this,s=[],i=e.customFlatten(e.objectList(e.getValues()),{});return t.isObject(i)&&t.each(i,function(t,o){if(e.customEndsWith(o,"_DFrom")||e.customEndsWith(o,"_DFor")||e.customEndsWith(o,"_DTo")){var n=o.substr(0,o.lastIndexOf("_"));!t&&i[n]&&(i[n]="")}t&&s.push(t)}),s},this.customEndsWith=function(e,s){return-1!==e.indexOf(s,e.length-s.length)},this.objectList=function(e){var s=[];return t.each(e,function(e){t.isObject(e)&&s.push(e)}),t.flatten(s)},this.$el.on("keydown",function(e){if(13!==e.keyCode||"text"!==e.target.type&&"search"!==e.target.type||""===e.target.value.trim()){if(13===e.keyCode&&i.jQuery(".binf-dropdown-menu").parent(".binf-open").length>=1)e.stopImmediatePropagation();else if(13===e.keyCode)if(""===e.target.value){var t=i.customFilter();t&&0===t.length?i.jQuery(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled"):i.triggerSearch(e)}else i.jQuery(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled")}else{if(s(e.target).is("input.typeahead")&&0!==s(e.target).siblings(".typeahead.scroll-container:visible").length)return;i.triggerSearch(e)}}),this.$el.on("keyup",function(e){if("text"===e.target.type)if(""===e.target.value){var s=i.customFilter();s&&0===s.length&&i.jQuery(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled")}else i.jQuery(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled")})},"triggerSearch":function(e){var s=this;setTimeout(function(e){s.jQuery(".csui-custom-search-form-submit").hasClass("binf-disabled")||s.$el.closest(".csui-custom-view-search").find(".csui-custom-search-form-submit").click()},50)},"updateRenderedForm":function(){return!1},"onRenderForm":function(){this.options.customView.triggerMethod("render:form")},"onChangeField":function(e){var s=this.customFilter();0===s.length?this.jQuery(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled"):this.jQuery(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled"),!window.event||13!==window.event.keyCode&&13!==window.event.which||(e.value?(this.jQuery(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled"),this.options.customView.triggerMethod("field:updated")):s&&0===s.length?this.jQuery(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled"):s&&0!==s.length&&this.options.customView.triggerMethod("field:updated"))}})}),csui.define("hbs!csui/widgets/search.custom/impl/customsearchform",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"1":function(e,s,t,i,o,n){var a;return null!=(a=s.if.call(e,null!=e?e.isSetType:e,{"name":"if","hash":{},"fn":this.program(2,i,0,o,n),"inverse":this.program(4,i,0,o,n),"data":i}))?a:""},"2":function(e,s,t,i,o,n){var a;return'      <div class="binf-col-md-12 cs-form-singlecolumn cs-form-set"\r\n           id="csfSingleCol_'+this.escapeExpression(this.lambda(null!=n[2]?n[2].modelId:n[2],e))+this.escapeExpression((a=null!=(a=s.index||i&&i.index)?a:s.helperMissing,"function"==typeof a?a.call(e,{"name":"index","hash":{},"data":i}):a))+'"></div>\r\n'},"4":function(e,s,t,i,o,n){var a;return'      <div class="binf-col-md-12 cs-form-doublecolumn"\r\n           id="csfLeftCol_'+this.escapeExpression(this.lambda(null!=n[2]?n[2].modelId:n[2],e))+this.escapeExpression((a=null!=(a=s.index||i&&i.index)?a:s.helperMissing,"function"==typeof a?a.call(e,{"name":"index","hash":{},"data":i}):a))+'"></div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i,o,n){var a;return'<div class="binf-row">\r\n'+(null!=(a=s.each.call(e,null!=e?e.fields:e,{"name":"each","hash":{},"fn":this.program(1,i,0,o,n),"inverse":this.noop,"data":i}))?a:"")+"</div>\r\n"},"useData":!0,"useDepths":!0});return t.registerPartial("csui_widgets_search.custom_impl_customsearchform",i),i}),csui.define("hbs!csui/widgets/search.custom/impl/customsearch.item",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){return'<div class="csui-custom-search-formitems"></div>'}});return t.registerPartial("csui_widgets_search.custom_impl_customsearch.item",i),i}),csui.define("csui/widgets/search.custom/impl/search.customFormView",["csui/lib/marionette","csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/widgets/search.custom/impl/form.view","hbs!csui/widgets/search.custom/impl/customsearchform","hbs!csui/widgets/search.custom/impl/customsearch.item"],function(e,s,t,i,o,n,a){return e.ItemView.extend({"tag":"div","className":"customsearch-attr-container","constructor":function(s){s||(s={}),this.options=s,e.ItemView.prototype.constructor.apply(this,arguments),this.model.on("error",this.errorHandle,this)},"template":a,"onRender":function(s){var t=new e.Region({"el":this.$el.find(".csui-custom-search-formitems")}),i=new o({"context":this.options.context,"model":this.model,"layoutMode":"singleCol","mode":"create","customView":this,"templateId":this.model.attributes.data.templateId});t.show(i),this.formView=i},"onRenderForm":function(){this.options.objectView.triggerMethod("render:form")}})}),csui.define("csui/widgets/search.custom/impl/search.customview.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,s,t,i,o,n){var a=t.Model.extend({"constructor":function(e,s){s||(s={}),t.Model.prototype.constructor.call(this,e,s),this.options=s,this.makeConnectable(s).makeFetchable(s)}});return i.mixin(a.prototype),o.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return!!this.options},"url":function(){return n.combine(this.connector.connection.url,"nodes/"+this.options.nodeId+"/customviewsearchforms")},"parse":function(e,s){return e.name=e.text,e}}),a}),csui.define("csui/widgets/search.custom/impl/search.customview.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/widgets/search.custom/impl/search.customview.model"],function(e,s,t,i,o,n){return i.extend({"propertyPrefix":"customSearch","constructor":function(a,r){i.prototype.constructor.apply(this,arguments);var l=this.options.customSearch||{};if(!(l instanceof t.Model)){var c=a.getObject(o,r),h=e.config();l=new n(l.attributes||h.attributes,s.defaults({"connector":c,"nodeId":r.customQuery.nodeId},l.options,h.options))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/widgets/search.custom/impl/search.customquery.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,s,t,i,o,n){var a=t.Model.extend({"constructor":function(e,s){this.options=s||(s={}),t.Model.prototype.constructor.call(this,e,s),this.makeConnectable(s).makeFetchable(s)}});return i.mixin(a.prototype),o.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return this.options.node.isFetchable()},"url":function(){return n.combine(this.connector.connection.url,"searchqueries/"+this.options.savedSearchQueryId)},"parse":function(e,s){return e.name=e.text,e}}),a}),csui.define("csui/widgets/search.custom/impl/search.customquery.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/widgets/search.custom/impl/search.customview.factory","csui/widgets/search.custom/impl/search.customquery.model","csui/utils/contexts/factories/connector"],function(e,s,t,i,o,n,a){return i.extend({"propertyPrefix":"customQuery","widgetID":"","constructor":function(o,r){r||(r={}),i.prototype.constructor.apply(this,arguments),this.options.customQuery=this.options[this.widgetID]||{};var l=this.options.customQuery||{};if(!(l instanceof t.Collection)){var c=o.getObject(a,r),h=e.config();l=new n(l.models,s.extend({"savedSearchQueryId":r.customQuery.savedSearchQueryId,"connector":c},l.options,h.options))}this.property=l},"fetch":function(e){return this.property.fetch(this.options)}})}),csui.define("csui/widgets/search.custom/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.custom/impl/nls/root/lang",{"searchButtonMessage":"Search","title":"Custom View Search"}),csui.define("hbs!csui/widgets/search.custom/impl/customsearch.main",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return'<div class="csui-saved-search-form" id="csui-saved-search-form"></div>\r\n<div class="csui-saved-search-submit-container">\r\n  <button class="binf-btn binf-btn-primary csui-custom-search-form-submit"\r\n          id="csui-custom-search-form-submit" value="Search"> '+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.search:o,e))+" </button>\r\n</div>\r\n"}});return t.registerPartial("csui_widgets_search.custom_impl_customsearch.main",i),i}),csui.define("css!csui/widgets/search.custom/impl/search.custom",[],function(){}),csui.define("csui/widgets/search.custom/impl/search.object.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/widgets/search.custom/impl/search.customFormView","csui/controls/tile/behaviors/blocking.behavior","csui/utils/contexts/factories/search.query.factory","csui/widgets/search.custom/impl/search.customquery.factory","csui/models/mixins/fetchable/fetchable.mixin","i18n!csui/widgets/search.custom/impl/nls/lang","hbs!csui/widgets/search.custom/impl/customsearch.main","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/contexts/factories/next.node","css!csui/widgets/search.custom/impl/search.custom.css"],function(e,s,t,i,o,n,a,r,l,c,h,u,d){return t.CompositeView.extend({"className":"csui-custom-view-search","templateHelpers":function(){return{"messages":{"search":c.searchButtonMessage}}},"behaviors":{"Blocking":{"behaviorClass":n},"PerfectScrolling":{"behaviorClass":u,"contentParent":".csui-saved-search-form","scrollYMarginOffset":15}},"constructor":function(e){e=e||{},e.data||(e.data={}),this.context=e.context,t.CompositeView.prototype.constructor.apply(this,arguments),r.prototype.propertyPrefix=e.data.savedSearchQueryId||e.savedSearchQueryId,r.prototype.widgetID=e.data.savedSearchQueryId||e.savedSearchQueryId,this.model=e.context.getCollection(r,e),this.listenTo(this.model,"sync",this.render),l.mixin(r);var s=this,i=function(){setTimeout(function(){s.triggerMethod("update:scrollbar",this)},500)};this.$el.on({"show.binf.dropdown":i,"hide.binf.dropdown":i,"change input":i,"dp.show":i})},"template":h,"events":{"click #csui-custom-search-form-submit":"loadCustomSearch"},"onRender":function(s){if(this.model.attributes&&this.model.attributes.data){if(this.options.parentView)this.model.get("schema").title?this.options.parentView.options.title=this.model.get("schema").title:this.options.parentView.options.title=this.options.parentView.options.data&&this.options.parentView.options.data.title?this.options.parentView.options.data.title:this.options.parentView.options.title||c.title,this.trigger("change:title");else{var i=this.model.get("schema").title?this.model.get("schema").title:c.title;this.options.titleElement&&(this.options.titleElement.html(i),this.options.titleElement.attr("title",i))}this.options.customValues&&this.updateCustomSearch(this.options.customValues.updatedValues,this.options.customValues.attributes,this.model.get("data")),this.options.objectView=this;var n=new o(e.extend(this.options,{"model":this.model}));new t.Region({"el":this.$el.find("#csui-saved-search-form")}).show(n),this.customFormView=n;var a=e.filter(e.flatten(e.map(this.model.get("data"),e.values)),function(e){return e});a&&0===a.length?this.$(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled"):this.$(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled")}},"onRenderForm":function(){this.triggerMethod("dom:refresh")},"onFieldUpdated":function(){this.loadCustomSearch()},"updateCustomSearch":function(s,t,i){if(s)this.model.attributes.data=e.extend(this.model.attributes.data,s);else if(t){var o=t;e.each(i,function(s,t){s instanceof Object&&e.each(s,function(t,i){t instanceof Object?e.each(t,function(e,s){o[s]&&(t[s]=o[s],delete o[s])}):o[i]&&(s[i]=o[i],delete o[i])})}),e.each(o,function(s,t){if("query_id"!==t){var i=-1!==t.indexOf("__")?t.split("__"):void 0,o={};if(i){var n=-1!==i[0].indexOf("_")?t.split("_"):void 0;if(n){o[t]=s;var a=this.model.attributes.data[n[0]];a[i[0]]=e.extend(a[i[0]],o)}else o[t]=s,this.model.attributes.data[i[0]]=e.extend(this.model.attributes.data[i[0]],o)}else{var r=-1!==t.indexOf("_")?t.split("_"):void 0;o[t]=s,this.model.attributes.data[r[0]]=e.extend(this.model.attributes.data[r[0]],o)}}},this)}},"loadCustomSearch":function(){var s=this.customFormView.formView.customFilter();if(s&&0!==s.length){this.$(".csui-custom-search-form-submit").hasClass("binf-disabled")&&this.$(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled"),this.updatedFormValues=this.customFormView.formView.getValues(),this.queryModel=this.options.query||this.context.getModel(a),this.nextNode=this.context.getModel(d),!this.options.query&&e.isEmpty(this.queryModel.attributes)&&e.isEmpty(this.nextNode.attributes)&&history.pushState({"search":{"name":void 0,"id":void 0}},"",location.href),this.queryModel.clear({"silent":!0}),this.queryModel.updatedValues=this.updatedFormValues;var t={};e.each(this.updatedFormValues,function(s){s instanceof Object&&e.each(s,function(s,i){s instanceof Object?e.each(s,function(e,s){t[s]=e}):t[i]=s})}),t.query_id=this.model.get("data").templateId,this.resetPageDefaults(),this.queryModel.set(t)}else this.$(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled")},"resetPageDefaults":function(){this.queryModel.resetDefaults=!0}})}),csui.define("csui/widgets/search.custom/search.custom.view",["csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/lib/jquery","csui/controls/tile/tile.view","csui/behaviors/default.action/default.action.behavior","csui/widgets/search.custom/impl/search.object.view","i18n!csui/widgets/search.custom/impl/nls/lang"],function(e,s,t,i,o,n,a,r){return o.extend({"constructor":function(s){s||(s={}),s.title=s.title||r.title,s.icon=s.titleBarIcon||"title-customviewsearch",this.context=s.context,o.prototype.constructor.call(this,s),s=s.data?e.extend(s,s.data):s,this.options=s,this.options.parentView=this,this.contentViewOptions=this.options},"contentView":a,"behaviors":{"DefaultAction":{"behaviorClass":n}},"onShow":function(){this.$el.find(".tile-title .csui-heading").html(""),this.listenTo(this.contentView,"change:title",this.updateTitle)},"updateTitle":function(){this.$el.find(".tile-title .csui-heading").html(this.options.title),this.$el.find(".tile-title").attr("title",this.options.title),this.$el.find(".tile-controls").attr("title",this.options.title)}})}),csui.define("csui/widgets/search.results/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/impl/nls/root/lang",{"loadingSearchResultMessage":"Loading search results...","noSearchResultMessage":"No results found","searchQueryKeyboardShortcut":"Press Ctrl+F3 to go to the Search Query box","suggestionKeyword":"Suggestions:","searchSuggestion1":"Make sure all words are spelled correctly.","searchSuggestion2":"Try different keywords.","searchSuggestion3":"Try more general keywords.","searchSuggestion4":"Try broadening or removing the location restriction.","failedSearchResultMessage":"Loading search results failed.","owner":"Owner","created":"Created","createdBy":"Created by","modified":"Modified","size":"Size","type":"Type","items":"Items","searchResults":"Search Results","clearAll":"Clear all","about":"About","expandAll":"Expand all","collapseAll":"Collapse all","relevance":"Relevance","name":"Name","creationDate":"CreationDate","showMore":"Show more","showMoreAria":"Show more metadata","showLess":"Show less","showLessAria":"Show less metadata","selectAll":"Select all results on current page.","selectAllAria":"Select all results on current page","selectItem":"Select {0}","selectItemAria":"Select {0}. When selected an action bar of options can be reached per shift-tab","searchBackTooltip":"Go back","searchBackTooltipTo":"to","searchBackToHome":"Home","versionLabel":"v","versionSeparator":".","filter":"Filter","filterExpandAria":"Show filter panel ","filterCollapseAria":"Hide filter panel ","customSearchTab":"Search","searchFilterTab":"Refine by","mimeTypeAria":"type {0}","itemBreadcrumbAria":"Breadcrumb {0}","formatForNone":"{0} items","formatForOne":"{0} item","formatForTwo":"{0} items","formatForFive":"{0} items"}),csui.define("hbs!csui/widgets/search.results/impl/search.results.header",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"1":function(e,s,t,i){var o;return'    <span class="csui-search-facet-filter-parent">\r\n      <span class="csui-search-filter icon icon-toolbarFilter" role="button"\r\n            aria-label="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.filterAria:o,e))+'" title="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.searchFilterTooltip:o,e))+'"\r\n            tabindex="0" aria-expanded="false"></span>\r\n    </span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return'<div class="csui-search-header">\r\n   <span class="csui-search-arrow-back-parent">\r\n   <span class="icon arrow_back cs-go-back" aria-label="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.searchBackTooltip:o,e))+'"\r\n         title="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.searchBackTooltip:o,e))+'" tabindex="0" role="button"></span>\r\n   </span>\r\n'+(null!=(o=s.if.call(e,null!=(o=null!=e?e.messages:e)?o.enableSearchFilter:o,{"name":"if","hash":{},"fn":this.program(1,i,0),"inverse":this.noop}))?o:"")+'  <div class="csui-search-header-title"></div>\r\n</div>'}});return t.registerPartial("csui_widgets_search.results_impl_search.results.header",i),i}),csui.define("hbs!csui/widgets/search.results/impl/search.results.header.title",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){return'<div class="csui-search-header-title-container csui-fadeout">\r\n  <h2 id="resultsTitle" class="csui-results-title"></h2>\r\n  <div id="customSearchTitle" class="csui-custom-search-title"></div>\r\n</div>\r\n<span id="headerCount" class="headerCount"></span>\r\n<span id="searchHeaderCountLive" role="status" class="binf-sr-only" aria-live="polite"></span>'}});return t.registerPartial("csui_widgets_search.results_impl_search.results.header.title",i),i}),csui.define("csui/widgets/search.results/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/nls/root/lang",{"aboutNHits":"About {0} hits","ToolbarItemReserve":"Reserve","ToolbarItemUnreserve":"Unreserve"}),csui.define("css!csui/widgets/search.results/impl/search.results",[],function(){}),csui.define("csui/widgets/search.results/impl/search.results.header.title.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/widgets/search.results/impl/search.results.header.title","i18n!csui/widgets/search.results/nls/lang","i18n!csui/widgets/search.results/impl/nls/lang","css!csui/widgets/search.results/impl/search.results"],function(e,s,t,i,o){"use strict";return s.ItemView.extend({"template":t,"constructor":function(e){s.ItemView.prototype.constructor.apply(this,arguments)},"ui":{"resultTitle":"#resultsTitle","customSearchTitle":"#customSearchTitle","headerCount":"#headerCount","searchHeaderCountLive":"#searchHeaderCountLive"},"_assignTotalItemElem":function(){this.count=this.options.count||0;var s=e.str.sformat(i.aboutNHits,this.count),t="";return t=0!==this.count?s:o.noSearchResultMessage,this.ui.headerCount.empty(),this.ui.headerCount.append(s),this.countTextAria=o.searchResults+": "+t+". "+o.searchQueryKeyboardShortcut,this.ui.searchHeaderCountLive.text(this.countTextAria),!0},"_updateSearchResultsTitle":function(){var e,s;this.options.useCustomTitle&&this.title?(this.ui.customSearchTitle.text(this.title),s=o.searchResults+": "+this.title,e=o.searchResults+": "):(e=this.options.searchHeaderTitle||o.searchResults,s=e),this.ui.resultTitle.text(e),this.ui.resultTitle.parent().attr("title",s)},"setCustomSearchTitle":function(e){this.title='"'+e+'"',this.ui.customSearchTitle.text(e);var s=o.searchResults+": ";this.ui.resultTitle.text(s),this.ui.resultTitle.parent().attr("title",s+this.title)},"onRender":function(){this._assignTotalItemElem(),this._updateSearchResultsTitle()}})}),csui.define("csui/widgets/search.results/impl/search.results.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/next.node","csui/utils/namedsessionstorage","csui/utils/contexts/factories/search.query.factory","csui/pages/start/perspective.routing","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n!csui/widgets/search.results/impl/nls/lang","hbs!csui/widgets/search.results/impl/search.results.header","csui/utils/contexts/factories/application.scope.factory","csui/widgets/search.results/impl/search.results.header.title.view","css!csui/widgets/search.results/impl/search.results"],function(e,s,t,i,o,n,a,r,l,c,h,u,d){"use strict";return t.ItemView.extend({"className":"csui-search-results-header","template":h,"templateHelpers":function(){return{"messages":{"searchResults":c.searchResults,"clearAll":c.clearAll,"about":c.about,"searchBackTooltip":c.searchBackTooltip,"searchFilterTooltip":c.filter,"filterAria":c.filterExpandAria,"enableSearchFilter":this.options.enableFacetFilter}}},"ui":{"back":".cs-go-back","parent":".csui-search-arrow-back-parent","filter":".csui-search-filter","filterParent":".csui-search-facet-filter-parent","resultTitle":".csui-results-title","searchHeaderTitle":".csui-search-header-title"},"events":{"click @ui.back":"onClickBack","click @ui.parent":"onClickBack","keypress @ui.back":"onClickBack","click @ui.filter":"onClickFilter","keypress @ui.filter":"onClickFilter","click @ui.filterParent":"onClickFilter"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":l}},"currentlyFocusedElement":function(e){var t=this.$("*[tabindex]");return t.length&&t.prop("tabindex",0),e&&e.shiftKey?s(t[t.length-1]):s(t[0]).hasClass("csui-acc-focusable-active")?this.ui.filter:s(t[0])},"namedSessionStorage":new n,"constructor":function(e){e||(e={}),t.View.prototype.constructor.apply(this,arguments),this.collection&&this.listenTo(this.collection,"reset",this.render).listenTo(this.collection,"remove",this._collectionItemRemoved),this.previousNode=e.context.getModel(i).clone(),this.nextNode=e.context.getModel(o),this.searchQuery=e.context.getModel(a),this.applicationScope=e.context.getModel(u),""===this.applicationScope.previous("id")&&this.namedSessionStorage&&this.namedSessionStorage.get("previousNodeId")&&(this.namedSessionStorage.remove("previousNodeName"),this.namedSessionStorage.remove("previousNodeId"))},"initialize":function(){this.titleView=this.options.titleView||new d({})},"onRender":function(){e.extend(this.titleView.options,{"count":this.collection.totalCount,"searchHeaderTitle":this.collection.searching?this.collection.searching.result_title:c.searchResults}),this.titleView.render(),t.triggerMethodOn(this.titleView,"before:show",this.titleView,this),this.ui.searchHeaderTitle.append(this.titleView.el),t.triggerMethodOn(this.titleView,"show",this.titleView,this),this.collection.length?(this.ui.back.addClass("search_results_data"),this.ui.filter.addClass("search_results_data")):(this.ui.back.addClass("search_results_nodata"),this.ui.filter.addClass("search_results_nodata")),this.rendered=!0,this.$el.show(),this.options.enableBackButton?(this.ui.back.attr("title",this.options.backButtonToolTip),this.ui.back.attr("aria-label",this.options.backButtonToolTip)):r.getInstance(this.options).hasRouted()||history.state||this.previousNode.get("id")||this.namedSessionStorage&&this.namedSessionStorage.get("previousNodeId")?this._setBackButtonTitle():(this.ui.back.hide(),this.ui.parent.hide())},"onBeforeDestroy":function(){this.titleView.destroy()},"_setBackButtonTitle":function(){var e;void 0!==this.searchQuery.attributes.location_id1||this.previousNode.get("id")||this.namedSessionStorage&&this.namedSessionStorage.get("previousNodeId")?this.previousNode.get("id")?(e=this.previousNode.get("name"),this.namedSessionStorage.set("previousNodeName",this.previousNode.get("name")),this.namedSessionStorage.set("previousNodeId",this.previousNode.get("id"))):e=this.namedSessionStorage.get("previousNodeName"):(e=c.searchBackToHome,this.namedSessionStorage=null),this.ui.back.attr("title",c.searchBackTooltip+" "+c.searchBackTooltipTo+" '"+e+"'"),this.ui.back.attr("aria-label",c.searchBackTooltip+" "+c.searchBackTooltipTo+" '"+e+"'")},"setCustomSearchTitle":function(e){!!this.titleView.setCustomSearchTitle&&this.titleView.setCustomSearchTitle(e)},"_collectionItemRemoved":function(){var e=this.collection.totalCount;this.collection.totalCount=--this.totalCount,this.render(),this.collection.totalCount=e},"onClickBack":function(e){("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(this.options.enableBackButton?(e.stopPropagation(),this.trigger("go:back")):this.previousNode.get("id")||this.namedSessionStorage&&this.namedSessionStorage.get("previousNodeId")?this.nextNode.set("id",this.namedSessionStorage.get("previousNodeId")):this.applicationScope.set("id",""))},"onClickFilter":function(e){("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&this.options.enableFacetFilter&&(e.stopPropagation(),this.trigger("toggle:filter",this.options.originatingView),this.trigger("focus:filter",this.options.originatingView))}})}),csui.define("csui/widgets/search.results/controls/sorting/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/controls/sorting/impl/nls/root/localized.strings",{"sortBy":"Sort by...","sortByThis":"Sort by {0}","sortOptionsAria":"Sort options","ascending":"{0}: Click to sort ascending","descending":"{0}: Click to sort descending"}),csui.define("hbs!csui/widgets/search.results/controls/sorting/impl/sort.menu",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"1":function(e,s,t,i){var o;return'  <div class="csui-search-sort-options ">\r\n    <button id="'+this.escapeExpression((o=null!=(o=s.id||(null!=e?e.id:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"id","hash":{}}):o))+'" type="button" class="binf-btn binf-btn-default binf-dropdown-toggle"\r\n            data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="'+this.escapeExpression((o=null!=(o=s.sortButtonAria||(null!=e?e.sortButtonAria:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"sortButtonAria","hash":{}}):o))+'">\r\n      <span class="cs-label">'+this.escapeExpression((o=null!=(o=s.title||(null!=e?e.title:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'</span>\r\n      <span class="cs-icon icon-caret-down"></span>\r\n    </button>\r\n    <ul class="binf-dropdown-menu" role="menu" aria-label="'+this.escapeExpression((o=null!=(o=s.listAria||(null!=e?e.listAria:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"listAria","hash":{}}):o))+'"></ul>\r\n  </div>\r\n  <a href="javascript:void(0);" id="search-sort-btn" class="cs-icon icon-sortArrowDown"></a>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return null!=(o=s.if.call(e,null!=e?e.sortEnable:e,{"name":"if","hash":{},"fn":this.program(1,i,0),"inverse":this.noop}))?o:""}});return t.registerPartial("csui_widgets_search.results_controls_sorting_impl_sort.menu",i),i}),csui.define("csui/widgets/search.results/controls/sorting/sort.menu.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","i18n!csui/widgets/search.results/controls/sorting/impl/nls/localized.strings","hbs!csui/widgets/search.results/controls/sorting/impl/sort.menu","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/lib/binf/js/binf"],function(e,s,t,i,o,n,a,r,l,c,h){return n.ItemView.extend({"className":"cs-sort-links","template":l,"templateHelpers":function(){var e={"sortBy":r.sortBy};this.selected.get("title")?this.selected.get("title"):this.constants.DEFAULT_SORT;return{"messages":e,"sortEnable":!!this.collection.sorting,"id":i.uniqueId("sortButton"),"sortButtonAria":r.sortOptionsAria,"listAria":r.sortOptionsAria}},"constants":{"SORT_ASC":"asc","SORT_DESC":"desc","DEFAULT_SORT":"relevance"},"events":{"click .binf-dropdown-menu > li > a":"onSortOptionClick","click #search-sort-btn":"onSortOrderClick","keydown":"onKeyInView"},"ui":{"toggle":">.csui-search-sort-options>.binf-dropdown-toggle","selectedLabel":">.csui-search-sort-options>.binf-dropdown-toggle >.cs-label","selectedIcon":">.csui-search-sort-options>.binf-dropdown-toggle >.cs-icon","sortOrderBtn":"#search-sort-btn"},"constructor":function(e){n.View.prototype.constructor.apply(this,arguments),this.config=this.options.config||{},this.selected=new o.Model,this.collection&&(this.collection.setOrder(this.options.orderBy,!1),this.listenTo(this.collection,"reset",this.render)),this.listenTo(this.collection,"change",this._refreshSelection),this.listenTo(this.selected,"change",this._updateSelection)},"onRender":function(){if(this.ui.toggle.binf_dropdown(),this.ui.sortOrderBtn.hide(),void 0!==this.collection.sorting)if(this.collection.sorting.sort?(this._setSelection(this.collection.sorting.links[this.collection.sorting.sort]),this._addDropdownItems(this.collection.sorting.links,this.collection.sorting.sort[0]),this.ui.sortOrderBtn.show()):(this._setSelection(this.collection.sorting.links[this.constants.DEFAULT_SORT]),this._addDropdownItems(this.collection.sorting.links,""),this.$el.find(".binf-dropdown-menu > :first-child").addClass("binf-active"),this.$el.find(".binf-dropdown-menu > :first-child .cs-icon").addClass("icon-listview-checkmark"),this.ui.sortOrderBtn.hide()),this.ui.selectedLabel.text(this.selected.get("title")),this.selected.get("order")===this.constants.SORT_ASC){this.ui.sortOrderBtn.removeClass("icon-sortArrowDown"),this.ui.sortOrderBtn.addClass("icon-sortArrowUp");var e=i.str.sformat(r.descending,this.selected.get("title"));this.ui.sortOrderBtn.attr("title",e).attr("aria-label",e)}else{this.ui.sortOrderBtn.removeClass("icon-sortArrowUp"),this.ui.sortOrderBtn.addClass("icon-sortArrowDown");var s=i.str.sformat(r.ascending,this.selected.get("title"));this.ui.sortOrderBtn.attr("title",s).attr("aria-label",s)}},
"onKeyInView":function(e){9===e.keyCode&&!!this.$el.find(".binf-open")&&this.$el.find(".binf-open").removeClass("binf-open")},"behaviors":{"PerfectScrolling":{"behaviorClass":c,"contentParent":".binf-dropdown-menu","suppressScrollX":!0},"TabableRegionBehavior":{"behaviorClass":h}},"currentlyFocusedElement":function(e){var s=this.$("*[tabindex]");return s.length&&s.prop("tabindex",0),e&&e.shiftKey?t(s[s.length-1]):this.orderClicked?this.ui.sortOrderBtn:t(s[0])},"_setSelection":function(e){var s={};this.collection.sorting.sort?(0===this.collection.sorting.sort[0].indexOf(this.constants.SORT_DESC)&&(s.id=this.collection.sorting.sort[0].replace(/desc_/g,""),s.order=this.constants.SORT_DESC),0===this.collection.sorting.sort[0].indexOf(this.constants.SORT_ASC)&&(s.id=this.collection.sorting.sort[0].replace(/asc_/g,""),s.order=this.constants.SORT_ASC)):(s.id="",s.order=this.constants.SORT_DESC),s.title=i.str.trim(e&&e.name?this.trimSortOptionName(e.name):"empty");var t=i.str.sformat(r.sortByThis,s.title);this.$el.find(".csui-search-sort-options \t.binf-dropdown-toggle").attr("title",t),this.selected.set(s)},"_updateSelection":function(){this.ui.selectedLabel.text(this.selected.get("title"))},"_refreshSelection":function(e){e.get("id")===this.selected.get("id")&&this._setSelection(e)},"resetCollection":function(e,s){this.collection.setOrder(e,!0)},"sortPage":function(e){e.preventDefault(),e.stopPropagation();var s=[];""!==e.currentTarget.id?s.push(e.currentTarget.id+" "+this.constants.SORT_DESC):s.push(e.currentTarget.id),this.resetCollection(s.join(),!0)},"_addDropdownItems":function(e,s){var t=this.$el.find(".binf-dropdown-menu"),i=this;e[this.constants.DEFAULT_SORT]&&(t.append('<li role="presentation"><a role="menuitem" href="#" class="csui-sort-option" data-binf-toggle="tab"><span class="cs-icon"></span><span class="cs-label" title="'+i.trimSortOptionName(e[i.constants.DEFAULT_SORT].name)+'">'+i.trimSortOptionName(e[i.constants.DEFAULT_SORT].name)+"</span></a></li>"),delete e[i.constants.DEFAULT_SORT]);for(var o in e)0===o.search("asc_")?delete e[o]:s.split(/_(.+)/,2)[1]===o.split(/_(.+)/,2)[1]?t.append('<li role="presentation" class="binf-active"><a role="menuitem" id="'+o.replace(/desc_/g,"")+'" href="#" class="csui-sort-option" data-binf-toggle="tab"><span class="cs-icon icon-listview-checkmark"></span><span class="cs-label" title="'+i.trimSortOptionName(e[o].name)+'">'+i.trimSortOptionName(e[o].name)+"</span></a></li>"):t.append('<li role="presentation"><a role="menuitem" id="'+o.replace(/desc_/g,"")+'" href="#" class="csui-sort-option" data-binf-toggle="tab"><span class="cs-icon"></span><span class="cs-label" title="'+i.trimSortOptionName(e[o].name)+'">'+i.trimSortOptionName(e[o].name)+"</span></a></li>")},"activate":function(e){!0===this.$el.find("li").hasClass("binf-active")&&(this.$el.find("li").removeClass("binf-active"),this.$el.find("li .cs-icon").removeClass("icon-listview-checkmark")),t(e.parentElement).addClass("binf-active"),t(e).find("span.cs-icon").addClass("icon-listview-checkmark")},"resetSelection":function(e,s){var t={};t.id=e,t.title=i.str.trim(s),t.order=this.constants.SORT_DESC,this.selected.set(t)},"onSortOptionClick":function(e){e.preventDefault(),e.stopPropagation(),this.ui.sortOrderBtn.hide(),this.orderClicked=!1,this.activate(e.currentTarget),this.resetSelection(e.currentTarget.id,e.currentTarget.children[1].innerHTML),this.sortPage(e),this.ui.toggle.binf_dropdown("toggle")},"onSortOrderClick":function(e){e.preventDefault(),e.stopPropagation(),this.orderClicked=!0;var s=[];this.ui.sortOrderBtn.hasClass("icon-sortArrowDown")?(this.ui.sortOrderBtn.removeClass("icon-sortArrowDown"),this.ui.sortOrderBtn.addClass("icon-sortArrowUp"),s.push(this.selected.id+" "+this.constants.SORT_ASC)):(this.ui.sortOrderBtn.removeClass("icon-sortArrowUp"),this.ui.sortOrderBtn.addClass("icon-sortArrowDown"),s.push(this.selected.id+" "+this.constants.SORT_DESC)),this.collection.setOrder(s.join(),!0)},"trimSortOptionName":function(e){return e.replace(/\(([;\s\w\"\=\,\:\.\/\~\{\}\?\!\-\%\&\#\$\^\(\)]*?)\)/g,"")}})}),csui.define("csui/widgets/search.results/impl/toolbaritems",["csui/lib/underscore","module","csui-ext!csui/widgets/search.results/impl/toolbaritems"],function(e,s,t){return t&&e.each(t,function(e){}),t}),csui.define("csui/widgets/search.results/toolbaritems",["csui/lib/underscore","i18n!csui/widgets/search.results/nls/lang","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/search.results/toolbaritems","csui/widgets/search.results/impl/toolbaritems"],function(e,s,t,i,o,n,a){"use strict";function r(s){e.each(s,function(s){e.each(s,function(s,t){var i=l[t];if(!i)throw new Error("Invalid target toolbar: "+t);e.each(s,function(e){e=new o(e),i.addItem(e)})})})}var l={"filterToolbar":new i({"filter":[{"signature":"Filter","name":t.ToolbarItemFilter,"icon":"icon icon-toolbarFilter"}]},{"addTrailingDivider":!1}),"otherToolbar":new i({"info":[{"signature":"Properties","name":t.ToolbarItemInfo,"icon":"icon icon-toolbar-metadata"}],"share":[{"signature":"CopyLink","name":t.ToolbarItemCopyLink},{"signature":"Share","name":t.ToolbarItemShare,"flyout":"share","group":"share"},{"signature":"EmailLink","name":t.ToolbarItemEmailLink,"flyout":"share","promoted":!0,"group":"share"}],"edit":[{"signature":"Edit","name":t.ToolbarItemEdit,"flyout":"edit","promoted":!0},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"main":[{"signature":"permissions","name":t.ToolbarItemPermissions},{"signature":"Download","name":t.ToolbarItemDownload},{"signature":"ReserveDoc","name":s.ToolbarItemReserve},{"signature":"UnreserveDoc","name":s.ToolbarItemUnreserve},{"signature":"Copy","name":t.ToolbarItemCopy},{"signature":"Move","name":t.ToolbarItemMove},{"signature":"AddVersion","name":t.ToolbarItemAddVersion},{"signature":"Delete","name":t.ToolbarItemDelete}]},{"maxItemsShown":5,"dropDownText":t.ToolbarItemMore,"dropDownIcon":"icon icon-toolbar-more","addGroupSeparators":!1,"lazyActions":!0}),"inlineToolbar":new i({"info":[{"signature":"Properties","name":t.ToolbarItemInfo,"icon":"icon icon-toolbar-metadata"}],"share":[{"signature":"CopyLink","name":t.ToolbarItemCopyLink,"icon":"icon icon-toolbar-copylink"}],"edit":[{"signature":"Edit","name":t.ToolbarItemEdit,"icon":"icon icon-toolbar-edit"}],"other":[{"signature":"permissions","name":t.ToolbarItemPermissions,"icon":"icon icon-toolbar-permissions"},{"signature":"Download","name":t.ToolbarItemDownload,"icon":"icon icon-toolbar-download"},{"signature":"ReserveDoc","name":s.ToolbarItemReserve,"icon":"icon icon-toolbar-reserve"},{"signature":"UnreserveDoc","name":s.ToolbarItemUnreserve,"icon":"icon icon-toolbar-unreserve"},{"signature":"Copy","name":t.ToolbarItemCopy,"icon":"icon icon-toolbar-copy"},{"signature":"Move","name":t.ToolbarItemMove,"icon":"icon icon-toolbar-move"},{"signature":"AddVersion","name":t.ToolbarItemAddVersion,"icon":"icon icon-toolbar-add-version"},{"signature":"Delete","name":t.ToolbarItemDelete,"icon":"icon icon-toolbar-delete"}]},{"maxItemsShown":6,"dropDownText":t.ToolbarItemMore,"dropDownIcon":"icon icon-toolbar-more","addGroupSeparators":!1}),"versionToolItems":["properties","open","download","delete"]};return a&&r(a),n&&r(n),l}),csui.define("csui/widgets/search.results/toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,s,t,i){"use strict";function o(){var o=e.config(),a=new i;this.toolbars=s.reduce(n,function(e,i){var n=new t(a,{"normalize":!1});return s.each(o,function(e,s){(e=e[i])&&n.extendMask(e)}),n.storeMask(),e[i]=n,e},{})}var n=["otherToolbar","inlineToolbar"];return o.toolbars=n,o}),csui.define("hbs!csui/widgets/search.results/controls/expandall/impl/expandall",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return'<div class="csui-search-expandall-wrapper">\r\n  <div class="csui-search-expandall-text">'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.expandAll:o,e))+'</div>\r\n  <button class="csui-search-header-expand-all icon-expandArrowDown"\r\n     aria-label="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.expandAll:o,e))+'" title="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.expandAll:o,e))+'" aria-pressed="false"></button>\r\n</div>'}});return t.registerPartial("csui_widgets_search.results_controls_expandall_impl_expandall",i),i}),csui.define("css!csui/widgets/search.results/controls/expandall/impl/expandall",[],function(){}),csui.define("csui/widgets/search.results/controls/expandall/expandall.view",["csui/lib/jquery","csui/lib/marionette","hbs!csui/widgets/search.results/controls/expandall/impl/expandall","i18n!csui/widgets/search.results/impl/nls/lang","css!csui/widgets/search.results/controls/expandall/impl/expandall"],function(e,s,t,i){return s.ItemView.extend({"template":t,"templateHelpers":function(){return{"messages":{"expandAll":i.expandAll}}},"events":{"click .icon-expandArrowDown, .icon-expandArrowUp":"expandAll"},"ui":{"expandAllSelector":".csui-search-header-expand-all"},"expandAll":function(s){if(this.collection.length>0){var t=this;this.ui.expandAllSelector[0].classList.contains(this.options._eleCollapse)?(e(".csui-search-expandall-text").html(i.expandAll),e(".csui-expand-all").removeClass("csui-collapse-all"),this.ui.expandAllSelector.removeClass(this.options._eleCollapse).addClass(this.options._eleExpand).attr("title",i.expandAll).attr("aria-pressed","false"),this.options.view.$el.find("."+this.options._eleCollapse).each(function(s){e(this).trigger("click")}),this.options.view.options.layoutView&&this.options.view.options.layoutView.updateScrollbar()):(e(".csui-search-expandall-text").html(i.collapseAll),e(".csui-expand-all").addClass("csui-collapse-all"),this.ui.expandAllSelector.removeClass(this.options._eleExpand).addClass(this.options._eleCollapse).attr("title",i.collapseAll).attr("aria-pressed","true"),this.options.view.$el.find("."+this.options._eleExpand).each(function(s){e(this)[0].classList.contains(t.options._eleCollapse)||e(this).trigger("click")})),s.preventDefault(),s.stopPropagation()}},"pageChange":function(){this.ui.expandAllSelector[0].classList.contains(this.options._eleCollapse)&&(this.ui.expandAllSelector.removeClass(this.options._eleCollapse).addClass(this.options._eleExpand),e(".csui-search-expandall-text").html(i.expandAll))}})}),csui.define("hbs!csui/widgets/search.results/impl/metadata/search.metadata",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return'<span class="csui-search-metadata binf-col-lg-4 binf-col-md-4 binf-col-sm-4\r\n                    binf-col-xs-4" title="'+this.escapeExpression((o=null!=(o=s.label||(null!=e?e.label:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"label","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=s.label||(null!=e?e.label:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"label","hash":{}}):o))+'</span>\r\n<span class="csui-search-metadata-spacer binf-col-lg-1 binf-col-md-1 binf-col-sm-1\r\n     binf-col-xs-1"></span>\r\n<span class="searchDetails binf-col-lg-7 binf-col-md-7 binf-col-sm-7\r\n                    binf-col-xs-7" title="'+this.escapeExpression((o=null!=(o=s.tooltipText||(null!=e?e.tooltipText:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"tooltipText","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=s.value||(null!=e?e.value:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"value","hash":{}}):o))+"</span>\r\n"}});return t.registerPartial("csui_widgets_search.results_impl_metadata_search.metadata",i),i}),csui.define("csui/widgets/search.results/impl/metadata/search.metadata.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","i18n!csui/widgets/search.results/impl/nls/lang","hbs!csui/widgets/search.results/impl/metadata/search.metadata","css!csui/widgets/search.results/impl/search.results"],function(e,s,t,i,o,n,a){"use strict";var r=i.ItemView.extend({"className":"csui-search-item-details binf-col-lg-12","template":a,"templateHelpers":function(){var e=0;e=this.options.searchItemModel.get("description").length>0||this.options.searchItemModel.get("summary").length>0?3:2,this._index<e?this._index<2&&this.$el.addClass("csui-search-result-item-tobe-hide"):this.$el.addClass("csui-search-hidden-items truncated-"+this.options.rowId),this.$el.attr("role","listitem");var s=this.getValueData();return{"label":this.model.get("column_name"),"value":s.formattedValue,"tooltipText":s.value}},"getValueData":function(){var e=this.options.searchItemModel,s=this.model.get("key"),t=this.model.get("column_type"),i=e.get(s),a=i;if("size"===s){var r=e.get("type");if(a=e.get(s+"_formatted"),null===i)return"";e.get("container")&&202!==r&&899!==r?i=a=o.formatMessage(i,n):144!==r&&749!==r&&736!==r&&30309!==r||(a=o.formatFriendlyFileSize(i),i=o.formatExactFileSize(i))}return"date"===t&&(i=a=o.formatExactDateTime(i)),{"value":i,"formattedValue":a}}});return i.CollectionView.extend({"className":"csui-search-items-metadata","childView":r,"ui":{"fieldsToBeHiddenOnHover":".csui-search-result-item-tobe-hide"},"childViewOptions":function(){return{"rowId":this.options.rowId,"searchItemModel":this.model}},"filter":function(e,s,t){return"size"===e.get("key")?this.model.get(e.get("key"))&&""!==this.model.get(e.get("key")+"_formatted"):this.model.get(e.get("key"))&&""!==this.model.get(e.get("key"))},"onRender":function(){this.collection;this.bindUIElements()}})}),csui.define("hbs!csui/widgets/search.results/impl/search.results",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"1":function(e,s,t,i){var o;return'          <div class="csui-search-left-panel-tabs">\r\n            <ul>\r\n              <li class="csui-tab csui-search-custom-tab">\r\n                <a title="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.customSearchTab:o,e))+'" tabindex="0">\r\n                  <span>'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.customSearchTab:o,e))+'</span>\r\n                </a>\r\n              </li>\r\n              <li class="csui-tab csui-search-facet-tab">\r\n                <a title="'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.searchFilterTab:o,e))+'" tabindex="0">\r\n                  <span>'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.searchFilterTab:o,e))+"</span>\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n"},"3":function(e,s,t,i){return'            <div class="csui-search-results-custom">\r\n              <div id="csui-search-custom-container"></div>\r\n            </div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return'\x3c!-- TODO: need to apply localization --\x3e\r\n<div id="header"></div>\r\n<div class="binf-container-fluid">\r\n  <div class="csui-facet-table-container">\r\n    <div class="csui-search-left-panel csui-popover-panel csui-is-hidden">\r\n      <div class="csui-popover-panel-container">\r\n'+(null!=(o=s.if.call(e,null!=(o=null!=e?e.messages:e)?o.enableCustomSearch:o,{"name":"if","hash":{},"fn":this.program(1,i,0),"inverse":this.noop}))?o:"")+'        <div class="csui-search-left-panel-content">\r\n'+(null!=(o=s.if.call(e,null!=(o=null!=e?e.messages:e)?o.enableCustomSearch:o,{"name":"if","hash":{},"fn":this.program(3,i,0),"inverse":this.noop}))?o:"")+'          <div id="facetview" class="csui-facetview"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-search-results-body binf-col-lg-12 binf-col-md-12 binf-col-xs-12">\r\n      <div id="csui-search-custom-results">\r\n        <div class="csui-search-results-content binf-col-lg-12 binf-col-md-12">\r\n          <div id="facetbarview"></div>\r\n          <div\r\n              class="csui-search-tool-container binf-hidden binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n            <div\r\n                class="csui-search-header-left-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n              <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n                <div id="selectAllCheckBox" class="csui-select-all csui-search-item-check"></div>\r\n                <div id="toolbar"\r\n                     class="csui-search-toolbar binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n              </div>\r\n            </div>\r\n            <div class="csui-search-header-right-actions">\r\n              <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n                <div\r\n                    class="csui-search-sorting binf-col-lg-6 binf-col-md-6 binf-col-sm-6 binf-col-xs-6"\r\n                    id="csui-search-sort"></div>\r\n                <div class="csui-expand-all binf-col-lg-6 binf-col-md-6 binf-col-sm-6 binf-col-xs-6"\r\n                     id="expandAllArrow"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id="results" tabindex="-1"\r\n               class="csui-result-list binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n          <div\r\n              class="csui-search-row-divider binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n        </div>\r\n\r\n        <div id="pagination"\r\n             class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return t.registerPartial("csui_widgets_search.results_impl_search.results",i),i}),csui.define("hbs!csui/widgets/search.results/impl/search.result",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"1":function(e,s,t,i){var o;return null!=(o=(s.xif||e&&e.xif||s.helperMissing).call(e,"this.search_result_metadata.current_version === false || this\r\n                .search_result_metadata.version_type ==='minor' ",{"name":"xif","hash":{},"fn":this.program(2,i,0),"inverse":this.noop}))?o:""},"2":function(e,s,t,i){var o;return null!=(o=s.if.call(e,null!=e?e.versions:e,{"name":"if","hash":{},"fn":this.program(3,i,0),"inverse":this.noop}))?o:""},"3":function(e,s,t,i){var o,n;return'                    <div class="csui-search-results-version csui-search-item-version-'+this.escapeExpression((n=null!=(n=s.cid||(null!=e?e.cid:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"cid","hash":{}}):n))+'">\r\n                      <a href="javascript:void(0);" class="csui-search-version-label">'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.versionLabel:o,e))+" "+this.escapeExpression(this.lambda(null!=(o=null!=e?e.versions:e)?o.version_number_name:o,e))+"\r\n                      </a>\r\n                    </div>\r\n"},"5":function(e,s,t,i){var o;return'            <div class="csui-search-item-breadcrumb csui-search-item-breadcrumb-'+this.escapeExpression((o=null!=(o=s.cid||(null!=e?e.cid:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"cid","hash":{}}):o))+'"></div>\r\n            <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n'},"7":function(e,s,t,i){return""},"9":function(e,s,t,i){var o;return"              "+this.escapeExpression((o=null!=(o=s.description||(null!=e?e.description:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"description","hash":{}}):o))+"\r\n"},"11":function(e,s,t,i){var o;return'              <div class="csui-search-item-action-'+this.escapeExpression((o=null!=(o=s.cid||(null!=e?e.cid:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"cid","hash":{}}):o))+"-"+this.escapeExpression((o=null!=(o=s.version_id||(null!=e?e.version_id:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"version_id","hash":{}}):o))+' csui-search-item-inline-actions"></div>\r\n'},"13":function(e,s,t,i){var o;return'              <div class="csui-search-item-action-'+this.escapeExpression((o=null!=(o=s.cid||(null!=e?e.cid:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"cid","hash":{}}):o))+' csui-search-item-inline-actions"></div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o,n;return'<div class="csui-search-item-row-wrapper csui-search-item-complete-row binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="csui-search-item-row binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <h3 class="csui-search-item-hide-h3">'+this.escapeExpression((n=null!=(n=s.name||(null!=e?e.name:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+'</h3>\r\n    <div class="csui-search-item-check"></div>\r\n    <div class="csui-search-item-icon '+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.inactiveclass:o,e))+'">\r\n      <span class="csui-type-icon"></span>\r\n    </div>\r\n    <div class="csui-search-col2 binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="csui-search-item-left-panel binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n        <div class="csui-search-item">\r\n          <div class="">\r\n            <div class="csui-search-item-name ">\r\n              <a href='+this.escapeExpression((n=null!=(n=s.defaultActionUrl||(null!=e?e.defaultActionUrl:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"defaultActionUrl","hash":{}}):n))+' aria-label="'+this.escapeExpression((n=null!=(n=s.name||(null!=e?e.name:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+" "+this.escapeExpression((n=null!=(n=s.mimeTypeAria||(null!=e?e.mimeTypeAria:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"mimeTypeAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=s.name||(null!=e?e.name:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+'"\r\n                 class="csui-search-item-link '+this.escapeExpression(this.lambda(null!=(o=null!=e?e.messages:e)?o.inactiveclass:o,e))+'">'+this.escapeExpression((n=null!=(n=s.name||(null!=e?e.name:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+"</a>\r\n"+(null!=(o=s.if.call(e,null!=e?e.search_result_metadata:e,{"name":"if","hash":{},"fn":this.program(1,i,0),"inverse":this.noop}))?o:"")+'              <div class="csui-icon csui-search-results-reservation csui-search-item-reservation\r\n                  csui-search-item-reservation-'+this.escapeExpression((n=null!=(n=s.cid||(null!=e?e.cid:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"cid","hash":{}}):n))+'"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="csui-search-item-content-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(o=s.if.call(e,null!=(o=null!=e?e.messages:e)?o.enableBreadcrumb:o,{"name":"if","hash":{},"fn":this.program(5,i,0),"inverse":this.noop}))?o:"")+'          <p class="csui-search-item-desc csui-overflow-description binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(o=s.if.call(e,null!=e?e.summary:e,{"name":"if","hash":{},"fn":this.program(7,i,0),"inverse":this.program(9,i,0)}))?o:"")+'          </p>\r\n        </div>\r\n        <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12\r\n        binf-col-xs-12 csui-search-row-spacer-divider"></div>\r\n      </div>\r\n      <div class="csui-search-item-center-panel binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n      <div class="csui-search-item-right-panel">\r\n        <div class="csui-search-item-control-'+this.escapeExpression((n=null!=(n=s.cid||(null!=e?e.cid:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"cid","hash":{}}):n))+' binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <div class="csui-search-toolbar-container binf-hidden binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(o=s.if.call(e,null!=e?e.version_id:e,{"name":"if","hash":{},"fn":this.program(11,i,0),"inverse":this.program(13,i,0)}))?o:"")+'          </div>\r\n          <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n          <div role="list" class="csui-search-item-details-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-search-item-action-panel csui-search-item-action-panel-'+this.escapeExpression((n=null!=(n=s.cid||(null!=e?e.cid:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"cid","hash":{}}):n))+'">\r\n      <div class="csui-search-item-fav search-fav-'+this.escapeExpression((n=null!=(n=s.cid||(null!=e?e.cid:e))?n:s.helperMissing,"function"==typeof n?n.call(e,{"name":"cid","hash":{}}):n))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>'}});return t.registerPartial("csui_widgets_search.results_impl_search.result",i),i}),csui.define("hbs!csui/widgets/search.results/impl/search.empty",["module","hbs","csui/lib/handlebars"],function(e,s,t){var i=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,s,t,i){var o;return'<div class="csui-no-result-message-wrapper">\r\n    <p class="csui-no-result-message" title="'+this.escapeExpression((o=null!=(o=s.message||(null!=e?e.message:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"message","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=s.message||(null!=e?e.message:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"message","hash":{}}):o))+'</p>\r\n    <div class="csui-display-hide">\r\n        <ul class="csui-search-suggestion-list">\r\n            <li>'+this.escapeExpression((o=null!=(o=s.searchSuggestion1||(null!=e?e.searchSuggestion1:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"searchSuggestion1","hash":{}}):o))+"</li>\r\n            <li>"+this.escapeExpression((o=null!=(o=s.searchSuggestion2||(null!=e?e.searchSuggestion2:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"searchSuggestion2","hash":{}}):o))+"</li>\r\n            <li>"+this.escapeExpression((o=null!=(o=s.searchSuggestion3||(null!=e?e.searchSuggestion3:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"searchSuggestion3","hash":{}}):o))+"</li>\r\n            <li>"+this.escapeExpression((o=null!=(o=s.searchSuggestion4||(null!=e?e.searchSuggestion4:e))?o:s.helperMissing,"function"==typeof o?o.call(e,{"name":"searchSuggestion4","hash":{}}):o))+"</li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n"}});return t.registerPartial("csui_widgets_search.results_impl_search.empty",i),i}),csui.define("csui/widgets/search.results/search.results.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.results.factory","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/widgets/search.results/impl/search.results.header.view","csui/controls/tabletoolbar/tabletoolbar.view","csui/controls/pagination/nodespagination.view","csui/widgets/search.results/controls/sorting/sort.menu.view","csui/controls/progressblocker/blocker","csui/widgets/search.results/toolbaritems","csui/widgets/search.results/toolbaritems.masks","csui/controls/table/cells/favorite/favorite.view","csui/controls/checkbox/checkbox.view","csui/widgets/search.results/controls/expandall/expandall.view","csui/controls/table/cells/reservation/reservation.view","csui/widgets/search.custom/impl/search.object.view","csui/utils/contexts/factories/search.metadata.factory","csui/widgets/search.results/impl/metadata/search.metadata.view","csui/controls/globalmessage/globalmessage","i18n!csui/widgets/search.results/impl/nls/lang","csui/controls/tableactionbar/tableactionbar.view","csui/utils/nodesprites","csui/controls/node-type.icon/node-type.icon.view","csui/controls/breadcrumbs/breadcrumbs.view","csui/models/nodeancestors","csui/utils/contexts/factories/node","csui/models/node/node.model","csui/models/nodes","csui/utils/commands/properties","csui/behaviors/default.action/default.action.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/toolbar/toolbar.command.controller","hbs!csui/widgets/search.results/impl/search.results","hbs!csui/widgets/search.results/impl/search.result","hbs!csui/widgets/search.results/impl/search.empty","csui/utils/defaultactionitems","csui/utils/commands","csui/dialogs/modal.alert/modal.alert","csui/controls/facet.panel/facet.panel.view","csui/controls/facet.bar/facet.bar.view","csui/utils/node.links/node.links","csui/lib/handlebars.helpers.xif","css!csui/widgets/search.results/impl/search.results","csui/lib/jquery.mousehover"],function(e,s,t,i,o,n,a,r,l,c,h,u,d,m,p,f,b,g,w,v,y,S,x,C,_,T,V,k,A,R,I,F,M,B,E,D,O,P,$,j,N,q,H,L,Q,U){"use strict";var z=s.extend({"enableFacetFilter":!0,"enableBreadcrumb":!0},e.config()),W=o.ItemView.extend({"className":"csui-empty","template":j,"constructor":function(e){o.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",this.render)}}),K=o.LayoutView.extend({"className":"binf-list-group-item binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12","template":$,"regions":{"favRegion":".csui-search-item-fav","selectionRegion":".csui-search-item-check","searchMetadataRegion":".csui-search-item-details-wrapper","breadcrumbRegion":".csui-search-item-breadcrumb","reservationRegion":".csui-search-item-reservation"},"ui":{"descriptionField":".csui-overflow-description","modifiedByField":".csui-search-modified-by","metadataDetails":".csui-search-item-details","inlineToolbarContainer":".csui-search-toolbar-container","inlineToolbar":".csui-search-item-row"},"events":{"click .csui-search-item-link":"openSearchItem","click .csui-search-version-label":"openVersionHistory","click .icon-expandArrowUp":"showMetadataInfo","click .icon-expandArrowDown":"hideMetadataInfo"},"templateHelpers":function(){var e=this.options.defaultActionController,t=e.hasAction.bind(e),i=t(this.model)?"":"csui-search-no-default-action",o={"created":_.created,"createdby":_.createdBy,"modified":_.modified,"owner":_.owner,"type":_.type,"items":_.items,"showMore":_.showMore,"showLess":_.showLess,"versionLabel":_.versionLabel,"versionSeparator":_.versionSeparator,"inactiveclass":i,"enableBreadcrumb":z.enableBreadcrumb},n=U.getUrl(this.model),a=this.model.attributes.ancestors&&this.model.attributes.ancestors.length>0?this.model.attributes.ancestors.slice(-1)[0]:void 0,r=a&&a.attributes?a.attributes.name:void 0;return{"showOwner":this.model.attributes.hasOwnProperty("owner_user_id"),"messages":o,"defaultActionUrl":n,"cid":this.cid,"itemBreadcrumb":s.str.sformat(_.itemBreadcrumbAria,r),"mimeTypeAria":s.str.sformat(_.mimeTypeAria,this.model.get("mime_type_search"))}},"openSearchItem":function(e){e.preventDefault(),this.trigger("click:item",this.model)},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.call(this,e),this.model.attributes.mime_type=this.model.attributes.mime_type?this.model.attributes.mime_type:this.model.attributes.versions?this.model.attributes.versions.mime_type:"",s.extend(this.model.attributes,{"collection_id":this.model.cid,"mime_type_search":V.findTypeByNode(this.model)}),this._rowStates=e.rowStates,this.addOwnerDisplayName(),this.addCreatedUserDisplayName(),
this.listenTo(this._rowStates,"change:"+G.RowStatesSelectedRows,this._selectionChanged),this.listenTo(this.model,"change",function(){1===s.size(this.model.changed)&&s.has(this.model.changed,"csuiDelayedActionsRetrieved")||(this.render(),this.updateItemdetails())}),!1===n.isAppleMobile()&&(this.$el.on("mouseenter."+this.cid,".csui-search-item-row",s.bind(this._hoverStart,this)),this.$el.on("mouseleave."+this.cid,".csui-search-item-row",s.bind(this._hoverEnd,this)))},"_hoverStart":function(){this.showInlineActions()},"_hoverEnd":function(){this.hideInlineActions()},"_selectionChanged":function(e){var t=e.previous(G.RowStatesSelectedRows),i=e.changed[G.RowStatesSelectedRows],o=s.difference(t,i),n=s.difference(i,t),a=this.model.get("id");s.contains(o,a)&&(this._checkboxView.setChecked(!1),this.ui.inlineToolbar.removeClass("selected")),s.contains(n,a)&&(this._checkboxView.setChecked(!0),this.ui.inlineToolbar.addClass("selected"),this.hideInlineActions())},"initActionViews":function(e){this.favView=new b({"tagName":"div","focusable":!0,"model":e.model,"context":e.context,"tableView":e.tableView});var t=this._rowStates.get(G.RowStatesSelectedRows),i=s.contains(t,this.model.get("id")),o=s.str.sformat(_.selectItem,e.model.get("name")),n=s.str.sformat(_.selectItemAria,e.model.get("name")),a=!1!==e.model.get("selectable");this._checkboxView=new g({"checked":i?"true":"false","disabled":!a,"ariaLabel":n,"title":o}),this.listenTo(this._checkboxView.model,"change:checked",function(e){this._markAsSelected("true"===e.changed.checked)}),this.reservation=new v({"tagName":"div","model":e.model,"context":e.context}),e.connector=e.model.connector,this.searchMetadataView=new x({"rowId":this.cid,"collection":this.options.metadata,"model":this.model}),z.enableBreadcrumb&&this.addBreadcrumbs(e)},"_markAsSelected":function(e){var t,i=this.model.get("id"),o=this._rowStates.get(G.RowStatesSelectedRows);e?s.contains(o,i)||(t=o.concat([i]),this._rowStates.set(G.RowStatesSelectedRows,t)):s.contains(o,i)&&(t=s.without(o,i),this._rowStates.set(G.RowStatesSelectedRows,t))},"addBreadcrumbs":function(e){var s=new R(e.model.attributes.ancestors,{"node":e.model,"autofetch":!1});return this.breadcrumbsView=new A({"context":e.context,"collection":s}),this.breadcrumbsView.synchronizeCollections(),!0},"onRender":function(e){this.initActionViews(this.options),this.reservationRegion.show(this.reservation),this.model.get("search_result_metadata")&&!1!==this.model.get("search_result_metadata").current_version&&"minor"!==this.model.get("search_result_metadata").version_type&&void 0!==this.model.get("favorite")&&this.favRegion.show(this.favView),z.enableBreadcrumb&&(this.breadcrumbRegion.show(this.breadcrumbsView),this.$el.find("ol.binf-breadcrumb").attr("aria-label",this.templateHelpers().itemBreadcrumb)),this.selectionRegion.show(this._checkboxView),this.searchMetadataRegion.show(this.searchMetadataView),this._nodeIconView=new k({"el":this.$(".csui-type-icon").get(0),"node":this.model}),this._nodeIconView.render();var s=this.model.get("summary");if(s.length>0){s=s.replace(/</gi,"&lt;").replace(/>/gi,"&gt;");var t=/&lt;HH&gt;/gi,i=/&lt;\/HH&gt;/gi;s.replace(t,'<span class="csui-summary-hh">');var o=s.replace(t,'<span class="csui-summary-hh">');o=o.replace(i,"</span>"),this.$el.find(".csui-search-item-desc").html(o)}},"onBeforeDestroy":function(){this._nodeIconView&&this._nodeIconView.destroy(),this.$el&&!1===n.isAppleMobile()&&(this.$el.off("mouseenter."+this.cid,".csui-search-item-row",this._hoverStart),this.$el.off("mouseleave."+this.cid,".csui-search-item-row",this._hoverEnd))},"onShow":function(e){this.updateItemdetails(e)},"updateItemdetails":function(e){var s=this,i=this.isTextOverflown(this.ui.descriptionField[0]),o=this.hasDescriptionText(this.ui.descriptionField[0]);if(i){var n=t("<span/>",{"class":"csui-overflow-ellipsis","html":"&#133;"});t(this.ui.descriptionField).append(n)}z.enableBreadcrumb&&this.breadcrumbsView&&this.breadcrumbsView.refresh(),this.$el.find(".truncated-"+this.cid).hide(),this.$el.find(".csui-search-item-fav.search-fav-"+this.cid).after('<button class="search-results-item-expand icon-expandArrowDown" title="'+_.showMore+'" aria-expanded="false" aria-label="'+_.showMoreAria+'"></button>').next().on("click",function(){t(this).toggleClass("icon-expandArrowUp"),t(".truncated-"+s.cid).toggle(),this.classList.contains("icon-expandArrowUp")?(t(this).removeClass("icon-expandArrowDown").addClass("icon-expandArrowUp").attr("title",_.showLess).attr("aria-expanded","true"),s.ui.descriptionField.addClass("csui-search-item-desc-height").find(".csui-overflow-ellipsis").hide()):(t(this).removeClass("icon-expandArrowUp").addClass("icon-expandArrowDown").attr("title",_.showMore).attr("aria-expanded","false"),s.ui.descriptionField.removeClass("csui-search-item-desc-height").find(".csui-overflow-ellipsis").show())}),o||(this.ui.descriptionField.addClass("binf-hidden"),this.ui.modifiedByField.addClass("binf-hidden"))},"addOwnerDisplayName":function(){var e="";this.model.attributes.owner_user_id_expand&&(e=this.getDisplayName(this.model.attributes.owner_user_id_expand)),s.extend(this.model.attributes,{"owner_display_name":e})},"addCreatedUserDisplayName":function(){var e="";this.model.attributes.create_user_id_expand&&(e=this.getDisplayName(this.model.attributes.create_user_id_expand)),s.extend(this.model.attributes,{"create_user_display_name":e})},"getDisplayName":function(e){return e.name_formatted?e.name_formatted:e.name},"hasDescriptionText":function(e){return e&&e.textContent.trim().length>0},"isTextOverflown":function(e){var s=!1;if(e&&e.style){var t=e.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden"),s=e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight,e.style.overflow=t}return s},"showInlineActions":function(){if(0===this.ui.inlineToolbarContainer.find(".csui-table-actionbar").length){if(this._rowStates.get(G.RowStatesSelectedRows).length>0)return;this.searchMetadataView&&this.searchMetadataView.ui.fieldsToBeHiddenOnHover.addClass("binf-hidden"),this.$el.find(".icon-expandArrowDown").length>0&&this.ui.modifiedByField.addClass("binf-hidden"),this.ui.inlineToolbarContainer.removeClass("binf-hidden");var e=this.model.attributes.version_id?"-"+this.model.attributes.version_id:"",s=t(".csui-search-item-action-"+this.cid+e)[0],i={"sender":this,"target":s,"node":this.model};this.trigger("enterSearchRow",i)}},"hideInlineActions":function(){if(this.ui.inlineToolbarContainer.addClass("binf-hidden"),this.ui.metadataDetails.removeClass("binf-hidden"),this.searchMetadataView&&this.searchMetadataView.ui.fieldsToBeHiddenOnHover.removeClass("binf-hidden"),this.$el.find(".icon-expandArrowDown").length>0){this.ui.descriptionField.html().trim().length<=0&&(this.ui.descriptionField.addClass("binf-hidden"),this.ui.modifiedByField.addClass("binf-hidden"))}var e=this.model.attributes.version_id?"-"+this.model.attributes.version_id:"",s=t(".csui-search-item-action-"+this.cid+e)[0],i={"sender":this,"target":s,"node":[]};this.trigger("leaveSearchRow",i)},"openVersionHistory":function(e){var s=this,i={},o=[],n=this.model.attributes.version_id?"-"+this.model.attributes.version_id:"",a=t(".csui-search-item-action-"+this.cid+n)[0];o=this.model,i={"sender":s,"target":a,"node":o},s.trigger("openVersionHistory",i)},"showMetadataInfo":function(e){this.ui.descriptionField.removeClass("binf-hidden"),this.ui.modifiedByField.removeClass("binf-hidden"),e.preventDefault(),e.stopPropagation()},"hideMetadataInfo":function(e){this.ui.descriptionField.html().trim().length<=0&&(this.ui.descriptionField.addClass("binf-hidden"),this.ui.modifiedByField.addClass("binf-hidden")),e.preventDefault(),e.stopPropagation()}}),X=o.CollectionView.extend({"className":"binf-list-group","childView":K,"childViewOptions":function(){return{"context":this.options.context,"tableView":this.options.layoutView,"defaultActionController":this.defaultActionController,"metadata":this.options.metadata,"rowStates":this._rowStates}},"emptyView":W,"emptyViewOptions":function(){return{"model":this.emptyModel}},"behaviors":{"DefaultAction":{"behaviorClass":E}},"childEvents":{"click:item":"onClickItem"},"constructor":function(e){e||(e={}),this.context=e.context,this._rowStates=e.rowStates,o.CollectionView.prototype.constructor.apply(this,arguments),m.delegate(this,e.layoutView),this.collection.layoutView=e.layoutView,this.emptyModel=new i.Model({"message":_.noSearchResultMessage,"suggestionKeyword":_.suggestionKeyword,"searchSuggestion1":_.searchSuggestion1,"searchSuggestion2":_.searchSuggestion2,"searchSuggestion3":_.searchSuggestion3,"searchSuggestion4":_.searchSuggestion4}),this.listenTo(this.collection,"request",function(){this.emptyModel.set("message",_.loadingSearchResultMessage)}),this.listenTo(this.collection,"sync",function(){this.emptyModel.set("message",_.noSearchResultMessage),this.$el.find(".csui-no-result-message-wrapper").show();var e=this.options.layoutView.facetView&&this.options.layoutView.facetView.$(".csui-facet");e&&e.length&&e.prop("tabindex",0)}),this.listenTo(this.collection,"error",function(){this.emptyModel.set("message",_.failedSearchResultMessage)}),this.listenTo(this,"dom:refresh",this._refreshDom)},"collectionEvents":{"reset":"updateLayoutView"},"updateLayoutView":function(){this.collection.layoutView.expandAllView.pageChange()},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"onScrollTop":function(){t(".binf-list-group").scrollTop(0)},"_refreshDom":function(){this.$el.addClass("list-group-height"),this.onScrollTop()}}),G=o.LayoutView.extend({"className":"csui-search-results binf-panel binf-panel-default","template":P,"templateHelpers":function(){return{"messages":{"customSearchTab":_.customSearchTab,"searchFilterTab":_.searchFilterTab,"enableCustomSearch":this.enableCustomSearch}}},"ui":{"toolBarContainer":".csui-search-tool-container","customSearchContainer":".csui-search-results-custom","facetView":"#facetview","customViewTab":".csui-search-custom-tab","facetViewTab":".csui-search-facet-tab","searchResultsContent":".csui-search-results-content","searchResultsBody":".csui-search-results-body","searchSidePanel":".csui-search-left-panel"},"events":{"click @ui.customViewTab":"openCustomView","click @ui.facetViewTab":"openFacetView","keypress @ui.customViewTab":"openCustomView","keypress @ui.facetViewTab":"openFacetView"},"regions":{"headerRegion":"#header","toolbarRegion":"#toolbar","resultsRegion":"#results","paginationRegion":"#pagination","selectAllRegion":"#selectAllCheckBox","expandAllRegion":"#expandAllArrow","sortingRegion":"#csui-search-sort","customSearchRegion":"#csui-search-custom-container","facetBarRegion":"#facetbarview","facetRegion":"#facetview"},"behaviors":{"PerfectScrolling":{"behaviorClass":D,"contentParent":".csui-result-list","suppressScrollX":!0,"scrollYMarginOffset":15},"DefaultAction":{"behaviorClass":E}},"constructor":function e(l){l||(l={}),l.data||(l.data={}),l.pageSize||(l.pageSize=10),l.toolbarItems||(l.toolbarItems=p),l.toolbarItemsMasks||(l.toolbarItemsMasks=new f),this.context=l.context,l.query||(l.query=this.context.getModel(a)),l.collection?l.collection.fetched||(this._originalScope=l.collection.getResourceScope()):l.collection=this.context.getModel(r,l),l.collection.fetched||(l.collection.setResourceScope(r.getDefaultResourceScope()),l.collection.setDefaultActionCommands(N.getAllCommandSignatures(q)),l.collection.setEnabledDelayRestCommands(!0),l.collection.delayedActions&&this.listenTo(l.collection.delayedActions,"error",function(e,s,t){var i=new n.Error(s);C.showMessage("error",i.message)})),o.LayoutView.prototype.constructor.call(this,l),this._rowStates=new i.Model,this._rowStates.set(e.RowStatesSelectedRows,[]),this.metadata=l.metadata||this.context.getCollection(S,l),this.query=l.query,this.collection.setLimit(0,l.pageSize,!1),this._toggleCustomSearch(),this.commandController=new O({"commands":q}),this.listenTo(this.commandController,"after:execute:command",this._toolbarCommandExecuted),this.setSearchHeader();var c=this;this.listenTo(this.headerView,"go:back",function(){c.trigger("go:back")}),this.listenTo(this.headerView,"toggle:filter",this._completeFilterCommand),this.listenTo(this.headerView,"focus:filter",this._focusFilter),this.facetFilters=this.collection.searchFacets,this._setToolBar(),this.setResultView(),this.setPagination(),this.setSelectAllView(),this.setSortingView(),this.setExpandAllView(),this.setInlineActionBarEvents(),this._setFacetBarView(),this.enableCustomSearch&&(this.setCustomSearchView(),this.listenTo(this.customSearchView,"change:title",this.updateHeaderTitle)),this.options.blockingParentView?m.delegate(this,this.options.blockingParentView):m.imbue(this),this.listenTo(this.query,"change",function(){this._updatePanels(),this.collection.isFetchable()&&(this.facetFilters.clearFilter(),this.paginationView.nodeChange(),this.collection.fetch({"error":s.bind(this.onSearchResultsFailed,this,l)}),this._removeAllSelections(),this.expandAllView.pageChange(),this.resetScrollToTop())}),this.listenTo(this.options.context,"request",this.blockActions).listenTo(this.options.context,"sync",this.unblockActions).listenTo(this.options.context,"error",this.unblockActions).listenTo(this.collection,"request",this.blockActions).listenTo(this.collection,"sync",this.unblockSearchResultsAction).listenTo(this.collection,"sync",this.updateActionToolBar).listenTo(this.collection,"error",this.unblockActions).listenTo(this.collection,"destroy",this.unblockActions).listenTo(this.collection,"sync",this.updateScrollbar).listenTo(this.collection,"sync",this._removeAllSelections).listenTo(this.collection,"sync",this._focusOnFirstSearchResultElement).listenTo(this.collection,"new:page",this.resetScrollToTop),!n.isMozilla()&&this.propagateEventsToRegions(),this.onWinRefresh=s.bind(this.windowRefresh,this),t(window).bind("resize.app",this.onWinRefresh),this.enableCustomSearch&&this.listenToOnce(this,"dom:refresh",s.bind(function(){this.$el.width()>1023?(this.ui.searchSidePanel.addClass("csui-is-visible"),this.ui.searchResultsBody.addClass("csui-search-results-body-right")):(this.ui.searchSidePanel.addClass("search-side-panel-overlay"),this.ui.searchSidePanel.addClass("search-side-panel-auto"))},this))},"_removeAllSelections":function(){this._rowStates.set(G.RowStatesSelectedRows,[])},"_focusFilter":function(e){!!e&&e.headerView.ui.filter.focus(),this.ui.searchSidePanel.hasClass("csui-is-visible")?(!!e&&e.headerView.ui.filter.attr("aria-label",_.filterCollapseAria),!!e&&e.headerView.ui.filter.attr("aria-expanded",!0)):(!!e&&e.headerView.ui.filter.attr("aria-label",_.filterExpandAria),!!e&&e.headerView.ui.filter.attr("aria-expanded",!1));var s=this.facetView&&this.facetView.$(".csui-facet");s&&s.length&&s.prop("tabindex",0)},"onSearchResultsFailed":function(e,s,t){var i=new n.RequestErrorMessage(t);H.showError(i.toString())},"updateScrollbar":function(){this.triggerMethod("update:scrollbar",this)},"_focusOnFirstSearchResultElement":function(){this.$el.find(".binf-list-group-item:first-child .csui-search-item-name > a").focus()},"resetScrollToTop":function(){this.$("#results").scrollTop(0)},"updateActionToolBar":function(){0===this.collection.totalCount?(this.ui.toolBarContainer.addClass("binf-hidden"),this.enableCustomSearch||this.ui.customSearchContainer.addClass("binf-hidden")):(this.ui.toolBarContainer.removeClass("binf-hidden"),this.ui.customSearchContainer.removeClass("binf-hidden"))},"unblockSearchResultsAction":function(){this.unblockActions(),this.collection.models.length>0?(this.$el.find(".binf-list-group").removeClass("list-group-height-noresults"),this.$el.find(".csui-search-results-content").removeClass("csui-search-noresults")):(this.$el.find(".binf-list-group").addClass("list-group-height-noresults"),this.$el.find(".csui-search-results-content").addClass("csui-search-noresults"))},"_toggleCustomSearch":function(){this.enableCustomSearch=!!this.options.customSearchView||this.query.get("query_id")&&Object.keys(this.query.attributes).length>1,this.enableCustomSearch?(this.$el.find("#csui-search-custom-container").addClass("csui-search-custom-container"),this.$el.find("#csui-search-custom-results").addClass("csui-search-custom-results"),this.$el.find(".csui-search-custom-tab").addClass("binf-active")):this.customSearchView&&this.query.get("where")&&(this.customSearchRegion.empty(),this.$el.find("#csui-search-custom-container").removeClass("csui-search-custom-container"),this.$el.find("#csui-search-custom-results").removeClass("csui-search-custom-results"))},"_updatePanels":function(){if(this._toggleCustomSearch(),this.enableCustomSearch)this.$el.find(".csui-search-results-custom").show(),this.$el.find(".csui-search-left-panel-tabs").show(),this.ui.searchResultsBody.addClass("csui-search-results-body-right");else if(this.ui.searchSidePanel.hasClass("csui-is-visible")){var e=this;this.ui.searchSidePanel.one(this._transitionEnd(),function(){e.$el.find(".csui-search-results-custom").hide(),e.$el.find(".csui-search-left-panel-tabs").hide(),e.ui.searchSidePanel.hasClass("csui-is-visible")||e.ui.searchSidePanel.addClass("csui-is-hidden"),e.ui.facetView.show()}),this.ui.searchResultsBody.removeClass("csui-search-results-body-right"),this.ui.searchSidePanel.removeClass("csui-is-visible")}else this.$el.find(".csui-search-results-custom").hide(),this.$el.find(".csui-search-left-panel-tabs").hide(),this.ui.facetView.show();this.headerView&&(this.headerView.options.useCustomTitle=this.enableCustomSearch),this.facetView&&(this.facetView.options.data.showTitle=!this.enableCustomSearch,this.facetView.render())},"openCustomView":function(e){this.enableCustomSearch&&("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(this.ui.facetView.hide(),this.$el.find(".csui-search-results-custom").show(),this.$el.find(".csui-search-facet-tab").removeClass("binf-active"),this.$el.find(".csui-search-custom-tab").addClass("binf-active"),e.stopPropagation())},"openFacetView":function(e){this.enableCustomSearch&&(this._ensureFacetPanelViewDisplayed(),("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(this.$el.find(".csui-search-results-custom").hide(),this.ui.facetView.show(),this.$el.find(".csui-search-custom-tab").removeClass("binf-active"),this.$el.find(".csui-search-facet-tab").addClass("binf-active"),e.stopPropagation()))},"onDestroy":function(){t(window).unbind("resize.app",this.onWinRefresh),this._originalScope&&this.options.collection.setResourceScope(this._originalScope)},"windowRefresh":function(){this.facetView&&this.facetView.triggerMethod("dom:refresh"),this._selectAllView&&this._selectAllView.triggerMethod("dom:refresh"),this.expandAllView&&this.expandAllView.triggerMethod("dom:refresh"),"absolute"!=this.ui.searchSidePanel.css("position")?this.$el.width()>1023&&this.ui.searchSidePanel.hasClass("search-side-panel-overlay")&&(this.ui.searchSidePanel.removeClass("search-side-panel-overlay"),this.ui.searchSidePanel.hasClass("search-side-panel-auto")&&(this.ui.searchSidePanel.removeClass("search-side-panel-auto"),this._completeFilterCommand(this,!0))):this.ui.searchSidePanel.hasClass("search-side-panel-auto")||this.ui.searchSidePanel.hasClass("search-side-panel-overlay")||(this.ui.searchSidePanel.addClass("search-side-panel-overlay"),this.ui.searchSidePanel.hasClass("csui-is-visible")&&(this.ui.searchSidePanel.addClass("search-side-panel-auto"),this._completeFilterCommand(this,!0)))},"setSearchHeader":function(){return this.headerView=new c({"collection":this.collection,"filter":this.options.searchString,"context":this.options.context,"enableBackButton":this.options.enableBackButton,"backButtonToolTip":this.options.backButtonToolTip,"enableFacetFilter":z.enableFacetFilter,"useCustomTitle":this.enableCustomSearch,"commands":q,"originatingView":this,"titleView":this.options.titleView}),!0},"_setToolBar":function(){var e=this,t=new F({"id":void 0},{"connector":this.collection.connector});this.collection.node=t,this.toolbarView=new h({"toolbarItems":this.options.toolbarItems,"toolbarItemsMasks":this.options.toolbarItemsMasks,"collection":this.collection,"originatingView":this,"context":this.options.context,"toolbarCommandController":this.commandController,"events":function(){return s.extend({},h.prototype.events,{"keydown":e.onKeyInViewInToolbarView})}}),this.listenTo(this.toolbarView,"refresh:tabindexes",function(){this.toolbarView.$el.find(".csui-otherToolbar>ul>li>a:visible").attr("tabindex",0)})},"onKeyInViewInToolbarView":function(e){switch(e.keyCode){case 37:case 39:e.preventDefault(),e.stopPropagation()}},"setResultView":function(){return this.resultsView=new X({"context":this.options.context,"collection":this.collection,"layoutView":this,"filter":this.options.searchString,"metadata":this.metadata,"rowStates":this._rowStates}),!0},"setPagination":function(){return this.paginationView=new u({"collection":this.collection,"pageSize":this.options.pageSize,"defaultDDList":[10,25,50,100]}),!0},"_calculateSelectAllCheckedStatus":function(){var e=this._rowStates.get(G.RowStatesSelectedRows),s=e.length===this.collection.length;return e.length>0&&!s?"mixed":e.length>0},"_updateSelectAllCheckbox":function(){this._selectAllView&&(this._selectAllView.setChecked(this._calculateSelectAllCheckedStatus()),this._selectAllView.setDisabled(0===this.collection.length))},"setSelectAllView":function(){this._selectAllView=new g({"checked":this._calculateSelectAllCheckedStatus(),"disabled":0===this.collection.length,"ariaLabel":_.selectAllAria,"title":_.selectAll}),this.listenTo(this._selectAllView,"clicked",function(e){switch(e.cancel=!0,this._selectAllView.model.get("checked")){case"true":this._rowStates.set(G.RowStatesSelectedRows,[]);break;default:var s=[];this.collection.each(function(e){!1!==e.get("selectable")&&s.push(e.get("id"))}),this._rowStates.set(G.RowStatesSelectedRows,s)}}),this.listenTo(this._rowStates,"change:"+G.RowStatesSelectedRows,function(){this._updateSelectAllCheckbox()}),this.listenTo(this.collection,"reset",function(){this._updateSelectAllCheckbox()})},"setExpandAllView":function(){return this.expandAllView=new w({"collection":this.collection,"view":this.resultsView,"_eleCollapse":"icon-expandArrowUp","_eleExpand":"icon-expandArrowDown"}),!0},"setSortingView":function(){return this.sortingView=new d({"collection":this.collection}),!0},"setCustomSearchView":function(){return this.customSearchView=this.options.customSearchView||new y({"context":this.options.context,"savedSearchQueryId":this.query.get("query_id"),"customValues":this.query,"parentView":this}),!0},"_toolbarCommandExecuted":function(e){e&&e.commandSignature&&(this._updateToolItems(),e.command&&e.command.allowCollectionRefetch&&this.collection.totalCount>this.collection.topCount&&this.collection.fetch())},"setInlineActionBarEvents":function(){this.listenTo(this.resultsView,"childview:enterSearchRow",this._showInlineActionBarWithDelay),this.listenTo(this.resultsView,"childview:openVersionHistory",this.openVersionHistory),this.listenTo(this.resultsView,"childview:leaveSearchRow",this._actionBarShouldDestroy),this.listenTo(this.collection,"reset",this._destroyInlineActionBar),this.listenTo(this.collection,"remove",this._updateToolItems),this.listenTo(this._rowStates,"change:"+G.RowStatesSelectedRows,this._updateToolItems)},"_updateToolItems":function(){if(this.toolbarView){var e=this._rowStates.get(G.RowStatesSelectedRows),t=[];s.each(e,function(e){t.push(this.collection.findWhere({"id":e}))},this),t&&1===t.length?this.toolbarView.options.collection.node=t[0].parent:this.toolbarView.options.collection.node=new F({"id":void 0},{"connector":this.collection.connector}),this.toolbarView.updateForSelectedChildren(t)}},"_showInlineActionBar":function(e){if(e){this._savedHoverEnterArgs=null;var i=e.node.get("parent_id");i instanceof Object&&(i=e.node.get("parent_id").id);var o=new F({"id":i},{"connector":e.node.connector});this.inlineToolbarView=new T(s.extend({"context":this.options.context,"commands":q,"delayedActions":this.collection.delayedActions,"collection":this.options.toolbarItems.inlineToolbar,"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineToolbar,"container":o,"containerCollection":this.collection,"model":e.node,"originatingView":this},this.options.toolbarItems.inlineToolbar.options)),this.listenTo(this.inlineToolbarView,"after:execute:command",this._toolbarCommandExecuted),this.inlineToolbarView.render(),this.listenTo(this.inlineToolbarView,"destroy",function(){this.inlineToolbarView=void 0,this._savedHoverEnterArgs&&this._showInlineActionBarWithDelay(this._savedHoverEnterArgs)},this),t(e.target).append(this.inlineToolbarView.$el).css("display","block").addClass("csui-table-cell-name-appendix-full"),this.inlineToolbarView.triggerMethod("show")}},"_showInlineActionBarWithDelay":function(e,s){this._showInlineActionbarTimeout&&clearTimeout(this._showInlineActionbarTimeout);var t=this;this._showInlineActionbarTimeout=setTimeout(function(){t._showInlineActionbarTimeout=void 0,t.resultsView.lockedForOtherContols||t._showInlineActionBar.call(t,s)},200)},"_actionBarShouldDestroy":function(e,s){this._showInlineActionbarTimeout&&(clearTimeout(this._showInlineActionbarTimeout),this._showInlineActionbarTimeout=void 0),this.inlineToolbarView&&this.inlineToolbarView.destroy()},"_destroyInlineActionBar":function(){this.inlineToolbarView&&(this.inlineToolbarView.destroy(),this.inlineToolbarView=void 0)},"openVersionHistory":function(e){var t=new M;t.push(e.model);var o={"nodes":t,"container":e.model.collection.node,"collection":e.model.collection,"selectedTab":new i.Model({"title":"Versions"})};o=s.extend(o,{"originatingView":this}),(new B).execute(o,this.options).always(function(e){})},"onRender":function(){var e=this;if(this.headerRegion.show(this.headerView),this.toolbarRegion.show(this.toolbarView),this.resultsRegion.show(this.resultsView),this.paginationRegion.show(this.paginationView),this.selectAllRegion.show(this._selectAllView),this.sortingRegion.show(this.sortingView),this.expandAllRegion.show(this.expandAllView),this.enableCustomSearch&&this.customSearchRegion.show(this.customSearchView),this.facetBarView&&this.facetBarRegion.show(this.facetBarView),this.enableCustomSearch)this.ui.facetView.hide(),this.ui.searchSidePanel.removeClass("csui-is-hidden");else{this.ui.searchSidePanel.removeClass("csui-is-visible");var s=this;this.ui.searchSidePanel.one(this._transitionEnd(),function(){s.ui.searchSidePanel.hasClass("csui-is-visible")||s.ui.searchSidePanel.addClass("csui-is-hidden")})}this._toggleCustomSearch(),this.$(".csui-result-list").on("scroll",function(){e.trigger("scroll")})},"_ensureFacetPanelViewDisplayed":function(){void 0===this.facetView&&(this._setFacetPanelView(),this.facetRegion.show(this.facetView))},"_setFacetPanelView":function(){this.facetView=new L({"collection":this.facetFilters,"blockingLocal":!0,"showTitle":!this.enableCustomSearch}),this.listenTo(this.facetView,"remove:filter",this._removeFacetFilter).listenTo(this.facetView,"remove:all",this._removeAll).listenTo(this.facetView,"apply:filter",this._addToFacetFilter)},"_removeFacetPanelView":function(){this.facetRegion.empty(),this.facetView=void 0},"_setFacetBarView":function(){this.facetBarView=new Q({"collection":this.facetFilters}),this.listenTo(this.facetBarView,"remove:filter",this._removeFacetFilter).listenTo(this.facetBarView,"remove:all",this._removeAll).listenTo(this.facetBarView,"facet:bar:visible",this._handleFacetBarVisible).listenTo(this.facetBarView,"facet:bar:hidden",this._handleFacetBarHidden)},"_addToFacetFilter":function(e){this.facetFilters.addFilter(e),this.collection.setDefaultPageNum(),this.collection.fetch(),this.resetScrollToTop()},"_removeFacetFilter":function(e){this.facetFilters.removeFilter(e),this.collection.setDefaultPageNum(),this.collection.fetch(),this.resetScrollToTop()},"_removeAll":function(){this.facetFilters.clearFilter(),this.collection.setDefaultPageNum(),this.collection.fetch(),this.resetScrollToTop()},"_completeFilterCommand":function(e,s){"absolute"===e.ui.searchSidePanel.css("position")&&void 0===s&&(e.ui.searchSidePanel.removeClass("search-side-panel-auto"),e.ui.searchSidePanel.addClass("search-side-panel-overlay")),e.showSidePanel=!e.ui.searchSidePanel.hasClass("csui-is-visible"),e.showSidePanel?(e._ensureFacetPanelViewDisplayed(),e.ui.searchSidePanel.removeClass("csui-is-hidden"),e.ui.searchSidePanel.one(e._transitionEnd(),function(){n.isMSBrowser()&&e.ui.searchSidePanel.hasClass("csui-is-visible")&&e.ui.searchResultsBody.addClass("csui-search-results-body-right"),e.triggerMethod("dom:refresh"),e.paginationView&&e.paginationView.triggerMethod("dom:refresh")}).addClass("csui-is-visible"),n.isMSBrowser()||e.ui.searchSidePanel.hasClass("csui-is-visible")&&e.ui.searchResultsBody.addClass("csui-search-results-body-right")):(e.ui.searchSidePanel.one(e._transitionEnd(),function(){e.ui.searchSidePanel.hasClass("csui-is-visible")||e.ui.searchSidePanel.addClass("csui-is-hidden"),e.triggerMethod("dom:refresh"),e._removeFacetPanelView(),e.paginationView&&e.paginationView.triggerMethod("dom:refresh")}).removeClass("csui-is-visible"),e.ui.searchResultsBody.removeClass("csui-search-results-body-right")),this.facetView&&this.facetView.triggerMethod("dom:refresh")},"_transitionEnd":s.once(function(){var e,s={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},t=document.createElement("div");for(e in s)if(void 0!==t.style[e])return s[e]}),"updateHeaderTitle":function(){this.headerView.setCustomSearchTitle(this.options.title)},"_handleFacetBarVisible":function(){this.ui.searchResultsContent.addClass("csui-facetbarviewOpened"),this.ui.searchResultsContent.find(".csui-facet-list-bar .csui-facet-item:last a").focus()},"_handleFacetBarHidden":function(){this.ui.searchResultsContent.removeClass("csui-facetbarviewOpened"),this.headerView.trigger("refresh:tabindexes")}},{"RowStatesSelectedRows":"selected"});return s.extend(G.prototype,l),G}),csui.define("json!csui/widgets/search.custom/search.custom.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","schema":{"type":"object","properties":{"savedSearchQueryId":{"title":"{{savedSearchQueryTitle}}","description":"{{savedSearchQueryDescription}}","type":"string"}},"required":["savedSearchQueryId"]},"options":{"fields":{"savedSearchQueryId":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[258]}}}}}}),csui.define("json!csui/widgets/search.results/search.results.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","schema":{},"options":{},"actions":[{"toolItems":"csui/widgets/search.results/toolbaritems","toolItemMasks":"csui/widgets/search.results/toolbaritems.masks","toolbars":[{"id":"otherToolbar","title":"{{otherToolbarTitle}}","description":"{{otherToolbarDescription}}"},{"id":"inlineToolbar","title":"{{inlineToolbarTitle}}","description":"{{inlineToolbarDescription}}"}]}]}),csui.define("csui/widgets/search.custom/impl/nls/search.custom.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.custom/impl/nls/root/search.custom.manifest",{"widgetTitle":"Custom View Search","widgetDescription":"Shows custom view search form for the given saved search query.","savedSearchQueryTitle":"Search query","savedSearchQueryDescription":"An existing saved search query object"}),csui.define("csui/widgets/search.results/impl/nls/search.results.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/impl/nls/root/search.results.manifest",{"widgetTitle":"Search Results","widgetDescription":"Shows objects found by a full-text search query and offers the most important actions for them.",
"otherToolbarTitle":"List Header Toolbar","otherToolbarDescription":"Toolbar, which is activated in the list header, once a list item is selected.","inlineToolbarTitle":"Inline Toolbar","inlineToolbarDescription":"Toolbar, which is displayed on the right side of a list item, when the mouse cursor is moving above it."}),csui.define("bundles/csui-search",["csui/widgets/search.custom/search.custom.view","csui/widgets/search.results/search.results.view","csui/widgets/search.results/toolbaritems","csui/widgets/search.results/impl/toolbaritems","json!csui/widgets/search.custom/search.custom.manifest.json","json!csui/widgets/search.results/search.results.manifest.json","i18n!csui/widgets/search.custom/impl/nls/search.custom.manifest","i18n!csui/widgets/search.results/impl/nls/search.results.manifest","csui/widgets/search.results/toolbaritems","csui/widgets/search.results/toolbaritems.masks"],{}),csui.require(["require","css"],function(e,s){s.styleLoad(e,"csui/bundles/csui-search",!0)});
//# sourceMappingURL=csui-search.js.map