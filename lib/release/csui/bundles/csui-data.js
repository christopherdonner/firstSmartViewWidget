csui.define("csui/utils/contexts/factories/factory",["csui/lib/marionette"],function(e){return e.Controller.extend({"constructor":function(e,t){this.context=e,this.options=t||{}},"propertyPrefix":null})}),csui.define("csui/utils/contexts/factories/connector",["module","csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/connector"],function(e,t,i,s){return i.extend({"propertyPrefix":"connector","constructor":function(n,o){i.prototype.constructor.apply(this,arguments);var r=this.options.connector||{};if(!(r instanceof s)){var c=e.config(),a=r.connection||c.connection||{};t.defaults(a,r.connection,c.connection),r=new s(t.defaults({"connection":a},r,c))}this.property=r}})}),csui.define("csui/utils/contexts/factories/next.node",["module","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";var c=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);c=!c||"false"!==c[1];var a;return s.extend({"propertyPrefix":"nextNode","constructor":function(a,l){s.prototype.constructor.apply(this,arguments);var u=this.options.nextNode||{},d=e.config();if(c&&(this.initialResponse=u.initialResponse||d.initialResponse),!(u instanceof i.Model)){var p=a.getObject(n,l),h=t.extend(!0,{"connector":p,"fields":{"properties":[],"versions.element(0)":["mime_type","owner_id"]},"expand":{"properties":["original_id"]},"commands":r.getAllSignatures()},d.options,u.options);u=new o(u.attributes||d.attributes,h)}this.property=u},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!a){var t=this.property.prefetch(this.initialResponse,e);return a=!0,t}return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/search.query.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){var n=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return n.__super__.toJSON.apply(this,arguments)}});return s.extend({"propertyPrefix":"searchQuery","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var c=this.options.searchQuery||{};if(!(c instanceof i.Model)){var a=e.config();c=new n(c.models,t.extend({},c.options,a.options))}this.property=c}})}),csui.define("css!csui/controls/tile/behaviors/impl/perfect.scrolling",[],function(){}),csui.define("csui/controls/tile/behaviors/perfect.scrolling.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/lib/perfect-scrollbar","css!csui/controls/tile/behaviors/impl/perfect.scrolling"],function(e,t,i,s,n){"use strict";function o(e,i){var s=i||this.options||{},n=s[e];return t.isFunction(n)?s[e].call(this.view):n}var r=e.config();t.defaults(r,{"usePerfectScrollbar":!1}),(/\bperfectScrollbar[^=]/.test(location.search)||/\bperfectScrollbar=true\b/.test(location.search))&&(r.usePerfectScrollbar=!0);var c={"minScrollbarLength":32,"stopPropagationOnClick":!1},a=s.Region.extend({"constructor":function(e){s.Region.prototype.constructor.apply(this,arguments),this._swapping=!1,this.listenTo(this,"before:swapOut",function(){this._swapping=!0}).listenTo(this,"swapOut",function(){this._swapping=!1}).listenTo(this,"show",function(){this._requestScrollbarUpdate()}).listenTo(this,"empty",function(){this._swapping||this._requestScrollbarUpdate()})},"_requestScrollbarUpdate":function(){this._parent._parent.trigger("update:scrollbar")}}),l=s.Behavior.extend({"defaults":{"contentParent":null},"constructor":function(e,n){if(s.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(n,"render",this._applyClasses),this._useScrollbar()&&this._usePerfectScrollbar()){var r=o.call(this,"updateOnWindowResize");this._renderState=0,this.listenToOnce(n,"render",function(){this.view.$el.on("csui:update:scrollbar."+n.cid,t.bind(this._updateScrollbarFromPropagation,this)),!1!==r&&i(window).bind("resize."+n.cid,t.bind(this._updateScrollbar,this))}).listenToOnce(n,"before:destroy",function(){this.view.$el.off("csui:update:scrollbar."+n.cid),!1!==r&&i(window).unbind("resize."+n.cid)}).listenTo(n,"before:render",function(){this._renderState=1}).listenTo(n,"render",function(){this._renderState=0}).listenTo(n,"dom:refresh",this._ensureScrollbar).listenTo(n,"ensure:scrollbar",this._ensureScrollbar).listenTo(n,"before:render",this._destroyScrollbar).listenTo(n,"before:destroy",this._destroyScrollbar).listenTo(n,"update:scrollbar",this._refreshScrollbar).listenToOnce(n,"before:render",function(){n instanceof s.CollectionView&&n.collection&&this.listenTo(n.collection,"reset",function(){this._resetTriggered=!0}).listenTo(n,"before:render:collection",function(){++this._renderState}).listenTo(n,"render:collection",function(){this._resetTriggered=!1,--this._renderState||this._updateScrollbar()}).listenTo(n,"render:empty",function(){!this._resetTriggered&&this._renderState||this._updateScrollbar()}).listenTo(n,"add:child",function(){this._renderState||this._updateScrollbar()}).listenTo(n,"remove:child",function(){this._resetTriggered||this._renderState||this._updateScrollbar()})})}},"_applyClasses":function(){var e;if(this._contentParent=this._getContentParent(),this._useScrollbar())if(this._usePerfectScrollbar())e="csui-perfect-scrolling";else{var t=o.call(this,"suppressScrollX"),i=o.call(this,"suppressScrollY");e="csui-normal-scrolling",t&&(e+=" csui-no-scroll-x"),i&&(e+=" csui-no-scroll-y")}else e="csui-no-scrolling";this._contentParent.addClass(e)},"_ensureScrollbar":function(){if(this._contentParent=this._contentParent?this._contentParent:this._getContentParent(),!this._contentParent)throw new Error('The "dom:refresh"" event was triggered earlier than the "render" event in view '+this.view.cid+"("+Object.getPrototypeOf(this.view).constructor.name+")");if(this._perfectScrollbar)this._contentParent.perfectScrollbar("update");else{var e=t.reduce(["suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","maxScrollbarLength","minScrollbarLength"],function(e,t){return e[t]=o.call(this,t),e},{},this);t.defaults(e,c),this._contentParent.perfectScrollbar(e),this._perfectScrollbar=!0,this._setClickEventFocus()}},"_setClickEventFocus":function(){var e=this._contentParent.find(".ps-scrollbar-y-rail"),t=this._contentParent.find(".ps-scrollbar-x-rail");if(n.isChrome())this._setClickEventRailFocus(e),this._setClickEventRailFocus(t);else{var i=this._contentParent.find(".ps-scrollbar-y"),s=this._contentParent.find(".ps-scrollbar-x");this._setClickEventBarFocus(i,e),this._setClickEventBarFocus(s,t)}},"_setClickEventBarFocus":function(e,t){var i=this;e.bind("mousedown",function(e){i.addXYFocus=!0,t.addClass("binf-focus")}),t.bind("mouseout",function(e){i.addXYFocus||(t.removeClass("binf-focus"),t.blur()),i.addXYFocus=!1})},"_setClickEventRailFocus":function(e){var t=this;e.length>0&&(e.bind("mouseup",function(e){i(this).addClass("binf-focus"),t.addXYFocus=!0}),e.bind("mouseleave",function(e){t.addXYFocus||i(this).removeClass("binf-focus"),t.addXYFocus=!1}))},"_refreshScrollbar":function(){this._contentParent&&this._perfectScrollbar&&(this._contentParent.find(".ps-scrollbar-y-rail").length||this._contentParent.find(".ps-scrollbar-x-rail").length?this._updateScrollbar():(this._destroyScrollbar(),this._ensureScrollbar()))},"_updateScrollbar":function(){this._perfectScrollbar&&this._contentParent.perfectScrollbar("update")},"_updateScrollbarFromPropagation":function(e){e.stopPropagation(),this._updateScrollbar()},"_destroyScrollbar":function(){this._perfectScrollbar&&(this._contentParent.perfectScrollbar("destroy"),this._contentParent.find(".ps-scrollbar-y-rail").off(),this._contentParent.find(".ps-scrollbar-x-rail").off(),this._perfectScrollbar=!1)},"_getContentParent":function(){var e=o.call(this,"contentParent");return e?e.insertAfter?e:t.isElement(e)?i(e):this.view.$(e):this.view.$el},"_useScrollbar":function(){return!(o.call(this,"scrollingDisabled")||o.call(this,"scrollingDisabled",this.view.options))},"_usePerfectScrollbar":function(){return l.usePerfectScrollbar()}},{"Region":a,"usePerfectScrollbar":function(){return r.usePerfectScrollbar&&!(n.isTouchBrowser()||n.isIE11()||n.isEdge())}});return l}),csui.define("csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/progresspanel/impl/nls/root/progresspanel.lang",{"BytesOfSize":"{0} of {1}","UploadingItems":"Uploading {0} items","UploadingOneItem":"Uploading item","UploadingSomeItems":"Uploading {0} items","UploadOneItemSuccessMessage":"1 item succeeded to upload.","UploadSomeItemsSuccessMessage":"{0} items succeeded to upload.","UploadManyItemsSuccessMessage":"{0} items succeeded to upload.","UploadOneItemFailMessage":"1 item failed to upload.","UploadSomeItemsFailMessage":"{0} items failed to upload.","UploadManyItemsFailMessage":"{0} items failed to upload.","UploadSomeItemsFailMessage2":"{2} items failed to upload.","UploadManyItemsFailMessage2":"{2} items failed to upload.","State_pending":"Waiting","State_processing":"Processing","State_resolved":"Done","State_rejected":"Failed","State_aborted":"Canceled","StateAction_pending":"Waiting","StateAction_processing":"Cancel","StateAction_resolved":"Done","StateAction_rejected":"Done","StateAction_aborted":"Done","Cancel":"Cancel","CancelAria":"Cancel upload of {0} item","StateAction_all_pending":"Waiting for upload of all items","StateAction_all_processing":"Cancel upload of all items","StateAction_all_resolved":"All items uploaded","StateAction_all_rejected":"All items rejected to upload","StateAction_all_aborted":"All items aborted to upload","Expand":"Expand","ExpandAria":"Expand the view of detailed item upload states","Collapse":"Collapse","CollapseAria":"Collapse the view of detailed item upload states","Close":"Close","CloseAria":"Close the progress panel"}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){return"binf-hidden "},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<div class="csui-header">\r\n  <div class="csui-progressrow csui-height-target">\r\n    <div class="csui-names-progress">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-header-icon csui-icon binf-hidden"></div>\r\n        <div class="csui-title" tabindex="-1" id="'+this.escapeExpression((o=null!=(o=t.progressTitleId||(null!=e?e.progressTitleId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"progressTitleId","hash":{}}):o))+'">\r\n          '+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress csui-progresscell"  tabindex="0">\r\n        <div class="csui-progress-dynamic binf-hidden" aria-hidden="true">\r\n          <div class="csui-progress-textbar">\r\n            <div class="binf-progress">\r\n              <div class="binf-progress-bar" role="progressbar" aria-valuenow="'+this.escapeExpression((o=null!=(o=t.percentage||(null!=e?e.percentage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"percentage","hash":{}}):o))+'"\r\n                   aria-valuemin="0" aria-valuemax="100" style="width:'+this.escapeExpression((o=null!=(o=t.percentage||(null!=e?e.percentage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"percentage","hash":{}}):o))+'%">\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n        <div class="csui-progress-static" aria-hidden="true">\r\n          <div class="csui-progress-textbar">\r\n            <div class="csui-progress-static-pending">'+this.escapeExpression((o=null!=(o=t.state_pending||(null!=e?e.state_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_pending","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-processing binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_processing||(null!=e?e.state_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_processing","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-resolved binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_resolved||(null!=e?e.state_resolved:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_resolved","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-rejected binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_rejected||(null!=e?e.state_rejected:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_rejected","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-aborted binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_aborted||(null!=e?e.state_aborted:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_aborted","hash":{}}):o))+'</div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-states-actions">\r\n      <div class="csui-stateaction csui-progresscell">\r\n        <button type="button" aria-label="'+this.escapeExpression((o=null!=(o=t.stateaction_all_pending||(null!=e?e.stateaction_all_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"stateaction_all_pending","hash":{}}):o))+'"\r\n                class="csui-stateaction-pending\r\n        csui-icon-like-btn binf-btn binf-btn-default">'+this.escapeExpression((o=null!=(o=t.stateaction_pending||(null!=e?e.stateaction_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"stateaction_pending","hash":{}}):o))+'</button>\r\n        <button type="button" aria-label="'+this.escapeExpression((o=null!=(o=t.stateaction_all_processing||(null!=e?e.stateaction_all_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"stateaction_all_processing","hash":{}}):o))+'"\r\n                class="csui-stateaction-processing csui-icon-like-binf-btn binf-hidden binf-btn binf-btn-default">\r\n            '+this.escapeExpression((o=null!=(o=t.stateaction_processing||(null!=e?e.stateaction_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"stateaction_processing","hash":{}}):o))+'</button>\r\n      </div>\r\n      <div class="csui-expand csui-progresscell">\r\n        <button type="button" class="csui-expand-down csui-button-icon icon-expandArrowDown binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((o=null!=(o=t.expandAria||(null!=e?e.expandAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"expandAria","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.expand||(null!=e?e.expand:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"expand","hash":{}}):o))+'" aria-haspopup="true" aria-expanded="false"/>\r\n        <button type="button" class="csui-expand-up binf-hidden csui-button-icon icon-expandArrowUp binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((o=null!=(o=t.collapseAria||(null!=e?e.collapseAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"collapseAria","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.collapse||(null!=e?e.collapse:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"collapse","hash":{}}):o))+'" aria-haspopup="true" aria-expanded="true"/>\r\n      </div>\r\n      <div class="csui-close csui-progresscell '+(null!=(n=t.if.call(e,null!=e?e.processing:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+'">\r\n        <button type="button" class="csui-action-close csui-icon binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((o=null!=(o=t.closeAria||(null!=e?e.closeAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"closeAria","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.close||(null!=e?e.close:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"close","hash":{}}):o))+'" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="csui-items-wrapper">\r\n  <div class="csui-items" role="list">\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel_impl_progresspanel",s),s}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel/impl/progressbar",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n,o;return'  <div class="csui-progressbar csui-progressrow" style="height:48px;">\r\n    <div class="csui-name-status" role="listitem">\r\n      <div class="csui-names-progress ">\r\n        <div class="csui-names csui-progresscell">\r\n          <div class="csui-name csui-progresscell" title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'">\r\n            '+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'\r\n          </div>\r\n        </div>\r\n        <div class="csui-states-actions">\r\n          <div class="csui-stateaction csui-progresscell">\r\n'+(null!=(n=t.if.call(e,null!=e?e.enableCancel:e,{"name":"if","hash":{},"fn":this.program(2,s,0),"inverse":this.noop}))?n:"")+'            <div\r\n                class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" />\r\n            <div\r\n                class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" />\r\n            <div class="csui-stateaction-aborted binf-hidden" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n'},"2":function(e,t,i,s){var n;return'              <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n            circle_delete" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" />\r\n              <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n            csui-icon circle_delete" aria-label="'+this.escapeExpression((n=null!=(n=t.cancelAria||(null!=e?e.cancelAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancelAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" />\r\n'},"4":function(e,t,i,s){var n,o;return'  <div class="csui-name-status" role="listitem">\r\n    <div class="csui-names-progress">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-type '+this.escapeExpression((o=null!=(o=t.type_icon_class||(null!=e?e.type_icon_class:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"type_icon_class","hash":{}}):o))+'" />\r\n        <div class="csui-name" title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'">\r\n          '+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress csui-progresscell" tabindex="0">\r\n        <div class="csui-progress-dynamic binf-hidden" aria-hidden="true">\r\n          <div class="csui-progress-textbar">\r\n            <div class="csui-progress-text"></div>\r\n            <div class="binf-progress">\r\n              <div class="binf-progress-bar" role="progressbar" aria-valuenow="'+this.escapeExpression((o=null!=(o=t.percentage||(null!=e?e.percentage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"percentage","hash":{}}):o))+'"\r\n                   aria-valuemin="0" aria-valuemax="100" style="width:'+this.escapeExpression((o=null!=(o=t.percentage||(null!=e?e.percentage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"percentage","hash":{}}):o))+'%" ></div>\r\n            </div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n        <div class="csui-progress-static"  aria-hidden="true">\r\n          <div class="csui-progress-textbar">\r\n            <div class="csui-progress-static-pending">'+this.escapeExpression((o=null!=(o=t.state_pending||(null!=e?e.state_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_pending","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-processing binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_processing||(null!=e?e.state_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_processing","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-resolved binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_resolved||(null!=e?e.state_resolved:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_resolved","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-rejected binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_rejected||(null!=e?e.state_rejected:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_rejected","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-aborted binf-hidden">'+this.escapeExpression((o=null!=(o=t.state_aborted||(null!=e?e.state_aborted:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_aborted","hash":{}}):o))+'</div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-states-actions">\r\n      <div class="csui-stateaction csui-progresscell">\r\n'+(null!=(n=t.if.call(e,null!=e?e.enableCancel:e,{"name":"if","hash":{},"fn":this.program(5,s,0),"inverse":this.noop}))?n:"")+'        <div\r\n            class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" />\r\n        <div\r\n            class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" />\r\n        <div class="csui-stateaction-aborted binf-hidden" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-error" title="'+this.escapeExpression((o=null!=(o=t.error||(null!=e?e.error:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"error","hash":{}}):o))+'">\r\n    '+this.escapeExpression((o=null!=(o=t.error||(null!=e?e.error:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"error","hash":{}}):o))+"\r\n  </div></div>\r\n\r\n"},"5":function(e,t,i,s){var n;return'          <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n            circle_delete" aria-label="'+this.escapeExpression((n=null!=(n=t.cancelAria||(null!=e?e.cancelAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancelAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" />\r\n          <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n            csui-icon circle_delete" aria-label="'+this.escapeExpression((n=null!=(n=t.cancelAria||(null!=e?e.cancelAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancelAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" />\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return(null!=(n=t.if.call(e,null!=e?e.commandName:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.program(4,s,0)}))?n:"")+"\r\n\r\n"}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel_impl_progressbar",s),s}),csui.define("css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel",[],function(){}),csui.define("css!csui/controls/globalmessage/globalmessage_icons",[],function(){}),csui.define("csui/controls/globalmessage/impl/progresspanel/progresspanel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/nodesprites","i18n","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang","hbs!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","hbs!csui/controls/globalmessage/impl/progresspanel/impl/progressbar","css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,s,n,o,r,c,a,l){"use strict";var u=["pending","processing","rejected","resolved","aborted"],d=function(t,i){var s=t.find(".csui-error");if(void 0===i.dynamic?"processing"===i.state:i.dynamic){var n=t.find(".binf-progress-bar");this.options.messageHelper.switchField(t,".csui-progress","dynamic",["static","dynamic"]);var r=e.str.sformat(c.BytesOfSize,o.getReadableFileSizeString(i.count),o.getReadableFileSizeString(i.total));t.find(".csui-progress-text").text(r),n.attr("aria-valuenow",i.percentage),n.css("width",e.str.sformat("{0}%",i.percentage)),t.find(".csui-progress-dynamic .csui-percent").text(e.str.sformat("{0}%",i.percentage)),t.find(".csui-progress").attr("aria-label",e.str.sformat("{0} {1}%",i.label,i.percentage))}else{this.options.messageHelper.switchField(t,".csui-progress","static",["static","dynamic"]),this.options.messageHelper.switchField(t,".csui-progress-static",i.state,u);var a=e.str.sformat("{0} {1}",i.label,c["State_"+i.state]);t.find(".csui-progress").attr("aria-label",a)}s.text(i.errorMessage),s.attr("title",i.errorMessage),i.errorMessage&&t.addClass("csui-error"),this.options.messageHelper.switchField(t,".csui-stateaction",i.state,u)},p=i.ItemView.extend({"constructor":function(e){i.ItemView.prototype.constructor.call(this,e);var t=this.model;t.node&&void 0===t.node.get("mime_type")&&t.node.set({"container":!1,"type":144,"mime_type":t.get("mime_type")||t.get("type")},{"silent":!0}),this.listenTo(this.model,"change",this._updateItem)},"_updateItem":function(){var e=this._computeProgress(),t=this.$el;d.call(this,t,e)},"_computeProgress":function(){var t=this.model.get("count"),i=this.model.get("total"),s=this.model.get("state"),n=Math.floor(t/i*100);return 100===n&&"processing"===s&&(n=99),{"count":t,"total":i,"percentage":n,"state":s,"errorMessage":this.model.get("errorMessage"),"label":e.str.sformat("{0} {1}",this.options.oneFilePending,this.getItemLabel())}},"className":"csui-progressbar csui-progressrow","template":l,"getItemLabel":function(){return this.model.get("newName")||this.model.get("name")},"templateHelpers":function(){var t=this._computeProgress(),i=this.model,n=this.getItemLabel(),o=e.str.sformat(c.CancelAria,n);!!i.get("commandName")||i.get("commandName");return t.name=n,t.enableCancel=this.options.enableCancel,t.type_icon_class=this.model.node?s.findClassByNode(this.model.node):"",u.forEach(function(e){t["state_"+e]=c["State_"+e]}),t.cancel=c.Cancel,t.cancelAria=o,t.expand=c.Expand,t.collapse=c.Collapse,t.close=c.Close,t},"onRender":function(){this._updateItem()},"ui":{"pendingAction":".csui-stateaction-pending","processingAction":".csui-stateaction-processing","error":".csui-error"},"events":{"click @ui.pendingAction":"doCancel","click @ui.processingAction":"doCancel"},"doCancel":function(){this.model.abort()}});return i.CompositeView.extend({"constructor":function(t){t||(t={}),e.defaults(t,{"oneFileSuccess":c.UploadOneItemSuccessMessage,"multiFileSuccess":c.UploadManyItemsSuccessMessage,"oneFilePending":c.UploadingOneItem,"multiFilePending":c.UploadingItems,"oneFileFailure":c.UploadOneItemFailMessage,"multiFileFailure":c.UploadManyItemsFailMessage2,"someFileSuccess":c.UploadSomeItemsSuccessMessage,"someFilePending":c.UploadingSomeItems,"someFileFailure":c.UploadSomeItemsFailMessage2,"enableCancel":!0}),t.enableCancel?this.panelStateValues=["resolved","rejected","aborted","processing"]:this.panelStateValues=["resolved","rejected","aborted"],i.CompositeView.prototype.constructor.call(this,t),this.listenTo(this.collection,"change",this._updateHeader),this.originatingView=t.originatingView,this.originatingView&&this.originatingView.trigger("global.alert.inprogress")},"onDestroy":function(){this.handleProgressComplete()},"handleProgressComplete":function(){this.originatingView&&this.originatingView.trigger("global.alert.completed")},"behaviors":{"PerfectScrolling":{"behaviorClass":r,"contentParent":"> .csui-items-wrapper","suppressScrollX":!0}},"isProgressFailed":function(){return-1!==t.inArray(this.state,["rejected","aborted"])},"isProgressCompleted":function(){return-1!==t.inArray(this.state,["resolved","rejected","aborted"])},"_updateHeader":function(){var t,i=this._computeProgress(),s=this.options,n=this.collection.length;if(t="pending"===i.state||"processing"===i.state?this._getFormatString(s.oneFilePending,s.someFilePending,s.multiFilePending,n):"resolved"===i.state?this._getFormatString(s.oneFileSuccess,s.someFileSuccess,s.multiFileSuccess,n):this._getFormatString(s.oneFileFailure,s.someFileFailure,s.multiFileFailure,n),i.label=t=e.str.sformat(t,this.collection.length,this.collection.length-i.failed,i.failed),this.ui.header.find(".csui-title").text(t),this.state=i.state,this.isProgressFailed()&&(this.ui.header.addClass("csui-error").find(".csui-header-icon").toggleClass("csui-icon-notification-warning-white binf-hidden"),this.ui.processingAction.addClass("binf-hidden"),this.ui.closeAction.parent(".csui-close").removeClass("binf-hidden"),this.ui.header.find(".csui-progress").addClass("binf-hidden"),this.ui.header.find(".csui-title").attr("tabindex","0").focus()),this.isProgressCompleted()&&this.handleProgressComplete(),d.call(this,this.ui.header,i),!this.stateExpandCollapse){var o=this.ui.header.find(".csui-expand").find(":not(.binf-hidden)");o.hasClass("csui-expand-up")?this.doExpand(!1):o.hasClass("csui-expand-down")&&this.doCollapse(!1)}var r=!this.collection||0===this.collection.length;this.$el.hasClass("csui-empty")?r||this.$el.removeClass("csui-empty"):r&&this.$el.addClass("csui-empty")},"_getFormatString":function(e,t,i,s){return s<=1?e:s>1&&s<5?t:i},"_computeProgress":function(){var e=!0,t=!1,i=!0,s=0,n=0,o=0;this.collection.forEach(function(r){n+=r.get("count"),o+=r.get("total"),"pending"!==r.get("state")&&"processing"!==r.get("state")||(e=!1),"pending"!==r.get("state")&&(t=!0),"rejected"!==r.get("state")&&"aborted"!==r.get("state")||++s,"resolved"!==r.get("state")&&"rejected"!==r.get("state")||(i=!1)});var r=o>0?Math.floor(n/o*100):0;100!==r||e||(r=99);var c=e?s?i?"aborted":"rejected":"resolved":t?"processing":"pending";return{"count":n,"total":o,"failed":s,"percentage":r,"state":c,"dynamic":"pending"!==c}},"className":"csui-progresspanel","childView":p,"childViewContainer":".csui-items","childViewOptions":function(){return e.extend(this.options,{"enableCancel":this.options.enableCancel,"messageHelper":this.options.messageHelper})},"template":a,"templateHelpers":function(){var t=this._computeProgress();return u.forEach(function(e){t["state_"+e]=c["State_"+e]}),this.panelStateValues.forEach(function(e){t["stateaction_"+e]=c["StateAction_"+e],t["stateaction_all_"+e]=c["StateAction_all_"+e]}),t.cancel=c.Cancel,t.expand=c.Expand,t.expandAria=c.ExpandAria,t.collapse=c.Collapse,t.collapseAria=c.CollapseAria,t.close=c.Close,
t.closeAria=c.CloseAria,t.processing="processing"===t.state,t.progressTitleId=e.uniqueId("progressTitle"),t},"onRender":function(){this._updateHeader()},"ui":{"header":".csui-header","pendingAction":".csui-header .csui-stateaction-pending","processingAction":".csui-header .csui-stateaction-processing","closeAction":".csui-header .csui-action-close","collapseAction":".csui-header .csui-expand-up","expandAction":".csui-header .csui-expand-down"},"events":{"click @ui.pendingAction":"doCancel","click @ui.processingAction":"doCancel","click @ui.closeAction":"doClose","click @ui.collapseAction":"doCollapse","click @ui.expandAction":"doExpand"},"doCancel":function(){this.collection.forEach(function(e){e.abort()})},"doCollapse":function(e){e=!1!==e;var t=this.$el.find(".csui-items");this.options.messageHelper.switchField(this.$el.find(".csui-header"),".csui-expand","down",["up","down"]),this.options.messageHelper.collapsePanel(this,t,t,e),this.stateExpandCollapse="collapsed",this.$el.find(".csui-expand-down").focus()},"doExpand":function(e){var t=this.$el.find(".csui-items"),i=this;e=!1!==e,this.options.messageHelper.switchField(this.$el.find(".csui-header"),".csui-expand","up",["up","down"]),this.options.messageHelper.expandPanel(this,t,t,e),this.stateExpandCollapse="expanded",this.$el.find(".csui-expand-up").focus(),this.$el.one(this.options.messageHelper.transitionEnd(),function(){i.trigger("ensure:scrollbar")})},"doShow":function(e,t){this.options.messageHelper.showPanel(this,e,t),this.doResize(),this.$el.trigger("globalmessage.shown",this),this.currentlyFocusedElement().focus()},"currentlyFocusedElement":function(){return this.ui.header.find(".csui-progress")},"doClose":function(){var t=this,i=e.extend({"csuiAfterHide":function(){t.destroy(),t.isProgressFailed()&&t.trigger("escaped:focus")}},this);this.options.messageHelper.fadeoutPanel(i)},"doResize":function(){if(this.options.sizeToParentContainer){var e=parseInt(this.$el.css("min-width"),10),t=(this.$el.width(),this.$el.parent().width());this.uncompressedMinWidth||(this.uncompressedMinWidth=e),this.uncompressedMinWidth>t?this.$el.addClass("compressed"):this.$el.removeClass("compressed");var i=this.$el.width(),s=(t-i)/2;s>0||(s=0),s=n.settings.rtl?-s:s,s="translateX("+s+"px)",this.$el.css({"transform":s})}}})}),csui.define("csui/controls/globalmessage/impl/nls/globalmessage.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/nls/root/globalmessage.lang",{"FewerDetails":"Fewer details","MoreDetails":"More details...","GotoLocationLinkLabel":"Go to location","CloseDialog":"Close","closeDialogAria":"Close message dialog"}),csui.define("hbs!csui/controls/globalmessage/impl/messagedialog",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'  <div class="csui-message-link-div">\r\n    <a href="'+this.escapeExpression((n=null!=(n=t.link_url||(null!=e?e.link_url:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"link_url","hash":{}}):n))+'" class="csui-message-link">'+this.escapeExpression((n=null!=(n=t.link_label||(null!=e?e.link_label:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"link_label","hash":{}}):n))+"</a>\r\n  </div>\r\n"},"3":function(e,t,i,s){var n;return'<div class="csui-details-wrapper">\r\n  <div id="csui-message-details" class="csui-details csui-minheight">\r\n    <div class="csui-text binf-hidden" id="'+this.escapeExpression((n=null!=(n=t.detailsId||(null!=e?e.detailsId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"detailsId","hash":{}}):n))+'">'+this.escapeExpression((n=null!=(n=t.details_text||(null!=e?e.details_text:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"details_text","hash":{}}):n))+'</div>\r\n    <div class="csui-action csui-message-details-heightsource">\r\n      <a href="javascript:void(0);" class="csui-action-moredetails">'+this.escapeExpression((n=null!=(n=t.action_moredetails||(null!=e?e.action_moredetails:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"action_moredetails","hash":{}}):n))+'</a>\r\n      <a href="javascript:void(0);" class="csui-action-fewerdetails binf-hidden">'+this.escapeExpression((n=null!=(n=t.action_fewerdetails||(null!=e?e.action_fewerdetails:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"action_fewerdetails","hash":{}}):n))+"</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<div class="csui-header csui-height-target">\r\n    <div class="csui-state">\r\n        <span class="csui-state-icon csui-icon"></span>\r\n    </div>\r\n    <div class="csui-text" id="'+this.escapeExpression((o=null!=(o=t.headerId||(null!=e?e.headerId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"headerId","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.header_text||(null!=e?e.header_text:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"header_text","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.header_text||(null!=e?e.header_text:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"header_text","hash":{}}):o))+'</div>\r\n    <div class="csui-action">\r\n        <button type="button" class="csui-action-close binf-btn binf-btn-default csui-icon" title="'+this.escapeExpression((o=null!=(o=t.closeDialog||(null!=e?e.closeDialog:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"closeDialog","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.closeDialogAria||(null!=e?e.closeDialogAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"closeDialogAria","hash":{}}):o))+'"/>\r\n    </div>\r\n</div>\r\n\r\n'+(null!=(n=t.if.call(e,null!=e?e.message_with_link:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+"\r\n"+(null!=(n=t.if.call(e,null!=e?e.details_text:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_globalmessage_impl_messagedialog",s),s}),csui.define("css!csui/controls/globalmessage/impl/messagedialog",[],function(){}),csui.define("csui/controls/globalmessage/impl/messagedialog.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n","i18n!csui/controls/globalmessage/impl/nls/globalmessage.lang","hbs!csui/controls/globalmessage/impl/messagedialog","css!csui/controls/globalmessage/impl/messagedialog","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,s,n,o,r){"use strict";var c={"info":"csui-info","success":"csui-success","success_with_link":"csui-success-with-link","warning":"csui-warning","error":"csui-error","processing":"csui-processing","none":"csui-none"},a={"info":"csui-icon-notification-information-white","success":"csui-icon-notification-success-white","success_with_link":"csui-icon-notification-success-white","warning":"csui-icon-notification-warning-white","error":"csui-icon-notification-error-white","processing":null,"none":null},l={"info":"csui-icon-dismiss-white","success":"csui-icon-dismiss-white","success_with_link":"csui-icon-dismiss-white","warning":"csui-icon-dismiss-white","error":"csui-icon-dismiss-white","processing":null,"none":"csui-icon-dismiss"};return i.ItemView.extend({"constructor":function(e){this.css=r,e.info||(e.info="info"),this.className="csui-messagepanel "+c[e.info],e.context&&e.nextNodeModelFactory&&(this._nextNode=e.context.getModel(e.nextNodeModelFactory)),i.ItemView.prototype.constructor.call(this,e)},"className":"csui-messagepanel "+c.info,"template":o,"ui":{"closeAction":".csui-header .csui-action-close","collapseAction":".csui-details .csui-action-fewerdetails","expandAction":".csui-details .csui-action-moredetails","stateIcon":".csui-state-icon","closeIcon":".csui-action-close","messageLink":".csui-message-link"},"events":{"click @ui.closeAction":"doClose","click @ui.collapseAction":"doCollapse","click @ui.expandAction":"doExpand","click @ui.messageLink":"onClickLink","focusout @ui.closeIcon":"replaceDummyBackImg"},"doResize":function(){var e=this.$el.find(".csui-header");if(this.$el.find(".csui-details").width(e.width()),this.options.sizeToParentContainer){var t=this.$el.width(),i=this.$el.parent().width(),n=(i-t)/2;n>0||(n=0),n=s.settings.rtl?-n:n,n="translateX("+n+"px)",this.$el.css({"transform":n})}},"doCollapse":function(t){this._clearTimeout(),t=!1!==t;var i=this.$el.find(".csui-details"),s=i.find(".csui-text");this.options.messageHelper.switchField(i,".csui-action","moredetails",["moredetails","fewerdetails"]);var n=e.extend({"csuiAfterHide":function(){i.css("width","")}},this);this.options.messageHelper.collapsePanel(n,i,s,t),this.stateExpandCollapse="collapsed"},"doExpand":function(e){this._clearTimeout(),e=!1!==e;var t=this.$el.find(".csui-details"),i=t.find(".csui-text");this.options.messageHelper.switchField(t,".csui-action","fewerdetails",["moredetails","fewerdetails"]),t.css("width",this.$el.find(".csui-header").width()),this.options.messageHelper.expandPanel(this,t,i,e),this.stateExpandCollapse="expanded"},"doShow":function(t,i){var s=i.$el.find(".csui-global-message.position-show");if(s.length){var n=(s.last().find(".csui-header"),s.length);this.$el.find(".csui-header").css({"top":4*n+"px","margin":"0 "+-8*n+"px"});var o=this.$el.find(".csui-details-wrapper");o.length&&o.css({"margin-right":-8*n-5+"px","margin-left":-8*n-5+"px"})}if("success"===this.options.info){var r=this,c=e.extend({"csuiAfterShow":function(){r.doResize(),r._setTimeout()}},this);this.options.messageHelper.showPanel(c,t,i)}else this.options.messageHelper.showPanel(this,t,i);this.doResize(),this.$el.trigger("globalmessage.shown",this),this.$el.find(".csui-action-close").focus()},"doClose":function(){this._clearTimeout();var t=this,i=e.extend({"csuiAfterHide":function(){t.destroy(),t.trigger("escaped:focus")}},this);this.options.messageHelper.fadeoutPanel(i)},"_setTimeout":function(){var e=this;this.options.enablePermanentHeaderMessages||(this.options.timeout=window.setTimeout(function(){e.doClose()},5e3))},"_clearTimeout":function(){this.options.timeout&&(window.clearTimeout(this.options.timeout),this.options.timeout=void 0)},"headerId":void 0,"detailsId":void 0,"templateHelpers":function(){var t=n.closeDialogAria;this.headerId||(this.headerId=e.uniqueId("header")),this.detailsId||(this.detailsId=this.options.details?e.uniqueId("details"):void 0);var i={"header_text":this.options.message,"headerId":this.headerId,"details_text":this.options.details,"detailsId":this.detailsId,"action_moredetails":n.MoreDetails,"action_fewerdetails":n.FewerDetails,"closeDialog":n.CloseDialog,"closeDialogAria":t};return this.options.link_url&&this.options.targetFolder&&(i=e.extend(i,{"message_with_link":!0,"link_label":n.GotoLocationLinkLabel,"link_url":this.options.link_url})),i},"onClickLink":function(e){e.preventDefault(),e.stopPropagation(),this.doClose(),this.options.targetFolder&&this._nextNode&&this._nextNode.set("id",this.options.targetFolder.get("id"))},"onRender":function(){this.$el.attr("role","alertdialog"),this.$el.attr("aria-labelledby",this.headerId),this.detailsId&&this.$el.attr("aria-describedby",this.detailsId);var e=a[this.options.info];e?this.ui.stateIcon.addClass(e):this.$el.addClass("csui-no-icon");var t=l[this.options.info];if(t&&this.ui.closeIcon.addClass(t),!this.stateExpandCollapse){var i=this.$el.find(".csui-details .csui-action").find(":not(.binf-hidden)");i.hasClass("csui-action-fewerdetails")?this.doExpand(!1):i.hasClass("csui-action-moredetails")&&this.doCollapse(!1)}},"replaceDummyBackImg":function(){this.ui.closeIcon.addClass("csui-action-close-replace-dummy")}})}),csui.define("csui/controls/globalmessage/impl/custom.wrapper.view",["csui/lib/backbone","csui/lib/marionette","css!csui/controls/globalmessage/impl/messagedialog"],function(e,t){"use strict";return t.ItemView.extend({"constructor":function(i){t.ItemView.prototype.constructor.call(this,i);var s=this.getOption("contentView");s instanceof e.View||(s=s.call(this)),this.view=s,this.listenTo(s,"destroy",this.destroy),this.region=new t.Region({"el":this.el})},"className":"csui-messagepanel","template":!1,"onRender":function(){this.region.show(this.view)},"onDestroy":function(){this.region.empty()},"doShow":function(e,t){this.options.messageHelper.showPanel(this,e,t)}})}),csui.define("csui/controls/globalmessage/globalmessage",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/messagehelper","csui/controls/globalmessage/impl/progresspanel/progresspanel.view","csui/controls/globalmessage/impl/messagedialog.view","csui/controls/globalmessage/impl/custom.wrapper.view"],function(e,t,i,s,n,o,r,c){"use strict";var a=e.config();t.defaults(a,{"enablePermanentHeaderMessages":!1});var l,u=new n,d={};return{"setMessageRegionView":function(e,i){this._cleanupPreviousMessageRegion(),i=t.defaults({},i,{"useClass":!0,"sizeToParentContainer":!0}),i.classes&&(d.classNames=i.classes),d.relatedView=i.useClass?void 0:e,d.sizeToParentContainer=i.sizeToParentContainer,d.messageRegionView=e,d.messageRegionView&&d.fileUploadCollection&&d.progressPanel&&(d.progressPanel=this._makeProgressPanel())},"setFileUploadCollection":function(e){d.fileUploadCollection=e,d.progressPanel&&(d.fileUploadCollection?d.progressPanel=this._makeProgressPanel():this.hideFileUploadProgress())},"hideFileUploadProgress":function(){d.progressPanel&&(d.progressPanel.doClose(),d.progressPanel.destroy(),d.progressPanel=void 0)},"showFileUploadProgress":function(e,t){e&&(d.fileUploadCollection!==e&&this.hideFileUploadProgress(),d.fileUploadCollection=e),d.progressPanel&&!e||(d.progressPanel=this._makeProgressPanel(t)),d.progressPanel&&d.progressPanel.doShow(d.relativeView,d.messageRegionView)},"showPermissionApplyingProgress":function(e,t){e&&(d.permissionAppliedCollection=e,d.progressPanel=this.__makePermissionProgressPanel(t)),d.progressPanel&&!e||(d.progressPanel=this._makeProgressPanel(t)),d.progressPanel&&d.progressPanel.doShow(d.relativeView,d.messageRegionView)},"showMessage":function(e,i,s,n){return this._showMessageView(r,t.extend({"info":e,"message":i,"details":s,"messageHelper":u,"sizeToParentContainer":d.sizeToParentContainer,"enablePermanentHeaderMessages":a.enablePermanentHeaderMessages},n))},"showCustomView":function(e){return this._showMessageView(c,{"contentView":e,"messageHelper":u})},"_showMessageView":function(e,t){this._ensureMessageRegion();var i=u.activatePanel(u.createPanel(d,e,t),d.relatedView,d.messageRegionView);return this._addEventHandlers(i),i},"_makeProgressPanel":function(e){e||(e={}),t.defaults(e,{"collection":d.fileUploadCollection,"sizeToParentContainer":d.sizeToParentContainer,"messageHelper":u}),this._ensureMessageRegion();var i=u.activatePanel(u.createPanel(d,o,e,d.progressPanel),d.relatedView,d.messageRegionView,d.progressPanel);return this._addEventHandlers(i),i},"__makePermissionProgressPanel":function(e){e||(e={}),t.defaults(e,{"collection":d.permissionAppliedCollection,"sizeToParentContainer":d.sizeToParentContainer,"messageHelper":u}),this._ensureMessageRegion();var i=u.activatePanel(u.createPanel(d,o,e,d.progressPanel),d.relatedView,d.messageRegionView,d.progressPanel);return this._addEventHandlers(i),i},"_addEventHandlers":function(e){var t=function(){u.resizePanel(e,d.relatedView)};i(window).on("resize",t),e.listenTo(d.messageRegionView,"resize",t),e.once("before:destroy",function(){i(window).off("resize",t),e.stopListening(d.messageRegionView,"resize",t)})},"_ensureMessageRegion":function(){if(!d.messageRegionView){var e=i.fn.binf_modal.getDefaultContainer(),t=i("<div>",{"style":"position:absolute; top: 0; left: 0; width: 0; height: 100vh;"}).appendTo(e);d.messageRegionView=new s.View({"el":t}),l=!0}},"_cleanupPreviousMessageRegion":function(){l&&(d.messageRegionView.remove(),l=!1),d.progressPanel&&d.progressPanel.destroy(),d={}}}}),csui.define("csui/behaviors/default.action/impl/command",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/commands","csui/controls/globalmessage/globalmessage","csui/utils/commandhelper"],function(e,t,i,s,n,o){"use strict";function r(e){e||(e={}),this.commands=e.commands||s}return e.extend(r.prototype,{"executeAction":function(i,s,r){var c=i.get("signature"),a=this.commands.findWhere({"signature":c});if(!a)throw new Error("Invalid command: "+c);var l=a.execute(s,r);return e.isArray(l)||(l=[l]),t.when.apply(t,l).fail(function(e){e&&(o.showOfflineMessage(e)||n.showMessage("error",e.message))})}}),r.extend=i.View.extend,r}),csui.define("csui/behaviors/default.action/impl/defaultaction",["csui/lib/underscore","csui/behaviors/default.action/impl/command","csui/models/nodes","csui/utils/defaultactionitems"],function(e,t,i,s){"use strict";var n=t.extend({"constructor":function(e){t.prototype.constructor.apply(this,arguments),e||(e={}),this.actionItems=e.actionItems||s},"executeAction":function(e,s){var n;e.original&&e.original.get("id")>0&&(n=this._fakeActions(e.original),1===e.get("type")&&(e=e.original));var o=this.getAction(e),r={"nodes":new i([e])};return n&&this._resetFakedActions(e),o&&t.prototype.executeAction.call(this,o,r,s)},"getAction":function(e){var t,s=e.get("type");(1===s||(!window.csui||!window.csui.mobile)&&2===s)&&e.original&&e.original.get("id")>0&&(e=e.original,t=this._fakeActions(e));var n={"nodes":new i([e])},o=!1,r=this.actionItems.find(function(t){if(t.enabled(e)){var i=this.commands.findWhere({"signature":t.get("signature")});return o=i&&i.enabled(n),!0}},this);return t&&this._resetFakedActions(e),o&&r},"hasAction":function(e){return!!this.getAction(e)},"_fakeActions":function(t){if(!t.actions.length){var i=e.map(this.actionItems.getAllCommandSignatures(this.commands),function(e){return{"signature":e}});return t.actions.reset(i,{"silent":!0}),!0}},"_resetFakedActions":function(e){e.actions.reset([],{"silent":!0})}});return n.version="1.0",n}),csui.define("csui/behaviors/default.action/default.action.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/utils/log","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/search.query.factory","csui/behaviors/default.action/impl/defaultaction","csui/utils/node.links/node.links"],function(e,t,i,s,n,o,r,c,a,l,u){"use strict";return r=r(e.id),n.Behavior.extend({"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments);var i=t.options.context;this.view=t,this._nextNode=i&&i.getModel(c),this._searchQuery=i&&i.getModel(a),t.defaultActionController=this.options.defaultActionController||new l},"onExecuteDefaultAction":function(e){e instanceof s.View&&(e=e.model),this.view.defaultActionController.getAction(e)?this.view.defaultActionController.executeAction(e,{"context":this.view.options.context,"originatingView":this.view}):r.can("WARN")&&r.warn("No default action was enabled for {0}.",JSON.stringify(t.pick(e.attributes,"name","id","type")))&&console.warn(r.last)}},{"getDefaultActionNodeUrl":function(e){var t=u.getUrl(e),i=t.lastIndexOf("#");return i>=0?t.substr(i):t}})}),csui.define("hbs!csui/controls/error/impl/error",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'  <div class="csui-suggestion">'+this.escapeExpression((n=null!=(n=t.suggestion||(null!=e?e.suggestion:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"suggestion","hash":{}}):n))+"</div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<div class="csui-error-icon-div">\r\n  <div class="csui-error-icon-parent">\r\n    <div class="csui-error-icon notification_error"></div>\r\n  </div>\r\n\r\n</div>\r\n<div class="csui-message">'+this.escapeExpression((o=null!=(o=t.message||(null!=e?e.message:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"message","hash":{}}):o))+"</div>\r\n"+(null!=(n=t.if.call(e,null!=e?e.suggestion:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_error_impl_error",s),s}),csui.define("css!csui/controls/error/impl/error",[],function(){}),csui.define("csui/controls/error/error.view",["csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/error/impl/error","css!csui/controls/error/impl/error"],function(e,t,i){"use strict";return t.ItemView.extend({"className":function(){var e="csui-error content-tile";return this.options.low&&(e+=" csui-low"),e},"template":i,"modelEvents":{"change":"render"},"ui":{"messageArea":".csui-message"},"events":{"mouseenter":"showPopover","mouseleave":"hidePopover"},"constructor":function(e){e=e||{},t.ItemView.prototype.constructor.call(this,e)},"onShow":function(){if(this.options.model.get("title")){var t=this;this.$el.closest(".csui-disabled").removeClass("csui-disabled"),this.ui.messageArea.binf_popover({"content":this.options.model.get("title"),"html":!0,"placement":function(){var i=t.ui.messageArea,s=i.width(),n=i.height(),o=i.offset(),r=o.left,c=o.top,a=e(window).width()-(r+i.outerWidth(!0)),l=e(window).height()-(c+i.outerHeight(!0));return a>s?"right":r>s?"left":l>n?"bottom":"top"}})}},"showPopover":function(e){e.preventDefault(),e.stopPropagation(),this.ui.messageArea.binf_popover("show")},"hidePopover":function(e){e.preventDefault(),e.stopPropagation(),this.ui.messageArea.binf_popover("hide")}})}),csui.define("csui/widgets/error/error.view",["csui/lib/underscore","csui/lib/backbone","csui/controls/error/error.view"],function(e,t,i){"use strict";return i.extend({"className":function(){var t=i.prototype.className;return e.isFunction(t)&&(t=t.call(this)),"csui-error-widget "+t},"constructor":function(e){e||(e={}),e.data||(e.data={}),e.model||(e.model=new t.Model({"message":e.data.message,"suggestion":e.data.suggestion})),i.prototype.constructor.call(this,e)}})}),csui.define("csui/behaviors/widget.container/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/behaviors/widget.container/impl/nls/root/lang",{"loadingWidgetFailedMessage":'"{0}" failed to load.',"loadingWidgetFailedSuggestion":"Please try again later or contact support."}),csui.define("csui/behaviors/widget.container/widget.container.behavior",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/widgets/error/error.view","csui/utils/log","i18n!csui/behaviors/widget.container/impl/nls/lang","csui/lib/jquery.when.all"],function(e,t,i,s,n,o,r){"use strict";var c=s.Behavior.extend({"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this.view=t,this.view.widgetsResolved=this._resolveWidgets()},"_resolveWidgets":function(){var e=[];if(!this.view.enumerateWidgets)throw new s.Error({"name":"UndefinedEnumerateWidgets","message":"Undefined enumerateWidgets method"});return this.view.enumerateWidgets(t.bind(function(t){e.push(c.resolveWidget(t))},this)),i.whenAll.apply(i,e)}},{"getErrorWidget":function(e,i){return{"type":"csui/widgets/error","options":{"message":t.str.sformat(r.loadingWidgetFailedMessage,e.type),"suggestion":r.loadingWidgetFailedSuggestion},"view":n,"error":i}},"resolveWidget":function(e){if(!e.view){return c._loadWidget(e.type).then(function(t){e.view=t,e.class=t},function(i){o.warn('Loading widget "{0}" failed. {1}',e.type,i)&&console.warn(o.last),o.warn("Occurred "+o.getStackTrace())&&console.warn(o.last),t.extend(e,c.getErrorWidget(e,i))})}return i.Deferred().resolve().promise()},"_loadWidget":function(t){var s,n=i.Deferred(),o=t.lastIndexOf("/");return o<0?s="csui/widgets/"+t:(s=t,t=t.substring(o+1)),e([s+"/"+t+".view"],function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise()}});return c}),csui.define("csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",["csui/lib/underscore","csui/lib/marionette"],function(e,t){"use strict";return{"propagateEventsToViews":function(){var t=Array.prototype.slice.call(arguments);e.each(this._eventsToPropagateToViews,e.bind(this._propagateEventToViews,this,t))},"cancelEventsToViewsPropagation":function(){var t=Array.prototype.slice.call(arguments);e.each(this._eventsToPropagateToViews,e.bind(this._cancelEventToViewsPropagation,this,t))},"_propagateEventToViews":function(i,s){e.each(i,function(e){var i=e;e.listenTo(this,s,function(){if(i._isShown&&i._isRendered&&t.isNodeAttached(i.el)){var e=Array.prototype.slice.call(arguments);e.unshift(i,s),t.triggerMethodOn.apply(t,e)}},this)},this)},"_cancelEventToViewsPropagation":function(t,i){e.each(t,function(e){e.stopListening(this,i,void 0,this)},this)},"_eventsToPropagateToViews":["dom:refresh"]}}),csui.define("csui/controls/grid/grid.view",["require","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin"],function(e,t,i,s,n){var o=s.ItemView.extend({"className":function(){var e=[];return this.model.get("className")&&e.push(this.model.get("className")),this._addSizeClasses(e),this._addOffsetClasses(e),this._addPullClasses(e),this._addPushClasses(e),this._addHeightClasses(e),t.unique(e).join(" ")},"attributes":function(){var e;if(void 0!==this.model.get("widget")){var t=this.model.get("widget").type,i=t.lastIndexOf("/");i>0&&(t=t.substring(i+1)),e={"data-csui-widget_type":t,"data-csui-cell_address":this.model.get("widget").cellAddress}}else e={};return e},"constructor":function(e){e.cellBehaviours&&(this.behaviors=t.extend(e.cellBehaviours,this.behaviors)),this._init(e)},"_init":function(e){s.ItemView.prototype.constructor.call(this,t.extend({"template":!1},e)),this.collection?this._createRows():(this._createCell(),this._registerModelEvents()),this.propagateEventsToViews(this.cell||this.rows)},"_registerModelEvents":function(){this.listenTo(this.model,"change:widget",this._updateWidget),this.listenTo(this.model,"change:sizes",this._updateSizes),this.listenTo(this.model,"change:heights",this._updateSizes)},"_updateSizes":function(){var e=t.result(this,"className");this.$el.attr("class",e)},"_updateWidget":function(e){e.cellAddress=this.model.get("widget").cellAddress,this._createCell();var i=t.result(this,"attributes");this.id&&(i.id=t.result(this,"id")),this.className&&(i.class=t.result(this,"className")),this.$el.attr(i),this.render()},"onRender":function(){this._renderContent()},"onBeforeDestroy":function(){this._destroyContent()},"_addSizeClasses":function(e){var t=this.model.get("sizes");t&&(null!=t.xs&&e.push("binf-col-xs-"+t.xs),null!=t.sm&&e.push("binf-col-sm-"+t.sm),null!=t.md&&e.push("binf-col-md-"+t.md),null!=t.lg&&e.push("binf-col-lg-"+t.lg),null!=t.xl&&e.push("binf-col-xl-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-"+t.xxl))},"_addOffsetClasses":function(e){var t=this.model.get("offsets");t&&(null!=t.xs&&e.push("binf-col-xs-offset-"+t.xs),null!=t.sm&&e.push("binf-col-sm-offset-"+t.sm),null!=t.md&&e.push("binf-col-md-offset-"+t.md),null!=t.lg&&e.push("binf-col-lg-offset-"+t.lg),null!=t.xl&&e.push("binf-col-xl-offset-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-offset-"+t.xxl))},"_addPullClasses":function(e){var t=this.model.get("pulls");t&&(null!=t.xs&&e.push("binf-col-xs-pull-"+t.xs),null!=t.sm&&e.push("binf-col-sm-pull-"+t.sm),null!=t.md&&e.push("binf-col-md-pull-"+t.md),null!=t.lg&&e.push("binf-col-lg-pull-"+t.lg),null!=t.xl&&e.push("binf-col-xl-pull-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-pull-"+t.xxl))},"_addPushClasses":function(e){var t=this.model.get("pushes");t&&(null!=t.xs&&e.push("binf-col-xs-push-"+t.xs),null!=t.sm&&e.push("binf-col-sm-push-"+t.sm),null!=t.md&&e.push("binf-col-md-push-"+t.md),null!=t.lg&&e.push("binf-col-lg-push-"+t.lg),null!=t.xl&&e.push("binf-col-xl-push-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-push-"+t.xxl))},"_addHeightClasses":function(e){var t=this.model.get("heights");t&&(null!=t.xs&&e.push("row-xs-"+t.xs),null!=t.sm&&e.push("row-sm-"+t.sm),null!=t.md&&e.push("row-md-"+t.md),null!=t.lg&&e.push("row-lg-"+t.lg),null!=t.xl&&e.push("row-xl-"+t.xl),null!=t.xxl&&e.push("row-xxl-"+t.xxl))},"_createRows":function(){this.rows=new c({"el":this.el,"grid":this.options.grid,"collection":this.collection})},"_createCell":function(){var e=this._getCellView(),i=this._getCellViewOptions(),s=t.extend({"model":this.model},i);this.cell=new e(s)},"_getCellView":function(){var e=this.options.grid.getOption("cellView");if(!e||e.prototype instanceof i.View||(e=e.call(this.options.grid,this.model)),!e)throw new s.Error({"name":"NoCellViewError","message":'A "cellView" must be specified'});return e},"_getCellViewOptions":function(){var e=this.options.grid.getOption("cellViewOptions");return t.isFunction(e)&&(e=e.call(this.options.grid,this.model)),e},"_renderContent":function(){this.cell?(this.cell.render(),s.triggerMethodOn(this.cell,"before:show"),this.$el.html("").append(this.cell.el),s.triggerMethodOn(this.cell,"show")):(this.options.grid.$el.hasClass("grid-rows")&&this.$el.addClass("grid-rows"),this.rows.render())},"_destroyContent":function(){this.cell&&this.cell.destroy(),this.rows&&this.rows.destroy()}});t.extend(o.prototype,n);var r=s.CollectionView.extend({"className":"binf-row","childView":o,"childViewOptions":function(e){return{"grid":this.options.grid,"collection":e.rows,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(e){e.rowBehaviours&&(this.behaviors=t.extend(e.rowBehaviours,this.behaviors)),s.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"add:child",this.propagateEventsToViews)}});t.extend(r.prototype,n);var c=s.CollectionView.extend({"childView":r,"childViewOptions":function(e){return{"grid":this.options.grid,"collection":e.columns,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(){s.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"add:child",this.propagateEventsToViews)}});t.extend(c.prototype,n);var a=r.extend({"childView":o,"childViewOptions":function(e){return{"grid":this.options.grid,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(e){e||(e={}),e.grid=this,e.collection||(e.collection=this._convertCollection(e)),r.prototype.constructor.call(this,e)},"_convertCollection":function(e){return new i.Collection(e.columns)}});return c.extend({"className":"cs-grid binf-container-fluid","constructor":function(e){e||(e={}),e.grid=this,e.collection||(e.collection=this._convertCollection(e)),c.prototype.constructor.call(this,e)},"_convertCollection":function(e){return this._convertRows(e.rows,"grid0")},"_convertRows":function(e,t){return e=new i.Collection(e),e.each(function(e,i){var s=e.get("columns");e.cellAddress=t+":r"+i,e.columns=this._convertColumns(s,e.cellAddress)},this),e},"_convertColumns":function(e,t){return e=new i.Collection(e),e.each(function(e,i){var s=e.get("rows");e.cellAddress=t+":c"+i,void 0!==e.get("widget")&&(e.get("widget").cellAddress=e.cellAddress),s&&(e.rows=this._convertRows(s,e.cellAddress))},this),e}},{"RowView":a,"CellView":o})}),csui.define("csui/controls/node-type.icon/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/node-type.icon/impl/nls/root/lang",{"shortcutTypeLabel":"Shortcut to {0}","nodeTypeUnknown":"Unknown"}),csui.define("hbs!csui/controls/node-type.icon/node-type.icon",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){return'  <span class="'+this.escapeExpression(this.lambda(e,e))+'"></span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<span class="'+this.escapeExpression((o=null!=(o=t.mainClassName||(null!=e?e.mainClassName:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"mainClassName","hash":{}}):o))+'"></span>\r\n'+(null!=(n=t.each.call(e,null!=e?e.overlayClassNames:e,{"name":"each","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_node-type.icon_node-type.icon",s),s}),
csui.define("csui/controls/node-type.icon/node-type.icon.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/nodesprites","i18n!csui/controls/node-type.icon/impl/nls/lang","hbs!csui/controls/node-type.icon/node-type.icon"],function(e,t,i,s,n,o,r){"use strict";var c=i.Model.extend({"constructor":function e(t,i){this.node=i.node,t=this._getAttributesFromNode(),e.__super__.constructor.call(this,t,i),this.listenTo(this.node,"change:id",this._updateModelFromNode).listenTo(this.node,"change:type",this._updateModelFromNode)},"_getAttributesFromNode":function(){var t,i=this.node,s=i.original,r=n.findByNode(i)||{},c=r.get("className"),a=c,l=[];r.attributes&&(t=r.get("mimeType"));var u=t||i.get("type_name")||i.get("type");if(s&&s.get("id")&&1281!==i.get("type")&&2!==i.get("type")){var d=n.findByNode(s)||{};a=d.get("className"),l.push("csui-icon csui-icon-shortcut-overlay"),u=e.str.sformat(o.shortcutTypeLabel,d.get("mimeType")||s.get("type_name")||o.nodeTypeUnknown)}return{"className":c,"mainClassName":a,"overlayClassNames":l,"title":u}},"_updateModelFromNode":function(){var e=this._getAttributesFromNode();this.clear({"silent":!0}),this.set(e)}});return s.ItemView.extend({"tagName":"span","attributes":function(){var e=this.model.get("title");return{"class":"csui-icon-group","title":e,"aria-label":e}},"template":r,"constructor":function i(s){s||(s={}),s.model||(this.ownModel=!0,s.model=new c(void 0,{"node":s.node})),i.__super__.constructor.call(this,s),s.el&&t(s.el).attr(e.result(this,"attributes")),this.listenTo(this.model,"change",this.render)},"onDestroy":function(){this.ownModel&&this.model.stopListening()}})}),csui.define("csui/controls/progressblocker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/progressblocker/impl/nls/root/lang",{"loadingText":"Loading data, please wait."}),csui.define("hbs!csui/controls/progressblocker/impl/blocker",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<div class="outer-border">\r\n  <div class="loader" aria-label="'+this.escapeExpression((n=null!=(n=t.loadingText||(null!=e?e.loadingText:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"loadingText","hash":{}}):n))+'">\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_progressblocker_impl_blocker",s),s}),csui.define("css!csui/controls/progressblocker/impl/blocker",[],function(){}),csui.define("csui/controls/progressblocker/blocker",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/log","i18n!csui/controls/progressblocker/impl/nls/lang","hbs!csui/controls/progressblocker/impl/blocker","css!csui/controls/progressblocker/impl/blocker"],function(e,t,i,s,n,o){"use strict";function r(e){s.debug("Blocking view is suppressing {0} ({1}).",s.getObjectName(e.parentView),e.parentView.cid)&&console.log(s.last),l(e.$el),b.push(e)}function c(e){e===h&&(b.forEach(function(e){s.debug("Blocking view is releasing {0} ({1}).",s.getObjectName(e.parentView),e.parentView.cid)&&console.log(s.last),a(e.$el)}),b=[])}function a(e){e.find(".outer-border").removeClass("binf-hidden")}function l(e){e.find(".outer-border").addClass("binf-hidden")}function u(e){e=e?"with":"without",this===this.blockingView.parentView?s.debug("Blocking view asked for enabling {0} indicator for {1} ({2}), counter: {3}.",e,s.getObjectName(this),this.cid,this.blockingView.counter)&&console.log(s.last):s.debug("Blocking view asked for enabling for {0} indicator for {0} ({1}) by {2} ({3}), counter: {4}.",e,s.getObjectName(this),this.cid,s.getObjectName(this.blockingView.parentView),this.blockingView.parentView.cid,this.blockingView.counter)&&console.log(s.last)}function d(){s.debug("Blocking view delegates enabling for {0} ({1}) to {2} ({3}).",s.getObjectName(this),this.cid,s.getObjectName(this.childWithBlockingView),this.childWithBlockingView.cid)&&console.log(s.last)}s=s(e.id);var p=e.config();t.defaults(p,{"delay":10,"disableDelay":10,"globalOnly":!1});var h,f,g=p.delay,m=p.disableDelay,v=p.globalOnly,b=[],x=i.ItemView.extend({"className":"load-container binf-hidden","template":o,"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments),this.parentView=e.parentView,this.focus=e.focus,this.counter=0},"serializeData":function(){return{"loadingText":n.loadingText}},"enable":function(){if(!this.options.local){var e=this._getGlobalBlockingView();if(e){if(s.debug("Blocking view delegates global enabling by {0} ({1}) to {2} ({3}), counter: {4}.",s.getObjectName(this.parentView),this.parentView.cid,s.getObjectName(e.parentView),e.parentView.cid,e.counter)&&console.log(s.last),!f)return e.enable();r(this)}}this.counter?++this.counter:(this.counter=1,this.disableTimeout?(clearTimeout(this.disableTimeout),this.disableTimeout=void 0):this.enableTimeout=setTimeout(t.bind(function(){this.enableTimeout=void 0,this._show(),s.debug("Blocking view enabled by {0} ({1}).",s.getObjectName(this.parentView),this.parentView.cid)&&console.log(s.last),i.triggerMethodOn(this.parentView,"enable:blocking",this)},this),g))},"disable":function(){if(!this.options.local){var e=this._getGlobalBlockingView();if(e&&(s.debug("Blocking view delegates global disabling by {0} ({1}) to {2} ({3}), counter: {4}.",s.getObjectName(this.parentView),this.parentView.cid,s.getObjectName(e.parentView),e.parentView.cid,e.counter)&&console.log(s.last),!f))return e.disable()}this.counter>1?--this.counter:0===this.counter?s.debug("Blocking view has been already disabled by {0} ({1}).",s.getObjectName(this.parentView),this.parentView.cid)&&console.log(s.last):(this.counter=0,this.enableTimeout?(clearTimeout(this.enableTimeout),this.enableTimeout=void 0,c(this)):this.disableTimeout=setTimeout(t.bind(function(){this.disableTimeout=void 0,this._hide(),s.debug("Blocking view disabled by {0} ({1}).",s.getObjectName(this.parentView),this.parentView.cid)&&console.log(s.last),c(this),i.triggerMethodOn(this.parentView,"disable:blocking",this)},this),m))},"onBeforeDestroy":function(){this._clearTimeouts(),this._resetGlobalBlockingView()},"makeGlobal":function(e){h||(f=!!e,h=this,this.$el.addClass("csui-global"))},"_getGlobalBlockingView":function(){if(h&&h!==this&&(v||h.counter))return h},"_resetGlobalBlockingView":function(){h===this&&(h=void 0,this.$el.removeClass("csui-global"))},"_clearTimeouts":function(){this.enableTimeout&&clearTimeout(this.enableTimeout),this.disableTimeout&&clearTimeout(this.disableTimeout)},"_show":function(){this.$el.removeClass("binf-hidden"),this.focus&&this.$(".loader").focus()},"_hide":function(){this.$el.addClass("binf-hidden")}}),y={"blockActions":function(){return u.call(this,!0),a(this.blockingView.$el),this.blockingView.enable(),++this._blockingCounter,this},"blockWithoutIndicator":function(){return u.call(this,!1),l(this.blockingView.$el),this.blockingView.enable(),++this._blockingCounter,this},"unblockActions":function(){return this===this.blockingView.parentView?s.debug("Blocking view asked for disabling for {0} ({1}), counter: {2}.",s.getObjectName(this),this.cid,this.blockingView.counter)&&console.log(s.last):s.debug("Blocking view asked for disabling for {0} ({1}) by {2} ({3}), counter: {4}.",s.getObjectName(this),this.cid,s.getObjectName(this.blockingView.parentView),this.blockingView.parentView.cid,this.blockingView.counter)&&console.log(s.last),this.blockingView.disable(),this._blockingCounter&&--this._blockingCounter,this},"showBlockingView":function(){s.debug("Blocking view is showing for {0} ({1}).",s.getObjectName(this),this.cid)&&console.log(s.last),this.blockingView.render(),this.blockingView.parentView.$el.append(this.blockingView.el)},"destroyBlockingView":function(){for(s.debug("Blocking view is destroying for {0} ({1}).",s.getObjectName(this),this.cid)&&console.log(s.last),this._blockingCounter&&s.debug("Blocking view needs cleanup for {0} ({1}), counter: {2}.",s.getObjectName(this),this.cid,this._blockingCounter)&&console.log(s.last);this._blockingCounter;)this.unblockActions();this.blockingView.destroy()}};x.imbue=function(e,i){var s;Object.getPrototypeOf(e)===Object.prototype?(s=e,e=s.parent,i=s.parentView):s={},i||(i=e);var n=new x({"parentView":i,"local":s.local,"focus":s.focus});e.blockingView=n,e.blockingPrototype=y,t.extend(e,y),e._blockingCounter=0,e.listenTo(i,"render",e.showBlockingView).listenTo(i,"before:destroy",e.destroyBlockingView)};var w={"blockActions":function(){return d.call(this),this.childWithBlockingView.blockActions(),this},"blockWithoutIndicator":function(){return d.call(this),this.childWithBlockingView.blockWithoutIndicator(),this},"unblockActions":function(){return s.debug("Blocking view delegates disabling for {0} ({1}) to {2} ({3}).",s.getObjectName(this),this.cid,s.getObjectName(this.childWithBlockingView),this.childWithBlockingView.cid)&&console.log(s.last),this.childWithBlockingView.unblockActions(),this}};return x.delegate=function(e,i){if(Object.getPrototypeOf(e)===Object.prototype){var s=e;e=s.parent,i=s.child}e.childWithBlockingView=i,e.childWithBlockingViewPrototype=w,t.extend(e,w)},x}),csui.define("csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",["csui/lib/underscore","csui/lib/marionette"],function(e,t){"use strict";return{"propagateEventsToRegions":function(){e.each(this._eventsToPropagateToRegions,e.bind(this._propagateEventToRegions,this))},"_propagateEventToRegions":function(i){this.listenTo(this,i,function(){var s;s=this.regionManager?this.regionManager.getRegions():this.getRegions(),e.each(s,function(e){var s=e.currentView;if(s&&s._isShown&&s._isRendered&&t.isNodeAttached(s.el)){var n=Array.prototype.slice.call(arguments);n.unshift(e.currentView,i),t.triggerMethodOn.apply(t,n)}},this)})},"_eventsToPropagateToRegions":["dom:refresh"]}}),csui.define("csui/controls/mixins/global.alert/global.alert.mixin",[],function(){"use strict";return{"prepareForGlobalAlert":function(){this.listenTo(this,"global.alert.inprogress",this.handleAlertInProgress),this.listenTo(this,"global.alert.completed",this.handleAlertComplete)},"handleAlertInProgress":function(){this.currentlyFocusedElement!==this.disableCurrentFocusElementHandler&&(this.originalCurrentlyFocusedElement=this.currentlyFocusedElement),this.currentlyFocusedElement=this.disableCurrentFocusElementHandler},"disableCurrentFocusElementHandler":function(){},"handleAlertComplete":function(){null!=this.originalCurrentlyFocusedElement&&(this.currentlyFocusedElement=this.originalCurrentlyFocusedElement,this.originalCurrentlyFocusedElement=void 0)}}}),csui.define("csui/controls/tile/behaviors/blocking.behavior",["csui/lib/underscore","csui/lib/marionette","csui/controls/progressblocker/blocker"],function(e,t,i){"use strict";function s(t,i){i=this.options||i||{};var s=i[t];return e.isFunction(s)?i[t].call(this.view):s}return t.Behavior.extend({"constructor":function(e,n){t.Behavior.prototype.constructor.apply(this,arguments);var o=s.call(this,"blockingParentView",e);o?i.delegate(n,o):i.imbue(n),this.collection&&n.listenTo(n.collection,"request",n.blockActions).listenTo(n.collection,"sync",n.unblockActions).listenTo(n.collection,"destroy",n.unblockActions).listenTo(n.collection,"error",n.unblockActions),n.model&&n.listenTo(n.collection,"request",n.blockActions).listenTo(n.collection,"sync",n.unblockActions).listenTo(n.collection,"error",n.unblockActions)}})}),csui.define("csui/controls/tile/behaviors/infinite.scrolling.behavior",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette"],function(e,t,i,s){"use strict";function n(e){var t=this.options||{},s=t[e];return i.isFunction(s)?t[e].call(this.view):s}return s.Behavior.extend({"defaults":{"content":null,"contentParent":null,"fetchMoreItemsThreshold":95},"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(t,"render",this._bindScrollingEvents),this.listenTo(t,"before:destroy",this._unbindScrollingEvents)},"_bindScrollingEvents":function(){var e=n.call(this,"contentParent");this._contentParent=e?this.view.$(e):this.view.$el,this._contentParent.on("scroll."+this.view.cid,i.bind(this._checkScrollPosition,this));var t=n.call(this,"content");this._content=t?this.view.$(t):e?this._contentParent.children().first():this.view.$el},"_checkScrollPosition":function(){var e,s=n.call(this,"fetchMoreItemsThreshold");e=1===this._content.length?this._content.height():i.reduce(this._content,function(e,i){return e+t(i).height()},0);var o=e-this._contentParent.height();100*this._contentParent.scrollTop()/o>=s&&this._checkScrollPositionFetch()},"_checkScrollPositionFetch":function(){var e=this.view.collection;if(e.length<e.totalCount&&!e.fetching&&e.skipCount<e.length){var t=this;this.view.trigger("before:collection:scroll:fetch"),e.setSkip(e.length,!1),e.fetch({"reset":!1,"remove":!1,"merge":!1,"success":function(){t.view.trigger("collection:scroll:fetch")}})}},"_unbindScrollingEvents":function(){this._contentParent&&this._contentParent.off("scroll."+this.view.cid)}})}),csui.define("csui/controls/tile/behaviors/parent.scrollbar.updating.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/tile/behaviors/perfect.scrolling.behavior"],function(e,t,i,s){"use strict";function n(e){t.event.trigger("csui:update:scrollbar",{"view":e},e.el,!1)}function o(t,i){var s=i||this.options||{},n=s[t];return e.isFunction(n)?s[t].call(this.view):n}var r=i.Region.extend({"constructor":function(e){i.Region.prototype.constructor.apply(this,arguments),this._swapping=!1,this.listenTo(this,"before:swapOut",function(){this._swapping=!0}).listenTo(this,"swapOut",function(){this._swapping=!1}).listenTo(this,"show",function(){this._requestScrollbarUpdate()}).listenTo(this,"empty",function(){this._swapping||this._requestScrollbarUpdate()})},"_requestScrollbarUpdate":function(){n(this._parent._parent)}});return i.Behavior.extend({"constructor":function(n,r){if(i.Behavior.prototype.constructor.apply(this,arguments),s.usePerfectScrollbar()){var c=o.call(this,"updateOnWindowResize");this._renderState=0,this.listenTo(r,"before:render",function(){this._renderState=1}).listenTo(r,"render",function(){this._renderState=0,this._requestScrollbarUpdate()}).listenTo(r,"update:scrollbar",this._requestScrollbarUpdate).listenToOnce(r,"before:render",function(){c&&(t(window).bind("resize."+r.cid,e.bind(this._updateScrollbar,this)),this.listenToOnce(r,"before:destroy",function(){t(window).unbind("resize."+r.cid)})),r instanceof i.CollectionView&&r.collection&&this.listenTo(r.collection,"reset",function(){this._resetTriggered=!0}).listenTo(r,"before:render:collection",function(){++this._renderState}).listenTo(r,"render:collection",function(){this._resetTriggered=!1,--this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"render:empty",function(){!this._resetTriggered&&this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"add:child",function(){this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"remove:child",function(){this._resetTriggered||this._renderState||this._requestScrollbarUpdate()})})}},"_requestScrollbarUpdate":function(){n(this.view)}},{"Region":r})}),csui.define("hbs!csui/controls/tile/behaviors/impl/searching.behavior",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<form class="search-box binf-hidden">\r\n  <input class="search" type="search" placeholder="'+this.escapeExpression((n=null!=(n=t.searchPlaceholder||(null!=e?e.searchPlaceholder:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"searchPlaceholder","hash":{}}):n))+'" style="display: none">\r\n  <span class="clearer csui-icon formfield_clear"></span>\r\n</form><span class="icon icon-search" title="'+this.escapeExpression((n=null!=(n=t.searchIconTitle||(null!=e?e.searchIconTitle:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"searchIconTitle","hash":{}}):n))+'" aria-label="'+this.escapeExpression((n=null!=(n=t.searchIconAria||(null!=e?e.searchIconAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"searchIconAria","hash":{}}):n))+'" role="button"></span>\r\n'}});return i.registerPartial("csui_controls_tile_behaviors_impl_searching.behavior",s),s}),csui.define("csui/controls/tile/behaviors/searching.behavior",["csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/tile/behaviors/impl/searching.behavior","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i){"use strict";function s(t){var i=this.options||{},s=i[t];return e.isFunction(s)?i[t].call(this.view):s}return t.Behavior.extend({"defaults":{"searchPlaceholder":"Type to filter","headerTitle":".tile-title","searchButton":".tile-controls"},"ui":function(){return{"headerTitle":s.call(this,"headerTitle"),"searchBox":".search-box","searchInput":".search","clearer":".clearer"}},"triggers":{"click .icon-search":"toggle:search"},"constructor":function(e,i){t.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(i,"render",this._renderSearchButton),this.listenTo(i,"toggle:search",this._toggleSearching)},"_renderSearchButton":function(){var e=s.call(this,"searchButton"),t=this.view.$(e),n=s.call(this,"searchPlaceholder"),o=s.call(this,"searchIconTitle"),r=o||"Search",c=s.call(this,"searchIconAria"),a=c||r,l={"searchPlaceholder":n,"searchIconTitle":r,"searchIconAria":a};t.html(i(l)),this.view._bindUIElements.call(this)},"_toggleSearching":function(){var e=this;this.ui.searchInput.val(""),this.ui.clearer.toggle(!1),this.ui.headerTitle.toggle("fade"),this.ui.searchBox.removeClass("binf-hidden"),this.ui.searchInput.toggle("blind",{"direction":"right"},200,function(){e.ui.searchInput.is(":visible")&&e.ui.searchInput.focus()})}})}),csui.define("csui/pages/start/impl/perspective.router",["module","require","csui/lib/underscore"],function(e,t,i){"use strict";function s(e){csui.require(["csui/pages/start/perspective.routing"],function(t){new t(e)})}var n=i.extend({"developmentPage":!1},e.config());return s.routesWithSlashes=function(){return/\/app(?:\/.*)?$/.test(location.pathname)||!n.developmentPage},s}),csui.define("csui/pages/start/impl/perspective.factory",["require","csui/lib/underscore","csui/lib/jquery"],function(e,t,i){function s(e){this.options=e||{}}return t.extend(s.prototype,{"createPerspective":function(e){var i=this;return this._loadPerspective(e.get("type")).then(function(s){return new s(t.extend({"context":i.options.context},e.get("options")))})},"_loadPerspective":function(t){var s,n=i.Deferred(),o=t.lastIndexOf("/");return o<0?s="csui/perspectives/"+t:(s=t,t=t.substring(o+1)),e([s+"/"+t+".perspective.view"],function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise()}}),s}),csui.define("csui/pages/start/impl/perspective.panel/perspective.animator",["module","csui/lib/underscore","csui/lib/jquery"],function(e,t,i){"use strict";function s(e){this.perspectivePanelView=e}var n=e.config();return t.defaults(n,{"ltrAnimation":!1}),s.prototype={"startAnimation":function(e){this.perspectivePanelView.$el.redraw().addClass("csui-in-transition"),e.$el.addClass("cs-on-stage-right"),e.triggerMethod("before:show"),this.perspectivePanelView.$el.append(e.el),e.triggerMethod("show")},"swapPerspective":function(e,t){var s=i.Deferred();return e.$el.addClass("cs-on-stage-left"),t.$el.one(this._transitionEnd(),s.resolve).redraw().removeClass("cs-on-stage-right"),s.promise()},"showPerspective":function(e){var t=i.Deferred();return e.$el.one(this._transitionEnd(),t.resolve).redraw().removeClass("cs-on-stage-right"),t.promise()},"finishAnimation":function(){this.perspectivePanelView.$el.removeClass("csui-in-transition")},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]})},s}),csui.define("css!csui/pages/start/impl/perspective.panel/perspective.panel",[],function(){}),csui.define("csui/pages/start/impl/perspective.panel/perspective.panel.view",["require","module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/pages/start/impl/perspective.factory","csui/controls/progressblocker/blocker","csui/utils/commandhelper","csui/pages/start/impl/perspective.panel/perspective.animator","css!csui/pages/start/impl/perspective.panel/perspective.panel","csui/lib/jquery.redraw","csui/lib/jquery.scrollbarwidth"],function(e,t,i,s,n,o,r,c,a,l){"use strict";var u=s.defaults({},t.config(),{"progressWheel":!0,"waitForData":!0,"perspectiveShowDelay":0,"limitTimeToWaitForData":!0,"maximumTimeToWaitForData":3e3,"detachableBlockingView":!0});u.waitForData||(u.perspectiveShowDelay=0);var d=!1;return i(window).bind("beforeunload."+t.id,function(e){d=!0}),n.ItemView.extend({"className":"cs-perspective-panel","template":!1,"constructor":function(){n.View.prototype.constructor.apply(this,arguments);var e=this.options.context;this.perspectiveFactory=new r({"context":e}),this.perspectiveAnimator=new l(this),c.imbue(this),this.blockingView.makeGlobal(u.detachableBlockingView),this.listenTo(e,"maximize:widget",this._addMaximizedWidget),this.listenTo(e,"restore:widget:size",this._removeMaximizedWidget),this.listenTo(e,"change:perspective",this.onChangePerspective),this.listenTo(e,"enter:edit:perspective",this.onEnterEditPerspective),this.listenTo(e,"exit:edit:perspective",this.onExitEditPerspective),this.listenTo(e,"serialize:perspective",this.onSerializePerspective),u.progressWheel&&(this.listenTo(e,"request:perspective",this.blockActions).listenTo(e,"error:perspective",this.unblockActions).listenTo(e,"sync",this.unblockActions).listenTo(e,"error",this.unblockActions),u.limitTimeToWaitForData&&this.listenTo(e,"request",function(){var e=this;setTimeout(function(){e.unblockActions()},u.maximumTimeToWaitForData)})),this.listenTo(this,"render",this.onRendered),this._maximizedWidgets={},this._currentPerspectiveSignature=void 0},"onEnterEditPerspective":function(e){this.blockActions(),this.isSwitchingEditMode=!0,this.doChangePerspective(e).always(function(){this.isSwitchingEditMode=!1,this.unblockActions()}.bind(this))},"onSerializePerspective":function(e){if(s.isFunction(this.currentPerspectiveView.serializePerspective)){var t=this;this.currentPerspectiveView.serializePerspective(e).done(function(e){t.options.context.trigger("save:perspective",e)}).fail(function(e){t._showModalError({"message":e})})}},"onExitEditPerspective":function(e){this.blockActions(),this.isSwitchingEditMode=!0,this.doChangePerspective(this.options.context.perspective).always(function(){this.isSwitchingEditMode=!1,this.unblockActions()}.bind(this))},"onRendered":function(){this.options.context.perspective.get("type")&&this.onChangePerspective()},"onChangePerspective":function(){this.doChangePerspective()},"doChangePerspective":function(e){if(this._isRendered){var t=this.options.context,s=this,n=e||this.options.context.perspective,o=i.Deferred();return d=!1,this.perspectiveFactory.createPerspective(n).done(function(e){e.widgetsResolved.always(function(){t.clear(),d?o.resolve(e):s._swapPerspective(e,n).always(function(){o.resolve(e)})})}).fail(function(e){u.progressWheel&&s.unblockActions(),d||s._showError(e),o.reject(e)}),o.promise()}return i.Deferred().resolve().promise()},"_isInPerspectiveEditMode":function(){return!!this.currentPerspective&&!!this.currentPerspective.get("options")&&"edit"===this.currentPerspective.get("options").perspectiveMode},"_setSupportMaximizeWidget":function(){this._isInPerspectiveEditMode()||!0!==this.currentPerspectiveView._supportMaximizeWidget?i("body").removeClass("csui-support-maximize-widget"):i("body").addClass("csui-support-maximize-widget")},"_setShowingMaximizedWidget":function(e){e?i("body").addClass("csui-maximized-widget-mode"):i("body").removeClass("csui-maximized-widget-mode"),!!this.currentPerspectiveView&&this.currentPerspectiveView.triggerMethod("dom:refresh")},"_addMaximizedWidget":function(e){if(!this._isInPerspectiveEditMode())if(void 0===this._maximizedWidgets[this._getCurrentPerspectiveSignature()]){var t={"perspectiveSignature":this._getCurrentPerspectiveSignature(),"cellAddress":this.getCellAddress(e)};this._maximizedWidgets[t.perspectiveSignature]=t,this._maximizeWidgetView(t.cellAddress)}else!!this.currentPerspectiveView&&this.currentPerspectiveView.triggerMethod("dom:refresh")},"getCellAddress":function(e){return e.widgetView?e.widgetView.$el.parent().attr("data-csui-cell_address"):e.currentPerspectiveView.$el.find(".binf-row").children().attr("data-csui-cell_address")},"_removeMaximizedWidget":function(e){delete this._maximizedWidgets[this._getCurrentPerspectiveSignature()],this._restoreWidgetViewSize(e.widgetView)},"_maximizeWidgetView":function(e){this.currentPerspectiveView.$el.find(".binf-row > div").each(function(){i(this).attr("data-csui-mwv-old-class",i(this).attr("class")),i(this).attr("data-csui-cell_address")===e?(i(this).parent().addClass("csui-maximized-row zero-gutter"),i(this).attr("class","binf-col-xs-12 csui-maximized-column zero-gutter")):i(this).attr("class","binf-hidden-xs binf-hidden-sm binf-hidden-md binf-hidden-lg")}),this._setShowingMaximizedWidget(!0)},"_restoreWidgetViewSize":function(e){e.$el.parent().parent().removeClass("csui-maximized-row zero-gutter"),this.currentPerspectiveView.$el.find(".binf-row > div").each(function(){i(this).attr("class",i(this).attr("data-csui-mwv-old-class"))}),this._setShowingMaximizedWidget(!1)},"_ensureWidgetViewMaximized":function(){this._setSupportMaximizeWidget(),this._currentPerspectiveSignature=void 0;var e=this._maximizedWidgets[this._getCurrentPerspectiveSignature()];void 0===e||!0!==this.currentPerspectiveView._supportMaximizeWidgetOnDisplay?this._setShowingMaximizedWidget(!1):this._maximizeWidgetView(e.cellAddress),!0!==this.currentPerspectiveView._supportMaximizeWidgetOnDisplay&&delete this._maximizedWidgets[this._getCurrentPerspectiveSignature()]},"_getCurrentPerspectiveSignature":function(){if(void 0===this._currentPerspectiveSignature){var e=[];!!this.currentPerspectiveView&&this.currentPerspectiveView.$el.find(".binf-row > div").each(function(){var t=i(this).attr("data-csui-cell_address"),s=i(this).attr("data-csui-widget_type"),n=i(this).attr("class");void 0===t&&(t=""),e.push([t,s,n].join(","))}),this._currentPerspectiveSignature=e.join("|")}return this._currentPerspectiveSignature},"_swapPerspective":function(e,t){function n(){r||(r=!0,s.delay(function(){d||c._showPerspective(e,t,l)},u.perspectiveShowDelay))}function o(){c.options.context.fetch().fail(function(t){if(!d)if(window.csui&&window.csui.mobile){if(500===t.statusCode&&(-1===window.location.href.indexOf("#")||-1!==window.location.href.indexOf("#home")))return void n();0===t.statusCode?a.showOfflineMessage(t):(c._showModalError(t),c.options.context.trigger("reject:perspective",t)),e.destroy()}else c._showError(t),n()}).done(n)}var r,c=this,l=i.Deferred(),p=window.location.href;if(p=p.substr(p.indexOf("#")),e.render(),p&&"#offline.list"===p)n(),this.unblockActions();else if(u.waitForData)o(),u.limitTimeToWaitForData&&setTimeout(n,u.maximumTimeToWaitForData);else{var h=this.currentPerspectiveView?"swap:perspective":"show:perspective";this.once(h,o),n()}return l},"_showPerspectiveForEditMode":function(e,t){this.currentPerspectiveView.destroy(),this.currentPerspectiveView=e,this.currentPerspective=t,this._currentPerspectiveSignature=void 0,this._ensureWidgetViewMaximized(),e.triggerMethod("before:show"),this.$el.append(e.el),e.triggerMethod("show")},"_showPerspective":function(e,t,s){function n(e){o.scrollTop(0),r.perspectiveAnimator.finishAnimation(),r.currentPerspectiveView=e,r.currentPerspective=t,r._ensureWidgetViewMaximized(),r._showWidgetInMaximizeMode(t),s.resolve(e)}var o=i(document.body),r=this;if(this.isSwitchingEditMode)return this._showPerspectiveForEditMode(e,t),void s.resolve(e);this.perspectiveAnimator.startAnimation(e),this.currentPerspectiveView?(this.triggerMethod("before:swap:perspective",this),this.perspectiveAnimator.swapPerspective(this.currentPerspectiveView,e).done(function(){r.currentPerspectiveView.destroy(),n(e),r.triggerMethod("swap:perspective",r)})):(this.triggerMethod("before:show:perspective",this),this.perspectiveAnimator.showPerspective(e).done(function(){n(e),r.triggerMethod("show:perspective",r)}))},"_showWidgetInMaximizeMode":function(e){var t,s=e&&e.get("type"),n=e&&e.get("options"),o=0,r=["csui/widgets/nodestable","nodestable"];"grid"===s&&1===n.rows.length&&1===n.rows[0].columns.length?(t=n.rows[0].columns[0].widget.type,o++):"left-center-right"===s?(n.right.type&&(t=n.right.type,o++),n.center.type&&(t=n.center.type,o++),n.left.type&&(t=n.left.type,o++)):"flow"===s&&(t=n.widgets[0].type,o=n.widgets.length),1===o&&-1!=i.inArray(t,r)&&(e.set("showWidgetInMaxMode",!0),this._addMaximizedWidget(this))},"_showError":function(e){csui.require(["csui/controls/globalmessage/globalmessage"],function(t){t.showMessage("error",e.message)})},"_showModalError":function(e,t){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(i){i.showError(e.message,t)})}})}),csui.define("csui/behaviors/drag.drop/dnd.item.behaviour",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone"],function(e,t,i,s){return i.Behavior.extend({"constructor":function(e,t){this.view=t,i.Behavior.prototype.constructor.apply(this,arguments),this._registerListeners()},"_registerListeners":function(){this.listenTo(this.view,"render",this._initDnD)},"_initDnD":function(){this.$el.addClass("csui-draggable-item"),this.$el.attr("data-csui-draggable-item",this.view.model.cid)}})}),csui.define("csui/behaviors/drag.drop/dnd.container.behaviour",["require","i18n","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone"],function(e,t,i,s,n,o){return n.Behavior.extend({"defaults":{"placeholder":void 0,"handle":void 0,"draggableItem":".csui-draggable-item","disableDraggable":".csui-draggable-item-disable","over":!1,"receive":!1},"constructor":function(e,t){this.view=t,n.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(this.view,"render",this._initSorting)},"_getPlaceholder":function(e){var t=this.options.placeholder;if(!t||i.isString(t)){var n=t;t=function(){var t=e[0].nodeName.toLowerCase(),i=s("<"+t+">");return i.addClass("ui-sortable-placeholder").addClass(n||e[0].className).removeClass("ui-sortable-helper"),i}}return t.call(this,e)},"_initSorting":function(){this.view.$el.addClass("csui-dnd-container"),this.$el.sortable({"items":this.options.draggableItem,"cancel":this.options.disableDraggable,"handle":this.options.handle,"placeholder":{"element":this._getPlaceholder.bind(this),"update":function(){}},"start":this._onSortStart.bind(this),"stop":this._onSortStop.bind(this),"over":this.options.over,"receive":this.options.receive})},"_onSortStart":function(e,t){this.$el.addClass("csui-drag-start")},"_onSortStop":function(e,t){this.$el.removeClass("csui-drag-start");var i=t.item.attr("data-csui-draggable-item"),s=this.view.collection.get(i),n=this.view.collection.indexOf(s),o=this.$el.find("[data-csui-draggable-item="+i+"]").index();n!==o&&(this.view.collection.remove(s,{"silent":!0}),this.view.collection.add(s,{"at":o,"silent":!0}))}})}),csui.define("csui/perspectives/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/impl/nls/root/lang",{"invalidWidgetOptions":"Some widgets have options that require values before the perspective can be saved. Please click on each of the highlighted widgets and check for any required options that have missing values."}),
csui.define("csui/perspectives/mixins/perspective.edit.mixin",["require","csui/lib/underscore","csui/lib/jquery","csui/utils/log","i18n!csui/perspectives/impl/nls/lang","csui/models/node/node.model","csui/models/widget/widget.model"],function(e,t,i,s,n,o,r){"use strict";return{"mixin":function(c){return t.extend(c,{"prepareForEditMode":function(){this.listenTo(this,"update:widget:options",function(e,t,i){var s=e.model.get("widget");"csui/perspective.manage/widgets/perspective.widget"===s.type&&(s=s.options),s.options=i,e.model.set("hasValidOptions",t,{"silent":!0})})},"_resolveWidget":function(e){var t=i.Deferred(),s=new r({"id":e.type});return s.fetch().then(function(){e.view=s.get("view"),t.resolve(s)},function(e){t.reject(e)}),t.promise()},"serializeWidget":function(e){var t=i.Deferred();if(!1!==e.get("hasValidOptions")){var s=e.get("widget"),o=s.kind,r=s.type,c=s.cid,a=s.options;"csui/perspective.manage/widgets/perspective.widget"===r&&(r=a.widget.id,a=a.options),t.resolve({"widget":{"type":r,"kind":o,"options":a,"c_id":c}})}else t.reject({"error":n.invalidWidgetOptions});return t.promise()},"executeCallbacks":function(e,s){this.perspectiveWidgets=e;var n=i.Deferred();return this.loadCallbacks(e).then(t.bind(function(e){var o=t.map(e,t.bind(function(e){return this.initializeWidget(e,s)},this));i.whenAll.apply(i,o).then(function(){n.resolve()})},this)),n.promise()},"loadCallbacks":function(n){var o=this,r=i.Deferred(),c=t.chain(n).groupBy(function(e){return e.widget.type}).map(function(n){var r=i.Deferred();return o._resolveWidget(n[0].widget).done(function(i){var n=!!i&&i.get("manifest"),o=!!n&&n.callback;o?e([o],function(e){e&&t.isFunction(e)?(i.type=i.id,r.resolve(t.extend(i,new e))):r.reject()},function(e){s.warn("Failed to load callback. {0}",e),r.reject(e)}):r.resolve()}),r.promise()}).compact().value();return i.whenAll.apply(i,c).then(function(e){r.resolve(t.compact(e))}),r.promise()},"initializeWidget":function(e,s){var n=i.Deferred(),o=t.filter(this.perspectiveWidgets,function(t){return t.widget.type===e.type}),r=s.get("id")?"update":"create",c={"priority":parseInt(s.get("priority"))||void 0,"title":s.get("title")||"","overrideType":s.get("overrideType"),"scope":s.get("scope")||"","containerType":parseInt(s.get("containerType"))||void 0,"perspectiveParentId":parseInt(s.get("override_id"))||parseInt(s.get("perspectivesVolId"))||void 0,"overrideObjId":parseInt(s.get("node"))||void 0,"assetContainerId":s.get("assetContainerId")||void 0},a={"mode":r,"widgets":o,"settings":c,"connector":s.connector};if("update"==r){var l=this.getPreviousWidgets&&this.getPreviousWidgets(s);a.previousWidgets=t.filter(l,function(t){return t.widget.type===e.type})}var u=this.getHiddenWidgetOptions(e,a);return i.when(u).done(t.bind(function(e){n.resolve()},this)).fail(function(e){n.reject(e)}),n.promise()},"getHiddenWidgetOptions":function(e,s){var n=i.Deferred(),o=i.Deferred(),r=[],c=[],a=o.promise(),l=!1;return e&&t.has(e,"defineWidgetOptionsCommon")&&t.has(e,"defineWidgetOptionsEach")?(t.has(e,"ensureContainer")&&t.isFunction(e.ensureContainer)&&e.ensureContainer(s)?a=this.ensureContainer(s):l=!0,l&&o.resolve(),i.when(a).done(function(o){if(!t.has(s.settings,"assetContainerId")||t.isUndefined(s.settings.assetContainerId)){var a=o?o.id:s.settings.overrideObjId,l={"assetContainerId":a};t.extend(s.settings,l)}var u=e.defineWidgetOptionsCommon(s);if(!u||"object"!=typeof u||!t.has(u,"state"))return n.reject(),n.promise();i.when(u).done(function(o){t.has(s,"widgets")&&t.isArray(s.widgets)&&(t.each(s.widgets,function(n,a){t.has(n,"newOptions")||(n.newOptions={}),t.extend(n.newOptions,o),r.push(e.defineWidgetOptionsEach(n,s)),i.when(r[a]).done(function(e){t.extend(n.newOptions,e)}).fail(function(e){c.push(e)})}),i.when.apply(this,r).done(function(){n.resolve(s)}).fail(function(e){c.push(e),n.reject(c)}))}).fail(function(e){c.push(e),n.reject(c)})}).fail(function(e){o.reject(e),n.reject([e])}),n.promise()):(n.reject(),n.promise())},"ensureContainer":function(e){function s(){return t.now()+Math.random().toString().substring(2)}var n=i.Deferred();return t.has(e.settings,"assetContainerId")&&!isNaN(parseInt(e.settings.assetContainerId))?n.resolve(!1):(this.perspectiveAssetsVolume=new o({"id":"volume","type":954},{"connector":e.connector}),this.perspectiveAssetsVolume.fetch().then(t.bind(function(){var t=e.connector.extendAjaxOptions({"url":e.connector.connection.url+"/nodes","type":"POST","data":{"type":955,"parent_id":this.perspectiveAssetsVolume.get("id"),"name":"assets_"+s()},"success":function(e){n.resolve(e)},"error":function(e){n.reject(e)}});i.ajax(t).done(function(e){n.resolve(e)}).fail(function(e){n.reject(e)})},this))),n.promise()}})}}}),csui.define("csui/perspectives/flow/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/flow/impl/nls/root/lang",{"tileLabel":"Single Width","headerLabel":"Double Width","fullpageLabel":"Full Page"}),csui.define("css!csui/perspectives/flow/impl/flow.perspective",[],function(){}),csui.define("csui/perspectives/flow/flow.perspective.view",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/models/widget/widget.collection","csui/controls/grid/grid.view","csui/utils/log","csui/behaviors/widget.container/widget.container.behavior","csui/behaviors/drag.drop/dnd.item.behaviour","csui/behaviors/drag.drop/dnd.container.behaviour","csui/perspectives/mixins/perspective.edit.mixin","i18n!csui/perspectives/flow/impl/nls/lang","css!csui/perspectives/flow/impl/flow.perspective"],function(e,t,i,s,n,o,r,c,a,l,u,d,p,h){"use strict";var f=t.config();i.defaults(f,{"defaultWidgetKind":"tile","widgetSizes":{"fullpage":{"widths":{"xs":12},"heights":{"xs":"full"}},"header":{"widths":{"xs":12,"md":8,"xl":6}},"widetile":{"widths":{"xs":12,"lg":6}},"tile":{"widths":{"xs":12,"sm":6,"md":4,"xl":3}}}});var g=c.extend({"className":function(){var e="cs-perspective cs-flow-perspective grid-rows",t=i.result(c.prototype,"className");return t&&(e=e+" "+t),e},"cellView":function(e){var t=e.get("widget");if(t){if(!t.view)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved:'+t.error});return t.view}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"constructor":function(e){if(e||(e={}),e=s.extend(!0,{},e),"edit"===e.perspectiveMode&&(this._prepareOptionsForEditMode(e),this.prepareForEditMode()),!e.collection){var t=i.chain(f).pick(function(e,t){return t.indexOf("-widgets")>=0}).values().flatten();t&&t._wrapped&&t._wrapped.length>0&&(e.widgets=i.filter(e.widgets,function(e){return i.contains(t._wrapped,e.type)})),e.collection=this._createCollection(e)}c.prototype.constructor.call(this,e),"edit"===e.perspectiveMode&&this._registerEditEvents()},"_prepareOptionsForEditMode":function(t){t.widgets||(t.widgets=[]),t.widgets.push({"kind":"tile","type":"csui/perspective.manage/widgets/perspective.placeholder","className":"csui-draggable-item-disable"}),t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this},"DnDItemBehaviour":{"behaviorClass":u}},this._createDnDPlaceholderWidget(),t.rowBehaviours={"DnDContainerBehaviour":{"behaviorClass":d,"placeholder":this._getDnDPlaceholder.bind(this),"handle":".csui-pman-widget-masking","over":i.bind(function(e,t){var i=this._getDnDPlaceholder(t.helper),s=t.placeholder;s.attr("class",i.attr("class")),s.html(i.html()),s.css("visibility","visible"),s.data("pman.widget",t.helper.data("pman.widget"))},this),"receive":i.bind(function(e,t){var i=t.placeholder.data("pman.widget"),s=t.item.index(),n={"type":"csui/perspective.manage/widgets/perspective.widget","kind":i.get("manifest").kind,"options":{"options":{},"widget":i},"view":this.pespectiveWidgetView},o=this,r=o._prepareGridCell(n,s);o.collection.at(0).columns.add(r,{"at":s}),t.sender.sortable("cancel")},this)}}},"_createDnDPlaceholderWidget":function(){var e=this,t={"type":"csui/perspective.manage/widgets/perspective.placeholder"};this._resolveWidget(t).done(function(i){e.dndPlaceholderCell=new c.CellView({"grid":e,"model":new n.Model(e._createCell(t,i,0))}),e.dndPlaceholderCell.render()}),this._resolveWidget({"type":"csui/perspective.manage/widgets/perspective.widget"}).done(function(t){e.pespectiveWidgetView=t.get("view")})},"_getDnDPlaceholder":function(e){var t=e.data("pman.widget");if(t){var i=t.attributes.manifest.kind;i||(i=f.defaultWidgetKind);var s=f.widgetSizes[i];this.dndPlaceholderCell.model.set({"sizes":s.widths,"heights":s.heights})}return this.dndPlaceholderCell.$el},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){var i=e.collection.at(0).columns,s=t.model;i.remove(s)}),this.listenTo(this,"update:widget:size",function(e,t){var i=f.widgetSizes[t],s=e.model.get("widget");s.kind=t,e.model.set({"sizes":i.widths,"heights":i.heights,"widget":s})}),this.listenTo(this,"replace:widget",this._replaceWidget)},"_replaceWidget":function(e,t){if(this.getPManPlaceholderWidget){var i=this,s=this.collection.at(0).columns;this._resolveWidget(t).done(function(){e.model.get("widget").type!==i.getPManPlaceholderWidget().type&&(t.kind=e.model.get("widget").kind);var n=i._prepareGridCell(t,s.indexOf(e.model));e.model.set(n);var o=i.getPManPlaceholderWidget();s.filter(function(e){return e.get("widget").type===o.type}).length>0||i._resolveWidget(o).done(function(e){var t=i._createCell(o,e,s.length);s.add(t)})})}},"_createCollection":function(e){var t=new n.Collection,s=i.chain(e.widgets).pluck("type").unique().map(function(e){return{"id":e}}).value(),o=new r(s),c=this;return this.widgetsResolved=o.fetch().then(function(){t.add({}).columns=c._createColumns(e.widgets,o)}),t},"_createColumns":function(e,t){var s=i.map(e,function(e,i){var s=t.get(e.type);return this._createCell(e,s,i)}.bind(this));return new n.Collection(s)},"_prepareGridCell":function(e,t){var i=e.kind;i||(i=f.defaultWidgetKind);var s=f.widgetSizes[i];return{"sizes":s.widths,"heights":s.heights,"className":e.className,"widget":{"cellAddress":"grid0:r0:c"+t,"type":e.type,"options":e.options,"view":e.view,"kind":i}}},"_createCell":function(e,t,s){var n=t.get("view"),o=t.get("manifest")||{},r=o.supportedKinds,c=e.kind;if(c&&r&&i.contains(r,c)||(c=o.kind),e.kind=c,n)return e.view=n,this._prepareGridCell(e,s);var u=t.get("error");a.warn('Loading widget "{0}" failed. {1}',e.type,u)&&console.warn(a.last);var d=f.widgetSizes[f.defaultWidgetKind];return{"sizes":d.widths,"heights":d.heights,"widget":l.getErrorWidget(e,u)}},"getSupportedWidgetSizes":function(e,t){return i.map(e.supportedKinds,function(e){return{"kind":e,"label":h[e+"Label"],"selected":t.model.get("widget").kind===e}})},"serializePerspective":function(e){var t=this,n=s.Deferred(),o=this.collection.at(0).columns,r=o.filter(function(e){return"csui/perspective.manage/widgets/perspective.placeholder"!==e.get("widget").type}),c=r.map(t.serializeWidget);return s.whenAll.apply(s,c).done(function(s){t.executeCallbacks(s,e).done(function(){n.resolve({"type":"flow","options":{"widgets":i.map(s,function(e){return e.widget})}})}).fail(function(e){e=i.filter(e,function(e){return!!e.error}),n.reject(e[0].error)})},this).fail(function(e){e=i.filter(e,function(e){return!!e.error}),n.reject(e[0].error)}),n.promise()},"getPreviousWidgets":function(e){var t=e.get("perspective"),s=t&&t.options?t.options.widgets:{};return s=i.map(s,function(e){return{"widget":e}})},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0});return p.mixin(g.prototype),g}),csui.define("csui/perspectives/grid/grid.perspective.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior"],function(e,t,i,s,n,o){var r=e.config();return n.extend({"className":function(){var e="cs-perspective cs-grid-perspective grid-rows",i=t.result(n.prototype,"className");return i&&(e=e+" "+i),e},"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new s.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"behaviors":{"WidgetContainer":{"behaviorClass":o}},"constructor":function(e){e||(e={}),e=i.extend(!0,{},e);var s=e.rows;if(s&&s.length>0&&r.supportedWidgets){var o=s[0].columns;s[0].columns=t.filter(o,function(e){return t.contains(r.supportedWidgets,e.widget.type)}),o.length>1&&r.widgetSizes&&t.each(o,function(e){e.sizes=r.widgetSizes,e.heights={}})}n.prototype.constructor.call(this,e)},"enumerateWidgets":function(e){this._enumerateWidgetRow(this.options.collection,e)},"_enumerateWidgetRow":function(e,t){e.each(function(e){e.columns.each(function(e){var i=e.get("widget");i&&t(i),e.rows&&this._enumerateWidgetRow(e.rows,t)},this)},this)},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0})}),csui.define("csui/utils/contexts/factories/browsing.states",["module","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/models/browsing.state/browsing.states"],function(e,t,i,s,n){"use strict";return s.extend({"propertyPrefix":"browsingStates","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var c=this.options.browsingStates||{};if(!(c instanceof i.Collection)){var a=e.config(),l=t.extend({},a.options,c.options);c=new n(c.models,l)}this.property=c}})}),csui.define("csui/pages/start/perspective.router",["csui/lib/backbone","csui/utils/contexts/factories/browsing.states"],function(e,t){"use strict";return e.Router.extend({"constructor":function(i){e.Router.prototype.constructor.apply(this,arguments),this.context=i.context,this._routeWithSlashes=i.routeWithSlashes,this.browsingStates=this.context.getCollection(t),this.listenTo(this,"other:route",this.onOtherRoute)},"execute":function(t,i){return this.trigger("before:route",this),e.Router.prototype.execute.apply(this,arguments)},"navigate":function(t,i){var s=i&&i.urlIncludedQuery;if(this._routeWithSlashes&&!0!==s){var n=location.search;this.browsingStates&&(n=this.browsingStates.clearMetadataParamsInUrlQuery(n)),t+=n+location.hash}return this.trigger("before:route",this),e.Router.prototype.navigate.call(this,t,i)}})}),csui.define("csui/utils/contexts/factories/application.scope.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){var n=i.Model.extend({});return s.extend({"propertyPrefix":"applicationScope","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var c=this.options.applicationScope||{};if(!(c instanceof i.Model)){var a=e.config();c=new n(c.models,t.extend({},c.options,a.options))}this.property=c}})}),csui.define("csui/utils/contexts/factories/user",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/authenticated.user"],function(e,t,i,s,n,o,r){"use strict";var c=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);c=!c||"false"!==c[1];var a;return n.extend({"propertyPrefix":"user","constructor":function(i,a){n.prototype.constructor.apply(this,arguments);var l=this.options.authentication||this.options.user||{},u=e.config();if(c&&(this.initialResponse=l.initialResponse||u.initialResponse),!(l instanceof s.Model)){var d=i.getObject(o,a);l=new r(l.attributes||u.attributes,t.defaults({"connector":d},l.options,u.options))}this.property=l},"fetch":function(e){if(this.initialResponse&&!a){var t=this.property.prefetch(this.initialResponse,e);return a=!0,t}return this.property.fetch(e)}})}),csui.define("csui/pages/start/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/pages/start/nls/root/lang",{"UserTitle":"OpenText Content Server","NodeTitle":"{0}","SearchTitle":'Searching for "{0}"'}),csui.define("csui/pages/start/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/pages/start/impl/nls/root/lang",{"UserLoadingTitle":"Loading current user...","NodeLoadingTitle":"Loading {0}...","Home":"Home","mainNavigationAria":"Main navigation","profileMenuTitle":"Profile Menu","profileMenuAria":"Profile Menu of {0}","profileImageAlt":"Profile Menu of {0}"}),csui.define("csui/pages/start/impl/landing.perspective.router",["csui/lib/underscore","csui/utils/base","csui/pages/start/perspective.router","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/user","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o,r){"use strict";return i.extend({"routes":{"*other":"openLandingPerspective"},"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(s),this.listenTo(this.applicationScope,"change:id",this._updateHomeUrl),this.user=this.context.getModel(n),this.listenTo(this.user,"change:id",this._updatePageTitle)},"openLandingPerspective":function(){this._updatePageTitle(),this.applicationScope.set("id","")},"_updateHomeUrl":function(){this.applicationScope.id||(this.navigate(""),this._updatePageTitle())},"_updatePageTitle":function(){""===this.applicationScope.id&&(document.title=this.user.has("name")?e.str.sformat(o.UserTitle,t.formatMemberName(this.user)):r.UserLoadingTitle)}})}),csui.define("csui/pages/start/perspective.routing",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/pages/start/impl/perspective.router","csui/pages/start/impl/landing.perspective.router","csui-ext!csui/pages/start/perspective.routing"],function(e,t,i,s,n,o,r){"use strict";function c(e){var i=t.chain(r).flatten(!0).concat([o]).unique().reverse().value(),s=c.routesWithSlashes();this._routers=t.map(i,function(i){var n=new i(t.extend({"routeWithSlashes":s},e));return n.on("before:route",t.bind(this._informOthers,this)),n},this),this._context=e.context,this._originalHistoryLength=history.length}var a,l=t.extend({"developmentPage":!n.routesWithSlashes(),"handlerUrlPathSuffix":"/app","rootUrlPath":null},e.config());return t.extend(c.prototype,i.Events,{"start":function(){var e;e=c.routesWithSlashes()?{"pushState":!0,"root":null!=l.rootUrlPath&&l.rootUrlPath||s.combine(new s(new s(location.pathname).getCgiScript()).getPath(),l.handlerUrlPathSuffix)}:{"root":location.pathname},i.history.start(e)},"hasRouted":function(){return history.length>this._originalHistoryLength},"_informOthers":function(e){t.each(this._routers,function(t){t!==e&&t.trigger("other:route",t,e)})}}),c.routesWithSlashes=n.routesWithSlashes,{"getInstance":function(e){return a||(a=new c(e)),a},"routesWithSlashes":n.routesWithSlashes}}),csui.define("csui/utils/contexts/factories/node",["module","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"node","constructor":function(c,a){s.prototype.constructor.apply(this,arguments);var l=this.options.node||{},u=e.config();if(!(l instanceof i.Model)){var d=c.getObject(n,a),p=t.extend(!0,{"connector":d,"fields":{"properties":[]},"expand":{"properties":["original_id"]},"commands":r.getAllSignatures()},u.options,l.options);l=new o(l.attributes||u.attributes,p)}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/pages/start/impl/node.perspective.router",["csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/node","csui/models/node/node.model","csui/utils/contexts/factories/browsing.states","csui/utils/contexts/factories/application.scope.factory","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o,r,c,a){"use strict";return t.extend({"routes":{"nodes/:id":"openNodePerspective","nodes/:id/versions/:ver":"openNodeVersionPerspective"},"constructor":function(e){t.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(r),this.nextNode=this.context.getModel(i),this.listenTo(this.nextNode,"change:id",this._updateNodeUrl),this.listenTo(this.nextNode,"change:name",this._updatePageTitle),this.browsingStates=this.context.getCollection(o),this.listenTo(this.browsingStates,"state:change",this._browsingStateUpdateUrl),this.listenTo(this.browsingStates,"update:title",this._browsingStateUpdateTitle)},"openNodePerspective":function(e,t){var i=e;n.usesIntegerId&&(i=parseInt(i)),this._resetBrowsingData({"node_id":i},t||""),this._openNodePerspective(i)},"openNodeVersionPerspective":function(e,t,i){var s=e,o=t;n.usesIntegerId&&(s=parseInt(s),o=parseInt(o)),this._resetBrowsingData({"node_id":s,"version_num":o},i||""),this._openNodePerspective(s)},"_openNodePerspective":function(e){this.nextNode.get("id")===e&&this.nextNode.unset("id",{"silent":!0}),this.nextNode.set("id",e)},"onOtherRoute":function(){this.nextNode.clear({"silent":!0}),this._resetBrowsingData(),this.url=void 0},"_resetBrowsingData":function(e,t){this.browsingStates.resetAll({"silent":!0}),this.url={"path":e,"query":t}},"_setBrowsingStates":function(){var e=this.nextNode.get("id");this.url=this.url||{},this.url.path=this.url.path||{},this.url.path.node_id=e,this.url.path.node_name=this._getNodeName(),this.browsingStates.setBrowsingStates(this.url.path,this.url.query),this.url=void 0},"_updateNodeUrl":function(){var e="nodes/"+this.nextNode.get("id");if(void 0===this.url){var t=this.browsingStates.allowUrlUpdate;this.browsingStates.resetAll({"silent":!0}),this._setBrowsingStates(),t?(e=this.browsingStates.getUrlPathWithQuery(),this.navigate(e,{"urlIncludedQuery":!0})):this.navigate(e)}else this._setBrowsingStates(),e=this.browsingStates.getUrlPathWithQuery(),this.navigate(e,{"urlIncludedQuery":!0});this._updatePageTitle()},"_browsingStateUpdateUrl":function(){if("node"===this.applicationScope.get("id")&&this.browsingStates.allowUrlUpdate){var e="",t=this.browsingStates.at(this.browsingStates.length-1),i=t&&t.get("path"),n=i&&i.node_id||this.nextNode.get("id");if(void 0!==n){var o=this.context.getObject(s);o&&o.get("id")!==n&&(o.clear({"silent":!0}),o.fetched=!1,o.set("id",n,{"silent":!0}),this.context.trigger("current:folder:changed")),e=this.browsingStates.getUrlPathWithQuery()}this.navigate(e,{"urlIncludedQuery":!0}),void 0!==n?this._updatePageTitle(i&&i.node_name||void 0):this._updatePageTitle(c.UserTitle)}},"_browsingStateUpdateTitle":function(){var e=this.browsingStates.at(this.browsingStates.length-1),t=e&&e.get("path");t&&t.node_name&&this._updatePageTitle(t.node_name)},"_updatePageTitle":function(t){if(t&&t.length>0)return void(document.title=e.str.sformat(c.NodeTitle,t));var i=this._getNodeName();document.title=e.str.sformat(c.NodeTitle,i);var s=this.browsingStates.at(this.browsingStates.length-1),n=s&&s.get("path");n&&(n.node_name=i)},"_getNodeName":function(){return this.nextNode.has("name")?this.nextNode.get("name"):e.str.sformat(a.NodeLoadingTitle,this.nextNode.get("id"))}})}),csui.define("csui/pages/start/impl/search.perspective.router",["module","csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/search.query.factory","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o){"use strict";var r=e.config();t.defaults(r,{"showTitle":!0});var c=i.extend({"routes":{"search/*path":"openSearchPerspective"},"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.searchQuery=this.context.getModel(s),this.listenTo(this.searchQuery,"change",this._updateSearchUrl),this.listenTo(this.searchQuery,"change",this._updatePageTitle)},"openSearchPerspective":function(e){var i,s=t.reduce(e.split("/"),function(e,t){return i?(e[i]=null!=t?decodeURIComponent(t).trim():"",i=void 0):i=decodeURIComponent(t),e},{});this._updatePageTitle(),this.searchQuery.set(s,{"silent":!!this.searchQuery.get("query_id")})},"onOtherRoute":function(){this.searchQuery.clear({"silent":!0})},"_updateSearchUrl":function(){var e=this.routerURL(this.searchQuery);this.navigate(e),this._updatePageTitle()},"_updatePageTitle":function(){r.showTitle&&(document.title=t.str.sformat(n.SearchTitle,this.searchQuery.get("where")))},"_extractParameters":function(e,i){var s=e.exec(i).slice(1);return t.map(s,function(e,t){return e||null})}});return c.prototype.routerURL=function(e){return t.reduce(e.attributes,function(e,t,i){return e+=t?"/"+encodeURIComponent(i)+"/"+encodeURIComponent(t):"/"+encodeURIComponent(i)+"/%20"},"search")},c}),csui.define("csui/utils/classic.nodes/impl/core.classic.nodes",[],function(){"use strict";return[{"equals":{"type":215},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"view","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":[130,134]},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"view","objId":e.get("id"),"show":1,"nexturl":location.href}}},{"equals":{"type":206},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTask","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":204},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTaskList","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":205},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTaskGroup","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":212},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseMilestone","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":207},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ViewChannel","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":208},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ViewNews","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":218},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"OpenPoll","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":223},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"EditForm","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":299},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"RunReport","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":384},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ProspectorBrowse","objId":e.get("id"),"order":"-SCORE","summaries":1,"nexturl":location.href}}},{"equals":{"type":31214},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"addresubmission","RS_FUNCTION":"Edit","RSID":e.get("followup_id"),"objId":e.get("location_id"),"nexturl":location.href}}}]}),csui.define("csui/utils/content.helper",["csui/utils/url","csui/models/version"],function(e,t){"use strict";function i(i){var s=new e(i.connector.connection.url).getCgiScript(),n={"func":"doc.fetchcsui","nodeid":i.get("id")};return i instanceof t&&(n.vernum=i.get("version_number")),e.appendQuery(s,e.combineQueryString(n))}return{"getContentPageUrl":i}}),csui.define("csui/utils/handlebars/l10n",["csui/lib/handlebars","csui/utils/base"],function(e,t){return e.registerHelper("csui-l10n",function(e){return t.getClosestLocalizedString(e)}),e.helpers["csui-l10n"]}),csui.define("csui/utils/impl/core.defaultactionitems",["csui/utils/classic.nodes/classic.nodes","csui/utils/smart.nodes/smart.nodes"],function(e,t){"use strict";return[{"equals":{"type":[144,736,2]},"signature":"Open","sequence":10},{"type":140,"signature":"Navigate","sequence":30},{"type":258,"signature":"ExecuteSavedQuery","sequence":30},{"signature":"OpenSpecificClassicPage","sequence":600,"decides":function(t){return e.isForced(t)}},{"signature":"OpenSpecificNodePerspective","sequence":800,"decides":function(e){return t.isSupported(e)}}]}),csui.define("csui/utils/node.links/impl/core.node.links",["csui/utils/url"],function(e){"use strict";return[{"equals":{"type":140},"getUrl":function(e){return e.get("url")}},{"equals":{"type":258},"getUrl":function(t){return e.combine("search/query_id/",t.get("id"))}},{"getUrl":function(t){return e.combine("nodes/",t.get("id"))}}]}),csui.define("csui/utils/open.authenticated.page",["csui/lib/jquery","csui/utils/url"],function(e,t){"use strict";function i(i,s,n){n||(n={});var o=n.window||(!1===n.openInNewTab?window:window.open("","_blank")),r=new t(i.connection.url).getCgiScript(),c=i.connection.session.ticket;return e("<form>").attr("method","post").attr("action",r).append(e("<input>",{"name":"func","value":"csui.authenticate","type":"hidden"})).append(e("<input>",{"name":"otcsticket","value":c,"type":"hidden"})).append(e("<input>",{"name":"nexturl","value":s,"type":"hidden"})).appendTo(o.document.body).submit(),e.Deferred().resolve().promise()}return i}),csui.define("csui/utils/smart.nodes/impl/core.smart.nodes",[],function(){"use strict";return[{"equals":{"container":!0},"sequence":1e3}]}),csui.define("csui/models/node/node.addable.type.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node/node.addable.type.collection"],function(e,t,i,s,n,o){return s.extend({"propertyPrefix":"addableTypes","constructor":function(r,c){s.prototype.constructor.apply(this,arguments);var a=this.options.addableTypes||{};if(!(a instanceof i.Collection)){var l=r.getModel(n,c),u=e.config();a=new o(a.models,t.defaults({"autoreset":!0},a.options,u.options,{"node":l}))}this.property=a},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/context",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/log"],function(e,t,i,s,n,o){"use strict";function r(e,t){return this._getFactory(e,t,!0).property}function c(e,t){return!!this._getFactory(e,t,!1)}return s.Controller.extend({"constructor":function(t){this.cid=e.uniqueId("context"),s.Controller.prototype.constructor.apply(this,arguments),this._factories={},e.each(this.options.factories,function(e,t){e.internal=!0})},"getModel":r,"getCollection":r,"getObject":r,"hasModel":c,"hasCollection":c,"hasObject":c,"getFactory":function(e,t){return this._getFactory(e,t,!0)},"clear":function(e){return o.info("Clearing the context started.")&&console.log(o.last),this.triggerMethod("before:clear",this),e&&e.all?this._destroyAllFactories():this._destroyNonPermanentFactories(),o.info("Clearing the context succeeded.")&&console.log(o.last),this.triggerMethod("clear",this),this},"fetch":function(i){o.info("Fetching the context started.")&&console.log(o.last),this.triggerMethod("request",this),this._destroyTemporaryFactories();var s=this,r=e.chain(this._factories).filter(function(e){return s._isFetchable(e)}).map(function(t){var s=i?e.clone(i):{};return t.fetch(s)}).compact().value();return t.when.apply(t,r).then(function(){o.info("Fetching the context succeeded.")&&console.log(o.last),s.triggerMethod("sync",s)},function(e,i,r){var c=new n.Error(e);return o.error("Fetching the context failed: {0}",c)&&console.error(o.last),s.triggerMethod("error",c),t.Deferred().reject(c)})},"_isFetchable":function(e){return!e.options.detached&&(e.isFetchable?e.isFetchable():!!e.fetch)},"_destroyTemporaryFactories":function(){this._factories=e.pick(this._factories,function(e){if(!e.options.temporary)return!0;e.destroy()},this)},"_destroyNonPermanentFactories":function(){this._factories=e.pick(this._factories,function(e){if(e.options&&e.options.permanent)return!0;e.destroy()},this)},"_destroyAllFactories":function(){e.each(this._factories,function(e){e.destroy()}),this._factories={}},"_getPropertyName":function(t,i){i||(i={})
;var s=i.attributes||{};return i.unique&&(s=e.extend({"stamp":e.uniqueId()},s)),e.reduce(s,function(e,t,i){return null==t?e:e+"-"+i+"-"+t},t.prototype.propertyPrefix)},"_getFactory":function(t,s,n){if("string"==typeof t)return this._factories[t];s||(s={});var o,r,c,a=t.prototype.propertyPrefix,l=this.options.factories||{};s.internal?!(o=s[a])||o.internal||o instanceof i.Model||(r={"attributes":o.attributes,"unique":o.unique}):(o=s[a],void 0!==o||e.isEmpty(s)||(c=e.omit(s,"detached","permanent","temporary","unique"),e.isEmpty(c)||(s[a]=e.defaults(c,l[a]))),e.defaults(s,{"internal":!0},l),r={"attributes":s.attributes,"unique":s.unique},r.attributes||!o||o.internal||o instanceof i.Model||(r={"attributes":o.attributes,"unique":o.unique}));var u=this._getPropertyName(t,r),d=this._factories[u];return!d&&n&&(s.factoryName=u,d=new t(this,s),this._factories[u]=d),d}})}),csui.define("csui/utils/contexts/context.plugin",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";function i(e){this.context=e.context}return e.extend(i.prototype,t.Events,{"isFetchable":function(e){}}),i.extend=t.Model.extend,i}),csui.define("csui/utils/contexts/impl/node.opening.context",["csui/utils/contexts/context","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links","csui/utils/contexts/factories/user"],function(e,t,i,s,n){"use strict";var o={"fields":{"properties":[],"columns":[],"versions.element(0)":["mime_type"]},"includeResources":["metadata","perspective"]};return e.extend({"constructor":function(s){e.prototype.constructor.apply(this,arguments),this.connector=this.getObject(t,{"permanent":!0,"detached":!0}),this.user=this.getModel(n,{"permanent":!0}),this.nextNode=this.getModel(i,{"options":o,"permanent":!0,"detached":!0}).on("change:id",this.onNextNodeChanged,this)},"_isFetchable":function(t){return e.prototype._isFetchable.apply(this,arguments)&&(t.property!==this.user||!this.user.get("id"))},"openNodePage":function(e){this.triggerMethod("before:open:page",this,this.nextNode),window.open(s.getUrl(e))}})}),csui.define("csui/utils/contexts/factories/previous.node",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model"],function(e,t,i,s,n,o){"use strict";return s.extend({"propertyPrefix":"previousNode","constructor":function(i,r){s.prototype.constructor.apply(this,arguments);var c=i.getObject(n,r),a=e.config();this.property=new o(void 0,t.defaults({"connector":c},a.options))}})}),csui.define("csui/utils/contexts/browsing/browsing.context",["require","csui/lib/underscore","csui/utils/contexts/impl/node.opening.context","csui/utils/contexts/factories/node","csui/utils/contexts/factories/previous.node","csui-ext!csui/utils/contexts/browsing/browsing.context"],function(e,t,i,s,n,o){"use strict";var r={"fields":{"properties":[],"columns":[],"versions.element(0)":["mime_type"]},"includeResources":["metadata","perspective"]};return i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.on("request",this._changeNode,this),this.previousNode=this.getModel(n,{"permanent":!0,"detached":!0}),this.node=this.getModel(s,{"options":r,"permanent":!0,"detached":!0});var c=t.chain(o).flatten(!0).unique().reverse().value();this._plugins=t.map(c,function(e){return new e({"context":this})},this)},"_isFetchable":function(e){return i.prototype._isFetchable.apply(this,arguments)&&t.all(this._plugins,function(t){return!1!==t.isFetchable(e)})},"onNextNodeChanged":function(){!1!==this.nextNode.get("container")?this.enterContainer():this.openNewNodePage()},"openNewNodePage":function(){this.openNodePage(this.nextNode),this.nextNode.clear({"silent":!0})},"enterContainer":function(){this.triggerMethod("before:enter:container",this,this.nextNode),this.nextNode.fetch().then(function(){return this._enteringContainer=!0,this.fetch()}.bind(this)).fail(function(e){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.toString())})})},"_changeNode":function(){this._enteringContainer&&(this.previousNode.clear({"silent":!0}),this.previousNode.set(this.node.attributes),this.node.clear({"silent":!0}),this.node.set(this.nextNode.attributes),this.nextNode.clear({"silent":!0}),this._enteringContainer=!1)},"fetch":function(){function e(){i.prototype.fetch.apply(s,t)}var t=Array.prototype.slice.apply(arguments),s=this;return!this._enteringContainer&&this.node.isFetchable()?(this.triggerMethod("before:enter:container",this,this.node),this.node.fetch().then(e)):e()}})}),csui.define("csui/utils/contexts/page/page.context",["csui/lib/underscore","csui/utils/contexts/context","csui-ext!csui/utils/contexts/page/page.context"],function(e,t,i){"use strict";return t.extend({"constructor":function(){t.prototype.constructor.apply(this,arguments);var s=e.chain(i).flatten(!0).unique().reverse().value();this._plugins=e.map(s,function(e){return new e({"context":this})},this)},"_isFetchable":function(i){return t.prototype._isFetchable.apply(this,arguments)&&e.all(this._plugins,function(e){return!1!==e.isFetchable(i)})}})}),csui.define("csui/utils/contexts/portal/portal.context",["csui/lib/underscore","csui/utils/contexts/impl/node.opening.context","csui-ext!csui/utils/contexts/portal/portal.context"],function(e,t,i){"use strict";return t.extend({"constructor":function(s){t.prototype.constructor.apply(this,arguments);var n=e.chain(i).flatten(!0).unique().reverse().value();this._plugins=e.map(n,function(e){return new e({"context":this})},this)},"_isFetchable":function(i){return t.prototype._isFetchable.apply(this,arguments)&&e.all(this._plugins,function(e){return!1!==e.isFetchable(i)})},"onNextNodeChanged":function(){this.openNewNodePage()},"openNewNodePage":function(){this.openNodePage(this.nextNode),this.nextNode.clear({"silent":!0})}})}),csui.define("csui/utils/contexts/perspective/perspective.context.plugin",["csui/utils/contexts/context.plugin"],function(e){"use strict";return e.extend({"onCreate":function(){},"onClear":function(){},"onRefresh":function(){}})}),csui.define("csui/utils/contexts/perspective/landing.perspectives",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/landing.perspectives"],function(e,t,i,s){var n=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(n.prototype);var o=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByUser":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new o([{"module":"json!csui/utils/contexts/perspective/impl/perspectives/user.json","sequence":1e4}]);return s&&r.add(e.flatten(s,!0)),r}),csui.define("csui/utils/contexts/perspective/impl/landing.perspective.context.plugin",["csui/lib/underscore","csui/utils/log","csui/utils/contexts/factories/user","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/landing.perspectives"],function(e,t,i,s,n,o){"use strict";return n.extend({"constructor":function(e){n.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(s).on("change",this._fetchLandingPerspective,this),this.userFactory=this.context.getFactory(i),this.user=this.userFactory.property},"_fetchLandingPerspective":function(){this.applicationScope.id||(this.context.triggerMethod("request:perspective",this),this.userFactory.fetch({"success":e.bind(this._changePerspective,this,this.user),"error":e.bind(this.context.rejectPerspective,this.context)}))},"_changePerspective":function(t){var i,s=o.findByUser(t);if((e.isEmpty(t.get("perspective"))||s.get("important"))&&(i=s.get("module")),i)return this.context.overridePerspective(t,i);this.context.applyPerspective(t)}})}),csui.define("csui/utils/contexts/perspective/node.perspectives",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/node.perspectives"],function(e,t,i,s){var n=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(n.prototype);var o=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByNode":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new o([{"equals":{"type":258},"module":"json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json","sequence":100},{"equals":{"type":144},"important":!0,"module":"json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json","sequence":100},{"equals":{"container":!0},"module":"json!csui/utils/contexts/perspective/impl/perspectives/container.json","sequence":1e3},{"module":"json!csui/utils/contexts/perspective/impl/perspectives/metadata.json","sequence":1e4}]);return s&&r.add(e.flatten(s,!0)),r}),csui.define("csui/utils/contexts/perspective/impl/node.perspective.context.plugin",["csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/browsing.states","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/node.perspectives","csui/utils/classic.nodes/classic.nodes"],function(e,t,i,s,n,o,r,c,a,l,u){"use strict";var d={"fields":{"properties":[],"columns":[],"versions.element(0)":["mime_type"]},"includeResources":["metadata","perspective"]};return a.extend({"constructor":function(e){a.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(r),this.nextNodeFactory=this.context.getFactory(n,{"options":d,"permanent":!0,"detached":!0}),this.nextNode=this.nextNodeFactory.property.on("change:id",this._fetchNodePerspective,this),this.previousNode=this.context.getModel(o,{"permanent":!0,"detached":!0}),this.browsingStates=this.context.getCollection(c,{"permanent":!0,"detached":!0}),this.node=this.context.getModel(s,{"options":d})},"onClear":function(){this._clearModels(!0)},"onRefresh":function(){this._clearModels(!1)},"isFetchable":function(e){return e.property!==this.node},"_clearModels":function(e){this.previousNode.clear({"silent":!0}),this.previousNode.set(this.node.attributes),e&&(this.node=this.context.getModel(s,{"options":d})),this.node.clear({"silent":!0}),this.node.set(this.nextNode.attributes)},"_fetchNodePerspective":function(){t.trigger("closeToggleAction");var i=this.nextNode.get("id");null==i||i<=0||(this.context.triggerMethod("request:perspective",this),this.applicationScope.set("id","node"),this.nextNodeFactory.fetch({"success":e.bind(this._changePerspective,this,this.nextNode),"error":e.bind(this.context.rejectPerspective,this.context)}))},"_changePerspective":function(t){var i=u.getUrl(t);if(i)return void window.location.replace(i);var s=this.browsingStates.at(this.browsingStates.length-1),n=s&&s.get("query"),o=n&&n.perspective;if(o)return this.context.perspective.clear({"silent":!0}),this.context.overridePerspective(t,"json!csui/utils/contexts/perspective/impl/perspectives/"+o+".json");var r,c=l.findByNode(t);if((e.isEmpty(t.get("perspective"))||!t.get("container")||c.get("important"))&&(r=c.get("module")),r)return this.context.overridePerspective(t,r);this.context.applyPerspective(t)}})}),csui.define("csui/utils/contexts/perspective/search.perspectives",["module","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/search.perspectives"],function(e,t,i,s,n){var o=e.config();t.defaults(o,{"perspectiveCollection":[{"module":"json!csui/utils/contexts/perspective/impl/perspectives/search.json","sequence":1e4}]});var r=i.Model.extend({"defaults":{"sequence":100,"module":null},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(t)}});s.mixin(r.prototype);var c=i.Collection.extend({"model":r,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)},"findByQuery":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),a=new c(o.perspectiveCollection);return n&&a.add(t.flatten(n,!0)),a}),csui.define("csui/utils/contexts/perspective/impl/search.perspective.context.plugin",["require","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/search.perspectives"],function(e,t,i,s,n,o,r,c){"use strict";return r.extend({"constructor":function(e){r.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(o),this.searchQuery=this.context.getModel(n,{"permanent":!0,"detached":!0}).on("change",this._fetchSearchPerspective,this)},"_fetchSearchPerspective":function(){var e=c.findByQuery(this.searchQuery);this.applicationScope.set("id","search"),this.context.loadPerspective(e.get("module"))}})}),csui.define("csui/utils/contexts/perspective/perspective.guide",["csui/lib/underscore"],function(e){function t(){}return t.prototype={"isNew":function(t,i){return!e.isEqual(e.omit(t,["showWidgetInMaxMode","id"]),e.omit(i,["id"]))}},t}),csui.define("csui/utils/contexts/perspective/perspective.context",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/log","csui/utils/contexts/context","csui/utils/contexts/factories/user","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/impl/landing.perspective.context.plugin","csui/utils/contexts/perspective/perspective.guide","csui-ext!csui/utils/contexts/perspective/perspective.context"],function(e,t,i,s,n,o,r,c,a,l,u,d){"use strict";return r.extend({"constructor":function(){r.prototype.constructor.apply(this,arguments),t.defaults(this.options,{"online":!0}),this.perspective=new s.Model,this.perspectiveGuide=new u,this._applicationScope=this.getModel(a,{"permanent":!0,"detached":!0}),this.options.online&&(this._user=this.getModel(c,{"options":{"includeResources":["perspective"]},"permanent":!0}));var e=t.chain(d).flatten(!0).concat([l]).unique().reverse().value();this._plugins=t.map(e,function(e){return new e({"context":this})},this)},"fetchPerspective":function(){return t.find(this._plugins,function(e){return e instanceof l})._fetchLandingPerspective(),this},"_destroyNonPermanentFactories":function(){r.prototype._destroyNonPermanentFactories.apply(this,arguments),t.invoke(this._plugins,"onClear")},"_isFetchable":function(e){return r.prototype._isFetchable.apply(this,arguments)&&(e.property!==this._user||!this._user.get("id"))&&t.all(this._plugins,function(t){return!1!==t.isFetchable(e)})},"loadPerspective":function(t){var n=i.Deferred(),r=this;o.debug('Using perspective from "{0}".',t)&&console.log(o.last),this.triggerMethod("request:perspective",this.context),this.loadingPerspective=n.promise(),e([t],function(e){var t=new s.Model({"perspective":e});r.loadingPerspective=!1,r.applyPerspective(t)},function(e){r.loadingPerspective=!1,r.rejectPerspective(e)})},"overridePerspective":function(i,s){var n=this;return o.debug('Overriding the perspective in {0} with "{1}".',o.getObjectName(i),s)&&console.log(o.last),e([s],function(e){i.set("perspective",e),n.applyPerspective(i)},t.bind(this.rejectPerspective,this))},"applyPerspective":function(e){this.triggerMethod("sync:perspective",this,e);var i=e.get("perspective")||{};if(this.perspectiveGuide.isNew(this.perspective.attributes,i))this.triggerMethod("before:change:perspective",this,e),o.info("Perspective has changed")&&console.log(o.last),this.perspective.clear(),this.perspective.set(i),this.triggerMethod("change:perspective",this,e);else{var s=this;o.info("Perspective has not changed")&&console.log(o.last),this._destroyTemporaryFactories(),t.invoke(this._plugins,"onRefresh"),this.fetch().fail(function(t){s.rejectPerspective(e,t)})}},"rejectPerspective":function(t,i){function r(){c._informFailure(i).then(function(){c.trigger("reject:perspective")})}var c=this;if(i||(i=t),i instanceof Error||(i=new n.Error(i)),this.triggerMethod("error:perspective",this,i),t&&t instanceof s.Model){t.set("id",-1,{"silent":!0}),c.trigger("current:folder:changed",t);var a="json!csui/utils/contexts/perspective/impl/perspectives/error.global.json";e([a],function(e){o.debug('Showing error page perspective for {0} with "{1}".',o.getObjectName(t),a)&&console.log(o.last),t.set("perspective",e,{"silent":!0}),t.set("serverError",i.toString(),{"silent":!0}),c.applyPerspective(t)},function(){r()})}else r()},"_informFailure":function(e){var s=!1,n=i.Deferred();return 0===e.statusCode&&(s=t.find(this._plugins,function(t){if(t.offlineErrorHandler)return t.offlineErrorHandler(e)})),s||csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.toString()).always(n.resolve)}),n.promise()}})}),csui.define("csui/utils/contexts/factories/ancestors",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/nodeancestors"],function(e,t,i,s,n,o){"use strict";var r=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);r=!r||"false"!==r[1];var c;return s.extend({"propertyPrefix":"ancestors","constructor":function(c,a){s.prototype.constructor.apply(this,arguments);var l=this.options.ancestors||{},u=e.config();if(r&&(this.initialResponse=l.initialResponse||u.initialResponse),!(l instanceof i.Collection)){var d=c.getModel(n,a);l=new o(l.models,t.defaults({"node":d},l.options,u.options))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!c){var t=this.property.prefetch(this.initialResponse,e);return c=!0,t}return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/children",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/nodechildren","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"children","constructor":function(c,a){a||(a={}),s.prototype.constructor.apply(this,arguments);var l=this.options.children||{},u=l.options&&l.options.commands||r;if(!(l instanceof i.Collection)){var d=c.getModel(n,a),p=e.config();l=new o(l.models,t.defaults({"autoreset":!0,"fields":{"properties":[]},"expand":{"properties":["original_id"]},"commands":u.getAllSignatures()},p.options,l.options,{"node":d}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/children2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node.children2/node.children2","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"children2","constructor":function(c,a){a||(a={}),s.prototype.constructor.apply(this,arguments);var l=this.options.children2||{},u=l.options&&l.options.commands||r;if(!(l instanceof i.Collection)){var d=c.getModel(n,a),p=e.config();l=new o(l.models,t.defaults({"autoreset":!0,"fields":{"properties":[],"versions.element(0)":["owner_id"]},"expand":{"properties":["original_id"]},"commands":u.getAllSignatures()},p.options,l.options,{"node":d}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/columns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/children"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"columns","constructor":function(t,o){s.prototype.constructor.apply(this,arguments);var r=this.options.columns||{};if(!(r instanceof i.Collection)){var c=t.getModel(n,o);e.config();r=c.columns}this.property=r}})}),csui.define("csui/utils/contexts/factories/columns2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node.columns2","csui/utils/log"],function(e,t,i,s,n,o,r){"use strict";function c(e,i){return e.length!==i.length||e.some(function(e,s){var n=t.pick(i[s],l),o=t.pick(e.attributes,l);return!t.isEqual(n,o)})}r=r(e.id);var a=s.extend({"propertyPrefix":"columns2","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var r=this.options.columns2||{};if(r instanceof i.Collection)this.property=r;else{var c=r.options&&r.options.node||e.getModel(n,t);this.property=new o,this.node=c,c.columns.on("reset",this._resetColumns,this),this._resetColumns()}},"_resetColumns":function(){var e=this.node,t={},i=e.definitions.map(function(e){e=e.toJSON();var i=e.key;switch(e.column_key=i,i){case"name":e.default_action=!0,e.contextual_menu=!1,e.editable=!0,e.filter_key=i;break;case"type":e.default_action=!0;break;case"modify_date":e.initialSortingDescending=!0}return t[i]=e,e.sort_key&&(e.sort=!0,delete e.sort_key),e});e.columns.each(function(e,i){var s,n=e.get("key"),o=n.lastIndexOf("_formatted"),c=500+i;if(o>=0){var a=n.substr(0,n.length-10);if(s=t[a])return void(s.definitions_order=c)}s=t[n],s?s.definitions_order=c:r.warn('No definition found for the column "{0}".',n)}),c(this.property,i)&&this.property.reset(i)}}),l=["description","key","multi_value","name","type","type_name"];return a}),csui.define("csui/models/authenticated.user.node.permission",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","csui/utils/contexts/factories/user"],function(e,t,i,s,n,o,r){"use strict";var c=t.Model.extend({"constructor":function(e,i){i||(i={}),t.Model.prototype.constructor.call(this,e,i),this.makeResource(i).makeIncludingAdditionalResources(i).makeExpandable(i),this.options=i},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})},"url":function(){var e=this.node?this.node.get("id"):this.options.node.get("id"),t=this.options.user.get("id"),s=new i(this.connector.connection.url).getApiBase("v2");return i.combine(s,"/nodes/",e,"/permissions/effective/",t)},"parse":function(e){var t=e.results&&e.results.data&&e.results.data.permissions;return t?this.node.get("container")||-1===t.permissions.indexOf("add_items")||t.permissions.splice(t.permissions.indexOf("add_items"),1):t={},t},"hasEditPermissionRights":function(){var t=this.get("permissions");return t&&e.isArray(t)&&e.contains(t,"edit_permissions")}});return o.mixin(c.prototype),s.mixin(c.prototype),n.mixin(c.prototype),c}),csui.define("csui/utils/contexts/factories/usernodepermission",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/user","csui/utils/contexts/factories/connector","csui/models/authenticated.user.node.permission"],function(e,t,i,s,n,o,r,c){"use strict";return n.extend({"propertyPrefix":"userNodePermission","constructor":function(i,a){n.prototype.constructor.apply(this,arguments);var l=this.options.userNodePermission||{},u=e.config();if(!(l instanceof s.Model)){var d=i.getObject(r,a),p=i.getModel(o);l=new c(l.attributes,t.defaults({"connector":d,"user":p,"node":this.options.node},l.options,u.options))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/volume",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node/node.model"],function(e,t,i,s,n,o){return s.extend({"propertyPrefix":"volume","constructor":function(r,c){s.prototype.constructor.apply(this,arguments);var a=this.options.volume||{};if(!(a instanceof i.Model)){var l=r.getModel(n,c),u=e.config();l.setExpand("properties","volume_id"),a=new o(t.extend({},l.get("volume_id"),a.attributes||u.attributes),t.extend({"connector":l.connector},a.options,u.options)),this.listenTo(l,"change:volume_id",function(){a.set(l.get("volume_id"))})}this.property=a}})}),csui.define("csui/models/widget/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/models/widget/nls/root/lang",{"searchResults":"Search Results","ra_access_date_last":"Last Accessed","ra_parent_id":"Location","ra_size":"Size","ma_type":"Type","ma_name":"Name","ma_location_name":"Location","ma_date_due":"Due Date","ma_priority":"Priority","ma_status":"Status","ma_from_user_name":"From","fav_parent_id":"Location","fav_size":"Size","owner":"Owner","created":"Created","createdBy":"Created by","modified":"Modified","size":"Size","type":"Type"}),csui.define("csui/models/widget/favorites.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,c,a,l,u,d,p,h,f){"use strict";var g=d.extend({"constructor":function(e,t){if(e&&!e.title){var i="fav_"+e.column_key;e.title=f[i]}d.prototype.constructor.call(this,e,t)}}),m=p.extend({"model":g,"getColumnModels":function(t,i){var s=p.prototype.getColumnModels.call(this,t,i);return e.each(s,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"modify_date"!==t&&"parent_id"!==t&&"size"!=t||(e.sort=!0)}),s}}),v=h.extend({"parse":function(e,t){var i,s;return e.data&&e.data.properties?(i=e.data.properties,s=e.data.versions):(i=e,s=e.versions),i.short_name=i.name,i.size||(i.container?i.size=i.container_size:s&&(i.size=s.file_size)),!i.mime_type&&s&&s.mime_type&&(i.mime_type=s.mime_type),h.prototype.parse.call(this,e,t)}}),b=t.Collection.extend({"model":v,"constructor":function(i,s){t.Collection.prototype.constructor.apply(this,arguments),s&&(this.options=e.pick(s,["connector","autoreset","includeResources","fields","expand","commands"])),this.makeConnectable(s).makeFetchable(s).makeAdditionalResourcesV2Mixin(s).makeFieldsV2(s).makeExpandableV2(s).makeCommandableV2(s).makeClientSideBrowsable(s).makeBrowsableV2Response(s),this.columns=new m},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e},"url":function(){var e=this.connector.connection.url.replace("/v1","/v2"),t=i.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getRequestedCommandsUrlQuery(),this.getBrowsableUrlQuery());return e=i.combine(e,"/members/favorites"),t?e+"?"+t:e},"parse":function(e,t){return this.parseBrowsedState(e,t),this.columns&&this.columns.resetColumnsV2(e,this.options),this.parseBrowsedItems(e,t)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands)}});return l.mixin(b.prototype),u.mixin(b.prototype),s.mixin(b.prototype),n.mixin(b.prototype),o.mixin(b.prototype),r.mixin(b.prototype),c.mixin(b.prototype),a.mixin(b.prototype),b}),csui.define("csui/utils/contexts/factories/favorites",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/favorites.model","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"favorites","constructor":function r(c,a){s.prototype.constructor.apply(this,arguments);var l=this.options.favorites||{};if(!(l instanceof i.Collection)){var u=c.getObject(n,a),d=e.config();l=new o(l.models,t.extend({"connector":u},l.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"includeResources":["metadata"],"commands":r.getAllSignatures()})}})}),csui.define("csui/utils/contexts/factories/favoritescolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/favorites"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"favorites_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/utils/contexts/factories/favorites2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/favorites2","csui/utils/defaultactionitems","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,c){"use strict";return s.extend({"propertyPrefix":"favorites2","constructor":function r(c,a){s.prototype.constructor.apply(this,arguments);var l=this.options.favorites||{};if(!(l instanceof i.Collection)){var u=c.getObject(n,a),d=e.config();l=new o(l.models,t.extend({"connector":u,"autoreset":!0},l.options,d.options,r.getDefaultResourceScope()))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"favorites":["name","tab_id"],"versions.element(0)":["mime_type","owner_id"]},"expand":{"properties":["original_id","parent_id","reserved_user_id"]},"includeResources":[],"commands":c.getAllSignatures()})},"getLimitedResourceScope":function(){return t.deepClone({"fields":{"properties":["container","id","name","original_id","type","type_name","parent_id","container"],"favorites":["name","tab_id"],"versions.element(0)":["mime_type"]},"expand":{"properties":["original_id","parent_id"]},"includeResources":[],"commands":c.getAllSignatures(),"defaultActionCommands":r.getAllCommandSignatures(c)})},"getDefaultsOnlyResourceScope":function(){return t.deepClone({"fields":{"properties":[],"favorites":["name","tab_id"],"versions.element(0)":[]},"expand":{"properties":["original_id","parent_id","reserved_user_id"]},"includeResources":[],"commands":r.getAllCommandSignatures(c)})}})}),
csui.define("csui/utils/contexts/factories/favorite2groups",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/favorites2","csui/models/favorite2groups","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,c){"use strict";return s.extend({"propertyPrefix":"favorites2groups","constructor":function a(l,u){s.prototype.constructor.apply(this,arguments);var d=this.options.favoriteGroups||{};if(!(d instanceof i.Collection)){var p=e.config(),h=l.getObject(n,u),f=l.getCollection(o,u);d=new r(d.models,t.extend({"favorites":f,"connector":h,"autoreset":!0,"commands":c.getAllSignatures()},d.options,p.options,a.getDefaultResourceScope()))}this.property=d},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[]}})}})}),csui.define("csui/utils/contexts/factories/favorite2columns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/favorites2"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"favorites2_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/models/widget/myassignments.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,c,a,l,u,d,p,h,f){"use strict";var g=d.extend({"constructor":function(e,t){if(e&&!e.title){var i="ma_"+e.column_key;e.title=f[i]}d.prototype.constructor.call(this,e,t)}}),m=p.extend({"model":g,"getColumnModels":function(t,i){var s=p.prototype.getColumnModels.call(this,t,i);return e.each(s,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"location_id"!==t&&"date_due"!==t&&"priority"!==t&&"status"!==t&&"from_user_name"!==t||(e.sort=!0,"location_id"===t&&(e.sort_key="location_name"))}),s},"getV2Columns":function(t){var i=t.results&&t.results[0]&&t.results[0].metadata&&t.results[0].metadata.assignments||{};!i.location_id_expand&&i.name&&(i.location_id_expand=e.clone(i.name),i.location_id_expand.key="location_id_expand",i.location_id_expand.name="Location"),!i.from_user_id_expand&&i.name&&(i.from_user_id_expand=e.clone(i.name),i.from_user_id_expand.key="from_user_id_expand",i.from_user_id_expand.name="From"),!i.location_name&&i.name&&(i.location_name=e.clone(i.name),i.location_name.key="location_name",i.location_name.name="Location Name"),!i.from_user_name&&i.name&&(i.from_user_name=e.clone(i.name),i.from_user_name.key="from_user_name",i.from_user_name.name="From");var s=e.keys(i);return this.getColumnModels(s,i)}}),v=h.extend({"parse":function(e,t){var i=e.data.assignments;i.short_name=i.name;var s;i.location_id_expand?s=i.location_id_expand:i.workflow_subworkflow_id_expand?s=i.workflow_subworkflow_id_expand:i.workflow_id_expand?s=i.workflow_id_expand:i.workflow_subworkflow_task_id_expand&&(s=i.workflow_subworkflow_task_id_expand),i.location_name=s&&s.name||"";var n=i.from_user_id_expand||{},o=n.first_name||"";return o=o+" "+(n.last_name||""),(!o.length||1===o.length&&" "===o)&&(o=n.name),i.from_user_name=o,e.data&&e.data.assignments&&(e.data.properties=e.data.assignments),h.prototype.parse.call(this,e,t)}}),b=t.Collection.extend({"model":v,"constructor":function(i,s){t.Collection.prototype.constructor.apply(this,arguments),s&&(this.options=e.pick(s,["connector","autoreset","includeResources","fields","expand","commands"])),this.makeConnectable(s).makeFetchable(s).makeAdditionalResourcesV2Mixin(s).makeFieldsV2(s).makeExpandableV2(s).makeCommandableV2(s).makeClientSideBrowsable(s).makeBrowsableV2Response(s),this.columns=new m},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e},"url":function(){var e=this.connector.connection.url.replace("/v1","/v2"),t=i.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getRequestedCommandsUrlQuery());return e=i.combine(e,"/members/assignments"),t?e+"?"+t:e},"parse":function(t,i){return t.results=e.filter(t.results,function(e){return 398!=e.data.assignments.type}),this.parseBrowsedState(t,i),this.columns&&this.columns.resetColumnsV2(t,this.options),this.parseBrowsedItems(t,i)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands)}});l.mixin(b.prototype);var x=b.prototype._compareValues;return b.prototype._compareValues=function(e,t,i){if(e.indexOf("date")>=0){if(null===t)return 1;if(null===i)return-1}return x.apply(this,arguments)},u.mixin(b.prototype),s.mixin(b.prototype),n.mixin(b.prototype),o.mixin(b.prototype),r.mixin(b.prototype),c.mixin(b.prototype),a.mixin(b.prototype),b}),csui.define("csui/utils/contexts/factories/myassignments",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/myassignments.model","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o){"use strict";return s.extend({"propertyPrefix":"myassignments","constructor":function r(c,a){s.prototype.constructor.apply(this,arguments);var l=this.options.myassignments||{};if(!(l instanceof i.Collection)){var u=c.getObject(n,a),d=e.config();l=new o(l.models,t.extend({"connector":u},l.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)},"isFetchable":function(){return!window.csui||!window.csui.mobile||!this.property.fetched}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"assignments":[]},"includeResources":["metadata"]})}})}),csui.define("csui/utils/contexts/factories/myassignmentscolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/myassignments"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"myassignments_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/models/widget/recentlyaccessed/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.connector.connection.url.replace("/v1","/v2"),i=t.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getRequestedCommandsUrlQuery(),this._getSubtypesUrlQuery());return e=t.combine(e,"/members/accessed"),i?e+"?"+i:e},"parse":function(e,t){return this.parseBrowsedState(e,t),this.columns&&this.columns.resetColumnsV2(e,this.options),this.parseBrowsedItems(e,t)},"_getSubtypesUrlQuery":function(){var e="";if(this.options.recentlyAccessedSubtypes)for(var t=0;t<this.options.recentlyAccessedSubtypes.length;t++)e=e.concat("where_type=",this.options.recentlyAccessedSubtypes[t],"&");return e}})}}}),csui.define("csui/models/widget/recentlyaccessed.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/models/widget/recentlyaccessed/server.adaptor.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,c,a,l,u,d,p,h,f,g,m){"use strict";var v=p.extend({"constructor":function(e,t){if(e&&!e.title){var i="ra_"+e.column_key;e.title=g[i]}p.prototype.constructor.call(this,e,t)}}),b=h.extend({"model":v,"getColumnModels":function(t,i){var s=h.prototype.getColumnModels.call(this,t,i);return e.each(s,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"access_date_last"!==t&&"modify_date"!==t&&"parent_id"!==t&&"size"!==t||(e.sort=!0,"parent_id"===t&&(e.sort_key="parent_name"))}),s},"getV2Columns":function(t){var i=t.results&&t.results[0]&&t.results[0].metadata&&t.results[0].metadata.properties||{};return!i.access_date_last&&i.modify_date&&(i.access_date_last=e.clone(i.modify_date),i.access_date_last.key="access_date_last",i.access_date_last.name="Last Accessed"),!i.parent_name&&i.name&&(i.parent_name=e.clone(i.name),i.parent_name.key="parent_name",i.parent_name.name="Location Name"),h.prototype.getV2Columns.call(this,t)}}),x=f.extend({"parse":function(e,t){var i,s,n,o;return e.data&&e.data.properties?(i=e.data.properties,s=e.data.versions,n=e.data.properties_user,o=e.data.properties.parent_id_expand):(i=e,s=e.versions,n=e.properties_user,o=e.parent_id_expanded),i.short_name=i.name,i.size||(i.container?i.size=i.container_size:s&&(i.size=s.file_size)),!i.mime_type&&s&&s.mime_type&&(i.mime_type=s.mime_type),!i.access_date_last&&n&&n.access_date_last&&(i.access_date_last=n.access_date_last),i.parent_name="",!i.parent_name&&o&&o.name&&(i.parent_name=o.name),f.prototype.parse.call(this,e,t)}}),y=t.Collection.extend({"model":x,"constructor":function(i,s){t.Collection.prototype.constructor.apply(this,arguments),s&&(this.options=e.pick(s,["connector","autoreset","includeResources","fields","expand","commands","recentlyAccessedSubtypes"])),this.makeConnectable(s).makeFetchable(s).makeAdditionalResourcesV2Mixin(s).makeFieldsV2(s).makeExpandableV2(s).makeCommandableV2(s).makeClientSideBrowsable(s).makeBrowsableV2Response(s).makeDelayedCommandableV2(s).makeServerAdaptor(s),this.columns=new b},"clone":function(){var t=new this.constructor(this.models,this.options);return this.columns&&t.columns.reset(this.columns.toJSON()),t.actualSkipCount=this.actualSkipCount,t.skipCount=this.skipCount,t.topCount=this.topCount,t.totalCount=this.totalCount,t.filteredCount=this.filteredCount,t.filters=e.deepClone(this.filters),t.orderBy=this.orderBy,t.expand=e.clone(this.expand),t.includeActions=this.includeActions,t.includeCommands=e.clone(this.includeCommands),t.defaultActionCommands=e.clone(this.defaultActionCommands),t.commands=e.clone(this.commands),t},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return u.mixin(y.prototype),d.mixin(y.prototype),s.mixin(y.prototype),n.mixin(y.prototype),o.mixin(y.prototype),r.mixin(y.prototype),c.mixin(y.prototype),a.mixin(y.prototype),l.mixin(y.prototype),m.mixin(y.prototype),y}),csui.define("csui/utils/contexts/factories/recentlyaccessed",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/recentlyaccessed.model","csui/utils/commands","csui/utils/defaultactionitems","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,c){"use strict";return s.extend({"propertyPrefix":"recentlyaccessed","constructor":function r(c,a){s.prototype.constructor.apply(this,arguments);var l=this.options.recentlyaccessed||{};if(!(l instanceof i.Collection)){var u=c.getObject(n,a),d=e.config();l=new o(l.models,t.extend({"connector":u,"recentlyAccessedSubtypes":d.recentlyAccessedSubtypes},l.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"includeResources":["metadata"],"commands":r.getAllSignatures()})},"getLimitedResourceScope":function(){return t.deepClone({"fields":{"properties":["container","id","name","original_id","type","type_name","parent_id","reserved"],"versions.element(0)":["mime_type"]},"expand":{"properties":["parent_id","reserved_user_id"]},"includeResources":[],"commands":r.getAllSignatures(),"defaultActionCommands":c.getAllCommandSignatures(r)})}})}),csui.define("csui/utils/contexts/factories/recentlyaccessedcolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/recentlyaccessed"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"recentlyaccessed_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/utils/contexts/factories/member",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/member"],function(e,t,i,s,n,o){"use strict";return s.extend({"propertyPrefix":"member","constructor":function(r,c){s.prototype.constructor.apply(this,arguments);var a=this.options.member||{};if(!(a instanceof i.Model)){var l=r.getObject(n,c),u=e.config();a=new o(a.attributes||u.attributes,t.defaults({"connector":l},a.options,u.options))}this.property=a},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i){"use strict";return{"mixin":function(t){return e.extend(t,{"makeSearchMetadataResponse":function(e){return this},"parseSearchMetadataResponse":function(e,t){return e}})}}}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.items",["csui/lib/underscore","csui/lib/backbone","i18n!csui/models/widget/nls/lang"],function(e,t,i){return[{"key":"create_date","column_key":"create_date","column_name":i.created,"column_type":"date","search_index":"OTCreateDate","sequence":10},{"key":"create_user_display_name","column_key":"create_user_display_name","column_name":i.createdBy,"search_index":"OTCreatedByName","sequence":20},{"key":"modify_date","column_key":"modify_date","column_name":i.modified,"column_type":"date","search_index":"OTObjectDate","sequence":30},{"key":"owner_display_name","column_key":"owner_display_name","column_name":i.owner,"search_index":"OTName","sequence":40,"permanentColumn":!1},{"key":"mime_type_search","column_key":"mime_type_search","column_name":i.type,"search_index":"OTFileType","sequence":50,"permanentColumn":!1},{"key":"size","column_key":"size","column_name":i.size,"search_index":"OTObjectSize","sequence":60,"permanentColumn":!1}]}),csui.define("csui/models/widget/search.results/search.metadata/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/widget/search.results/search.metadata/search.metadata.items"],function(e,t,i,s){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"sync":function(i,n,o){var r=t.Deferred();return o=e.defaults({"parse":!0},o),this.trigger("request",this,{},o),setTimeout(function(){o.success.call(o.context,s,"success",{}),r.resolve()}.bind(this)),r.promise()},"parse":function(e,t){return this.parseSearchMetadataResponse(e,t)}})}}}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.results/search.metadata/search.metadata.mixin","csui/models/widget/search.results/search.metadata/server.adaptor.mixin"],function(e,t,i,s,n,o,r){"use strict";var c=i.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),a=i.Collection.extend({"model":c,"comparator":"sequence","constructor":function e(t,i){e.__super__.constructor.apply(this,arguments),this.makeConnectable(i).makeFetchable(i).makeSearchMetadataResponse(i).makeServerAdaptor(i)},"getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new a(this.map(function(e){return e.attributes}))}});return s.mixin(a.prototype),n.mixin(a.prototype),o.mixin(a.prototype),r.mixin(a.prototype),a}),csui.define("csui/utils/contexts/factories/search.metadata.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/models/widget/search.results/search.metadata/search.metadata.model"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"searchMetadata","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var c=this.options.metadata||{};if(!(c instanceof i.Collection)){var a=e.config();c=new n(c.models,t.extend({},c.options,a.options))}this.property=c},"isFetchable":function(){return!!this.options},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/search.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"csui/widgets/search.results","options":{}}}]}]}}),csui.define("csui/models/widget/search.box/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/url"],function(e,t,i){"use strict";return{"mixin":function(s){return e.extend(s,{"makeServerAdaptor":function(e){return this},"url":function(){return i.combine(this.connector.connection.url,"searchbar?enterprise_slices=true")},"parse":function(e,i){var s=e.options.fields.slice.optionLabels,n=e.schema.properties.slice.enum,o={};return o.slices=[],t.each(n,function(e){o.slices.push({"sliceId":n[e],"sliceDisplayName":s[e]})}),o}})}}}),csui.define("csui/models/widget/search.box.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.box/server.adaptor.mixin"],function(e,t,i,s,n,o,r){"use strict";var c=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeServerAdaptor(t)}});return n.mixin(c.prototype),o.mixin(c.prototype),r.mixin(c.prototype),e.extend(c.prototype,{"isFetchable":function(){return!!this.options}}),c}),csui.define("csui/utils/contexts/factories/search.box.factory",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/search.box.model"],function(e,t,i,s,n,o,r){"use strict";var c=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);c=!c||"false"!==c[1];var a;return n.extend({"propertyPrefix":"searchBox","constructor":function(i,a){n.prototype.constructor.apply(this,arguments);var l=this.options.searchBox||{},u=e.config();if(c&&(this.initialResponse=l.initialResponse||u.initialResponse),!(l instanceof s.Collection)){var d=i.getObject(o,a);l=new r(l.attributes||u.attributes,t.defaults({"connector":d},l.options,u.options,{"autofetch":!0}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!a){var t=this.property.prefetch(this.initialResponse,e);return a=!0,t}return this.property.fetch(e)}})}),csui.define("csui/temporary/activeviews/icons/icons",[],function(){"use strict";return[{"equals":{"type":30309},"className":"csui-icon mime_active_view","sequence":30},{"equals":{"type":30303},"className":"csui-icon mime_web_report","sequence":30}]}),csui.define("csui/temporary/appearances/icons/icons",[],function(){"use strict";return[{"equals":{"type":480},"className":"csui-icon mime_appearance","sequence":30}]}),csui.define("css!csui/temporary/cop/icons/icons",[],function(){}),csui.define("csui/temporary/cop/icons/icons",["css!csui/temporary/cop/icons/icons"],function(){"use strict";return[{"equals":{"type":356},"className":"csui-icon csui-temporary-cop-blog","sequence":30},{"equals":{"type":357},"className":"csui-icon mime_blog_entry","sequence":30},{"equals":{"type":1257},"className":"csui-icon mime_collaborative_place","sequence":30},{"equals":{"type":123475},"className":"csui-icon mime_faq","sequence":30},{"equals":{"type":123476},"className":"csui-icon mime_faq_entry","sequence":30},{"equals":{"type":123469},"className":"csui-icon mime_forum","sequence":30},{"equals":{"type":123470},"className":"csui-icon mime_forum_topics_replies","sequence":30},{"equals":{"type":130},"className":"csui-icon mime_topic","sequence":30},{"equals":{"type":5573},"className":"csui-icon mime_wiki","sequence":30},{"equals":{"type":5574},"className":"csui-icon mime_wiki_page","sequence":30},{"equals":{"type":3030202},"className":"csui-icon mime_community","sequence":30}]}),csui.define("bundles/csui-data",["csui/behaviors/default.action/default.action.behavior","csui/behaviors/default.action/impl/defaultaction","csui/behaviors/widget.container/widget.container.behavior","csui/controls/error/error.view","csui/controls/globalmessage/globalmessage","css!csui/controls/globalmessage/globalmessage_icons","csui/controls/grid/grid.view","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","csui/controls/globalmessage/impl/progresspanel/progresspanel.view","i18n!csui/controls/globalmessage/impl/nls/globalmessage.lang","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/mixins/global.alert/global.alert.mixin","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/controls/tile/behaviors/parent.scrollbar.updating.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/tile/behaviors/searching.behavior","csui/pages/start/impl/perspective.router","csui/pages/start/impl/perspective.factory","csui/pages/start/impl/perspective.panel/perspective.animator","csui/pages/start/impl/perspective.panel/perspective.panel.view","csui/perspectives/flow/flow.perspective.view","csui/perspectives/grid/grid.perspective.view","csui/perspectives/mixins/perspective.edit.mixin","csui/pages/start/perspective.routing","csui/pages/start/perspective.router","csui/pages/start/impl/node.perspective.router","csui/pages/start/impl/search.perspective.router","i18n!csui/pages/start/impl/nls/lang","csui/utils/classic.nodes/impl/core.classic.nodes","csui/utils/content.helper","csui/utils/handlebars/l10n","csui/utils/impl/core.defaultactionitems","csui/utils/node.links/impl/core.node.links","csui/utils/open.authenticated.page","csui/utils/smart.nodes/impl/core.smart.nodes","csui/models/node/node.addable.type.factory","csui/utils/contexts/context","csui/utils/contexts/context.plugin","csui/utils/contexts/browsing/browsing.context","csui/utils/contexts/page/page.context","csui/utils/contexts/portal/portal.context","csui/utils/contexts/perspective/impl/landing.perspective.context.plugin","csui/utils/contexts/perspective/impl/node.perspective.context.plugin","csui/utils/contexts/perspective/impl/search.perspective.context.plugin","csui/utils/contexts/perspective/landing.perspectives","csui/utils/contexts/perspective/node.perspectives","csui/utils/contexts/perspective/perspective.context","csui/utils/contexts/perspective/perspective.guide","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/search.perspectives","csui/utils/contexts/factories/ancestors","csui/utils/contexts/factories/browsing.states","csui/utils/contexts/factories/children","csui/utils/contexts/factories/children2","csui/utils/contexts/factories/columns","csui/utils/contexts/factories/columns2","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/user","csui/utils/contexts/factories/usernodepermission","csui/utils/contexts/factories/volume","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/favoritescolumns","csui/utils/contexts/factories/favorite2groups","csui/utils/contexts/factories/favorites","csui/utils/contexts/factories/favorites2","csui/utils/contexts/factories/favorite2columns","csui/utils/contexts/factories/myassignmentscolumns","csui/utils/contexts/factories/myassignments","csui/utils/contexts/factories/recentlyaccessedcolumns","csui/utils/contexts/factories/recentlyaccessed","csui/utils/contexts/factories/member","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.metadata.factory","json!csui/utils/contexts/perspective/impl/perspectives/search.json","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.box.factory","csui/temporary/activeviews/icons/icons","csui/temporary/appearances/icons/icons","csui/temporary/cop/icons/icons","i18n!csui/models/widget/nls/lang"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-data",!0)});
//# sourceMappingURL=csui-data.js.map