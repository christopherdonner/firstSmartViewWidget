{"version":3,"sources":["../../src/controls/tableheader/comment/comment.button.view.js","../../src/widgets/metadata/versions.toolbaritems!csui-ext","../../src/widgets/metadata/versions.toolbaritems.js","../../src/widgets/metadata/impl/metadata.tabcontentcollection.view.js","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!css","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view.js","../../src/widgets/metadata/header.item.name/menuitems!csui-ext","../../src/widgets/metadata/header.dropdown.menu.items.js","../../src/widgets/metadata/header.dropdown.menu.items.mask.js","../../src/widgets/metadata/impl/metadata!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name.view.js","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!hbs","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!css","../../src/widgets/metadata/impl/header/leftbar/header.leftbar.view.js","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!hbs","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!css","../../src/widgets/metadata/impl/header/rightbar/header.rightbar.view.js","../../src/widgets/metadata/impl/header/metadata.header!hbs","../../src/widgets/metadata/impl/header/metadata.header!css","../../src/widgets/metadata/impl/header/metadata.header.view.js","../../src/widgets/metadata/property.panels/categories/impl/category.form.view.js","../../src/widgets/metadata/metadata.general.form.fields!csui-ext","../../src/widgets/metadata/metadata.general.form.fields.js","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view!css","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view.js","../../src/widgets/metadata/general.form.fields/general.form.field.behavior.js","../../src/widgets/metadata/metadata.general.action.fields!csui-ext","../../src/widgets/metadata/metadata.general.action.fields.js","../../src/widgets/metadata/general.action.fields/impl/general.action.fields.view.js","../../src/widgets/metadata/general.action.fields/general.action.field.behavior.js","../../src/widgets/metadata/general.panels/node/server.adaptor.mixin.js","../../src/widgets/metadata/general.panels/node/node.general.form.model.js","../../src/widgets/metadata/general.panels/document/document.general.form.model.js","../../src/widgets/metadata/general.panels/node/impl/node.general.form!hbs","../../src/widgets/metadata/general.panels/node/impl/node.general.form!css","../../src/widgets/metadata/general.panels/node/node.general.form.view.js","../../src/widgets/metadata/general.panels/document/impl/document.general.form!hbs","../../src/widgets/metadata/general.panels/document/impl/document.general.form!css","../../src/widgets/metadata/general.panels/document/document.general.form.view.js","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.model.js","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!hbs","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!css","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.view.js","../../src/widgets/metadata/general.panels/url/url.general.form.model.js","../../src/widgets/metadata/general.panels/url/impl/url.general.form!hbs","../../src/widgets/metadata/general.panels/url/impl/url.general.form!css","../../src/widgets/metadata/general.panels/url/url.general.form.view.js","../../src/widgets/metadata/metadata.general.panels!csui-ext","../../src/widgets/metadata/metadata.general.panels.js","../../src/widgets/metadata/property.panels/general/metadata.general.property.controller.js","../../src/widgets/metadata/metadata.property.panels!csui-ext","../../src/widgets/metadata/metadata.property.panels.js","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!hbs","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!css","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view.js","../../src/widgets/metadata/add.properties/toolbaritems!csui-ext","../../src/widgets/metadata/add.properties.menuitems.js","../../src/widgets/metadata/add.properties.menuitems.mask.js","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!hbs","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!css","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header.view.js","../../src/widgets/metadata/impl/metadata.properties.view.js","../../src/widgets/metadata/metadata.properties.view.js","../../src/widgets/metadata/impl/metadata.properties.content.view.js","../../src/utils/versions.default.action.items!csui-ext","../../src/utils/versions.default.action.items.js","../../src/widgets/metadata/impl/versions/metadata.versions.columns.js","../../src/widgets/metadata/versions.toolbaritems.mask!csui-ext","../../src/widgets/metadata/versions.toolbaritems.mask.js","../../src/widgets/metadata/impl/versions/metadata.versions!hbs","../../src/widgets/metadata/impl/versions/metadata.versions!css","../../src/widgets/metadata/impl/versions/metadata.versions.view.js","../../src/widgets/metadata/metadata.panels!csui-ext","../../src/widgets/metadata/metadata.panels.js","../../src/controls/tab.panel/impl/tab.link.dropdown!hbs","../../src/controls/tab.panel/impl/tab.link.dropdown.view.js","../../src/controls/tab.panel/impl/tab.links.dropdown!hbs","../../src/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior.js","../../src/controls/tab.panel/impl/tab.links.dropdown!css","../../src/controls/tab.panel/tab.links.dropdown.view.js","../../src/widgets/metadata/impl/metadata.dropdowntab.view.js","../../src/widgets/metadata/impl/metadata.controller.js","../../src/widgets/metadata/metadata.view.js","../../src/widgets/metadata/metadata.action.one.item.properties.view.js","../../src/widgets/metadata/impl/common/base.metadata.action.view.js","../../src/widgets/metadata/impl/add.properties/metadata.add.categories.view.js","../../src/widgets/metadata/metadata.add.categories.controller.js","../../src/widgets/metadata/metadata.add.item.controller.js","../../src/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior.js","../../src/widgets/metadata/impl/metadata.navigation.list.view.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!hbs","../../src/widgets/metadata/impl/metadata.navigation.list.behavior.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!css","../../src/widgets/metadata/impl/common/metadata.action.multiple.items.view.js","../../src/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller.js","../../src/widgets/metadata/metadata.add.document.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller.js","../../src/widgets/metadata/metadata.copy.move.items.controller.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!hbs","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!css","../../src/widgets/metadata/impl/metadatanavigation/metadatanavigation.view.js","../../src/widgets/metadata.navigation/impl/nls/lang.js","../../src/widgets/metadata.navigation/impl/nls/root/lang.js","../../src/widgets/metadata.navigation/impl/metadata.navigation!css","../../src/widgets/metadata.navigation/metadata.navigation.view.js","../../src/widgets/document.overview/impl/nls/lang.js","../../src/widgets/document.overview/impl/nls/root/lang.js","../../src/widgets/document.overview/impl/document.overview!hbs","../../src/widgets/document.overview/impl/document.overview!css","../../src/widgets/document.overview/document.overview.view.js","../../src/widgets/document.overview/document.overview.manifest.json!json","../../src/widgets/metadata/metadata.manifest.json!json","../../src/widgets/metadata.navigation/metadata.navigation.manifest.json!json","../../src/widgets/document.overview/impl/nls/document.overview.manifest.js","../../src/widgets/document.overview/impl/nls/root/document.overview.manifest.js","../../src/widgets/document.overview/impl/nls/document.overview.manifest!i18n","../../src/widgets/metadata/impl/nls/metadata.manifest.js","../../src/widgets/metadata/impl/nls/root/metadata.manifest.js","../../src/widgets/metadata/impl/nls/metadata.manifest!i18n","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest!i18n","csui-metadata.js"],"names":["csui","define","require","_","Marionette","ViewEventsPropagationMixin","TabableRegionBehavior","CommentButtonView","View","extend","className","behaviors","behaviorClass","constructor","options","call","this","listenTo","model","render","self","CommentDialogView","contentRegion","Region","el","window","s","contexts","config","roId","get","commentDialogView","connector","nodeid","CSID","context","triggerMethod","propagateEventsToViews","show","prototype","lang","ToolItemsFactory","extraToolItems","TooItemModel","toolbarItems","tableHeaderToolbar","main","signature","name","ToolbarItemVersionInfo","icon","ToolbarItemVersionDownload","ToolbarItemVersionDelete","maxItemsShown","dropDownIcon","rightToolbar","ToolbarItemVersionPurgeAll","hAlign","each","moduleToolItems","toolItems","key","targetToolbar","Error","toolItem","addItem","TabContentCollectionView","base","attributes","apply","arguments","currentlyFocusedElement","event","reverseDirection","shiftKey","elToFocus","currentlyFocusedElementInternal","totalElements","keyboardBehavior","tabableElements","length","cursor","isElementVisibleInParent","$el","elementCursor","module","hbs","Handlebars","t","template","1","depth0","helpers","partials","data","stack1","unless","show_dropdown_menu","hash","fn","program","inverse","noop","2","helper","escapeExpression","edit_name_tooltip","helperMissing","4","cancel_edit_name_tooltip","compiler","goBack","sidebarToggleTitle","nameAria","read_only","edit_name_id","placeholder_text","required_tooltip","edit_name","hideCancelButton","registerPartial","btnId","showMoreAria","showMoreTooltip","3","hasCommands","$","Backbone","log","ToolItemModel","ToolItemView","NodeCollection","FilteredToolItemsCollection","ToolbarView","commands","CommandHelper","DropdownMenuBehavior","BrowsingStateCollectionFactory","lazyloadingTemplate","CompositeView","childView","childViewContainer","childViewOptions","role","templateHelpers","collection","uniqueId","showMore","ui","dropdownToggle","dropdownMenu","loadingIconsDiv","status","nodes","container","containerCollection","delayedActions","mask","toolItemMask","reorderOnSort","defaults","originatingView","addClass","result","_triggerMenuItemAction","_closeToggle","_updateMenuItems","refilter","onRender","fetchingNonPromotedActions","binf_dropdown","find","removeClass","adjustDropdown","bind","dropdownLeftOffset","offset","left","dropdownWidth","outerWidth","originatingViewWidth","width","margin","innerWidth","rightOffset","renderLazyActions","node","lazyActionsRetrieved","isLocallyCreatedNode","isLocallyCreated","nonPromotedActionCommands","append","setEnabledLazyActionCommands","done","newCollection","lazyActions","toolItemsMask","blockingEle","animate","remove","models","filter","isDestroyed","_isDestroyed","children","undefined","push","addChild","renderTextOnly","debounce","delegateEvents","blockingElement","silentFetch","onRenderCollection","onDestroy","unbind","dropdownToggleEl","parent","hasClass","toolItemView","args","command","findWhere","setTimeout","trigger","enabled","metadataScenario","browsingStates","getCollection","path","node_id","node_name","url","getUrlPathWithQuery","execute","resp","oldExtraToolItems","addExtraToolItems","dropdownMenuList","ToolbarItemInformation","ToolbarItemCopyLink","ToolbarItemEdit","ToolbarItemShare","ToolbarItemPermissions","ToolbarItemRename","ToolbarItemDownload","ToolbarItemReserve","ToolbarItemUnreserve","ToolbarItemCopy","ToolbarItemMove","ToolbarItemAddVersion","ToolbarItemDelete","shortcut","ToolbarItemOriginalCopyLink","ToolbarItemOriginalEdit","ToolbarItemOriginalShare","ToolbarItemOriginalReserve","ToolbarItemOriginalUnreserve","ToolbarItemOriginalCopy","ToolbarItemOriginalMove","ToolbarItemOriginalDownload","ToolbarItemOriginalDelete","ToolItemMask","GlobalMenuItemsMask","globalMask","normalize","source","extendMask","storeMask","NodeTypeIconView","DropdownMenuView","dropdownMenuItems","DropdownMenuItemsMask","VersionModel","ItemNameBehavior","i18n","MetadataItemNameView","ItemView","modelHasEmptyName","readonly","placeHolderName","emptyObjectNameAria","editNameTooltip","cancelEditNameTooltip","switch_language_tooltip","switchLanguageTooltip","showDropdownMenu","goBackTooltip","expand","mode","nameEditIconDiv","nameEditIcon","nameEditDiv","nameInput","nameEditCancelIcon","titleError","toggleIcon","toggleWrapper","backEle","modelEvents","change","events","keydown","mouseenter","mouseleave","click @ui.nameEditIcon","keydown @ui.nameInput","click @ui.toggleIcon","click @ui.backEle","keydown @ui.toggleIcon","keydown @ui.backEle","keydown @ui.toggleWrapper","ItemName","nameSchema","_nameSchema","toggleSideBar","keyCode","type","toggleSideBarEvent","preventDefault","stopPropagation","leftBar","parentWrapper","closest","sideBarEle","toggleClass","direction","hide","attr","collapse","sideBarHidden","that","focus","promise","Event","ensureTitleLabelIcon","required","_updateName","settings","rtl","addItemPlaceHolderName","_createDropdownMenu","view","_onWindowResize","_applyToggle","Object","mdn","is","_removeToggle","_destroyDropdownMenu","_toggleEditMode","validate","dropdownMenuView","cancelEventsToViewsPropagation","destroy","oView","toolbarItemsMask","dropdownMenuListInProperties","showPermissionView","ddm","prop","resizeTimer","clearTimeout","_setHideShowToggleButton","isLandscape","matchMedia","matches","isPortrait","navBar","css","display","positin","editing","_nodeIconView","triggerMethodOn","onMouseEnterName","onMouseLeaveName","onKeyDown","parents","inputBoxNameChange","setInputBoxValue","_validateAndSave","currentValue","getValue","trim","inputValue","getInputBoxValue","setValue","sender","success","error","showInlineError","clearInlineError","_onKeyInView","target","onKeyInView","edit","setFocus","onClickName","value","iName","setEditModeFocus","_getErrorMessageFromResponse","err","setReadOnly","setPlaceHolder","updateNameSchema","val","placeholder","back_button","showBackIcon","back","click @ui.back","e","srcElement","click","onClickClose","triggerStateChangeOnStateRemoval","right_label","close_metadata_button_tooltip","is_shortcut","show_close_icon","BooleanFieldView","MetadataHeaderRightBarView","templateValues","showCloseIcon","closeMetadataButtonTooltip","showShortcutSwitch","shortcutNode","right_static_label","viewOriginalMessage","original","viewShortcutMessage","shortcutSwitchLabel","closeIcon","click @ui.shortcutSwitchLabel","click @ui.closeIcon","onClickShortcutSwitch","show_only_required_fields_switch","5","7","9","10","12","14","16","MetadataHeaderLeftBarView","MetadataHeaderView","showRequiredFieldsSwitch","only_required_fields_label","onlyRequiredFieldsLabel","leftbar","header","rightbar","click .metadata-header","_createMetadataHeaderLeftBarView","_createMetadataItemNameView","_createMetadataHeaderRightBarView","leftbarView","lbv","viewNode","metadataItemNameView","inv","_getNameSchema","action","rightbarView","rbv","onBeforeDestroy","requiredFieldSwitchView","onClickHeader","$elem","getNameInputBoxValue","validateName","getNameValue","setNameEditModeFocus","generalForm","first","formSchema","properties","warn","Url","FormView","PubSub","GlobalMessage","_saveField","_disableItem","metadataView","values","getValues","_saveChanges","changes","keys","_validate","_blockActions","ajax","extendAjaxOptions","combine","urlBase","body","JSON","stringify","fail","jqxhr","preValues","form","forEach","formField","propertyId","refresh","showMessage","message","always","_unblockActions","Deferred","reject","resolve","extraGeneralFormFields","MetadataGeneralFormFieldModel","Model","sequence","controller","controllerOptions","MetadataGeneralFormFieldCollection","Collection","comparator","metadataGeneralFormFields","flatten","add","CollectionView","getChildView","fieldDescriptor","fieldDescriptors","formModel","formView","generalFormView","fetchedModels","displayedModels","layoutMode","formViewOptions","_triggerRenderForms","map","formViewId","cid","once","without","GeneralFormFieldCollectionView","ModalAlert","Behavior","_insertFieldExtensions","_emptyExtensionRegion","getGeneralFormFieldValues","formValues","fieldRegion","currentView","roles","roleName","fieldParent","getOption","isFunction","fieldViewOptions","fieldModels","pluck","fieldViews","empty","getFieldDescriptors","methodName","parameters","forms","promises","chain","fieldControllerDescriptor","Controller","method","compact","when","then","generalActionFields","MetadataGeneralActionFieldModel","MetadataGeneralActionFieldCollection","metadataGeneralActionFields","GeneralActionFieldCollectionView","getGeneralActionFieldValues","NodeSpriteCollection","SizeView","FormModel","NodeResourceMixin","prototypeExt","makeServerAdaptor","nodeId","str","sformat","connection","parse","response","schema","title","general","omit","_addCreatorInfo","_addOwnerInfo","_addCreateDateInfo","_addModifyDateInfo","_addMimeTypeInfo","_addSizeInfo","_addItemidInfo","_ensurePlaceholder","_addReserveInfo","_addMimeTypeClassNameInfo","ret","sizeView","column","has","size","getValueData","formattedValue","fields","hidden","label","formFieldSizeLabel","alpacaPlaceholderNotAvailable","itemId","formFieldItemIdLabel","tooltip","create_date","format","modify_date","ownerField","isOwnerExists","owner","id","type_control","NoOwner","formatMemberName","create_user_id","creator","mime_type","findTypeByNode","formFieldTypeLabel","mimeTypeClassName","findClassByNode","description","desc","alpacaPlaceholderDescription","reserve_info","formFieldReservedByLabel","mixin","ServerAdaptorMixin","NodeGeneralFormModel","makeNodeResource","column_name","sizeVal","getReadableFileSizeString","DefaultActionBehavior","GeneralFormFieldBehavior","GeneralActionFieldBehavior","formTemplate","versionCommands","NodeVersionCollection","defaultAction","generalFormFields","generalFormFieldDescriptors","generalActionFieldDescriptors","fieldToRefresh","union","fetch","defaultActionController","getAction","noDefaultActionExist","formTemplateHelpers","type_name","showThumbnail","showSize","reserved","openDoc","aria_label","openDocAria","_getLayout","layout","alpaca","bindings","_getBindings","owner_user_id","version_number_name","owner_id","field","targetField","save","wait","patch","triggerDefaultAction","updateRenderedForm","updateReserveFieldDisplay","_showDefaultImage","thumbnail","versionNode","cmd","cmdOptions","on","checkAndScrollElemToViewport","currentTarget","listenToOnce","async","nonReadOnlyFields","$form","updateForm","isReservedClicked","isUnreservedClicked","alpacaForm","requiredSwitch","requireSwitched","i","childrenByPropertyId","reserveInfoElem","defaultThumbnailEl","Thumbnail","NodeGeneralFormView","_showImage","doc_name","imgSrc","imgAlt","docPreviewAlt","load","img","thumbnailNotLoadedEl","one","evt","clientHeight","clientWidth","split","indexOf","nodeLinks","SpecificNodeModel","SyncableMixin","ShortcutGeneralFormModel","makeSyncableFromMultipleSources","_mergeSources","specificNodeModel","nodeGeneralFormModel","specProperties","generalProperties","set","sync","specNodeModel","nodeGeneralModel","specificModelPromise","generalModelPromise","syncFromMultipleSources","NodeModelFactory","getModel","temporary","original_id","UrlGeneralFormModel","DocumentGeneralFormModel","DocumentGeneralFormView","ShortcutGeneralFormView","UrlGeneralFormView","RulesMatchingMixin","extraGeneralPanels","MetadataGeneralPanelModel","contentModel","contentView","contentViewOptions","makeRulesMatching","MetadataGeneralPanelCollection","findByNode","item","matchRules","generalPanels","equals","getPropertyPanels","generalPanel","_getGeneralPanel","getPropertyPanelsForCreate","deferred","getPropertyPanelsForMove","_getPropertyPanelsForMoveAndCopy","getPropertyPanelsForCopy","panel","MetadataGeneralPropertyController","extraPropertyPanels","MetadataPropertyPanelModel","MetadataPropertyPanelCollection","metadataPropertyPanels","addTitleTooltip","BlockingView","at","addNewProperties","dropdownDiv","formCollection","originalFormCollection","blockingParentView","delegate","imbue","toolItemFactory","_reRender","_isRendered","_ensureLazyActionsRetrieved","suppressAddProperties","_onClickAddButton","_executeAction","executeOptions","inheritance","parentView","addPropertiesCallback","cancelled","lazyActionsAreRetrieved","isNodeLocallyCreated","nonPromotedCommands","addPropertiesToolbar","addNewCategory","requiredFieldsLabelId","tabContentsHeaderTemplate","tagName","leftTabContentsHeader","rightTabContentsHeader","tabContentsHeaderTitle","requiredSwitchEle","requiredSwitchIcon","click @ui.requiredSwitchIcon","pubsubPostFix","objPubSubId","off","_changeTabTitle","_showRequiredSwitch","isRequiredCatPresent","_hideRequiredSwitch","html","requiredFieldSwitchModel","labelId","fieldvalue","reset","curVal","onClickRequiredIconDiv","onClickWriteField","flagWriteField","TabPanelView","TabLinkCollectionViewExt","TabLinksScrollMixin","CategoryFormView","AppliedCategoryCollection","MetadataFormCollection","MetadataUtils","PerfectScrollingBehavior","AddPropertiesDropdownMenuView","AddPropertiesMenuItemsMask","TabContentHeaderView","MetadataTabContentCollectionView","AppliedCategoryActionsCollection","urlResource","fetching","fetched","categories_add","MetadataPropertiesViewImpl","isTouchBrowser","rtlEnabled","_propertyPanels","formMode","allForms","_generalFormFieldDescriptors","_generalActionFieldDescriptors","isTabable","notTabableRegion","delete_icon","tabType","extraScrollTopOffset","toolbar","delete_tooltip","removeCategoryTooltip","getContentView","TabLinkCollectionViewClass","TabContentCollectionViewClass","searchTabContentForTabableElements","tabContentAccSelectors","PerfectScrolling","contentParent","scrollXMarginOffset","scrollYMarginOffset","autoreset","newCategories","removedCategories","widths","_updateToTextAreaScrollbar","blockActions","_checkFormFetching","_syncForms","unblockActions","_fetchForms","_resetRequiredSwitchView","flag","overlay","onRendered","resolveHasRequiredFields","has_required_fields","tabLinks","tabContentHeader","addPropertiesView","contentHeaderRegion","_updateScrollbar","scrollTop","top","_activateSelectedPropertyTab","selectedProperty","matchIndex","activeTab","findByIndex","activate","dataFetched","_fetchingForms","singleFormModel","clone","index","hasRequiredField","_createAddPropertiesView","_initializeOthers","metadataUtils","AlpacaFormOptionsSchemaHaveRequiredFields","_setTablinksAttributes","stopListening","tabContent","_onDeleteCategory","updateTitle","allFormsRendered","formRendered","childViewContent","content","isRenderFinished","formHtmlRegion","_onRequiredSwitch","before","_hideNotRequiredFormFields","apv","firstVisibleTabLink","firstVisibleTab","tabModel","findByModel","isActive","_computeTablinkWidth","_enableToolbarState","objPubSubTabId","innerText","childWithBlockingView","metadataHeaderView","onShow","tabLinksBar","tabLinksBarWidth","totalTablinksWidth","numTabs","$tabLink","oneTablinkWidth","totalWidthCheck1","totalWidthCheck2","onPanelActivated","validateForms","allFormsValid","tab","isCurrentFormValid","_hideValidationError","_showValidationError","getFormsValues","formFieldValues","formFieldRoles","category","catId","toString","isEmpty","removedCatId","generalTab","_addValidationErrorElement","after","validationErrorElem","hideValidationErrorMessageIconTooltip","formValidationErrorMessage","_clearValidationError","_loadPanels","_loadGeneralFormFields","_loadGeneralActionFields","panelModels","where","role_name","panelModelsLength","categoryModels","sortBy","toLowerCase","concat","_normalizeModels","_checkCategoriesActions","request","showError","getPropertyPanelsFailTitle","categoryActions","autofetch","cat","serverError","_getRespError","getCategoryActionsFailTitle","getActionsForACategoryFailMessage","gotoPreviousTooltip","gotoPreviousCategoryTooltip","gotoNextTooltip","gotoNextCategoryTooltip","_initializeToolbars","_listenToTabEvent","siblings","newWidth","widForEle","dirForEle","tabLinksEle","tabLinksEleWidth","parseInt","replace","addCatAt","respModel","catModel","doAddModelProperties","additionalAddOpts","tabContentRendered","_autoScrollTabTo","animationOff","removeAttr","_listenToTabIdEvent","formContent","newFormView","renderEvent","tabLink","tabToDelete","categoryName","removeCategoryWarningTitle","removeCategoryWarningMessage","confirmWarning","_removeCategory","isNumber","_removeTab","fullUrl","removeCategoryFailMessageTitle","removeCategoryFailMessage","previousIndex","_index","previousTab","hideNotRequired","appliedToWholeForm","_hideTabLinkByRequiredSwitch","_showTabLinkByRequiredSwitch","onReorder","tabLinkViews","_views","keysSortedByIndex","sort","view1","view2","currentTabPosition","responseJSON","MessageHelper","hasMessages","toHtml","text","clear","MetadataPropertiesView","MetadataPropertiesContentView","tabOptions","childTabPanelView","_ensureViewIsIntact","mdv","ActionItemCollection","extraActions","defaultActionItems","TableColumnModel","idAttribute","TableColumnCollection","getColumnKeys","deepClone","align","versionColumnVersionNumberTitle","versionColumnSizeTitle","dynamicMasks","_updateMask","modified","restoreMask","silent","LayoutViewEventsPropagationMixin","DelayedToolbarView","TableView","PaginationView","TableRowSelectionToolbarView","ToolbarCommandController","NodeColumnCollection","metadataVersionsColumns","VersionsToolbarItemsMask","accessibleTable","exec","location","search","defaultPageSize","defaultPageSizes","MetadataVersionsTableView","LayoutView","tableRowSelectionToolbarView","tableView","childContainer","paginationView","regions","tableRowSelectionToolbarRegion","tableRegion","paginationRegion","pageSize","ddItemsList","__super__","selectedNodes","getAllSignatures","onlyClientSideDefinedColumns","versions","commandController","toolbarItemsMasks","_setTableView","_setTableRowSelectionToolbar","_setTableRowSelectionToolbarEventListeners","_setPagination","propagateEventsToRegions","_updateCollection","_tableRowSelectionToolbarView","tableColumns","columns","columnsWithSearch","orderBy","actionItems","contains","cmdOption","actionItem","toolbarCommandController","selectedChildren","defaultDDList","skipPaginationUpdateRequest","extraPanels","MetadataPanelModel","MetadataPanelCollection","metadataPanels","counter","uniqueTabId","TabLinkView","itemTemplate","aria-label","_linkClicked","link","binf_tab","_parent","addToolTipContent","single_item","KeyboardBehaviorMixin","tabPanel","refreshTabableElements","_accSetFocusToPreviousOrNextElement","_setFirstAndLastFocusable","TabLinkDropDownView","collectionTemplate","TabLinksDropdownKeyboardBehavior","toggle","menuButton","selectedLabel","selected","activeTabIndex","selectedTabTitle","selectedTab","_setSelection","_refreshSelection","_updateSelection","selectedId","menuItems","onChildviewClickLink","onChildviewClearActiveTab","pick","TabLinkDropDownCollectionView","NodeBrowsingStateModel","implementTabContentsDefaultKeyboardHandling","delayTabContent","tabs","_buildTabs","_nodeChanged","_clearBrowsingState","customProperties","executeCommand","prepend","_updateBrowsingState","onActivateTab","tabPane","stateChanged","browsingState","currentStateId","newStateId","titleNodeNameSuffix","versionNumInTitle","nodeName","query","perspective","version_num","versionNumInBrowserTitle","tabIndex","activePanelTitle","container_id","browsingStatePath","browsingStateQuery","allowUrlUpdate","updateBrowserTitleAfterPageLoaded","_updateTabs","_convertCollection","hasChanged","MetadataController","Events","createItem","formsValues","version","MetadataDropdownTabView","NodeModel","PermissionsView","NodeChildrenCollection","MetadataView","unset","initialPanel","versionNumberUrlOverride","version_number","_ensureCompleteVersionNode","assignTo","shortcutResourceScope","getResourceScope","setResourceScope","actionsPromise","_ensureCompleteNode","supportOriginatingView","baseOriginatingView","_saveItemName","metadataTabView","_closeMetadata","mhv","shortcutOriginal","itemName","metadataController","originalNodeInCollection","errorMsg","failedToSaveName","checkExpansion","property","isObject","setExpand","expandable","invoke","actionsNeeded","actions","origView","MetadataActionOneItemPropertiesView","metadataPropertiesView","_updateSchema","setNameFieldFocus","console","last","suppressHeaderView","extraViewClass","bNameIsValid","bFormsAreValid","parent_id","firstFocusCalled","DialogView","BaseMetadataActionView","baseDisplayForm","dialogOptions","okAction","OkButtonClick","_cancelAction","cancelAction","CancelButtonClick","buttons","default","OkButtonTitle","defaultDialogOkButtonTitle","CancelButtonTitle","defaultDialogCancelButtonTitle","actionToken","CancelButtonActionToken","disabled","dialogTitle","defaultDialogTitle","dialog","largeSize","buttonModel","footerView","button","updateButton","buttonAttributes","FormCollection","MetadataAddCategoriesView","displayForm","catName","catCollection","metadataAddItemPropView","baseUIOptions","callerProcessData","addNewCategoryDialogTitle","okButtonTitle","addNewCategoryDialogAddButtonTitle","_addCategory","error2","catData","category_id","categories","formData","FormData","contentType","processData","addNewCategoryFailTitle","addNewCategoryFailMessage","AppliedCategoryFormModel","NodePicker","MetadataAddCategoriesController","AddNewCategory","startLocation","selectableTypes","unselectableNodes","selectMultiple","selectCategoryTitle","globalSearch","selectButtonLabel","selectCategoryButtonLabel","reduce","_loadNewCategoryForm","_displayAddCategoryForm","resp3","error3","_getCategoryModel","formOptions","resp2","formType","categoryExistsMessage","allowDeleteCat","pId","inheritanceVal","ajaxOptions","categoriesForm","fOptions","allow_delete","categoryId","removeable","loadNewCategoryFailTitle","loadNewCategoryFailMessage","nodeSpriteCollection","MetadataAddItemController","getAtLeastOneNode","addableTypeName","addItemMetadataDialogTitleGeneric","addItemView","completeFormCollection","addItemMetadataDialogTitle1","addButtonTitle","addItemMetadataDialogButtonAddTitle","_addItem","cancelButtonActionToken","updateButtons","getButtons","buttonView","enable","failedToCreateItem","responseText","TabPosition","none","list","selIndex","selectedIndex","selectedElem","selectedIndexElem","_focusHeader","headerFocusable","headerElement","_focusList","getSelectedIndex","getSelectedItem","_setFocus","_headerIsInFocus","_listIsInFocus","inFocus","_checkFocusAndSetCurrentTabPosition","_resetFocusedListElem","_moveTo","$preElem","clickBack","selectAt","which","_selectFirst","_selectLast","_selectPrevious","_selectNext","debug","SimpleListView","MetadataNavigationListKeyboardBehavior","nameAttribute","enableIcon","initialActivationWeight","onRenderItem","onBeforeDestroyItem","verNum","thumbnailView","nodeUrl","show_required","enforcedRequire","enforcedRequiredAttrs","titleEl","cssClasses","validated","requiredPassedTooltip","requiredTooltip","onBeforeShow","_showChildViews","_showScrollPosition","internal","navigationRegion","initiallySelected","findIndex","setSelectedIndex","firstSelected","MetadataNavigationListView","MetadataNavigationListBehavior","jsonPath","MetadataActionMultipleItemsView","commonCategories","initialFormData","requiredFields","initiallySelectedModel","_getInitiallySelectedModel","applyFlag","_subscribeToMetadataViewEvents","setInitialCategories","onClickItem","onClickBack","_showNode","validateAndSetValuesToNode","cancelClick","fileAttr","advanced_versioning","getRequiredFields","resultType","nonValidateFields","nonValidateFieldsIds","nvField","match","reqFieldId","reqField","n","validateAndSetValuesToAllNode","valid","formsValid","_checkForAlpacaRequiredFields","reqArray","nullCount","arrayElement","toArray","checkNull","element","Array","childElement","iValue","iKey","onItemNameChanged","newName","selectedItem","MetadataAddMultipleDocsController","_getCommonCategories","metadataAddItems","addDocumentMetadataDialogTitle","addDocumentMetadataDialogAddButtonTitle","_addItems","allValid","extended_data","extendedData","missingRequiredMetadataForDocuments","MetadataAddDocumentController","addItemsRequiredMetadata","fileUploadCollection","fileModels","file","fileUploadModel","tempName","utilOptions","addableType","docParentId","newFiles","grep","ContainerHasEnforcedEmptyRequiredMetadata","hasRequiredMetadata","metadataDeferred","_addOneItemWithRequiredMetadata","_addMultipleItemsWithRequiredMetadata","_makeNodeCollectionFromItems","items","fileObject","userAction","cmdStatus","MetadataCopyMoveOneItemController","_CopyMoveItem","MetadataCopyMoveMultipleItemsController","_CopyMoveItems","modelValid","missingRequiredMetadataForObjects","ActionCollection","MetadataCopyMoveItemsController","CopyMoveItemsWithMetadata","CopyMoveItemsRequiredMetadata","openMetadata","_copyMoveItemsWithMetadata","targetFolder","_copyMoveOneItemWithRequiredMetadata","_copyMoveMultipleItemsWithRequiredMetadata","ContainerHasEnforcedEmptyRequiredMetadataOnNodes","requiredMetadata","enforcedItems","enfItem","itemObject","size_formatted","copyOneItemMetadataDialogTitle","copyItemsMetadataDialogButtonTitle","moveOneItemMetadataDialogTitle","moveItemsMetadataDialogButtonTitle","_extendDialogTitle","copyMultipleItemsMetadataDialogTitle","moveMultipleItemsMetadataDialogTitle","extDialogTitle","inheritanceOriginalProperties","inheritanceDestinationProperties","inheritanceMergedProperties","root","en-us","en","searchPlaceholder","versionsTitle","NextNodeModelFactory","MetadataNavigationView","getPrototypeOf","metadataNavigationView","isExpandedView","_moveToNextItemAfterDeleteOrMove","nextIndex","indexOfItemDeleteOrMove","onItemBeforeDelete","onItemDeleted","onItemBeforeMove","onItemMoved","removedNode","onMetadataClose","nextNode","FetchNodeFailTitle","FetchNodeFailMessage","ChildrenCollectionFactory","Children2CollectionFactory","NodesTableView","MetadataNavigationViewImpl","DefaultActionController","useV2RestApi","_ensureCompleteData","mnv","ensureCollectionAfterModel","_ensureCollection","ensureFetched","_showFetchNodeFailMessage","_ensureModelInCollection","defaultActionCommands","getAllCommandSignatures","delayRestCommands","response2","errorObj","ToolbarItemOpen","ToolbarItemProperties","docPreviewImgAlt","created","createdBy","ownedBy","lambda","NodeAncestorCollection","ConnectorFactory","NodePickerFieldView","CommentView","FavoriteStarView","documentOverviewTemplate","DocumentOverviewView","_createModel","reloadWidget","parentNode","open","click @ui.command","click @ui.open","DefaultAction","suppressScrollX","_executeDefaultAction","stopImmediatePropagation","executeAction","setFields","_updateFieldsToRefersh","reserved_user_id","maxLength","minLength","hideInitValidationError","rows","_updateModel","_showNodeIcon","_showMetadataItemName","_showThumbnail","_addLocationView","_addCommentView","_addFavoriteView","_checkDescriptionContent","_checkEditPermission","validateInputName","_destroyThumbnail","thumbnailSet","locationRegion","_getParentNode","newAncestors","commentOptions","commentView","favoriteOptions","popoverAtBodyElement","favoriteView","_destroyForm","$schema","kind","select_types","toolItemMasks","toolbars","widgetTitle","widgetDescription","idTitle","idDescription","initialPanelTitle","initialPanelDescription","dropdownMenuTitle","dropdownMenuDescription","addPropertiesTitle","addPropertiesDescription","styleLoad"],"mappings":"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","file":"csui-metadata.js","sourcesContent":["csui.define('csui/controls/tableheader/comment/comment.button.view',['require',\r\n  'csui/lib/underscore',\r\n  'csui/lib/marionette',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior'\r\n], function (require,\r\n    _,\r\n    Marionette,\r\n    ViewEventsPropagationMixin,\r\n    TabableRegionBehavior) {\r\n\r\n  var CommentButtonView = Marionette.View.extend({\r\n\r\n    className: 'csui-comment-button',\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function CommentButtonView(options) {\r\n      Marionette.View.call(this, options);\r\n      this.listenTo(this.model, 'change', this.render);\r\n    },\r\n\r\n    render: function () {\r\n      var self = this;\r\n      require(['esoc/widgets/utils/commentdialog/commentdialog.view'],\r\n          function (CommentDialogView) {\r\n            var contentRegion = new Marionette.Region({\r\n              el: self.el\r\n            });\r\n\r\n            var globalConfig = (typeof window.require !== \"undefined\") ?\r\n                               window.require.s.contexts._.config :\r\n                               window.csui.require.s.contexts._.config;\r\n            globalConfig.roId = self.model.get('id');\r\n\r\n            var commentDialogView = new CommentDialogView({\r\n              connector: self.model.connector,\r\n              nodeid: self.model.get('id'),\r\n              CSID: self.model.get('id'),\r\n              model: self.model,\r\n              context: self.options.context\r\n            });\r\n\r\n            commentDialogView.listenTo(commentDialogView, 'before:render', function () {\r\n              self.triggerMethod('before:render', self);\r\n            });\r\n            commentDialogView.listenTo(commentDialogView, 'render', function () {\r\n              self.triggerMethod('render', self);\r\n            });\r\n\r\n            self.propagateEventsToViews(commentDialogView);\r\n            contentRegion.show(commentDialogView);\r\n          }, function () {}\r\n      );\r\n      return this;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(CommentButtonView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return CommentButtonView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems',['csui/lib/underscore',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/controls/toolbar/toolitem.model'\r\n], function (_, lang, ToolItemsFactory, extraToolItems, TooItemModel) {\r\n\r\n  var toolbarItems = {\r\n\r\n    tableHeaderToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"VersionProperties\",\r\n              name: lang.ToolbarItemVersionInfo,\r\n              icon: \"icon icon-toolbar-metadata\"\r\n            },\r\n            {\r\n              signature: \"VersionDownload\",\r\n              name: lang.ToolbarItemVersionDownload\r\n            },\r\n            {\r\n              signature: \"VersionDelete\",\r\n              name: lang.ToolbarItemVersionDelete\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 5,\r\n          dropDownIcon: \"icon icon-toolbar-more\"\r\n        }),\r\n    rightToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"PurgeAllVersions\",\r\n              name: lang.ToolbarItemVersionPurgeAll\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          hAlign: \"right\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.tabcontentcollection.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.contents.view',\r\n    'csui/utils/base'\r\n], function(_, TabContentCollectionView, base) {\r\n\r\n    // This view is specific to metadata view which overrides the 'currentlyFocusedElement' function such that \r\n    // only the tab contents elements visible in the current view port of the are focused on TAB and SHIFT+TAB.\r\n\r\n    var MetadataTabContentCollectionView = TabContentCollectionView.extend({\r\n\r\n        constructor: function MetadataTabContentCollectionView(attributes, options) {\r\n            TabContentCollectionView.prototype.constructor.apply(this, arguments);\r\n            _.extend(this, {\r\n                currentlyFocusedElement: function(event) {\r\n                    var reverseDirection = event && event.shiftKey;\r\n                    var elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    var totalElements = this.keyboardBehavior.tabableElements.length;\r\n                    var cursor =  (reverseDirection ? totalElements - 1 : 0);\r\n                    while(!base.isElementVisibleInParent(elToFocus, this.$el, 1, 1) && \r\n                            cursor >= 0 && cursor < totalElements) { \r\n                        event.elementCursor = cursor = cursor  + (reverseDirection ? -1 : 1);\r\n                        elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    }\r\n                    return elToFocus;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return  MetadataTabContentCollectionView;\r\n});\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"  <div class=\\\"title-edit-icon-div\\\">\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.show_dropdown_menu : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(2, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"  </div>\\r\\n\";\n},\"2\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"      <span class=\\\"csui-icon-edit inline-edit-icon icon-edit\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_tooltip || (depth0 != null ? depth0.edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n            aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_tooltip || (depth0 != null ? depth0.edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"    <span class=\\\"csui-undo edit-cancel inline-edit-icon\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.cancel_edit_name_tooltip || (depth0 != null ? depth0.cancel_edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.cancel_edit_name_tooltip || (depth0 != null ? depth0.cancel_edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"cs-metadata-item-name\\\">\\r\\n<span class=\\\"csui-toggle-wrapper binf-hidden\\\">\\r\\n  <span class=\\\"icon circular1 arrow_back cs-go-back binf-hidden1\\\" style=\\\"display:none;\\\"\\r\\n        aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBack || (depth0 != null ? depth0.goBack : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBack\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBack || (depth0 != null ? depth0.goBack : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBack\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n  <span class=\\\"csui-icon csui-metadata-listview csui-metadata-listview-expand-icon\\\" role=\\\"button\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sidebarToggleTitle || (depth0 != null ? depth0.sidebarToggleTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sidebarToggleTitle\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sidebarToggleTitle || (depth0 != null ? depth0.sidebarToggleTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sidebarToggleTitle\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n</span><span class=\\\"csui-type-icon\\\"></span>\\r\\n<div role=\\\"heading\\\" aria-level=\\\"2\\\" class=\\\"title-header\\\">\\r\\n<span class=\\\"title\\\" tabindex=\\\"0\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.nameAria || (depth0 != null ? depth0.nameAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"nameAria\",\"hash\":{}}) : helper)))\n    + \"\\\" role=\\\"button\\\"\\r\\n      aria-expanded=\\\"false\\\">\\r\\n    \"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"<span class=\\\"fadeout\\\"></span>\\r\\n</span>\\r\\n</div>\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.read_only : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"<div class=\\\"title-edit-div\\\">\\r\\n  <label id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_id || (depth0 != null ? depth0.edit_name_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_id\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"binf-hidden\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.placeholder_text || (depth0 != null ? depth0.placeholder_text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"placeholder_text\",\"hash\":{}}) : helper)))\n    + \"</label>\\r\\n  <span class=\\\"cs-icon-required category_required\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.required_tooltip || (depth0 != null ? depth0.required_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"required_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  <input type=\\\"text\\\" class=\\\"title-input\\\" placeholder=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.placeholder_text || (depth0 != null ? depth0.placeholder_text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"placeholder_text\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n         value=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name || (depth0 != null ? depth0.edit_name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_id || (depth0 != null ? depth0.edit_name_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_id\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-required=\\\"true\\\">\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.hideCancelButton : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"</div>\\r\\n</div>\\r\\n<div class=\\\"title-error-div\\\">\\r\\n  <span class=\\\"title-error\\\" title=\\\"\\\"></span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_item.name_metadata.item.name', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"binf-dropdown\\\">\\r\\n    <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n            data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n            aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreAria || (depth0 != null ? depth0.showMoreAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreAria\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n      <span class=\\\"csui-button-icon icon-expandArrowDown\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreTooltip || (depth0 != null ? depth0.showMoreTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n    </button>\\r\\n    <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n  </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-loading-parent-wrapper binf-disabled csui-disbaled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.hasCommands : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<li role=\\\"menuitem\\\" class=\\\"csui-loading-parent-wrapper binf-disabled csui-disbaled\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</li>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_lazy.loading.template', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  \"csui/lib/backbone\", \"csui/lib/marionette\", 'csui/utils/log',\r\n  'csui/controls/toolbar/toolitem.model', 'csui/controls/toolbar/toolitem.view',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model',\r\n  'csui/controls/toolbar/toolbar.view',\r\n  'csui/utils/commands', 'csui/utils/commandhelper',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'csui/utils/contexts/factories/browsing.states',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',\r\n  'css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function (module, $, _, Backbone, Marionette, log, ToolItemModel, ToolItemView,\r\n    NodeCollection, FilteredToolItemsCollection, ToolbarView, commands,\r\n    CommandHelper, template, TabableRegionBehavior, DropdownMenuBehavior,\r\n    BrowsingStateCollectionFactory, lang, lazyloadingTemplate) {\r\n  'use strict';\r\n\r\n  // TODO: Make common dropdown menu control to be used in both the table header and the metadata header\r\n\r\n  var DropdownMenuView = Marionette.CompositeView.extend({\r\n\r\n    className: \"cs-dropdown-menu\",\r\n    template: template,\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'menuitem'\r\n      };\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        hasCommands: !!this.collection.length,\r\n        btnId: _.uniqueId('dropdownMenuButton'),\r\n        showMoreTooltip: lang.showMore,\r\n        showMoreAria: lang.showMoreAria\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle',\r\n      dropdownMenu: '.binf-dropdown-menu',\r\n      loadingIconsDiv: '.csui-loading-parent-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function DropdownMenuView(options) {\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([options.model]),\r\n        container: options.container,\r\n        containerCollection: options.containerCollection,\r\n        context: options.context\r\n      };\r\n      options.status = status;\r\n      options.collection = new FilteredToolItemsCollection(\r\n          options.toolItems, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolItemMask\r\n          });\r\n\r\n      options.reorderOnSort = true;\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      _.defaults(this.options, options.toolItems.options);  // set options from ToolItemFactory\r\n\r\n      this.originatingView = options.originatingView;\r\n\r\n      this.commands = options.commands || commands;\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.model, \"sync\", this.render)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle)\r\n          .listenTo(this.model, \"change\", this.render);\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.refilter();\r\n      this.render();\r\n    },\r\n\r\n    onRender: function () {\r\n      if (!this.collection.length) {\r\n        var node                 = this.options.model ? this.options.model : this.model,\r\n            lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n            isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n        if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands.length &&\r\n            !isLocallyCreatedNode) {\r\n          this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n          this.ui.loadingIconsDiv.removeClass('binf-hidden');\r\n          this.fetchingNonPromotedActions = true;\r\n          node.setEnabledLazyActionCommands(\r\n              true).done(_.bind(function () {\r\n            this.fetchingNonPromotedActions = false;\r\n            var blockingElement = this.$el.find('.csui-loading-parent-wrapper');\r\n            blockingElement.animate(\"width: 0\", 300, _.bind(function () {\r\n              blockingElement.addClass('binf-hidden');\r\n              this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n              //UpdateToolItems silently and re-render dropdown menu;\r\n              this.collection.silentFetch = true;\r\n              this._updateMenuItems();\r\n            }, this));\r\n          }, this));\r\n        }\r\n      } else {\r\n        //state variable for fetching nonpromoted actions started or not\r\n        this.fetchingNonPromotedActions = false;\r\n        this.ui.dropdownToggle.binf_dropdown();\r\n        this.ui.dropdownMenu.find(\"> li > a.binf-hidden\").removeClass('binf-hidden');\r\n        var adjustDropdown = _.bind(function () {\r\n          this.ui.dropdownMenu.removeClass('adjust-dropdown-menu');\r\n          var dropdownLeftOffset   = this.ui.dropdownMenu.offset().left,\r\n              dropdownWidth        = this.ui.dropdownMenu.outerWidth(),\r\n              originatingViewWidth = this.options.originatingView.$el.width(),\r\n              margin               = (window.innerWidth - originatingViewWidth) / 2,\r\n              rightOffset          = originatingViewWidth -\r\n                                     (dropdownLeftOffset + dropdownWidth - margin);\r\n          if (dropdownLeftOffset + dropdownWidth >\r\n              originatingViewWidth ||\r\n              (rightOffset + dropdownWidth > originatingViewWidth)) {\r\n            this.ui.dropdownMenu.addClass('adjust-dropdown-menu');\r\n          }\r\n        }, this);\r\n        var renderLazyActions = _.bind(function () {\r\n          var self = this;\r\n          var node                 = this.options.model ? this.options.model : this.model,\r\n              lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n              isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n          if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands.length &&\r\n              !isLocallyCreatedNode) {\r\n            this.fetchingNonPromotedActions = true;\r\n            this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n            node.setEnabledLazyActionCommands(\r\n                true).done(function () {\r\n              self.fetchingNonPromotedActions = false;\r\n              var newCollection = new FilteredToolItemsCollection(\r\n                  self.options.toolItems, {\r\n                    status: self.options.status,\r\n                    commands: self.commands,\r\n                    delayedActions: self.options.containerCollection &&\r\n                                    self.options.containerCollection.lazyActions,\r\n                    lazyActions: self.options.containerCollection &&\r\n                                 self.options.containerCollection.lazyActions,\r\n                    mask: self.options.toolItemsMask\r\n                  });\r\n\r\n              var blockingEle = self.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n              //As per UX review comments, 300 ms given before rendering lazy actions\r\n              blockingEle.animate(\"width: 0\", 300, function () {\r\n                blockingEle.remove();\r\n                if (self.collection.models.length !== newCollection.models.length) {\r\n                  _.filter(newCollection.models, function (model) {\r\n                    if (self.isDestroyed === true || self._isDestroyed) {\r\n                      self.children = undefined;\r\n                    } else {\r\n                      var signature = model.get(\"signature\");\r\n                      if (!self.collection.find({signature: signature})) {\r\n                        self.collection.models.push(model);\r\n                        var lazyToolItemView = self.addChild(model, ToolItemView);\r\n                        lazyToolItemView.renderTextOnly();\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n\r\n            });\r\n          }\r\n        }, this);\r\n        this.ui.dropdownToggle.bind('binf.dropdown.after.show', adjustDropdown);\r\n        this.ui.dropdownToggle.bind('binf.dropdown.before.show', renderLazyActions);\r\n        $(window).bind('resize.metadata.header.dropdown.menu', _.debounce(adjustDropdown, 100));\r\n        this.delegateEvents();\r\n      }\r\n    },\r\n\r\n    onRenderCollection: function () {\r\n      if (this.collection.length && this.fetchingNonPromotedActions) {\r\n        //loading icons div appended to dropdown,\r\n        //but before fectching nonpromoted actions collection reset event trigger from dropDownMenu Behavior\r\n        // in this case we are removing loding icons div from drop down and appended again\r\n        var loadingIconsDiv = this.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n        loadingIconsDiv.length && loadingIconsDiv.remove();\r\n        this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n      }\r\n    },\r\n\r\n    onDestroy: function () {\r\n      $(window).unbind(\"resize.metadata.header.dropdown.menu\");\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      return $(this.ui.dropdownToggle);\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        dropdownToggleEl.binf_dropdown('toggle');\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      var signature = args.toolItem.get(\"signature\");\r\n      var command = this.commands.findWhere({signature: signature});\r\n\r\n      if (signature === 'Rename') {\r\n        // IE is picky with Enter keypress triggered by Bootstrap not it was not stopped fast enough\r\n        setTimeout(_.bind(function () {\r\n          this.trigger('rename', this);\r\n        }, this), 200);\r\n      } else {\r\n        var status = {\r\n          context: this.options.context,\r\n          nodes: new NodeCollection([this.model]),\r\n          container: this.options.container,\r\n          collection: this.options.containerCollection,\r\n          originatingView: this.originatingView\r\n        };\r\n\r\n        if (command && command.enabled(status)) {\r\n          // trigger some selected events so code like navigation can handle it if needed\r\n          signature === 'Delete' && (this.trigger('metadata:item:before:delete', this));\r\n          signature === 'Move' && (this.trigger('metadata:item:before:move', this));\r\n\r\n          // Copy Link command in metadata page generate URL with metadata perspective\r\n          if (signature === 'CopyLink' && this.options.metadataScenario) {\r\n            var browsingStates = this.options.context.getCollection(BrowsingStateCollectionFactory);\r\n            if (browsingStates.length === 1) {\r\n              browsingStates.models[0].attributes.path.node_id = status.nodes.models[0].get('id');\r\n              browsingStates.models[0].attributes.path.node_name = status.nodes.models[0].get(\r\n                  'name');\r\n            }\r\n            status.url = browsingStates.getUrlPathWithQuery();\r\n          }\r\n\r\n          command.execute(status)\r\n              .done(_.bind(function (resp) {\r\n                // trigger some selected events so code like navigation can handle it if needed\r\n                signature === 'Delete' && (this.trigger('metadata:item:deleted', this));\r\n              }, this));\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return DropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items',['csui/lib/underscore',\r\n  //'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/header.dropdown.menu.items',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/header.item.name/menuitems'\r\n], function (_, lang, ToolItemsFactory, TooItemModel, extraToolItems,\r\n    oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n    dropdownMenuList: new ToolItemsFactory({\r\n          main: [\r\n            {signature: \"Properties\", name: lang.ToolbarItemInformation},\r\n            {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink},\r\n            {signature: \"Edit\", name: lang.ToolbarItemEdit},\r\n            {signature: \"EmailLink\", name: lang.ToolbarItemShare},\r\n            {signature: \"permissions\", name: lang.ToolbarItemPermissions},\r\n            {signature: \"Rename\", name: lang.ToolbarItemRename},\r\n            {signature: \"Download\", name: lang.ToolbarItemDownload},\r\n            {signature: \"ReserveDoc\", name: lang.ToolbarItemReserve},\r\n            {signature: \"UnreserveDoc\", name: lang.ToolbarItemUnreserve},\r\n            {signature: \"Copy\", name: lang.ToolbarItemCopy},\r\n            {signature: \"Move\", name: lang.ToolbarItemMove},\r\n            {signature: \"AddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"Delete\", name: lang.ToolbarItemDelete}\r\n          ],\r\n          shortcut: [\r\n            {signature: \"OriginalCopyLink\", name: lang.ToolbarItemOriginalCopyLink},\r\n            {signature: \"OriginalEdit\", name: lang.ToolbarItemOriginalEdit},\r\n            {signature: \"OriginalEmailLink\", name: lang.ToolbarItemOriginalShare},\r\n            {signature: \"OriginalReserveDoc\", name: lang.ToolbarItemOriginalReserve},\r\n            {signature: \"OriginalUnreserveDoc\", name: lang.ToolbarItemOriginalUnreserve},\r\n            {signature: \"OriginalCopy\", name: lang.ToolbarItemOriginalCopy},\r\n            {signature: \"OriginalMove\", name: lang.ToolbarItemOriginalMove},\r\n            {signature: \"OriginalAddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"OriginalDownload\", name: lang.ToolbarItemOriginalDownload},\r\n            {signature: \"OriginalDelete\", name: lang.ToolbarItemOriginalDelete}\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0, // force toolbar to immediately start with a drop-down list\r\n          dropDownIcon: \"icon icon-expandArrowDown\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var DropdownMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function DropdownMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return DropdownMenuItemsMask;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadata',[],function(){});\n","\ncsui.define('css!csui/widgets/metadata/impl/header/item.name/metadata.item.name',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',['csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/node-type.icon/node-type.icon.view',\r\n  'hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/models/version', 'csui/behaviors/item.name/item.name.behavior',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'i18n', 'css!csui/widgets/metadata/impl/metadata',\r\n  'css!csui/widgets/metadata/impl/header/item.name/metadata.item.name'\r\n], function ($, _, Backbone, Marionette, NodeTypeIconView, template, lang,\r\n    DropdownMenuView, dropdownMenuItems, DropdownMenuItemsMask, VersionModel,\r\n    ItemNameBehavior, TabableRegionBehavior, ViewEventsPropagationMixin, i18n) {\r\n  'use strict';\r\n\r\n  var MetadataItemNameView = Marionette.ItemView.extend({\r\n\r\n        className: 'cs-metadata-item-name-container',\r\n        template: template,\r\n\r\n        templateHelpers: function () {\r\n          return {\r\n            name: this.modelHasEmptyName ? (this.readonly ? this.placeHolderName : '') :\r\n                  this.options.model.get(\"name\"),\r\n            edit_name: this.modelHasEmptyName ? '' : this.options.model.get(\"name\"),\r\n            edit_name_id: _.uniqueId('cs-metadata-edit-name'),\r\n            placeholder_text: this.placeHolderName,\r\n            nameAria: this.options.model.get(\"name\") || lang.emptyObjectNameAria,\r\n            edit_name_tooltip: lang.editNameTooltip,\r\n            cancel_edit_name_tooltip: lang.cancelEditNameTooltip,\r\n            switch_language_tooltip: lang.switchLanguageTooltip,\r\n            show_dropdown_menu: this.options.showDropdownMenu ? true : false,\r\n            read_only: this.options.model instanceof VersionModel || this.readonly,\r\n            goBack: lang.goBackTooltip,\r\n            sidebarToggleTitle: lang.expand,\r\n            hideCancelButton: this.options.mode && this.options.mode === 'create'\r\n          };\r\n        },\r\n\r\n        ui: {\r\n          // note: if you change the template or this mapping, be sure not to break the behavior code\r\n          name: '.title',\r\n          nameEditIconDiv: '.title-edit-icon-div',\r\n          nameEditIcon: '.csui-icon-edit',\r\n          nameEditDiv: '.title-edit-div',\r\n          nameInput: '.title-input',\r\n          nameEditCancelIcon: '.edit-cancel',\r\n          titleError: '.title-error',\r\n          toggleIcon: '.csui-metadata-listview',\r\n          toggleWrapper: '.csui-toggle-wrapper',\r\n          backEle: '.arrow_back'\r\n        },\r\n\r\n        modelEvents: {\r\n          'change': 'render'\r\n        },\r\n\r\n        events: {\r\n          'keydown': 'onKeyInView',\r\n          'mouseenter': 'onMouseEnterName',\r\n          'mouseleave': 'onMouseLeaveName',\r\n          'click @ui.nameEditIcon': 'onClickName',\r\n          'keydown @ui.nameInput': 'onKeyDown',\r\n          'click @ui.toggleIcon': 'toggleSideBar',\r\n          'click @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleIcon': 'toggleSideBar',\r\n          'keydown @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleWrapper': '_onKeyInView'\r\n        },\r\n\r\n        behaviors: function () {\r\n          return {\r\n            ItemName: {\r\n              behaviorClass: ItemNameBehavior,\r\n              nameSchema: this._nameSchema,\r\n              mode: this.options.mode\r\n            },\r\n            TabableRegionBehavior: {\r\n              behaviorClass: TabableRegionBehavior\r\n            }\r\n          };\r\n        },\r\n\r\n        toggleSideBar: function (event) {\r\n          if (!!event && (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click')) {\r\n            this.toggleSideBarEvent();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n\r\n        toggleSideBarEvent: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                    $(sideBarEle).show('blind', {direction: this.direction}, '200', function () {\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(this.ui.backEle).hide();\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                    this.sideBarHidden = false;\r\n                  } else {\r\n                    var that = this;\r\n                    $(sideBarEle).hide('blind', {direction: this.direction}, '200', function () {\r\n                      parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(that.ui.backEle).show().focus();\r\n                    this.sideBarHidden = true;\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label', lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  }\r\n                  $(sideBarEle).promise().done(function () {\r\n                    var event = $.Event('toggled:navigationbar');\r\n                    this.closest('.metadata-navigation').find('.cs-metadata').trigger(event);\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        // adapt the sidebar toggle button\r\n        ensureTitleLabelIcon: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label', lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  } else {\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        constructor: function MetadataItemNameView(options) {\r\n          options || (options = {});\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, options.nameSchema);\r\n\r\n          // be the first listener, before the ones of the behavior, so behavior listeners already\r\n          // see updated ui elements\r\n          this.listenTo(options.model, \"change:name\", this._updateName);\r\n\r\n          this.direction = !!i18n.settings.rtl ? 'right' : 'left';\r\n\r\n          Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.placeHolderName = lang.addItemPlaceHolderName;\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n\r\n          // create dropdown menu\r\n          this._createDropdownMenu();\r\n\r\n          $(window).bind('resize', {view: this}, this._onWindowResize);\r\n\r\n        },\r\n\r\n        goBack: function (event) {\r\n          if (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click') {\r\n            this.options.originatingView.triggerMethod('metadata:close');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n\r\n        _applyToggle: function () {\r\n          if (!!this.sideBarHidden) {} else {\r\n            this.ui.toggleWrapper instanceof Object &&\r\n            this.ui.toggleWrapper.removeClass('binf-hidden');\r\n            this.$el.addClass(\"csui-metadata-header-with-toggle\");\r\n            if (this.options.originatingView && !!this.options.originatingView.mdn &&\r\n                !!this.options.originatingView.mdn.$el.is(\":visible\")) {\r\n              if (this.ui.backEle instanceof Object) {\r\n                this.ui.backEle.hide();\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        _removeToggle: function () {\r\n          if (this.ui.toggleWrapper instanceof Object) {\r\n            this.ui.toggleWrapper.addClass('binf-hidden');\r\n            this.$el.removeClass(\"csui-metadata-header-with-toggle\");\r\n          }\r\n          if (!!this.sideBarHidden) {\r\n            this.toggleSideBarEvent();\r\n          }\r\n        },\r\n\r\n        onDestroy: function () {\r\n          this._destroyDropdownMenu();\r\n        },\r\n\r\n        _updateName: function () {\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n          this.render();\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          this.validate();\r\n        },\r\n\r\n        _destroyDropdownMenu: function () {\r\n          if (this.dropdownMenuView) {\r\n            this.cancelEventsToViewsPropagation(this.dropdownMenuView);\r\n            this.dropdownMenuView.destroy();\r\n          }\r\n        },\r\n\r\n        _createDropdownMenu: function () {\r\n          if (this.options.showDropdownMenu) {\r\n            var oView = this.options.originatingView;\r\n            // TODO: Pass toolItems to the constructor of this component instead\r\n            // of sniffing some other ones.\r\n            var toolItems,\r\n                toolItemsMask = this.options.toolbarItemsMask;\r\n            if (oView && oView.options && oView.options.toolbarItems &&\r\n                oView.options.toolbarItems.dropdownMenuListInProperties) {\r\n              toolItems = oView.options.toolbarItems.dropdownMenuListInProperties;\r\n            } else {\r\n              toolItems = dropdownMenuItems.dropdownMenuList;\r\n            }\r\n            if (!toolItemsMask) {\r\n              toolItemsMask = new DropdownMenuItemsMask();\r\n            }\r\n            if (this.options.showPermissionView) {\r\n              toolItems = toolItems.collection.filter(\r\n                  function (command) {\r\n                    return (command.get(\"signature\") != \"permissions\");\r\n                  });\r\n            } else {\r\n              toolItems = toolItems.collection.filter(\r\n                  function (command) {\r\n                    return (command.get(\"signature\") != \"Properties\");\r\n                  });\r\n            }\r\n            this._destroyDropdownMenu();\r\n            var ddm = this.dropdownMenuView = new DropdownMenuView({\r\n              model: this.options.model,\r\n              container: this.options.container,\r\n              containerCollection: this.options.collection || this.options.containerCollection,\r\n              toolItems: toolItems,\r\n              toolItemsMask: toolItemsMask,\r\n              originatingView: this.options.originatingView,\r\n              context: this.options.context,\r\n              commands: this.options.commands,\r\n              metadataScenario: this.options.metadataScenario\r\n            });\r\n            this.listenTo(ddm, 'rename', _.bind(this._toggleEditMode, this, true));\r\n            this.listenTo(ddm, 'metadata:item:before:delete', _.bind(function (args) {\r\n              this.trigger('metadata:item:before:delete', args);\r\n            }, this));\r\n            this.listenTo(ddm, 'metadata:item:before:move', _.bind(function (args) {\r\n              this.trigger('metadata:item:before:move', args);\r\n            }, this));\r\n            this.listenTo(ddm, 'metadata:item:deleted', _.bind(function (args) {\r\n              this.trigger('metadata:item:deleted', args);\r\n            }, this));\r\n            ddm.$el.bind('keydown', _.bind(function (event) {\r\n              if (event.keyCode === 9 && event.shiftKey) {\r\n                if (this.ui.backEle.is(':visible') || this.ui.toggleIcon.is(':visible')) {\r\n                  this.ui.name.prop('tabindex', 0);\r\n                  event.stopPropagation();\r\n                }\r\n              }\r\n            }, this));\r\n            this.propagateEventsToViews(this.dropdownMenuView);\r\n          }\r\n        },\r\n\r\n        _onWindowResize: function (event) {\r\n          if (event && event.data && event.data.view) {\r\n            var self = event.data.view;\r\n            // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n            if (self.resizeTimer) {\r\n              clearTimeout(self.resizeTimer);\r\n            }\r\n\r\n            self.resizeTimer = setTimeout(function () {\r\n              self._setHideShowToggleButton();\r\n\r\n            }, 200);\r\n          }\r\n        },\r\n\r\n        _setHideShowToggleButton: function (event) {\r\n\r\n          var isLandscape = window.matchMedia(\"(orientation: landscape)\").matches,\r\n              isPortrait  = window.matchMedia(\"(orientation: portrait)\").matches,\r\n              self        = !!event && !!event.data && !!event.data.view ? event.data.view : this;\r\n\r\n          self.leftBar = self.options.originatingView &&\r\n                         self.options.originatingView.$el.find(\".metadata-sidebar\");\r\n\r\n          if (self.leftBar && self.leftBar.length > 0) {\r\n            var navBar = self.leftBar.closest(\".metadata-navigation\");\r\n            if (isLandscape) {\r\n              if (window.innerWidth <= 1280) {\r\n                if (!!self.sideBarHidden) {\r\n                  self.ui.toggleWrapper instanceof Object &&\r\n                  self.ui.toggleWrapper.removeClass('binf-hidden');\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.css({display: \"inline-block\", positin: \"relative\"});\r\n                    self.ui.backEle.attr(\"tabindex\", 0);\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                } else {\r\n                  self._applyToggle(event);\r\n                  self.leftBar.removeClass('binf-hidden');\r\n                  if (navBar.hasClass('csui-hide-side-bar')) {\r\n                    self.leftBar.show();\r\n                    navBar.toggleClass(\"csui-hide-side-bar\");\r\n                    if (self.ui.backEle instanceof Object) {\r\n                      self.ui.backEle.hide();\r\n                    }\r\n                    $(window).trigger(\"resize.tableview\");\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                }\r\n              } else {\r\n                this.sideBarHidden = false;\r\n                self._removeToggle(event);\r\n                if (navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.show();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.hide();\r\n                  }\r\n                }\r\n                $(window).trigger(\"resize.tableview\");\r\n                this.ensureTitleLabelIcon();\r\n              }\r\n            } else if (isPortrait) {\r\n              self._applyToggle(event);\r\n              if (self.leftBar.length > 0) {\r\n                if (!navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.hide();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  $(window).trigger(\"resize.tableview\");\r\n                }\r\n                if (self.ui.backEle instanceof Object) {\r\n                  self.ui.backEle.css({display: \"inline-block\", positin: \"relative\"});\r\n                  self.ui.backEle.attr(\"tabindex\", 0);\r\n                }\r\n              }\r\n              this.ensureTitleLabelIcon();\r\n            }\r\n          }\r\n        },\r\n\r\n        currentlyFocusedElement: function () {\r\n          if (!!this.ui.backEle && $(this.ui.backEle).is(':visible')) {\r\n            return this.ui.backEle;\r\n          } else if (!!this.ui.toggleIcon && $(this.ui.toggleIcon).is(':visible')) {\r\n            return this.ui.toggleIcon;\r\n          } else if (!!this.options.mode && this.options.mode === 'create') {\r\n            return $(this.ui.nameInput);\r\n          } else {\r\n            return $(this.ui.name);\r\n          }\r\n        },\r\n\r\n        onRender: function () {\r\n          this.editing = false;\r\n          this.ui.nameEditIcon.addClass('binf-hidden');\r\n          this.ui.nameEditDiv.addClass('binf-hidden');\r\n\r\n          if (this._nodeIconView) {\r\n            this._nodeIconView.destroy();\r\n          }\r\n          this._nodeIconView = new NodeTypeIconView({\r\n            el: this.$('.csui-type-icon').get(0),\r\n            node: this.options.model\r\n          });\r\n          // for shortcut objects add one more wrapper to apply special styling to overlay element.\r\n          if(this.model.get('type') === 1){\r\n            this._nodeIconView.$el.addClass('csui-metadata-shortcut-overlay');\r\n          }\r\n          this._nodeIconView.render();\r\n\r\n          if (!this.readonly && this.options.showDropdownMenu && this.dropdownMenuView) {\r\n            this.dropdownMenuView.render();\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'before:show', this.dropdownMenuView,\r\n                this);\r\n            this.ui.nameEditIconDiv.append(this.dropdownMenuView.el);\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'show', this.dropdownMenuView, this);\r\n          }\r\n\r\n          if (this.modelHasEmptyName) {\r\n            this.ui.nameInput.addClass('csui-empty-with-placeholder');\r\n            this.ui.nameInput.attr('placeholder', this.placeHolderName);\r\n            if (this.readonly) {\r\n              this.ui.name.addClass('csui-empty-with-placeholder');\r\n            }\r\n          }\r\n\r\n          this._setHideShowToggleButton();\r\n\r\n        },\r\n\r\n        onMouseEnterName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n\r\n          if (this.editing !== true) {\r\n            this.ui.nameEditIcon.removeClass('binf-hidden');\r\n          }\r\n        },\r\n\r\n        onMouseLeaveName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n\r\n          if (this.editing !== true) {\r\n            this.ui.nameEditIcon.addClass('binf-hidden');\r\n          }\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          if (this.$el.parents(\".cs-item-action-metadata\").find(\r\n                  \"div[class='load-container']\").length >\r\n              0) {\r\n            return false;\r\n          }\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (this.modelHasEmptyName && this.inputBoxNameChange !== true) {\r\n            this.setInputBoxValue('');\r\n            this.inputBoxNameChange = true;\r\n            this.ui.nameInput.removeClass('csui-empty-with-placeholder');\r\n          }\r\n        },\r\n\r\n        _validateAndSave: function () {\r\n          var currentValue = this.getValue().trim();\r\n          var inputValue = this.getInputBoxValue();\r\n          inputValue = inputValue.trim();\r\n\r\n          if (inputValue.length === 0 || currentValue !== inputValue) {\r\n            var success = this.validate(inputValue);\r\n            if (success === true) {\r\n              var self = this;\r\n              this.setInputBoxValue(inputValue);\r\n              this.setValue(inputValue);\r\n              this.modelHasEmptyName = false;\r\n              this.trigger(\"metadata:item:name:save\", {\r\n                sender: this,\r\n                success: function () {\r\n                  self._toggleEditMode(false, false);\r\n                },\r\n                error: function (error) {\r\n                  self.setValue(currentValue);\r\n                  self._toggleEditMode(true);\r\n                  self.showInlineError(error);\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            this.clearInlineError();\r\n            this._toggleEditMode(false, false);\r\n          }\r\n        },\r\n\r\n        _onKeyInView: function (event) {\r\n          if (event.keyCode === 9 && !event.shiftKey) {\r\n            if ($(event.target).is(this.ui.backEle)) {\r\n              this.ui.toggleIcon.focus();\r\n              event.stopPropagation();\r\n              event.preventDefault();\r\n            } else if ($(event.target).is(this.ui.toggleIcon)) {\r\n              this.ui.name.focus();\r\n              event.stopPropagation();\r\n              event.preventDefault();\r\n            }\r\n          }\r\n        },\r\n        // call proxies\r\n        onKeyInView: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (!!this.options.mode && this.options.mode === 'create') {\r\n            return true;\r\n          }\r\n          //prevent propagation to dialog box tabable behavior (e.g. Recently Access)\r\n          if (event.keyCode === 9 && event.shiftKey) {\r\n            event.stopPropagation();\r\n          }\r\n          return this.ItemNameBehavior.onKeyInView(event);\r\n        },\r\n\r\n        _toggleEditMode: function (edit, setFocus) {\r\n          //prevent toggle for item name on create dialog\r\n          if (this.options.mode != 'create') {\r\n            return this.ItemNameBehavior._toggleEditMode(edit, setFocus);\r\n          }\r\n        },\r\n\r\n        onClickName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          return this.ItemNameBehavior.onClickName(event);\r\n        },\r\n\r\n        getValue: function () {\r\n          return this.ItemNameBehavior.getValue();\r\n        },\r\n\r\n        setValue: function (value) {\r\n          return this.ItemNameBehavior.setValue(value);\r\n        },\r\n\r\n        getInputBoxValue: function () {\r\n          return this.ItemNameBehavior.getInputBoxValue();\r\n        },\r\n\r\n        setInputBoxValue: function (value) {\r\n          return this.ItemNameBehavior.setInputBoxValue(value);\r\n        },\r\n\r\n        validate: function (iName) {\r\n          return this.ItemNameBehavior.validate(iName);\r\n        },\r\n\r\n        setEditModeFocus: function () {\r\n          return this.ItemNameBehavior.setEditModeFocus();\r\n        },\r\n\r\n        showInlineError: function (error) {\r\n          return this.ItemNameBehavior.showInlineError(error);\r\n        },\r\n\r\n        clearInlineError: function () {\r\n          return this.ItemNameBehavior.clearInlineError();\r\n        },\r\n\r\n        _getErrorMessageFromResponse: function (err) {\r\n          return this.ItemNameBehavior._getErrorMessageFromResponse(err);\r\n        },\r\n        // end of: proxies\r\n\r\n        // TODO: Deprecate this method and prefer using name field schema\r\n        // for flags like readonly and required\r\n        setReadOnly: function (mode) {\r\n          mode = mode ? true : false;\r\n          var focus;\r\n          if ((this.readonly ? true : false) !== mode) {\r\n            this.readonly = mode;\r\n            this.render();\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n            this.validate();\r\n          } else {\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            if (!focus) {\r\n              this.validate();\r\n            }\r\n          }\r\n        },\r\n\r\n        setPlaceHolder: function (placeHolderName) {\r\n          placeHolderName || (placeHolderName = lang.addItemPlaceHolderName);\r\n          if (this.placeHolderName !== placeHolderName) {\r\n            this.placeHolderName = placeHolderName;\r\n            this.render();\r\n          }\r\n        },\r\n\r\n        updateNameSchema: function (nameSchema) {\r\n          if (this.modelHasEmptyName && this.ui.nameInput.val() === \"\" && !nameSchema.readonly) {\r\n            nameSchema.required = true;\r\n          }\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, nameSchema);\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.render();\r\n          this.ui.nameInput[0].placeholder = this.placeHolderName;\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          return this.ItemNameBehavior.updateNameSchema(nameSchema);\r\n        }\r\n\r\n      }\r\n  );\r\n\r\n  _.extend(MetadataItemNameView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataItemNameView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <span class=\\\"icon arrow_back cs-go-back\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBackTooltip || (depth0 != null ? depth0.goBackTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBackTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBackTooltip || (depth0 != null ? depth0.goBackTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBackTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        role=\\\"link\\\"></span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_leftbar_header.leftbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/leftbar/header.leftbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/utils/contexts/factories/browsing.states',\r\n  'css!csui/widgets/metadata/impl/header/leftbar/header.leftbar'\r\n], function (_, $, Marionette, template, lang, TabableRegionBehavior,\r\n    BrowsingStateCollectionFactory) {\r\n\r\n  var MetadataHeaderLeftBarView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-header-left-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        goBackTooltip: lang.goBackTooltip\r\n      };\r\n      return templateValues;\r\n    },\r\n\r\n    behaviors: function () {\r\n      if (this.options.showBackIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      back: '.cs-go-back'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.back': 'onClickClose'\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        $(target).click();\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataHeaderLeftBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showBackIcon) {\r\n        return $(this.ui.back);\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      if (this.options.context) {\r\n        var browsingStates = this.options.context.getCollection(BrowsingStateCollectionFactory);\r\n        browsingStates && (browsingStates.triggerStateChangeOnStateRemoval = true);\r\n      }\r\n\r\n      this.trigger('metadata:close');\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataHeaderLeftBarView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"binf-row shortcut-div\\\">\\r\\n    <a href=\\\"#\\\" class=\\\"shortcut-switch\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.right_label || (depth0 != null ? depth0.right_label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"right_label\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.right_label || (depth0 != null ? depth0.right_label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"right_label\",\"hash\":{}}) : helper)))\n    + \"</a>\\r\\n  </div>\\r\\n\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\\r\\n  <div class=\\\"metadata-header-floating-rightbar\\\">\\r\\n    <span class=\\\"icon close cs-metadata-close\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.close_metadata_button_tooltip || (depth0 != null ? depth0.close_metadata_button_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"close_metadata_button_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </div>\\r\\n\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.is_shortcut : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_close_icon : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_rightbar_header.rightbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/rightbar/header.rightbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/controls/form/fields/booleanfield.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/rightbar/header.rightbar'\r\n], function (_, $, Backbone, Marionette, ViewEventsPropagationMixin, template, lang,\r\n    BooleanFieldView, TabableRegionBehavior) {\r\n\r\n  var MetadataHeaderRightBarView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-header-right-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    behaviors: function () {\r\n      if ((this.options.showShortcutSwitch && this.options.shortcutNode) ||\r\n          this.options.showCloseIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      shortcutSwitchLabel: 'a.shortcut-switch',\r\n      closeIcon: '.cs-metadata-close'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.shortcutSwitchLabel': 'onClickShortcutSwitch',\r\n      'click @ui.closeIcon': 'onClickClose'\r\n    },\r\n\r\n    constructor: function MetadataHeaderRightBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        // need timeout to overcome FireFox space press\r\n        setTimeout(function () {\r\n          $(target).click();\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        return $(this.ui.shortcutSwitchLabel);\r\n      } else if (this.options.showCloseIcon) {\r\n        return $(this.ui.closeIcon);\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onClickShortcutSwitch: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('shortcut:switch');\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger(\"metadata:close\");\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderRightBarView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderRightBarView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/metadata.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"\\r\\n  <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n  <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n  <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.program(9, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(14, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n    <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.program(7, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button with-right-bar\\\"></div>\\r\\n\";\n},\"7\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button\\\"></div>\\r\\n\";\n},\"9\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(10, data, 0),\"inverse\":this.program(12, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"10\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n\";\n},\"12\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header\\\"></div>\\r\\n\";\n},\"14\":function(depth0,helpers,partials,data) {\n    return \"    <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\";\n},\"16\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.is_shortcut : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_close_icon : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(16, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_metadata.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/metadata.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/metadata.header.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',\r\n  'hbs!csui/widgets/metadata/impl/header/metadata.header',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/utils/log',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'css!csui/widgets/metadata/impl/header/metadata.header'\r\n], function (_, $, Backbone, Marionette, MetadataItemNameView, ViewEventsPropagationMixin,\r\n    MetadataHeaderLeftBarView, MetadataHeaderRightBarView, template, lang, log,\r\n    BooleanFieldView) {\r\n\r\n  var MetadataHeaderView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-content-header',\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip,\r\n        show_only_required_fields_switch: this.options.showRequiredFieldsSwitch,\r\n        only_required_fields_label: lang.onlyRequiredFieldsLabel\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      leftbar: '.metadata-header-left-bar-container',\r\n      header: '.metadata-header',\r\n      rightbar: '.metadata-header-right-bar-container'\r\n    },\r\n\r\n    events: {\r\n      'click .metadata-header': 'onClickHeader'\r\n    },\r\n\r\n    constructor: function MetadataHeaderView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      this.originatingView = options.originatingView;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      this._createMetadataHeaderLeftBarView();\r\n      this._createMetadataItemNameView();\r\n      this._createMetadataHeaderRightBarView();\r\n    },\r\n\r\n    _createMetadataHeaderLeftBarView: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n\r\n      var lbv = this.leftbarView = new MetadataHeaderLeftBarView(this.options);\r\n      this.listenTo(lbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.leftbarView);\r\n    },\r\n\r\n    _createMetadataItemNameView: function (viewNode) {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var inv = this.metadataItemNameView = new MetadataItemNameView({\r\n        model: node,\r\n        container: this.options.container,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: this._getNameSchema(),\r\n        commands: this.options.commands,\r\n        originatingView: this.options.originatingView,\r\n        showDropdownMenu: this.options.showDropdownMenu,\r\n        metadataScenario: this.options.metadataScenario,\r\n        showPermissionView: this.options.showPermissionView,\r\n        mode: this.options.action\r\n      });\r\n      this.listenTo(inv, 'metadata:item:name:save', function (args) {\r\n        this.trigger('metadata:item:name:save', args);\r\n      });\r\n      this.listenTo(inv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:delete', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:move', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.trigger('metadata:item:deleted', args);\r\n      }, this));\r\n      this.listenTo(inv, 'update:button', _.bind(function (args) {\r\n        this.trigger('update:button', args);\r\n      }, this));\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    _createMetadataHeaderRightBarView: function (viewNode) {\r\n      if (this.rightbarView) {\r\n        this.cancelEventsToViewsPropagation(this.rightbarView);\r\n        this.rightbarView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var rbv = this.rightbarView = new MetadataHeaderRightBarView(\r\n          _.extend({}, this.options, {model: node})\r\n      );\r\n      this.listenTo(rbv, 'shortcut:switch', this.onClickShortcutSwitch);\r\n      this.listenTo(rbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.rightbarView);\r\n    },\r\n\r\n    onRender: function () {\r\n      var lbv = this.leftbarView.render();\r\n      Marionette.triggerMethodOn(lbv, 'before:show', lbv, this);\r\n      this.ui.leftbar.append(lbv.el);\r\n\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n\r\n      if (this.options.showCloseIcon) {\r\n        this.$el.addClass('with-close-icon');\r\n      }\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        this.$el.addClass('shortcut-object');\r\n      }\r\n\r\n      Marionette.triggerMethodOn(lbv, 'show', lbv, this);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n      if (this.requiredFieldSwitchView) {\r\n        this.requiredFieldSwitchView.destroy();\r\n      }\r\n    },\r\n\r\n    onClickHeader: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      // UX changed their mind\r\n      //this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onClickShortcutSwitch: function () {\r\n      var viewNode = this.model;\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === this.node) {\r\n        // content shall show now shortcut\r\n        // label shall be 'show original'\r\n        viewNode = this.node = this.options.shortcutNode;\r\n      } else {\r\n        // content shall show now original\r\n        // label shall be 'show shortcut'\r\n        viewNode = this.node = this.node.original;\r\n      }\r\n\r\n      this._createMetadataItemNameView(viewNode);\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n\r\n      this._createMetadataHeaderRightBarView(viewNode);\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n      // set focus back on the new view for keyboard navigation\r\n      var $elem = rbv.currentlyFocusedElement();\r\n      $elem && $elem.focus();\r\n\r\n      this.trigger('shortcut:switch', {node: viewNode});\r\n    },\r\n\r\n    getNameInputBoxValue: function () {\r\n      return this.metadataItemNameView.getInputBoxValue();\r\n    },\r\n\r\n    validateName: function () {\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      return this.metadataItemNameView.validate(inputValue);\r\n    },\r\n\r\n    getNameValue: function () {\r\n      return this.metadataItemNameView.getValue();\r\n    },\r\n\r\n    setNameEditModeFocus: function () {\r\n      this.metadataItemNameView.setEditModeFocus();\r\n    },\r\n\r\n    _getNameSchema: function () {\r\n      var generalForm = this.options.collection && this.options.collection.first(),\r\n          formSchema  = generalForm && generalForm.get('schema'),\r\n          nameSchema  = formSchema && formSchema.properties && formSchema.properties.name;\r\n      // Warn only if the form collection was used to populate the view;\r\n      // it is the case only for the creation mode, where the name should\r\n      // be always present and flagged by required/readonly correctly\r\n      if (this.options.collection && formSchema && !nameSchema) {\r\n        log.warn('Form collection lacks name field in the first form.');\r\n      }\r\n      return nameSchema || {};\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/categories/impl/category.form.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/controls/form/form.view', 'csui/controls/form/pub.sub',\r\n  'csui/controls/globalmessage/globalmessage'\r\n], function (_, $, Backbone, base, Url, FormView, PubSub, GlobalMessage) {\r\n\r\n  var CategoryFormView = FormView.extend({\r\n\r\n    constructor: function CategoryFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n\r\n      this.node = this.options.node;\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this, 'disable:active:item', this._disableItem);\r\n    },\r\n\r\n    _disableItem: function (args) {\r\n      this.options.metadataView && this.options.metadataView.trigger('disable:active:item');\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      // Optimizing the payload to send a part of the category, which has to\r\n      // be complete, is complicated.  The classic UI sends all data anyway.\r\n      // Until we have PATCH behaviour in the REST API, it doesn't pay off.\r\n      var values = this.getValues();\r\n      this._saveChanges(values);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      if (!this.node) {\r\n        throw new Error('Missing node to save the categories to.');\r\n      }\r\n      if (_.keys(changes).length) {\r\n        if (this._validate(changes)) {\r\n          this._blockActions();\r\n          return $\r\n              .ajax(this.node.connector.extendAjaxOptions({\r\n                type: 'PUT',\r\n                url: Url.combine(this.node.urlBase(), 'categories', this.model.get('id')),\r\n                data: {body: JSON.stringify(changes)}\r\n              }))\r\n              .done(_.bind(function () {\r\n                this.trigger('forms:sync');\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:field:changed');\r\n                this.options.metadataView &&\r\n                this.options.metadataView.trigger('enable:active:item');\r\n                this.$el.trigger(event);\r\n              }, this))\r\n              .fail(_.bind(function (jqxhr) {\r\n                var preValues = this.model.get('data');\r\n                this.form.children.forEach(function (formField) {\r\n                  formField.setValue(preValues[formField.propertyId]);\r\n                  formField.refresh();\r\n                });\r\n                var error = new base.Error(jqxhr);\r\n                GlobalMessage.showMessage('error', error.message);\r\n                this.trigger('forms:error');\r\n              }, this))\r\n              .always(_.bind(function () {\r\n                this._unblockActions();\r\n              }, this));\r\n        }\r\n        return $.Deferred().reject().promise();\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    }\r\n\r\n  });\r\n\r\n  return CategoryFormView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.form.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.form.fields'\r\n], function (_, Backbone, extraGeneralFormFields) {\r\n\r\n  var MetadataGeneralFormFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralFormFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralFormFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralFormFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralFormFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralFormFields = new MetadataGeneralFormFieldCollection();\r\n\r\n  if (extraGeneralFormFields) {\r\n    extraGeneralFormFields = _.flatten(extraGeneralFormFields, true);\r\n    _.each(extraGeneralFormFields, function () {\r\n      var sequence = extraGeneralFormFields.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataGeneralFormFields.add(extraGeneralFormFields);\r\n  }\r\n\r\n  return metadataGeneralFormFields;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',[],function(){});\n","csui.define('csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n  'csui/controls/form/form.view',\r\n  'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n    className: 'csui-general-form-fields',\r\n\r\n    getChildView: function (model) {\r\n      var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n          {formModel: model});\r\n      return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n    },\r\n\r\n    childViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.options.fetchedModels,\r\n            displayedModels: this.options.displayedModels,\r\n            originatingView: this.options.originatingView,\r\n            metadataView: this.options.metadataView,\r\n            layoutMode: 'singleCol'\r\n          },\r\n          fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n              {formModel: model});\r\n      if (fieldDescriptor) {\r\n        _.extend(options, fieldDescriptor.formViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    constructor: function GeneralFormFieldCollectionView(options) {\r\n      Marionette.CollectionView.prototype.constructor.call(this, options);\r\n      this.listenTo(this, 'render', this._triggerRenderForms);\r\n    },\r\n\r\n    // Trigger render:forms once every form has triggered render:form\r\n    _triggerRenderForms: function () {\r\n      var children = this.children.map(function (formView) {\r\n        var formViewId = formView.cid;\r\n        formView.once('render:form', function () {\r\n          children = _.without(children, formViewId);\r\n          if (!children.length) {\r\n            this.triggerMethod('render:forms', this);\r\n          }\r\n        }, this);\r\n        return formView.cid;\r\n      }, this);\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.form.fields/general.form.field.behavior',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.form.fields',\r\n  'csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',\r\n  'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralFormFields,\r\n    GeneralFormFieldCollectionView, ModalAlert) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldBehavior = Marionette.Behavior.extend({\r\n    constructor: function GeneralFormFieldBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n      this.view = view;\r\n      this\r\n          .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n          .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n      var self = this;\r\n      view.getGeneralFormFieldValues = function () {\r\n        var formValues = {};\r\n        // Forms with extra fields are rendered only if there\r\n        // were any field descriptors specified; there are no\r\n        // data without forms\r\n        if (self.fieldRegion) {\r\n          self.fieldRegion.currentView.children.each(function (formView) {\r\n            var values = formView.getValues(),\r\n                roleName = formView.model.get(\"role_name\"),\r\n                roles, role;\r\n            if (values) {\r\n              if (roleName) {\r\n                roles = formValues.roles || (formValues.roles = {});\r\n                role = roles[roleName] || (roles[roleName] = {});\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                _.extend(role, values);\r\n              } else {\r\n                // With no role defined, merge the properties to the root\r\n                // object literal with the general properties\r\n                _.extend(formValues, values);\r\n              }\r\n            }\r\n          });\r\n        }\r\n        return formValues;\r\n      };\r\n    },\r\n\r\n    _insertFieldExtensions: function () {\r\n      var fieldParent = this.getOption('fieldParent');\r\n      if (_.isFunction(fieldParent)) {\r\n        fieldParent = fieldParent.call(this.view);\r\n      }\r\n      if (fieldParent) {\r\n        fieldParent = this.view.$(fieldParent)[0];\r\n      }\r\n      if (!fieldParent) {\r\n        return;\r\n      }\r\n\r\n      var fieldDescriptors = this.getOption('fieldDescriptors');\r\n      if (_.isFunction(fieldDescriptors)) {\r\n        fieldDescriptors = fieldDescriptors.call(this.view);\r\n      }\r\n      if (!fieldDescriptors || !fieldDescriptors.length) {\r\n        return;\r\n      }\r\n\r\n      this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n      var fieldViewOptions = this.getOption('fieldViewOptions');\r\n      if (_.isFunction(fieldViewOptions)) {\r\n        fieldViewOptions = fieldViewOptions.call(this.view);\r\n      }\r\n      var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n          fieldViews = new GeneralFormFieldCollectionView(_.extend({\r\n            context: this.view.options.context,\r\n            fieldDescriptors: fieldDescriptors,\r\n            collection: fieldModels,\r\n            node: this.view.options.node,\r\n            mode: this.view.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.view.options.fetchedModels,\r\n            displayedModels: this.view.options.displayedModels,\r\n            originatingView: this.view.options.originatingView,\r\n            metadataView: this.view.options.metadataView\r\n          }, fieldViewOptions));\r\n      this.listenTo(fieldViews, 'render:forms', function () {\r\n        this.view.triggerMethod('render:general:form:fields', fieldViews);\r\n      });\r\n      this.fieldRegion.show(fieldViews);\r\n    },\r\n\r\n    _emptyExtensionRegion: function () {\r\n      if (this.fieldRegion) {\r\n        this.fieldRegion.empty();\r\n      }\r\n    }\r\n\r\n  }, {\r\n\r\n    getFieldDescriptors: function (options) {\r\n      var methodName, parameters;\r\n      if (options.action === 'create') {\r\n        methodName = 'getGeneralFormFieldsForCreate';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'copy') {\r\n        methodName = 'getGeneralFormFieldsForCopy';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'move') {\r\n        methodName = 'getGeneralFormFieldsForMove';\r\n        parameters = [{forms: options.forms}];\r\n      } else {\r\n        methodName = 'getGeneralFormFields';\r\n      }\r\n      var promises = metadataGeneralFormFields.chain()\r\n          .map(function (fieldControllerDescriptor) {\r\n            var Controller = fieldControllerDescriptor.get('controller'),\r\n                controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                controller = new Controller(_.extend({\r\n                  context: options.context,\r\n                  model: options.node,\r\n                  fetchedModels: options.forms\r\n                }, controllerOptions)),\r\n                method = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            return _.flatten(arguments);\r\n          });\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldBehavior;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.action.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.action.fields'\r\n], function (_, Backbone, generalActionFields) {\r\n\r\n  var MetadataGeneralActionFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralActionFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralActionFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralActionFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralActionFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralActionFields = new MetadataGeneralActionFieldCollection();\r\n\r\n  // Adding Action Fields to General Panels\r\n\r\n    if (generalActionFields) {\r\n        generalActionFields = _.flatten(generalActionFields, true);\r\n        _.each(generalActionFields, function () {\r\n            var sequence = generalActionFields.sequence;\r\n            if (sequence < 10 || sequence > 100) {\r\n                throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n            }\r\n        });\r\n        metadataGeneralActionFields.add(generalActionFields);\r\n    }\r\n\r\n\r\n  return metadataGeneralActionFields;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n    'csui/controls/form/form.view',\r\n    'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n        className: 'csui-general-action-fields',\r\n\r\n        getChildView: function (model) {\r\n            var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                {formModel: model});\r\n            return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n        },\r\n\r\n        childViewOptions: function (model) {\r\n            var options = {\r\n                    context: this.options.context,\r\n                    node: this.options.node,\r\n                    mode: this.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.options.fetchedModels,\r\n                    displayedModels: this.options.displayedModels,\r\n                    originatingView: this.options.originatingView,\r\n                    metadataView: this.options.metadataView,\r\n                    layoutMode: 'singleCol'\r\n                },\r\n                fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                    {formModel: model});\r\n            if (fieldDescriptor) {\r\n                _.extend(options, fieldDescriptor.formViewOptions);\r\n            }\r\n            return options;\r\n        },\r\n\r\n        constructor: function GeneralActionFieldCollectionView(options) {\r\n            Marionette.CollectionView.prototype.constructor.call(this, options);\r\n            this.listenTo(this, 'render', this._triggerRenderForms);\r\n        },\r\n\r\n        // Trigger render:forms once every form has triggered render:form\r\n        _triggerRenderForms: function () {\r\n            var children = this.children.map(function (formView) {\r\n                var formViewId = formView.cid;\r\n                formView.once('render:form', function () {\r\n                    children = _.without(children, formViewId);\r\n                    if (!children.length) {\r\n                        this.triggerMethod('render:forms', this);\r\n                    }\r\n                }, this);\r\n                return formView.cid;\r\n            }, this);\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/general.action.field.behavior',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n    'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.action.fields',\r\n    'csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',\r\n    'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralActionFields,\r\n        GeneralActionFieldCollectionView, ModalAlert) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldBehavior = Marionette.Behavior.extend({\r\n        constructor: function GeneralActionFieldBehavior(options, view) {\r\n            Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n            this.view = view;\r\n            this\r\n                .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n                .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n            var self = this;\r\n            view.getGeneralActionFieldValues = function () {\r\n                var formValues = {};\r\n                // Forms with extra fields are rendered only if there\r\n                // were any field descriptors specified; there are no\r\n                // data without forms\r\n                if (self.fieldRegion) {\r\n                    self.fieldRegion.currentView.children.each(function (formView) {\r\n                        var values = formView.getValues(),\r\n                            roleName = formView.model.get(\"role_name\"),\r\n                            roles, role;\r\n                        if (values) {\r\n                            if (roleName) {\r\n                                roles = formValues.roles || (formValues.roles = {});\r\n                                role = roles[roleName] || (roles[roleName] = {});\r\n                                // With a role defined, merge the properties to the\r\n                                // roles.<role_name> object\r\n                                _.extend(role, values);\r\n                            } else {\r\n                                // With no role defined, merge the properties to the root\r\n                                // object literal with the general properties\r\n                                _.extend(formValues, values);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                return formValues;\r\n            };\r\n        },\r\n\r\n        _insertFieldExtensions: function () {\r\n            var fieldParent = this.getOption('fieldParent');\r\n            if (_.isFunction(fieldParent)) {\r\n                fieldParent = fieldParent.call(this.view);\r\n            }\r\n            if (fieldParent) {\r\n                fieldParent = this.view.$(fieldParent)[0];\r\n            }\r\n            if (!fieldParent) {\r\n                return;\r\n            }\r\n\r\n            var fieldDescriptors = this.getOption('fieldDescriptors');\r\n            if (_.isFunction(fieldDescriptors)) {\r\n                fieldDescriptors = fieldDescriptors.call(this.view);\r\n            }\r\n            if (!fieldDescriptors || !fieldDescriptors.length) {\r\n                return;\r\n            }\r\n\r\n            this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n            var fieldViewOptions = this.getOption('fieldViewOptions');\r\n            if (_.isFunction(fieldViewOptions)) {\r\n                fieldViewOptions = fieldViewOptions.call(this.view);\r\n            }\r\n            var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n                fieldViews = new GeneralActionFieldCollectionView(_.extend({\r\n                    context: this.view.options.context,\r\n                    fieldDescriptors: fieldDescriptors,\r\n                    collection: fieldModels,\r\n                    node: this.view.options.node,\r\n                    mode: this.view.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.view.options.fetchedModels,\r\n                    displayedModels: this.view.options.displayedModels,\r\n                    originatingView: this.view.options.originatingView,\r\n                    metadataView: this.view.options.metadataView\r\n                }, fieldViewOptions));\r\n            this.listenTo(fieldViews, 'render:actions', function () {\r\n                this.view.triggerMethod('render:general:action:fields', fieldViews);\r\n            });\r\n            this.fieldRegion.show(fieldViews);\r\n        },\r\n\r\n        _emptyExtensionRegion: function () {\r\n            if (this.fieldRegion) {\r\n                this.fieldRegion.empty();\r\n            }\r\n        }\r\n\r\n    }, {\r\n\r\n        getFieldDescriptors: function (options) {\r\n            var methodName, parameters;\r\n            if (options.action === 'create') {\r\n                methodName = 'getGeneralActionFieldsForCreate';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'copy') {\r\n                methodName = 'getGeneralActionFieldsForCopy';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'move') {\r\n                methodName = 'getGeneralActionFieldsForMove';\r\n                parameters = [{forms: options.forms}];\r\n            } else {\r\n                methodName = 'getGeneralActionFields';\r\n            }\r\n            var promises = metadataGeneralActionFields.chain()\r\n                .map(function (fieldControllerDescriptor) {\r\n                    var Controller = fieldControllerDescriptor.get('controller'),\r\n                        controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                        controller = new Controller(_.extend({\r\n                            context: options.context,\r\n                            model: options.node,\r\n                            fetchedModels: options.forms\r\n                        }, controllerOptions)),\r\n                        method = controller[methodName];\r\n                    return method && method.apply(controller, parameters);\r\n                })\r\n                .compact()\r\n                .value();\r\n            return $.when\r\n                .apply($, promises)\r\n                .then(function () {\r\n                    return _.flatten(arguments);\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/nodesprites',\r\n  'csui/controls/table/cells/size/size.view', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/models/form', 'csui/models/version',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, Backbone, NodeSpriteCollection, SizeView, base, Url,\r\n    FormModel, VersionModel, NodeResourceMixin, lang) {\r\n  'use strict';\r\n\r\n  var prototypeExt = {\r\n    makeServerAdaptor: function (options) {\r\n      return this;\r\n    },\r\n\r\n    url: function () {\r\n      var node   = this.options.node,\r\n          nodeId = node.get('id'),\r\n          url;\r\n      if (nodeId === undefined) {\r\n        // creation form\r\n        url = _.str.sformat('forms/nodes/create?type={0}&parent_id={1}',\r\n            node.get('type'), node.get('parent_id'));\r\n      } else {\r\n        if (node instanceof VersionModel) {\r\n          url = _.str.sformat('forms/nodes/versions/properties/general?id={0}&version_number={1}',\r\n              nodeId, node.get('version_number'));\r\n        } else {\r\n          // update form\r\n          url = _.str.sformat('forms/nodes/properties/general?id={0}', nodeId);\r\n        }\r\n      }\r\n      return Url.combine(this.connector.connection.url, url);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      // Some views may fail if one of the three properties was missing\r\n      var form  = _.extend({\r\n            data: {},\r\n            schema: {},\r\n            options: {}\r\n            // The server returns an array pf forms, although only one category\r\n            // was requested.  Normalize the response to be just a single form.\r\n          }, response.form || response.forms && response.forms[0] || response),\r\n          // Title usually does not come from the server\r\n          title = form.title || this.get('title') || lang.general;\r\n\r\n      form.options = _.omit(form.options, 'form');\r\n      if (!form.schema.title) {\r\n        form.schema.title = title;\r\n      }\r\n      if (!form.title) {\r\n        form.title = title;\r\n      }\r\n\r\n      this._addCreatorInfo(form, options);\r\n      this._addOwnerInfo(form, options);\r\n      this._addCreateDateInfo(form, options);\r\n      this._addModifyDateInfo(form, options);\r\n      this._addMimeTypeInfo(form, options);\r\n      this._addSizeInfo(form, options);\r\n      this._addItemidInfo(form, options);\r\n      this._ensurePlaceholder(form, options);\r\n      this._addReserveInfo(form, options);\r\n      this._addMimeTypeClassNameInfo(form, options);\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: this.options.node.has('size') ? \"size\" : \"file_size\"}\r\n      });\r\n\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                // TODO: Create a custom field showing the friendly size\r\n                // in the visible HTML element and the full size in bytes\r\n                // in a tooltip\r\n                size: this.sizeView.getValueData().formattedValue\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    _addItemidInfo: function (ret, options) {\r\n      if (!!this.node) {\r\n        var type = this.options.node.get('type');\r\n        var refNode =\r\n                _.extend(ret.data, {\r\n                  itemId: this.node.get('id')\r\n                });\r\n\r\n        _.extend(ret.options.fields, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\"\r\n          }\r\n        });\r\n        _.extend(ret.schema.properties, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\",\r\n            tooltip: this.node.get('id')\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    _addCreateDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.create_date.type = 'datetime';\r\n      ret.options.fields.create_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.create_date.format = 'datetime';\r\n    },\r\n\r\n    _addModifyDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.modify_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.modify_date.type = 'datetime';\r\n      ret.options.fields.modify_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.modify_date.format = 'datetime';\r\n    },\r\n\r\n    _addOwnerInfo: function (ret, options) {\r\n      var ownerField = 'owner_user_id';\r\n      // for version, we are still using v1 call for now until switch to v2\r\n      if (this.node instanceof VersionModel) {\r\n        ownerField = 'owner_id';  // v1 has a slightly different field name\r\n      }\r\n      if (!ret.options.fields[ownerField]) {\r\n        return;\r\n      }\r\n      var isOwnerExists = this.node.get('owner_user_id') === -3,\r\n          owner         = isOwnerExists ? {\r\n            'id': -3\r\n          } : (this.node.get('owner_user_id_expand') ||\r\n               this.node.get('owner_user_id') ||\r\n               this.node.get('owner_id'));\r\n\r\n      if (owner && owner instanceof Object) {\r\n        ret.data[ownerField] = owner.id;\r\n        ret.options.fields[ownerField].type = 'otcs_user';\r\n        ret.options.fields[ownerField].type_control = {\r\n          name: isOwnerExists ? lang.NoOwner : base.formatMemberName(owner)\r\n        };\r\n        ret.options.fields[ownerField].placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addCreatorInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_user_id) {\r\n        return;\r\n      }\r\n      var creator = this.node.get('create_user_id_expand') ||\r\n                    this.node.get('create_user_id');\r\n      if (creator && creator instanceof Object) {\r\n        ret.data.create_user_id = creator.id;\r\n        ret.options.fields.create_user_id.type = 'otcs_user';\r\n        ret.options.fields.create_user_id.type_control = {\r\n          name: base.formatMemberName(creator)\r\n        };\r\n        ret.options.fields.create_user_id.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addMimeTypeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n\r\n      _.extend(ret.data, {\r\n        mime_type: NodeSpriteCollection.findTypeByNode(node)\r\n      });\r\n\r\n      _.extend(ret.options.fields, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldTypeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldTypeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    // will retrieve corr. className of MimeType\r\n    _addMimeTypeClassNameInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n      _.extend(ret.data, {\r\n        mimeTypeClassName: NodeSpriteCollection.findClassByNode(node)\r\n      });\r\n    },\r\n\r\n    _ensurePlaceholder: function (ret, options) {\r\n      // ensure Description placeholder\r\n      if (ret.options.fields.description) {\r\n        var desc = ret.options.fields.description;\r\n        if (desc.placeholder === undefined || desc.placeholder.length === 0) {\r\n          desc.placeholder = lang.alpacaPlaceholderDescription;\r\n        }\r\n      }\r\n    },\r\n\r\n    _addReserveInfo: function (ret, options) {\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                reserve_info: ((!!this.options.node.get('reserved')) ? this : undefined)\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldReservedByLabel,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, prototypeExt);\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.model',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/models/form',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'csui/widgets/metadata/general.panels/node/server.adaptor.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, FormModel, NodeResourceMixin, ServerAdaptorMixin,\r\n    lang) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormModel = FormModel.extend({\r\n    defaults: {\r\n      id: 'general'\r\n    },\r\n\r\n    constructor: function NodeGeneralFormModel(attributes, options) {\r\n      FormModel.prototype.constructor.apply(this, arguments);\r\n\r\n      this.makeNodeResource(options)\r\n          .makeServerAdaptor(options);\r\n    }\r\n  });\r\n\r\n  NodeResourceMixin.mixin(NodeGeneralFormModel.prototype);\r\n  ServerAdaptorMixin.mixin(NodeGeneralFormModel.prototype);\r\n\r\n  return NodeGeneralFormModel;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.model',['csui/lib/underscore', 'csui/utils/base',\r\n  'csui/controls/table/cells/size/size.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, base, SizeView, NodeGeneralFormModel, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function DocumentGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      var form = NodeGeneralFormModel.prototype.parse.apply(this, arguments);\r\n\r\n      this._addSizeInfo(form, options);\r\n\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type        = this.options.node.get('type'),\r\n          val         = this.options.node.has('size'),\r\n          column_name = (val ? '' : 'file_') + 'size';\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: column_name}\r\n      });\r\n\r\n      var sizeVal = this.sizeView.getValueData().formattedValue,\r\n          refNode =\r\n              _.extend(ret.data, {\r\n                size: !!sizeVal ? sizeVal :\r\n                      base.getReadableFileSizeString(this.options.node.get('size'))\r\n\r\n              });\r\n\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\",\r\n          tooltip: this.sizeView.getValueData().value\r\n        }\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return DocumentGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      {{#if options.showSize}}\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n      <div class=\\\"csui-action-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_node_impl_node.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/node/impl/node.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log',\r\n  'csui/controls/form/form.view', 'csui/utils/commandhelper',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'csui/models/version',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/base',\r\n  'csui/utils/commands/versions', 'csui/models/nodeversions',\r\n  'css!csui/widgets/metadata/general.panels/node/impl/node.general.form'\r\n], function (_, $, log, FormView, CommandHelper,\r\n    DefaultActionBehavior, GeneralFormFieldBehavior, GeneralActionFieldBehavior, VersionModel,\r\n    GlobalMessage, formTemplate, lang, base, versionCommands, NodeVersionCollection) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormView = FormView.extend({\r\n\r\n    behaviors: {\r\n      defaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      },\r\n      generalFormFields: {\r\n        behaviorClass: GeneralFormFieldBehavior,\r\n        fieldParent: '.csui-extra-general-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalFormFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      },\r\n      generalActionFields: {\r\n        behaviorClass: GeneralActionFieldBehavior,\r\n        fieldParent: '.csui-action-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalActionFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    className: 'cs-form csui-general-form',\r\n\r\n    // Default field set that needs to be refreshed while modifying any field in general form.\r\n    // it can be extended if a particular module need to update more field.\r\n    fieldToRefresh: ['modify_date', 'reserve_info'],\r\n\r\n    constructor: function NodeGeneralFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n      this.node = this.options.node;\r\n      // extend fieldToRefresh from options.\r\n      this.fieldToRefresh = _.union(this.fieldToRefresh, (options.fieldToRefresh || []));\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this.node, 'change', _.bind(function () {\r\n        if (this.mode !== \"create\") {\r\n          this.model.fetch();\r\n        }\r\n\r\n        // The model event is no longer triggered. If a single form field\r\n        // is re-rendered, needs to let metadata keyboard navigation know\r\n        // to refresh the list of tabable elements.\r\n        var event = $.Event('tab:content:field:changed');\r\n        this.$el.trigger(event);\r\n      }, this));\r\n\r\n      var action = this.defaultActionController.getAction(this.options.node);\r\n      if (!action) {\r\n        this.noDefaultActionExist = true;\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          node_name = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode != 'create',\r\n        showSize: this.model.get('data').size !== \"\",\r\n        reserved: this.node.get('reserved'),\r\n        title: this.noDefaultActionExist ? \"\" : _.str.sformat(lang.openDoc, type_name),\r\n        aria_label: this.noDefaultActionExist ? \"\" :\r\n                    _.str.sformat(lang.openDocAria, type_name, node_name)\r\n      };\r\n    },\r\n\r\n    _getLayout: function () {\r\n      var template = this.getOption('formTemplate'),\r\n          html     = template.call(this, {\r\n            data: this.alpaca.data,\r\n            mode: this.mode\r\n          }),\r\n          bindings = this._getBindings(),\r\n          view     = {\r\n            parent: 'bootstrap-csui',\r\n            layout: {\r\n              template: html,\r\n              bindings: bindings\r\n            }\r\n          };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = {\r\n        name: 'name_section',\r\n        create_date: '.owner_section',\r\n        create_user_id: '.owner_section',\r\n        modify_date: '.owner_section',\r\n        owner_user_id: '.owner_section',\r\n        mime_type: '.typename_section',\r\n        description: '.description_section',\r\n        itemId: '.owner_section',\r\n        size: '.size_section'\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n      // for version, extend the bindings because the v1 and v2 keys are slightly different\r\n      // To support wiki and document Versions\r\n      if (this.node instanceof VersionModel) {\r\n        bindings = _.extend(bindings, {\r\n          version_number_name: \".owner_section\",\r\n          owner_id: \".owner_section\"\r\n        });\r\n      }\r\n      return bindings;\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      var field   = args.targetField,\r\n          changes = {};\r\n\r\n      changes[field.name] = field.value;\r\n      this._saveChanges(changes);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      var MN = '{0}:_saveGeneralChanges {1} {2}';\r\n      var node = this.model.options.node,\r\n          self = this;\r\n      node.save(changes, {\r\n        wait: true,\r\n        patch: true\r\n      }).then(function () {\r\n        return node.fetch();\r\n      }).fail(function (jqxhr) {\r\n        var preValues = self.model.get('data');\r\n        // Reset form data and refresh fields\r\n        self.form.children.forEach(function (formField) {\r\n          formField.setValue(preValues[formField.propertyId]);\r\n          formField.refresh();\r\n        });\r\n        var error = new base.Error(jqxhr);\r\n        GlobalMessage.showMessage('error', error.message);\r\n        self.trigger('forms:error');\r\n      });\r\n    },\r\n\r\n    onBeforeDestroy: function() {\r\n      if (this.triggerDefaultAction) {\r\n        this.triggerMethod('execute:DefaultAction', this.options.node);\r\n      }\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      this.updateReserveFieldDisplay();\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showDefaultImage();\r\n      var thumbnail = this.$el.find('.thumbnail_section');\r\n      // default action\r\n      if (this.options.node instanceof VersionModel) {\r\n        //Handling default action for VersionModel differently\r\n        var versionNode = this.options.node;\r\n        thumbnail.click(_.bind(function () {\r\n          var cmd = versionCommands.get('VersionOpen');\r\n          var status = {nodes: new NodeVersionCollection([versionNode])};\r\n          var cmdOptions = {context: this.options.context, originatingView: this};\r\n          cmd.execute(status, cmdOptions);\r\n        }, this));\r\n      } else {\r\n        // default action\r\n        thumbnail.click(_.bind(function (event) {\r\n          if (!this.noDefaultActionExist) {\r\n            // metadataView should not be closed if thumbnail item will open in another tab\r\n            if (!!this.options.node.get(\"container\")) {\r\n              this.options.metadataView.trigger('metadata:close');\r\n              // Hold a flag to wait for form to destroy and then execute DefaultAction.\r\n              this.triggerDefaultAction = true;\r\n            } else {\r\n              this.triggerMethod('execute:DefaultAction', this.options.node);\r\n            }\r\n          }\r\n        }, this));\r\n      }\r\n\r\n      thumbnail.on(\"focusin\", function (event) {\r\n        base.checkAndScrollElemToViewport(event.currentTarget);\r\n      });\r\n\r\n      var $langSwitcher = $('<span></span>')\r\n          .prop('class', 'icon csui-icon language-switcher')\r\n          .prop('alt', 'Switch language')\r\n          .prop('title', 'Switch language')\r\n          .css('margin-left', '0.5em');\r\n      //  this.form.domEl\r\n      //      .find('#description_section label')\r\n      //      .append($langSwitcher);\r\n\r\n      // Let render:form triggered once all extra fields were rendered\r\n      var generalFormFieldDescriptors = this.options.generalFormFieldDescriptors;\r\n      if (generalFormFieldDescriptors && generalFormFieldDescriptors.length) {\r\n        this.listenToOnce(this, 'render:general:form:fields', options.async());\r\n      }\r\n    },\r\n\r\n    setFocus: function () {\r\n      //this.form.focus();\r\n      var nonReadOnlyFields = this.$form.find('.alpaca-field:not(.alpaca-readonly) button');\r\n      if (nonReadOnlyFields.length > 0) {\r\n        nonReadOnlyFields[0].focus();\r\n      }\r\n    },\r\n\r\n    updateForm: function () {\r\n      if (!!this.node.isReservedClicked || !!this.node.isUnreservedClicked) {\r\n        // only render when reserve or unreserve action is preformed.\r\n        this.render();\r\n        this.node.isReservedClicked = false;\r\n        this.node.isUnreservedClicked = false;\r\n      }\r\n      var alpacaForm     = this.$el.alpaca('get'),\r\n          requiredSwitch = !!this.node.collection && !!this.node.collection.requireSwitched;\r\n      if (!!alpacaForm) {\r\n        var data = this.model.get('data');\r\n        for (var i = 0; i < this.fieldToRefresh.length; i++) {\r\n          var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh[i]],\r\n              value = data[this.fieldToRefresh[i]];\r\n          if (!!field && field.getValue() !== value && !requiredSwitch) {\r\n            field.setValue(value);\r\n            field.refresh();\r\n          }\r\n        }\r\n      }\r\n      this._showDefaultImage();\r\n      this.updateReserveFieldDisplay();\r\n      return this;\r\n    },\r\n\r\n    updateReserveFieldDisplay: function () {\r\n      var reserveInfoElem = this.$el.find(\".reserve_info\");\r\n      if (!!this.node.get('reserved')) {\r\n        if (reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.removeClass(\"binf-hidden\");\r\n        }\r\n      } else {\r\n        if (!reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.addClass(\"binf-hidden\");\r\n        }\r\n      }\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var defaultThumbnailEl = this.$el.find('.default_thumbnail'),\r\n          className          = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      defaultThumbnailEl.addClass(className);\r\n      defaultThumbnailEl.removeClass('thumbnail_empty');\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n      if (!!this.noDefaultActionExist) {\r\n        this.$el.find('.default_thumbnail').addClass('thumbnail_disabled');\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return NodeGeneralFormView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"thumbnail_not_loaded thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n          <img src=\\\"{{options.imgSrc}}\\\" class=\\\"img-doc-preview binf-hidden\\\"\\r\\n               alt=\\\"{{options.imgAlt}}\\\">\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_document_impl_document.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/document/impl/document.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/utils/commands/impl/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/general.panels/document/impl/document.general.form'\r\n], function (_, $, Thumbnail, NodeGeneralFormView, formTemplate, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function DocumentGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      this.thumbnail = this.options.thumbnail || new Thumbnail({\r\n            node: this.options.node\r\n          });\r\n      this.listenTo(this.thumbnail, 'load', this._showImage)\r\n          .listenTo(this.thumbnail, 'error', this._showDefaultImage)\r\n          .listenTo(this, 'destroy', function () {\r\n            this.thumbnail.destroy();\r\n          });\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n    fieldToRefresh: ['modify_date', 'reserve_info', 'mime_type', 'size'],\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          doc_name  = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode != 'create',\r\n        title: _.str.sformat(lang.openDoc, type_name),\r\n        aria_label: _.str.sformat(lang.openDocAria, type_name, doc_name),\r\n        reserved: this.node.get('reserved'),\r\n        // a 1x1 transparent gif, to avoid an empty src tag\r\n        imgSrc: \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n        imgAlt: lang.docPreviewAlt\r\n      };\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        size: \".size_section\"\r\n      });\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      NodeGeneralFormView.prototype.updateRenderedForm.apply(this, arguments);\r\n      if (this.mode !== 'create') {\r\n        var self = this;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (!!this.thumbnail.url) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.load();\r\n        }\r\n      }\r\n    },\r\n\r\n    _showImage: function () {\r\n      var self                 = this,\r\n          img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded');\r\n      img.attr(\"src\", this.thumbnail.url);\r\n      img.prop('tabindex', '0');\r\n      img.one('load', function (evt) {\r\n\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass('cs-form-img-vertical');\r\n        } else {\r\n          img.addClass('cs-form-img-horizontal');\r\n        }\r\n        img.addClass('cs-form-img-border');\r\n        //hide the thumbnail background span and show the real img\r\n        thumbnailNotLoadedEl.addClass('binf-hidden');\r\n        img.removeClass('binf-hidden');\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded'),\r\n          className            = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      // remove the old mime-type class , then update with new one.\r\n      !!thumbnailNotLoadedEl.prop(\"className\") &&\r\n      thumbnailNotLoadedEl.prop(\"className\").split(' ').forEach(_.bind(function (str) {\r\n        if (str.indexOf('mime') === 0) {\r\n          thumbnailNotLoadedEl.removeClass(str);\r\n        }\r\n      }, thumbnailNotLoadedEl));\r\n\r\n      thumbnailNotLoadedEl.addClass(className);\r\n      thumbnailNotLoadedEl.removeClass('thumbnail_empty');\r\n      thumbnailNotLoadedEl.removeClass('csui-icon-notification-error');\r\n      thumbnailNotLoadedEl.removeClass('binf-hidden');\r\n      img.addClass('binf-hidden');\r\n\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n    }\r\n  });\r\n\r\n  return DocumentGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',['csui/lib/jquery', 'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/utils/node.links/node.links',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, NodeGeneralFormModel, nodeLinks, SpecificNodeModel, SyncableMixin,\r\n    lang) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function ShortcutGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n  SyncableMixin.mixin(ShortcutGeneralFormModel.prototype);\r\n  return ShortcutGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"shortcut_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_shortcut_impl_shortcut.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',\r\n  'css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form'\r\n], function (_, NodeGeneralFormView, NodeModelFactory, formTemplate) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function ShortcutGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      // share the original node for deeper form fields code\r\n      if (options.context && options.node && options.node.original &&\r\n          options.node.original.get('id') > 0) {\r\n        // Create the node model or do nothing if it exists\r\n        options.context.getModel(NodeModelFactory, {\r\n          // Add unique id to the propertyPrefix for this object\r\n          attributes: {id: options.node.original.get('id')},\r\n          // Pass the property value using the propertyPrefix of the factory\r\n          node: options.node.original,\r\n          // Discard the model during context change to prevent its re-fetch \r\n          temporary: true\r\n        });\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        original_id: '.shortcut_section'\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return ShortcutGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.model',['csui/lib/jquery', 'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin, lang) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function UrlGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n\r\n  SyncableMixin.mixin(UrlGeneralFormModel.prototype);\r\n  return UrlGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"url_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_url_impl_url.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/url/impl/url.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',\r\n  'css!csui/widgets/metadata/general.panels/url/impl/url.general.form'\r\n], function (_, NodeGeneralFormView, formTemplate) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function UrlGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        url: \".url_section\"\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return UrlGeneralFormView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.model',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.view',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  // Load extra general property panel rules to be added to the built-in ones\r\n  'csui-ext!csui/widgets/metadata/metadata.general.panels'\r\n], function (_, Backbone,\r\n    DocumentGeneralFormModel, DocumentGeneralFormView,\r\n    NodeGeneralFormModel, NodeGeneralFormView,\r\n    ShortcutGeneralFormModel, ShortcutGeneralFormView,\r\n    UrlGeneralFormModel, UrlGeneralFormView,\r\n    RulesMatchingMixin, extraGeneralPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      contentModel: null,\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(MetadataGeneralPanelModel.prototype);\r\n\r\n  var MetadataGeneralPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataGeneralPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    findByNode: function (node) {\r\n      return this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  var generalPanels = new MetadataGeneralPanelCollection([\r\n    {\r\n      // document and Email\r\n      equals: {type: [144, 749]},\r\n      contentModel: DocumentGeneralFormModel,\r\n      contentView: DocumentGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // shortcut and generation\r\n      equals: {type: [1, 2]},\r\n      contentModel: ShortcutGeneralFormModel,\r\n      contentView: ShortcutGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // url\r\n      equals: {type: 140},\r\n      contentModel: UrlGeneralFormModel,\r\n      contentView: UrlGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // default node\r\n      contentModel: NodeGeneralFormModel,\r\n      contentView: NodeGeneralFormView,\r\n      sequence: 10000\r\n    }\r\n  ]);\r\n\r\n  if (extraGeneralPanels) {\r\n    generalPanels.add(_.flatten(extraGeneralPanels, true));\r\n  }\r\n\r\n  return generalPanels;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/general/metadata.general.property.controller',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/metadata.general.panels'\r\n], function (_, $, Marionette, FormModel, FormView, generalPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPropertyController = Marionette.Controller.extend({\r\n\r\n    constructor: function MetadataExternalPropertyController(options) {\r\n      Marionette.Controller.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    getPropertyPanels: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model,\r\n            context: this.options.context\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    getPropertyPanelsForCreate: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          deferred = $.Deferred(),\r\n          formModel = options.forms.findWhere({id: 'general'});\r\n      // The 'v1/forms/nodes/create' always returns the general form.\r\n      // If other collection is used to fetch the pre-filled forms, it\r\n      // has to include some form with the 'general' id too\r\n      if (!formModel) {\r\n        throw new Error('General form missing.');\r\n      }\r\n      formModel = new generalPanel.model(formModel.attributes, {\r\n        connector: this.connector,\r\n        node: this.options.model,\r\n        parse: true\r\n      });\r\n      return deferred\r\n          .resolve([{\r\n            model: formModel,\r\n            contentView: generalPanel.contentView,\r\n            contentViewOptions: generalPanel.contentViewOptions\r\n          }])\r\n          .promise();\r\n    },\r\n\r\n    getPropertyPanelsForMove: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    getPropertyPanelsForCopy: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    // Add read-only general tab fro move and copy scenarios;\r\n    // useless for the operation, but the user may like to see\r\n    // more information about the copied items and is ready to\r\n    // pay the price for the fetching server call.\r\n    _getPropertyPanelsForMoveAndCopy: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            formModel.get('schema').readonly = true;\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    _getGeneralPanel: function () {\r\n      var panel = generalPanels.findByNode(this.options.model);\r\n      return {\r\n        model: panel.get('contentModel') || FormModel,\r\n        contentView: panel.get('contentView') || FormView,\r\n        contentViewOptions: panel.get('contentViewOptions')\r\n      };\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataGeneralPropertyController;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.property.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/property.panels/general/metadata.general.property.controller',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.property.panels'\r\n], function (_, Backbone, MetadataGeneralPropertyController, extraPropertyPanels) {\r\n\r\n  var MetadataPropertyPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPropertyPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPropertyPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPropertyPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPropertyPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPropertyPanels = new MetadataPropertyPanelCollection([\r\n    {\r\n      sequence: 10,\r\n      controller: MetadataGeneralPropertyController\r\n    }\r\n  ]);\r\n\r\n  if (extraPropertyPanels) {\r\n    extraPropertyPanels = _.flatten(extraPropertyPanels, true);\r\n    _.each(extraPropertyPanels, function () {\r\n      var sequence = extraPropertyPanels.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataPropertyPanels.add(extraPropertyPanels);\r\n  }\r\n\r\n  return metadataPropertyPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"binf-dropdown\\\">\\r\\n  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"csui-button-icon icon-toolbarAdd\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n  <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n</div>\\r\\n<div class=\\\"csui-loading-parent-wrapper binf-disabled csui-disbaled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_add.properties_add.properties.dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',[\"csui/lib/jquery\", \"csui/lib/underscore\", \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/log', 'csui/controls/toolbar/toolitem.view', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model', 'csui/utils/commands',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function ($, _, Backbone, Marionette, log, ToolItemView, BlockingView,\r\n    NodeCollection, FilteredToolItemsCollection, commands, DropdownMenuBehavior,\r\n    template, lang) {\r\n\r\n  //\r\n  // This view shows the '+' icon for add properties commands such as 'add categories',\r\n  // 'add classifications', etc.\r\n  // - When there is only one command (for example: just 'add categories'), the '+' is just a\r\n  // command icon that would launch the only only command when the user clicks on it.\r\n  // - When there are two or more commands, the '+' icon is a dropdown menu that shows all the\r\n  // available commands.\r\n  //\r\n  // Params:\r\n  // - suppressAddProperties <boolean> : true to suppress the '+' icon\r\n  //\r\n  var AddPropertiesDropdownMenuView = Marionette.CompositeView.extend({\r\n\r\n    className: \"metadata-add-properties\",\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      return {\r\n        btnId: _.uniqueId('addPropertiesButton'),\r\n        addTitleTooltip: (this.collection.length === 1 ?\r\n                          this.collection.at(0).get('name') : lang.addNewProperties)\r\n      };\r\n    },\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'menuitem'\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      dropdownDiv: '.binf-dropdown',\r\n      dropdownToggle: '.binf-dropdown-toggle',\r\n      loadingIconsDiv: '.csui-loading-parent-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function AddPropertiesDropdownMenuView(options) {\r\n      options || (options = {});\r\n      this.context = options.context;\r\n      this.commands = options.commands || commands;\r\n      this.node = options.node;\r\n      this.container = options.container;\r\n      this.formCollection = options.collection;\r\n      this.originalFormCollection = options.formCollection;\r\n      this.listenTo(this.formCollection, \"reset\", this._updateMenuItems);\r\n\r\n      this.originatingView = options.originatingView;\r\n      if (options.blockingParentView) {\r\n        BlockingView.delegate(this, options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([options.node]),\r\n        container: options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        context: options.context\r\n      };\r\n\r\n      var toolbarName = 'addPropertiesToolbar';\r\n      var toolItemFactory = options.toolbarItems[toolbarName];\r\n      options.collection = new FilteredToolItemsCollection(\r\n          toolItemFactory, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolbarItemsMask\r\n          });\r\n\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.node, 'sync change', this._reRender)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n\r\n      if (options.containerCollection && options.containerCollection.delayedActions) {\r\n        this.listenTo(options.containerCollection.delayedActions, 'sync', this._reRender);\r\n      }\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.refilter();\r\n    },\r\n\r\n    _reRender: function () {\r\n      // Properties is being destroyed on changing the context node. Both destroyer\r\n      // and a sub-view refreshed are listening on node changes. Although listening\r\n      // is stopped during the destruction, already registered handlers will be\r\n      // triggered nevertheless.\r\n      if (this._isRendered && !this.isDestroyed) {\r\n        this._updateMenuItems();\r\n        this.render();\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      this._ensureLazyActionsRetrieved().done(_.bind(function () {\r\n        if (this.collection.length < 1 || this.options.suppressAddProperties === true) {\r\n          // hide the + button if there is no action\r\n          this.$el.addClass('binf-hidden');\r\n          this.ui.dropdownToggle.attr('data-cstabindex', '-1');\r\n        } else {\r\n          // show the view because with the latest code the view now can be hidden by the PUT call\r\n          // event that the node does not have any actions yet until it is re-fetched\r\n          this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n          this.$el.removeClass('binf-hidden');\r\n          this.ui.dropdownToggle.attr('data-cstabindex', '0');\r\n          // when there is only one command, set aria-haspopup=false\r\n          if (this.collection.length === 1) {\r\n            this.ui.dropdownToggle.attr('aria-haspopup', false);\r\n          }\r\n        }\r\n\r\n        if (this.collection.length > 1) {\r\n          // make the dropdown menu when there are more than 1 menu item\r\n          this.ui.dropdownToggle.binf_dropdown();\r\n        }\r\n\r\n        this.ui.dropdownDiv.on('click', _.bind(this._onClickAddButton, this));\r\n        this.ui.dropdownToggle.on('click', _.bind(this._onClickAddButton, this));\r\n\r\n        var self = this;\r\n        setTimeout(function () {\r\n          // event for keyboard navigation\r\n          var event = $.Event('tab:content:render');\r\n          self.$el.trigger(event);\r\n        }, 200);\r\n\r\n      }, this)).fail(function () {\r\n        this.$el.addClass('binf-hidden');\r\n        this.ui.dropdownToggle.attr('data-cstabindex', '-1');\r\n      });\r\n\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      if (this.options.suppressAddProperties !== true) {\r\n        var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n        if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n          dropdownToggleEl.binf_dropdown('toggle', false);\r\n        }\r\n      }\r\n    },\r\n\r\n    _onClickAddButton: function (event) {\r\n      if (this.collection.length === 1) {\r\n        Backbone.trigger('closeToggleAction');\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        // when there is just one command\r\n        this._executeAction(this.collection.at(0).get('signature'));\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      this._executeAction(args.toolItem.get(\"signature\"));\r\n    },\r\n\r\n    _executeAction: function (signature) {\r\n      var command = this.commands.findWhere({signature: signature});\r\n\r\n      var executeOptions = {\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        collection: this.formCollection,\r\n        container: this.options.container,\r\n        inheritance: this.options.inheritance,\r\n        context: this.options.context,\r\n        parentView: this.options.parentView,  // use for blocking view and callback\r\n        addPropertiesCallback: this.options.addPropertiesCallback\r\n      };\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.node]),\r\n        container: this.options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        originatingView: this.originatingView\r\n      };\r\n\r\n      if (command && command.enabled(status)) {\r\n        var el = this.ui.dropdownDiv;\r\n        el.addClass(\"binf-disabled\");\r\n        command.execute(status, executeOptions)\r\n            .done(_.bind(function (resp) {\r\n              el.removeClass(\"binf-disabled\");\r\n              //focus on tab link for added property\r\n              el.closest('.tab-links').find('.tab-links-bar ul li.binf-active a').focus();\r\n            }, this))\r\n            .fail(function (error) {\r\n              el.removeClass(\"binf-disabled\");\r\n              if (error && error.cancelled) {\r\n                //focus on dropdown toggle icon\r\n                el.find(\".binf-btn.binf-dropdown-toggle\").focus();\r\n              }\r\n            });\r\n      }\r\n    },\r\n    _ensureLazyActionsRetrieved: function () {\r\n      var deferred                = $.Deferred(),\r\n          node                    = this.options.node,\r\n          lazyActionsAreRetrieved = !!node.get('csuiLazyActionsRetrieved'),\r\n          isNodeLocallyCreated    = !!node.isLocallyCreated,\r\n          nonPromotedCommands     = node.nonPromotedActionCommands;\r\n      if (!!node && !lazyActionsAreRetrieved && !isNodeLocallyCreated && nonPromotedCommands &&\r\n          nonPromotedCommands.length) {\r\n        this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n        this.ui.loadingIconsDiv.removeClass('binf-hidden');\r\n        node.setEnabledLazyActionCommands(true).done(_.bind(function () {\r\n          //As per UX req: need to show loading dots atleast for 300ms after fetch as like in\r\n          // inlineactionbar\r\n          setTimeout(_.bind(function () {\r\n            this.ui.loadingIconsDiv.addClass('binf-hidden');\r\n            this._updateMenuItems();\r\n            deferred.resolve();\r\n          }, this), 300);\r\n        }, this)).fail(_.bind(function () {\r\n          this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n          deferred.reject();\r\n        }, this));\r\n      } else {\r\n        deferred.resolve();\r\n      }\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesDropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/add.properties.menuitems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/add.properties.menuitems',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/add.properties/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel,\r\n    extraToolItems, oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n\r\n    addPropertiesToolbar: new ToolItemsFactory(\r\n        {\r\n          add: [\r\n            {\r\n              signature: \"AddCategory\",\r\n              name: lang.addNewCategory\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0 // force toolbar to immediately start with a drop-down list\r\n        }\r\n    )\r\n\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/add.properties.menuitems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var AddPropertiesMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function AddPropertiesMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesMenuItemsMask;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"csui-tab-contents-header-content\\\">\\r\\n  <div class=\\\"csui-tab-contents-header-right\\\">\\r\\n    <div class=\\\"required-field-switch binf-hidden\\\">\\r\\n        <span id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.requiredFieldsLabelId || (depth0 != null ? depth0.requiredFieldsLabelId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"requiredFieldsLabelId\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"only-required-fields-label\\\"\\r\\n              title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.onlyRequiredFieldsLabel || (depth0 != null ? depth0.onlyRequiredFieldsLabel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.onlyRequiredFieldsLabel || (depth0 != null ? depth0.onlyRequiredFieldsLabel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n      <div class=\\\"required-fields-switch\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <h4>General</h4>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_tab.contents.header_tab.contents.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',['require', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/form/pub.sub',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',\r\n  'css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header', 'csui/lib/binf/js/binf'\r\n], function (require, $, _, Backbone, Marionette, PubSub, VersionModel, lang,\r\n    tabContentsHeaderTemplate) {\r\n  'use strict';\r\n\r\n  var TabContentsHeaderView = Marionette.ItemView.extend({\r\n\r\n    tagName: 'div',\r\n\r\n    className: 'csui-tab-contents-header',\r\n\r\n    template: tabContentsHeaderTemplate,\r\n\r\n    ui: {\r\n      leftTabContentsHeader: '.csui-tab-contents-header-content',\r\n      rightTabContentsHeader: '.csui-tab-contents-header-right',\r\n      tabContentsHeaderTitle: '.csui-tab-contents-header-content h4',\r\n      requiredSwitchEle: '.required-field-switch', //container of required field switch\r\n      requiredSwitchIcon: '.required-field-switch > div.required-fields-switch'\r\n    },\r\n\r\n    events: {\r\n      'click @ui.requiredSwitchIcon': 'onClickRequiredIconDiv',\r\n      'keydown': 'onKeyInView'\r\n    },\r\n\r\n    constructor: function TabContentsHeaderView() {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.pubsubPostFix = (this.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                           this.options.node.get('id');\r\n\r\n      this.requiredFieldsLabelId = _.uniqueId(\"requiredFields\");\r\n\r\n      var objPubSubId = 'pubsub:tab:contents:header:view:change:tab:title:' + this.pubsubPostFix;\r\n      PubSub.off(objPubSubId);\r\n\r\n      this.listenTo(PubSub, objPubSubId, this._changeTabTitle);\r\n\r\n      this.listenTo(this.collection, 'add', function (model) {\r\n        !!model.get('required') && this._showRequiredSwitch();\r\n      });\r\n      this.listenTo(this.collection, 'remove', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        }\r\n      });\r\n\r\n      this.listenTo(this, 'metadata:schema:updated', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        } else {\r\n          this._showRequiredSwitch();\r\n        }\r\n      }, this);\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        onlyRequiredFieldsLabel: lang.onlyRequiredFieldsLabel,\r\n        requiredFieldsLabelId: this.requiredFieldsLabelId\r\n      };\r\n    },\r\n\r\n    _changeTabTitle: function (args) {\r\n      this.$(this.ui.tabContentsHeaderTitle).html(args);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.requiredFieldSwitchModel = new Backbone.Model(\r\n          {data: !!this.options.node.collection.requireSwitched});\r\n      var self = this;\r\n\r\n      //fix for grunt out-release\r\n      require(['csui/controls/form/fields/booleanfield.view'], function (BooleanFieldView) {\r\n        self.requiredFieldSwitchView = new BooleanFieldView({\r\n          mode: 'writeonly',\r\n          model: self.requiredFieldSwitchModel,\r\n          labelId: self.requiredFieldsLabelId\r\n        });\r\n        self.requiredFieldSwitchView.render();\r\n        self.listenTo(self.requiredFieldSwitchView, 'field:changed', function (event) {  //toggle\r\n          // required fields\r\n          var objPubSubId = 'pubsub:tab:contents:header:view:switch:' + self.pubsubPostFix;\r\n\r\n          PubSub.trigger(objPubSubId, {on: event.fieldvalue});\r\n          if (!!self.options.node.collection) {\r\n            self.options.node.collection.requireSwitched = event.fieldvalue;\r\n          }\r\n        });\r\n        self.$('.required-fields-switch').append(self.requiredFieldSwitchView.$el);\r\n        if (self.isRequiredCatPresent()) {\r\n          self._showRequiredSwitch();\r\n        }\r\n\r\n        PubSub.off('pubsub:header:rightbar:view:change:switch:status');\r\n        self.listenTo(PubSub, 'pubsub:header:rightbar:view:change:switch:status', function (reset) {\r\n          if (!!reset) {\r\n            if (!!self.requiredFieldSwitchView.curVal) {\r\n              self.requiredFieldSwitchView.$el.click();\r\n            }\r\n          } else if (!!self.requiredFieldSwitchModel &&\r\n                     (self.requiredFieldSwitchModel.get('data') !== undefined &&\r\n                     !self.requiredFieldSwitchModel.get('data')) && !!self.options.node &&\r\n                     !!self.options.node.collection &&\r\n                     !!self.options.node.collection.requireSwitched) {\r\n            self.requiredFieldSwitchView.$el.click();\r\n          }\r\n        });\r\n\r\n      });\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n        return $(this.ui.requiredSwitchIcon.find(\":input\"));\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 32 || event.keyCode === 13) {\r\n        // space key(32) or enter key(13)\r\n        if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // need timeout to overcome FireFox space press\r\n          setTimeout(_.bind(function () {\r\n            $(target).click();\r\n          }, this), 200);\r\n        }\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    // this method is triggered by keyboard\r\n    onClickRequiredIconDiv: function (event) {\r\n      this.requiredFieldSwitchView.onClickWriteField(event);\r\n    },\r\n\r\n    _hideRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.addClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.addClass('binf-hidden');\r\n      //turn off if no required cat is present\r\n      !!this.requiredFieldSwitchView && !!this.requiredFieldSwitchView.getValue() &&\r\n      this.requiredFieldSwitchView.ui.flagWriteField.trigger('click');\r\n    },\r\n\r\n    _showRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.removeClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.removeClass('binf-hidden');\r\n    },\r\n\r\n    isRequiredCatPresent: function () {\r\n      var isRequiredCatPresent = false,\r\n          i                    = 0;\r\n      for (; !isRequiredCatPresent && i < this.collection.models.length; i++) {\r\n        isRequiredCatPresent = this.collection.models[i].get('required') === true;\r\n      }\r\n      return isRequiredCatPresent;\r\n    }\r\n  });\r\n\r\n  return TabContentsHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/url', 'csui/utils/base', 'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/controls/tab.panel/tab.links.ext.view',\r\n  'csui/controls/tab.panel/tab.links.ext.scroll.mixin',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/property.panels/categories/impl/category.form.view',\r\n  'csui/models/appliedcategories', 'csui/widgets/metadata/impl/metadata.forms',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/version', 'csui/widgets/metadata/impl/metadata.utils', 'i18n',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/widgets/metadata/metadata.property.panels',\r\n  'csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',\r\n  'csui/controls/form/pub.sub',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/utils/deepClone/deepClone'\r\n], function (_, $, Backbone, Marionette, Url, base, TabPanelView, TabLinkCollectionViewExt,\r\n    TabLinksScrollMixin, FormModel, FormView, CategoryFormView, AppliedCategoryCollection,\r\n    MetadataFormCollection, ModalAlert, BlockingView, VersionModel, MetadataUtils, i18n,\r\n    PerfectScrollingBehavior, GeneralFormFieldBehavior, GeneralActionFieldBehavior, lang,\r\n    metadataPropertyPanels,\r\n    AddPropertiesDropdownMenuView, toolbarItems, AddPropertiesMenuItemsMask,\r\n    TabContentHeaderView, PubSub, MetadataTabContentCollectionView) {\r\n\r\n  // Private and local collection defined and used by Metadata Properties View Class\r\n  var AppliedCategoryActionsCollection = AppliedCategoryCollection.extend({\r\n\r\n    constructor: function AppliedCategoryActionsCollection(attributes, options) {\r\n      AppliedCategoryCollection.prototype.constructor.apply(this, arguments);\r\n      this.options = options || {};\r\n      _.defaults(this.options, {urlResource: ''});\r\n    },\r\n\r\n    url: function () {\r\n      return Url.combine(this.node.urlBase(), this.options.urlResource);\r\n    },\r\n\r\n    fetch: function () {\r\n      //\r\n      // 1. with document version, the is no categories/actions call but luckily everything is\r\n      // read-ony in UX specs for this release of the UI\r\n      //\r\n      // 2. with add item, the object has not been created yet on the server\r\n      //\r\n      if (this.node instanceof VersionModel ||\r\n          this.node.get(\"id\") === undefined || this.options.action) {\r\n        this.fetching = false;\r\n        this.fetched = true;\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      return AppliedCategoryCollection.prototype.fetch.apply(this, arguments);\r\n    },\r\n\r\n    parse: function () {\r\n      // with document version, the is no categories/actions call but luckily everything is\r\n      // read-ony in UX specs for this release of the UI\r\n      if (this.node instanceof VersionModel) {\r\n        return {};\r\n      }\r\n      // with add item, the object has not been created yet on the server\r\n      if (this.node.get(\"id\") === undefined || this.options.action) {\r\n        return {categories_add: \"dummy value\"};\r\n      }\r\n      return AppliedCategoryCollection.prototype.parse.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  var MetadataPropertiesViewImpl = TabPanelView.extend({\r\n\r\n    className: (base.isTouchBrowser() ? 'cs-touch-browser ' : '') + 'cs-metadata-properties' +\r\n               ' binf-panel binf-panel-default',\r\n\r\n    rtlEnabled: i18n.settings.rtl,\r\n\r\n    contentView: function (model) {\r\n      var panel = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        return panel.contentView || FormView;\r\n      }\r\n      if (model.get('role_name') === 'categories') {\r\n        return CategoryFormView;\r\n      }\r\n      return FormView;\r\n    },\r\n\r\n    contentViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.formMode,\r\n            fetchedModels: this.allForms,\r\n            displayedModels: this.collection,\r\n            originatingView: this,\r\n            layoutMode: 'doubleCol',\r\n            metadataView: this.options.metadataView,\r\n            generalFormFieldDescriptors: this._generalFormFieldDescriptors,\r\n            generalActionFieldDescriptors: this._generalActionFieldDescriptors\r\n          },\r\n          panel   = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        _.extend(options, panel.contentViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    // specific implementation for TabableRegionBehavior\r\n    isTabable: function () {\r\n      if (this.options.notTabableRegion === true) {\r\n        return false;\r\n      }\r\n      return true;  // this view can be reached by tab\r\n    },\r\n\r\n    constructor: function MetadataPropertiesViewImpl(options) {\r\n      options || (options = {});\r\n      var delete_icon;\r\n\r\n      if (base.isTouchBrowser()) {\r\n        delete_icon = 'category_delete-touch-browser';\r\n      } else {\r\n        delete_icon = 'category_delete';\r\n      }\r\n\r\n      _.defaults(options, {\r\n        tabType: 'binf-nav-pills',\r\n        mode: 'spy',\r\n        extraScrollTopOffset: 3,\r\n        formMode: 'update',\r\n        toolbar: true,\r\n        toolbarItems: toolbarItems,\r\n        delete_icon: delete_icon,\r\n        delete_tooltip: lang.removeCategoryTooltip,\r\n        contentView: this.getContentView,\r\n        TabLinkCollectionViewClass: TabLinkCollectionViewExt,\r\n        TabContentCollectionViewClass: MetadataTabContentCollectionView,\r\n        searchTabContentForTabableElements: true,\r\n        tabContentAccSelectors: 'a[href], area[href], input:not([disabled]),' +\r\n                                ' select:not([disabled]), textarea:not([disabled]),' +\r\n                                ' button:not([disabled]), iframe, object, embed,' +\r\n                                ' *[tabindex], *[data-cstabindex], *[contenteditable]'\r\n      });\r\n\r\n      if (!options.toolbarItemsMask) {\r\n        options.toolbarItemsMask = new AddPropertiesMenuItemsMask();\r\n      }\r\n\r\n      this.behaviors = _.extend({\r\n        PerfectScrolling: {\r\n          behaviorClass: PerfectScrollingBehavior,\r\n          contentParent: '> .binf-tab-content',\r\n          scrollXMarginOffset: 30,\r\n          // like bottom padding of container, otherwise scrollbar is shown always\r\n          scrollYMarginOffset: 15\r\n        }\r\n      }, this.behaviors);\r\n\r\n      if (options.collection) {\r\n        this.allForms = options.collection;\r\n      } else {\r\n        this.allForms = new MetadataFormCollection(undefined, {\r\n          node: options.node,\r\n          connector: options.node.connector,\r\n          container: options.container,\r\n          action: options.action,\r\n          inheritance: options.inheritance,\r\n          autoreset: true,\r\n          formCollection: options.formCollection\r\n        });\r\n        // Prepare an empty collection to be populated by tabs/forms later\r\n        options.collection = new Backbone.Collection();\r\n      }\r\n\r\n      // have collection to keep track of newly added categories\r\n      if (options.node.newCategories === undefined) {\r\n        options.node.newCategories = new Backbone.Collection();\r\n      }\r\n      if (options.node.removedCategories === undefined) {\r\n        options.node.removedCategories = [];\r\n      }\r\n\r\n      TabPanelView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.widths = [];\r\n\r\n      if (this.options.blockingParentView) {\r\n        BlockingView.delegate(this, this.options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      PubSub.off('pubsub:tab:contents:panel:textarea:scrollupdate');\r\n      this.listenTo(PubSub, 'pubsub:tab:contents:panel:textarea:scrollupdate',\r\n          this._updateToTextAreaScrollbar);\r\n\r\n      this.listenTo(this.allForms, \"request\", this.blockActions)\r\n          .listenTo(this.allForms, \"request\", this._checkFormFetching)\r\n          .listenTo(this.allForms, \"sync\", this._syncForms)\r\n          .listenTo(this.allForms, \"sync\", this.unblockActions)\r\n          .listenTo(this.allForms, \"destroy\", this.unblockActions)\r\n          .listenTo(this.allForms, \"error\", this.unblockActions)\r\n          // If tab panel re-renders itself whe the tab collection changes, it\r\n          // has to prevent tab links and tab content from doing the same,\r\n          // because these two views are destroyed during tab panel re-rendering\r\n          .listenTo(this.collection, \"reset\", this.render)\r\n          .listenTo(options.node, 'change:id', function () {\r\n            if (this.options.formMode !== 'create') {\r\n              this._fetchForms();\r\n            }\r\n          }).listenTo(this, 'reset:switch', this._resetRequiredSwitchView)\r\n          .listenTo(this, \"update:button\", _.bind(function (flag) {\r\n            this.options.metadataView.trigger(\"update:button\", {overlay: flag});\r\n          }, this));\r\n\r\n      // If the collection has been fetched before passing it to the view\r\n      // and the operation is still ongoing, turn on the blocking view right\r\n      // away and wait for the finishing event to turn it off\r\n      if (this.allForms.fetching) {\r\n        this.blockActions();\r\n      }\r\n\r\n      $(window).bind('resize', {view: this}, this._onWindowResize);\r\n      $(window).bind('resize.tableview', {view: this}, this._onWindowResize);\r\n\r\n      // Perform after-rendering steps after blocking view renders inside\r\n      // into this view; it registers for the render event earlier\r\n      this.listenTo(this, 'render', this.onRendered);\r\n      this.listenTo(Backbone, 'metadata:schema:updated', function (model) {\r\n        this.resolveHasRequiredFields(model);\r\n        this.has_required_fields = this.collection\r\n            .filter(\r\n                function (model) {\r\n                  return model.get('required') === true;\r\n                });\r\n        this.tabLinks.trigger('metadata:schema:updated', model);\r\n        this.tabContentHeader.trigger('metadata:schema:updated', model);\r\n      }, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      $(window).unbind('resize', this._onWindowResize);\r\n      $(window).unbind('resize.tableview', this._onWindowResize);\r\n\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      if (this.contentHeaderRegion) {\r\n        this.contentHeaderRegion.empty();\r\n      }\r\n    },\r\n\r\n    _updateScrollbar: function () {\r\n      this.trigger('update:scrollbar');\r\n      this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: 0}, \"fast\");\r\n    },\r\n\r\n    _updateToTextAreaScrollbar: function (data) {\r\n      this.trigger('update:scrollbar');\r\n      var scrollTop = data.$el.offset().top -\r\n                      this.$(this.behaviors.PerfectScrolling.contentParent).offset().top;\r\n      if (this.$(this.behaviors.PerfectScrolling.contentParent).scrollTop() > 0) {\r\n        this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: scrollTop},\r\n            \"fast\");\r\n      }\r\n    },\r\n\r\n    _activateSelectedPropertyTab: function () {\r\n      var selectedProperty = this.options.selectedProperty;\r\n      if (selectedProperty && selectedProperty instanceof Backbone.Model) {\r\n        if (this.collection && this.collection.length > 0) {\r\n          var id = selectedProperty.get('id');  // primary check\r\n          var title = selectedProperty.get('title');  // fallback check\r\n          var i, model, matchIndex = -1;\r\n          for (i = 0; i < this.collection.length; i++) {\r\n            model = this.collection.at(i);\r\n            if (id === model.get('id') || title === model.get('title')) {\r\n              matchIndex = i;\r\n              break;\r\n            }\r\n          }\r\n          if (matchIndex !== -1) {\r\n            this.options.activeTab.set(\"tabIndex\", matchIndex);\r\n            this.tabLinks.children.findByIndex(matchIndex).activate();\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    // public\r\n    render: function () {\r\n      // fetch forms if not done or not failed already\r\n      var dataFetched = true;\r\n      if (!this.allForms.fetched && !this.allForms.error) {\r\n        dataFetched = false;\r\n        if (!this._fetchingForms) {\r\n          this._fetchForms();\r\n        }\r\n      }\r\n      if (dataFetched === false || this._fetchingForms) {\r\n        // wait until data is there\r\n        return this;\r\n      }\r\n\r\n      if (this.collection.length === 1) {\r\n        // only one form given -> remove title\r\n        var singleFormModel = this.collection.first(),\r\n            schema          = _.clone(singleFormModel.get('schema'));\r\n        schema.title = '';\r\n        singleFormModel.set('schema', schema);\r\n      }\r\n\r\n      var self = this;\r\n      this.collection.each(function (model, index) {\r\n        var has_required_fields = self.resolveHasRequiredFields.call(self, model);\r\n        if (has_required_fields) {\r\n          self.hasRequiredField = true;\r\n        }\r\n      });\r\n      _.extend(this, {\r\n        _: _\r\n      });\r\n      // data available -> render\r\n      TabPanelView.prototype.render.apply(this);\r\n      // create add properties + dropdown toolbar\r\n      this._createAddPropertiesView();\r\n      this._initializeOthers();\r\n      return this;\r\n    },\r\n\r\n    resolveHasRequiredFields: function (model) {\r\n      var metadataUtils = new MetadataUtils();\r\n      var has_required_fields = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(\r\n          model.get('options'), model.get('schema'), model.get('id')\r\n      );\r\n      model.set('required', has_required_fields);\r\n      return has_required_fields;\r\n    },\r\n\r\n    onRendered: function () {\r\n      this._setTablinksAttributes();\r\n      // work around for the dialog fade-in delay\r\n      // delay this call a bit since the initial dialog fade in makes the tab to be hidden\r\n      // calling _setTabLinksAttributes() the second time here fixes the dialog fade-in delay\r\n      // but does not have any effect if the first call already works\r\n      setTimeout(_.bind(this._setTablinksAttributes, this), 300);\r\n\r\n      // If tab panel re-renders itself whe the tab collection changes, it\r\n      // has to prevent tab links and tab content from doing the same,\r\n      // because these two views are destroyed during tab panel re-rendering\r\n      this.tabLinks.stopListening(this.collection, 'reset');\r\n      this.tabContent.stopListening(this.collection, 'reset');\r\n      if (this.tabContentHeader) { // clean-up completely tab content's header if it not yet.\r\n        this.tabContentHeader.destroy();\r\n        this.$el.find(\".csui-tab-contents-header-wrapper\").remove();\r\n      }\r\n\r\n      this.listenTo(this.tabLinks, 'childview:delete:tab', _.bind(this._onDeleteCategory, this));\r\n\r\n      // Alpaca slow rendering work-around: hide all views then block and\r\n      // wait until all forms are rendered then show view and unblock\r\n      this.tabLinks.$el.addClass('binf-hidden');\r\n      this.tabContent.$el.addClass('binf-hidden');\r\n      this.blockActions();\r\n      this.updateTitle = true;\r\n      var allFormsRendered = [],\r\n          self             = this;\r\n      this.tabContent.children.each(_.bind(function (childView) {\r\n        var formRendered = $.Deferred();\r\n        allFormsRendered.push(formRendered.promise());\r\n        var childViewContent = childView.content;\r\n        if (childViewContent instanceof FormView && !childViewContent.isRenderFinished()) {\r\n          this.listenTo(childViewContent, 'render:form', function (childViewContent) {\r\n            var formHtmlRegion = !!childViewContent.$el.find(\".cs-form-singlecolumn\") ?\r\n                                 childViewContent.$el.find(\".cs-form-singlecolumn\") :\r\n                                 childViewContent.$el.find(\".cs-form-doublecolumn\");\r\n            if (!!formHtmlRegion && formHtmlRegion.length > 0) {\r\n              if (!!formHtmlRegion.html()) {\r\n                formRendered.resolve();\r\n              }\r\n            } else {\r\n              formRendered.resolve();\r\n            }\r\n          });\r\n        } else {\r\n          formRendered.resolve();\r\n        }\r\n      }, this));\r\n      $.when.apply($, allFormsRendered).done(function () {\r\n        self.unblockActions();\r\n        self.tabLinks.$el.removeClass('binf-hidden');\r\n\r\n        // Begin: tab contents header which contains tab title and required field view.\r\n        var canHaveTabContentHeader = !!self.collection.findWhere({id: 'general'});\r\n        if (canHaveTabContentHeader) {\r\n          var objPubSubId = (self.options.node instanceof VersionModel ? 'v' : 'p');\r\n          objPubSubId = 'pubsub:tab:contents:header:view:switch:' + objPubSubId +\r\n                        self.options.node.get('id');\r\n          PubSub.off(objPubSubId);\r\n          self.listenTo(PubSub, objPubSubId, self._onRequiredSwitch);\r\n\r\n          self.tabContent.$el.before(\"<div class='csui-tab-contents-header-wrapper'></div>\");\r\n          self.contentHeaderRegion = new Marionette.Region({\r\n            el: self.$el.find('.csui-tab-contents-header-wrapper')\r\n          });\r\n          self.tabContentHeader = new TabContentHeaderView(self.options);\r\n          self.contentHeaderRegion.show(self.tabContentHeader);\r\n        }\r\n        // End: tab contents header which contains tab title and required field view.\r\n\r\n        if (!!self.tabContentHeader && !!self.options.node.collection.requireSwitched &&\r\n            !!self.hasRequiredField) {\r\n          self._hideNotRequiredFormFields(true);\r\n        }\r\n        self.tabContent.$el.removeClass('binf-hidden');\r\n\r\n        // TODO: Find out, how the rightToolbar is added from outside;\r\n        // it does not happen if the form collection is empty\r\n        if (self.addPropertiesView && self.rightToolbar) {\r\n          var apv = self.addPropertiesView.render();\r\n          Marionette.triggerMethodOn(apv, 'before:show', apv, self);\r\n          self.rightToolbar.append(apv.el);\r\n          Marionette.triggerMethodOn(apv, 'show', apv, self);\r\n          self.allFormsRendered = true;\r\n        }\r\n\r\n        // find out the first visible tab and make it active.\r\n        // Iterate over tab colleciton instead of childer where order is not guaranteed.\r\n        var firstVisibleTabLink,\r\n            firstVisibleTab = self.tabLinks.collection.find(function (tabModel) {\r\n              var tabLink = self.tabLinks.children.findByModel(tabModel);\r\n              return !tabLink.$el.hasClass('binf-hidden');\r\n            });\r\n        if (firstVisibleTab &&\r\n            !(firstVisibleTabLink = self.tabLinks.children.findByModel(\r\n                firstVisibleTab)).isActive()) {\r\n          firstVisibleTabLink.activate();\r\n        }\r\n\r\n        self._initializeOthers();\r\n        self.triggerMethod('render:forms', this);\r\n\r\n        // iPad needs a little timeOut\r\n        setTimeout(function () {\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n        }, 300);\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n\r\n        if (self.options.formMode !== \"create\") {\r\n          self.setFocus();\r\n        }\r\n        self.trigger('update:scrollbar');\r\n        if (self.updateTitle) {\r\n          var objPubSubTabId = (self.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                               self.options.node.get('id');\r\n          objPubSubTabId = 'pubsub:tab:contents:header:view:change:tab:title:' +\r\n                           objPubSubTabId;\r\n          PubSub.trigger(objPubSubTabId, firstVisibleTabLink.el.innerText);\r\n        }\r\n\r\n        // check options.selectedProperty and activate the tab if needed\r\n        self._activateSelectedPropertyTab();\r\n      });\r\n\r\n      if (this.$el && !this.$el.is(\":visible\")) {\r\n        this.updateTitle = false;\r\n      }\r\n      this.childWithBlockingView &&\r\n      this.childWithBlockingView.metadataHeaderView.metadataItemNameView.ui.toggleIcon.attr(\r\n          'tabindex', 0);\r\n    },\r\n\r\n    onShow: function () {\r\n    },\r\n\r\n    setFocus: function () {\r\n      // TODO: check if we want to have this\r\n      // set focus to first form\r\n      //var firstTabContentView = this.tabContent.children[0];\r\n      //if( firstFormView) {\r\n      //  firstTabContentView.content.setFocus();\r\n      //}\r\n    },\r\n\r\n    _computeTablinkWidth: function () {\r\n      var tabLinksBar = this.$el.find('.tab-links-bar');\r\n      var tabLinks = tabLinksBar && tabLinksBar.find('ul > li');\r\n      tabLinksBar && tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n\r\n      // compute only when there is more than one tab (e.g. General + cats/rms/etc.)\r\n      if (tabLinksBar && tabLinksBar.length > 0 && tabLinks && tabLinks.length > 1) {\r\n        var tabLinksBarWidth = $(tabLinksBar[0]).width();\r\n        var totalTablinksWidth = 0;\r\n        var i, numTabs = 0;\r\n        for (i = 0; i < tabLinks.length; i++) {\r\n          var $tabLink = $(tabLinks[i]);\r\n          if (!($tabLink.hasClass('hidden-by-switch'))) {\r\n            totalTablinksWidth += $tabLink.width();\r\n            numTabs++;\r\n          }\r\n        }\r\n        var oneTablinkWidth = numTabs > 0 ? (totalTablinksWidth / numTabs) : $(tabLinks[0]).width();\r\n\r\n        // if this total width check values are still smaller than the tabLinks bar width,\r\n        // then increase the tabLink width\r\n        var totalWidthCheck1 = totalTablinksWidth * 2;  // twice smaller\r\n        var totalWidthCheck2 = totalTablinksWidth + (1.3 * oneTablinkWidth);  // a little smaller\r\n        if (tabLinksBarWidth > totalWidthCheck1) {\r\n          tabLinksBar.addClass('very-wide-tablink');\r\n        } else if (tabLinksBarWidth > totalWidthCheck2) {\r\n          tabLinksBar.addClass('wide-tablink');\r\n        } else {\r\n          tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n        }\r\n      }\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      // delay this a bit since the fade-in may make the tabs to be hidden\r\n      setTimeout(_.bind(function () {\r\n        this._setTablinksAttributes();\r\n        this._enableToolbarState();\r\n      }, this), 300);\r\n    },\r\n\r\n    // public: validate all Alpaca forms\r\n    validateForms: function () {\r\n      var allFormsValid = true;\r\n      if (!!this.allFormsRendered) {\r\n        this.tabContent.children.each(function (tab) {\r\n          var isCurrentFormValid = tab.content.validate();\r\n          allFormsValid = allFormsValid && isCurrentFormValid;\r\n        });\r\n        allFormsValid ? this._hideValidationError() : this._showValidationError();\r\n        return allFormsValid;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    // public: get values from all Alpaca forms\r\n    getFormsValues: function () {\r\n      var formValues = {},\r\n          formFieldValues, formFieldRoles, roles, role;\r\n\r\n      this.tabContent.children.each(function (tab) {\r\n        var values   = tab.content.getValues(),\r\n            roleName = tab.content.model.get(\"role_name\"),\r\n            category, catId;\r\n\r\n        if (values) {\r\n          if (roleName) {\r\n            roles = formValues.roles || (formValues.roles = {});\r\n            role = roles[roleName] || (roles[roleName] = {});\r\n            if (roleName === 'categories') {\r\n              // For categories, merge the properties to the\r\n              // roles.categories.<category_id> object\r\n              catId = tab.model.get(\"id\").toString();\r\n              category = role[catId] || (role[catId] = {});\r\n              // when attributes are not set, the server deletes\r\n              // the category unless it is set to null\r\n              if (_.isEmpty(values)) {\r\n                category = null;\r\n              } else {\r\n                _.extend(category, values);\r\n              }\r\n            } else {\r\n              // With a role defined, merge the properties to the\r\n              // roles.<role_name> object\r\n              _.extend(role, values);\r\n            }\r\n          } else {\r\n            // With no role defined, merge the properties to the root\r\n            // object literal with the general properties\r\n            _.extend(formValues, values);\r\n          }\r\n        }\r\n      });\r\n\r\n      // add the deleted categories\r\n      if (this.options.node.removedCategories.length > 0) {\r\n        roles = formValues.roles || (formValues.roles = {});\r\n        role = roles['categories'] || (roles['categories'] = {});\r\n        _.each(this.options.node.removedCategories, function (removedCatId) {\r\n          role[removedCatId] || (role[removedCatId] = {});\r\n        });\r\n      }\r\n\r\n      var generalTab = this.tabContent.children.find(function (tab) {\r\n        return !!tab.content.getGeneralFormFieldValues;\r\n      });\r\n      if (generalTab) {\r\n        formFieldValues = generalTab.content.getGeneralFormFieldValues();\r\n        // Do not make a full deep merge, but ensure, that we merge not\r\n        // only properties on the root (general) level, but if there are\r\n        // roles available, also on every role level\r\n        formFieldRoles = formFieldValues.roles || {};\r\n        delete formFieldValues.roles;\r\n        _.extend(formValues, formFieldValues);\r\n        _.each(_.keys(formFieldRoles), function (roleName) {\r\n          roles = formValues.roles || (formValues.roles = {});\r\n          role = roles[roleName] || (roles[roleName] = {});\r\n          _.extend(role, formFieldRoles[roleName]);\r\n        });\r\n      }\r\n\r\n      return formValues;\r\n    },\r\n\r\n    _addValidationErrorElement: function () {\r\n      if (this.$el.find('.metadata-validation-error').length === 0) {\r\n        this.tabLinks.$el.after('<div class=\"metadata-validation-error\"></div>');\r\n        this.validationErrorElem = $(this.$el.find('.metadata-validation-error')[0]);\r\n        this.validationErrorElem.append(\r\n            '<span class=\"icon notification_error cs-close-error-icon\" alt=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\" title=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\"></span>');\r\n        this.validationErrorElem.append('<span class=\"validation-error-message\">' +\r\n                                        lang.formValidationErrorMessage + '</span>');\r\n        this.validationErrorElem.hide();\r\n\r\n        var closeIcon = $(this.$el.find('.metadata-validation-error .cs-close-error-icon')[0]);\r\n        closeIcon && closeIcon.on('click', _.bind(function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this._hideValidationError();\r\n        }, this));\r\n      }\r\n    },\r\n\r\n    _showValidationError: function () {\r\n      if (this.validationErrorElem === undefined) {\r\n        this._addValidationErrorElement();\r\n      }\r\n      if (this.tabContent.$el.find('.alpaca-message-notOptional').length > 0) {\r\n        this.tabContent && this.tabContent.$el.addClass('show-validation-error');\r\n        this.contentHeaderRegion && this.contentHeaderRegion.$el.addClass('show-validation-error');\r\n        this.validationErrorElem && this.validationErrorElem.show();\r\n      } else {\r\n        this._hideValidationError();\r\n      }\r\n    },\r\n\r\n    _hideValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      this.validationErrorElem && this.validationErrorElem.hide();\r\n    },\r\n\r\n    _clearValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      if (this.validationErrorElem) {\r\n        this.validationErrorElem.remove();\r\n        delete this.validationErrorElem;\r\n      }\r\n    },\r\n\r\n    _checkFormFetching: function () {\r\n      this._fetchingForms = true;\r\n    },\r\n\r\n    _fetchForms: function () {\r\n      return this.allForms.fetch();\r\n    },\r\n\r\n    _syncForms: function () {\r\n      var self = this;\r\n      this.blockActions();\r\n      this._clearValidationError();\r\n      return this._loadPanels()\r\n          .then(_.bind(this._loadGeneralFormFields, this)).then(\r\n              _.bind(this._loadGeneralActionFields, this))\r\n          .always(function () {\r\n            self.unblockActions();\r\n            self._fetchingForms = false;\r\n          })\r\n          .then(function () {\r\n            var panelModels = _.pluck(self._propertyPanels, 'model'),\r\n                models      = self.allForms.where({role_name: 'categories'});\r\n            self.panelModelsLength = panelModels.length;\r\n            // add back the newly added categories  that have not been saved to server\r\n            if (self.options.node.newCategories.models.length > 0) {\r\n              models = _.union(models, self.options.node.newCategories.models);\r\n            }\r\n            var categoryModels = _.sortBy(models,\r\n                function (model) {return model.attributes.title.toLowerCase()});\r\n            models = panelModels.concat(categoryModels);\r\n            self._normalizeModels(models);\r\n            self.collection.reset(models);\r\n            // check categories actions\r\n            self._checkCategoriesActions();\r\n          })\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message, lang.getPropertyPanelsFailTitle);\r\n          });\r\n    },\r\n\r\n    _loadPanels: function () {\r\n      var self = this,\r\n          methodName, parameters;\r\n      if (this.options.action === 'create') {\r\n        methodName = 'getPropertyPanelsForCreate';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'copy') {\r\n        methodName = 'getPropertyPanelsForCopy';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'move') {\r\n        methodName = 'getPropertyPanelsForMove';\r\n        parameters = [{forms: this.allForms}];\r\n      } else { // update\r\n        methodName = 'getPropertyPanels';\r\n        // There are no pre-fetched forms for the update action;\r\n        // the 'v1/forms/info' has been abandoned, unfortunately,\r\n        // thus every panel has to fetch its own model\r\n      }\r\n      var promises = metadataPropertyPanels.chain()\r\n          .map(function (panel) {\r\n            var Controller        = panel.get('controller'),\r\n                controllerOptions = panel.get('controllerOptions'),\r\n                controller        = new Controller(_.extend({\r\n                  context: self.options.context,\r\n                  model: self.options.node\r\n                }, controllerOptions)),\r\n                method            = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            self._propertyPanels = _.flatten(arguments);\r\n          });\r\n    },\r\n\r\n    _loadGeneralFormFields: function () {\r\n      var self = this;\r\n      return GeneralFormFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalFormFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _loadGeneralActionFields: function () {\r\n      var self = this;\r\n      return GeneralActionFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalActionFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _normalizeModels: function (models) {\r\n      _.each(models, function (model) {\r\n        // If the view shows a form and the form has a title, which is\r\n        // not empty, this title should be used for the tab too\r\n        if (model instanceof FormModel) {\r\n          var schema = model.get('schema');\r\n          if (schema && schema.title) {\r\n            model.set('title', schema.title);\r\n          }\r\n        }\r\n        // Make sure, that the model has always an ID.  The scroll-spy\r\n        // used within the tab control puts these IDs to the a@href on\r\n        // the  tab links.  It could not recognize the particular link\r\n        // to navigate to otherwise.\r\n        if (model.get('id') == null) {\r\n          model.set('id', model.cid);\r\n        }\r\n        // When models are added to a collection, their model.collection\r\n        // property will not be updated, if it was already set - if they\r\n        // were already added to some other collection earlier.  Here,\r\n        // we're creating a new collection of property panel models, which\r\n        // should own them - they have to be removed from their previous\r\n        // collections, which fetched them.\r\n        if (model.collection) {\r\n          model.collection.remove(model);\r\n        }\r\n      });\r\n    },\r\n\r\n    // private\r\n    _checkCategoriesActions: function () {\r\n      // get category actions\r\n      // talking to the server developer, only need to check available actions of one category\r\n      var categoryModels = this.options.collection.where({role_name: 'categories'});\r\n      if (categoryModels.length > 0) {\r\n        var catId           = categoryModels[0].get('categoryId'),\r\n            categoryActions = new AppliedCategoryActionsCollection(undefined, {\r\n              node: this.options.node,\r\n              action: this.options.action,\r\n              urlResource: 'categories/' + catId + '/actions',\r\n              autofetch: true,\r\n              autoreset: true\r\n            });\r\n        this.blockActions();\r\n        categoryActions.fetch()\r\n            .done(_.bind(function () {\r\n              if (categoryActions.length > 0 &&\r\n                  categoryActions.at(0).get(\"categories_remove\") &&\r\n                  categoryActions.at(0).get(\"categories_remove\").length > 0) {\r\n                _.each(categoryModels, function (cat) {\r\n                  cat.attributes['removeable'] = true;\r\n                  cat.trigger('action:updated');\r\n                });\r\n              }\r\n              this.unblockActions();\r\n              setTimeout(_.bind(function () {\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:render');\r\n                this.$el.trigger(event);\r\n              }, this), 300);\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              var serverError = this._getRespError(resp);\r\n              var title = lang.getCategoryActionsFailTitle;\r\n              var message = _.str.sformat(lang.getActionsForACategoryFailMessage,\r\n                  catId, this.options.node.get(\"id\"), serverError);\r\n              ModalAlert.showError(message, title);\r\n              this.unblockActions();\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _initializeOthers: function () {\r\n      var options = {\r\n        gotoPreviousTooltip: lang.gotoPreviousCategoryTooltip,\r\n        gotoNextTooltip: lang.gotoNextCategoryTooltip\r\n      };\r\n      this._initializeToolbars(options);\r\n      this._listenToTabEvent();\r\n\r\n      // delay this a bit since the initial dialog fade in makes the tab to be hidden\r\n      setTimeout(_.bind(this._enableToolbarState, this), 300);\r\n    },\r\n\r\n    _onWindowResize: function (event) {\r\n      if (event && event.data && event.data.view) {\r\n        var self = event.data.view;\r\n        // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n        if (self.resizeTimer) {\r\n          clearTimeout(self.resizeTimer);\r\n        }\r\n        self.resizeTimer = setTimeout(function () {\r\n          self._setTablinksAttributes();\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n          self._updateScrollbar();\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    _setTablinksAttributes: function () {\r\n      var i, limit = 5;\r\n      var siblings, parent = this.$el.parent();\r\n      for (i = 0; i < limit; i++) {\r\n        siblings = parent.siblings('.cs-tab-links.binf-dropdown');\r\n        if (siblings.length > 0) {\r\n          var width = $(siblings[0]).width();\r\n          if (width > 15) {\r\n            var newWidth    = width - 12,\r\n                widForEle   = newWidth + \"px\",\r\n                dirForEle   = this.rtlEnabled ? \"margin-right\" : \"margin-left\",\r\n                tabLinksEle = this.$el.find('.tab-links');\r\n\r\n            tabLinksEle.css({\r\n              \"width\": function () {\r\n                return \"calc(100% - \" + widForEle + \")\";\r\n              }\r\n            });\r\n\r\n            if (tabLinksEle.length) {\r\n              tabLinksEle.css(dirForEle, widForEle);\r\n              var tabLinksEleWidth = parseInt(tabLinksEle.css('width').replace('px', ''), 10);\r\n              if (tabLinksEleWidth > 20 && tabLinksEleWidth < 250) {\r\n                tabLinksEle.addClass('csui-mini-tablinks');\r\n              } else {\r\n                tabLinksEle.removeClass('csui-mini-tablinks');\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        parent = parent.parent();\r\n      }\r\n    },\r\n\r\n    _createAddPropertiesView: function () {\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      var options = _.extend({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMask: this.options.toolbarItemsMask,\r\n        parentView: this,\r\n        blockingParentView: this.options.blockingParentView,\r\n        addPropertiesCallback: this.addPropertiesCallback,\r\n        suppressAddProperties: this.options.suppressAddProperties\r\n      }, this.options);\r\n      this.addPropertiesView = new AddPropertiesDropdownMenuView(options);\r\n      this.propagateEventsToViews(this.addPropertiesView);\r\n    },\r\n\r\n    addCatAt: function (models, respModel) {\r\n      var index = this.panelModelsLength;\r\n      for (var i = index; i < models.length; i++) {\r\n        if (models[i].get('title').toLowerCase() > respModel.get('title').toLowerCase()) {\r\n          index = i;\r\n          break;\r\n        }\r\n        index += 1;\r\n      }\r\n      return index;\r\n    },\r\n\r\n    addPropertiesCallback: function (catModel) {\r\n      // keep a list of newly added categories\r\n      if (this.options.action) {\r\n        this.options.node.newCategories.add(catModel);\r\n      }\r\n      var index = this.options.collection.models.length === 1 ? 1 :\r\n                  this.addCatAt(this.options.collection.models, catModel);\r\n\r\n      this.doAddModelProperties(catModel, index);\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * Adds provided model's form and handles and fires respective adjustments and events.\r\n     */\r\n    doAddModelProperties: function doAddModelProperties(model, index, additionalAddOpts) {\r\n      var self = this;\r\n      this.tabLinks.$el.find(\".binf-active\").removeClass(\"binf-active\")\r\n          .removeAttr('aria-selected');\r\n\r\n      function tabContentRendered() {\r\n        // Refresh tab indexes\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n        // Scroll and activate Tab\r\n        self._autoScrollTabTo(index, {animationOff: true})\r\n            .done(function () {\r\n              var newTab = self.tabLinks.children.findByModel(\r\n                  self.options.collection.findWhere({id: model.get('id')}));\r\n              newTab.activate();\r\n            });\r\n      }\r\n\r\n      // Add model to collection to render form\r\n      this.options.collection.add(model, _.extend(additionalAddOpts || {}, {at: index}));\r\n      model.collection = this.options.collection;\r\n\r\n      this._listenToTabIdEvent(index);\r\n\r\n      var formContent = this.tabContent.children.findByModel(\r\n          this.options.collection.findWhere({id: model.get('id')})),\r\n          newFormView = formContent && formContent.content;\r\n      if (newFormView !== undefined) {\r\n        var isRendered = (newFormView instanceof FormView) ? newFormView.isRenderFinished() :\r\n                         newFormView._isRendered;\r\n        if (isRendered) {\r\n          // Content rendred by now.\r\n          tabContentRendered();\r\n        } else {\r\n          var renderEvent = (newFormView instanceof FormView) ? 'render:form' : 'dom:refresh';\r\n          this.listenToOnce(newFormView, renderEvent, _.bind(function () {\r\n            this.trigger(\"update:button\", false);\r\n            tabContentRendered();\r\n          }, this));\r\n        }\r\n        // Scroll to current rendered Tab. \r\n        // This is to make necessary adjustment to TabLinks scroll (Previous, Next)\r\n        this._autoScrollTabTo(index, {animationOff: true});\r\n      } else {\r\n        tabContentRendered();\r\n      }\r\n\r\n      this._computeTablinkWidth();\r\n      this._enableToolbarState();\r\n      this.trigger('reset:switch');\r\n    },\r\n\r\n    _resetRequiredSwitchView: function () {\r\n      PubSub.trigger('pubsub:header:rightbar:view:change:switch:status', 'reset');\r\n    },\r\n\r\n    // private\r\n    _onDeleteCategory: function (tabLink) {\r\n      this.tabToDelete = tabLink;\r\n      var categoryName = tabLink.model.get(\"title\");\r\n      var title = lang.removeCategoryWarningTitle;\r\n      var message = categoryName ? _.str.sformat(lang.removeCategoryWarningMessage, categoryName) :\r\n                    lang.removeCategoryWarningMessage;\r\n      ModalAlert\r\n          .confirmWarning(message, title)\r\n          .done(_.bind(this._removeCategory, this))\r\n          .fail(_.bind(function (err) {\r\n            if (!err) {\r\n              this.tabToDelete.$el.find('a').focus();\r\n            }\r\n          }, this));\r\n    },\r\n\r\n    // private\r\n    _removeCategory: function () {\r\n      if (this.tabToDelete) {\r\n        var id = this.tabToDelete.model.get('id');\r\n        id = _.isNumber(id) ? id.toString() : id;\r\n\r\n        // with add item metadata, the new node has not been created on the server yet\r\n        if (this.options.node.get(\"id\") === undefined || this.options.action) {\r\n          this._removeTab();\r\n          if (this.options.node.newCategories.remove(id) === undefined) {\r\n            this.options.node.removedCategories.push(id);\r\n          }\r\n          return;\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.options.node.urlBase(), 'categories/' + id);\r\n        var options = {\r\n          type: 'DELETE',\r\n          url: fullUrl\r\n        };\r\n        this.options.node.connector && this.options.node.connector.extendAjaxOptions(options);\r\n\r\n        this.blockActions();\r\n        $.ajax(options)\r\n            .done(_.bind(function () {\r\n              this.unblockActions();\r\n              this._removeTab();\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              this.unblockActions();\r\n              var serverError = this._getRespError(resp);\r\n              var categoryName = this.tabToDelete.model.get(\"title\");\r\n              var title = lang.removeCategoryFailMessageTitle;\r\n              var message = _.str.sformat(lang.removeCategoryFailMessage, categoryName,\r\n                  serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _removeTab: function () {\r\n      if (this.tabToDelete.$el.hasClass('binf-active')) {\r\n        var previousIndex = this.tabToDelete._index - 1;\r\n        var previousTab = this.tabLinks.children.findByIndex(previousIndex);\r\n        this._autoScrollTabTo(previousIndex, {animationOff: true})\r\n            .done(function () {\r\n              previousTab && previousTab.activate();\r\n            });\r\n      }\r\n      this.options.collection.remove(this.tabToDelete.model);\r\n      this.trigger('reset:switch');\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _onRequiredSwitch: function (args) {\r\n      Backbone.trigger('closeToggleAction');\r\n      this._updateScrollbar();\r\n      this._hideNotRequiredFormFields(args.on, args);\r\n      return false;\r\n    },\r\n\r\n    _hideNotRequiredFormFields: function (hide, args) {\r\n      this.tabContent.children.each(function (tabContent) {\r\n        // Not every tab panel has to be a form, or implemented by FormView\r\n        if (tabContent.content.hideNotRequired) {\r\n          var appliedToWholeForm = tabContent.content.hideNotRequired(hide);\r\n          var tabLink = this.tabLinks.children.findByModel(tabContent.model);\r\n          // If the whole form has been hidden, hide the tab content with\r\n          // optional border lines and the tab link at the top too\r\n          if (appliedToWholeForm) {\r\n            var method = hide ? 'addClass' : 'removeClass';\r\n            tabContent.$el[method]('binf-hidden hidden-by-switch');\r\n            if (hide) {\r\n              this._hideTabLinkByRequiredSwitch(tabLink.$el);\r\n            } else {\r\n              this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n            }\r\n          } else {\r\n            // The form has some required fields, make sure the tabLink is visible\r\n            this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n          }\r\n        }\r\n      }, this);\r\n      this.tabLinks.$el.find(\".tab-links-first-visible\").removeClass(\"tab-links-first-visible\");\r\n      this.tabContent.onReorder();\r\n      // Ensure, that another tab gets activated, if the currently active\r\n      // one was hidden, and scroll to the top to see it.\r\n      /* var firstVisibleTabLink = this.tabLinks.children.find(function (tabLink) {\r\n         return !tabLink.$el.hasClass('binf-hidden');\r\n       });*/\r\n      var firstVisibleTabLink,\r\n          tabLinkViews      = this.tabLinks.children._views,\r\n          keysSortedByIndex = Object.keys(tabLinkViews).sort(\r\n              function (view1, view2) {\r\n                return tabLinkViews[view1]._index - tabLinkViews[view2]._index;\r\n              });\r\n      for (var index = 0; index < keysSortedByIndex.length; index++) {\r\n        if (!this.tabLinks.children._views[keysSortedByIndex[index]].$el.hasClass('binf-hidden')) {\r\n          firstVisibleTabLink = this.tabLinks.children._views[keysSortedByIndex[index]];\r\n          break;\r\n        }\r\n      }\r\n      if (!!firstVisibleTabLink) {\r\n        firstVisibleTabLink.$el.addClass(\"tab-links-first-visible\");\r\n      }\r\n      // FIXME: If the very first tab (General) is hidden, this scrolls right\r\n      // to the second one.  The scrollbar thumb stays a little above the top.\r\n      // If it is moved really the the top, no tab link will be emphasized as\r\n      // active one.  Hiding the tab links may need some cooperation from the\r\n      // scroll-spy to skip the hidden tab links.\r\n      if (firstVisibleTabLink && !firstVisibleTabLink.isActive()) {\r\n        firstVisibleTabLink.activate();\r\n      }\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n        if (!!args) { // executes only when coming thr' event driven\r\n          this.currentTabPosition = 1;\r\n        }\r\n\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesViewImpl.prototype, TabLinksScrollMixin);\r\n\r\n  return MetadataPropertiesViewImpl;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.properties.view',['csui/widgets/metadata/impl/metadata.properties.view',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (MetadataPropertiesViewImpl) {\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  // This class is a clean and easy-to-read wrapper to expose as a public interface.\r\n  // See the implementation impl/metadata.properties.view.js for more available public methods.\r\n  //\r\n  var MetadataPropertiesView = MetadataPropertiesViewImpl.extend({\r\n\r\n    constructor: function MetadataPropertiesView(options) {\r\n      MetadataPropertiesViewImpl.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    validateForms: function () {\r\n      return MetadataPropertiesViewImpl.prototype.validateForms.apply(this, arguments);\r\n    },\r\n\r\n    getFormsValues: function () {\r\n      return MetadataPropertiesViewImpl.prototype.getFormsValues.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.content.view',['csui/lib/underscore', 'csui/lib/marionette', 'csui/utils/nodesprites',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin'\r\n], function (_, Marionette, NodeSpriteCollection, MetadataPropertiesView,\r\n    ViewEventsPropagationMixin) {\r\n\r\n  var MetadataPropertiesContentView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-inner-wrapper',\r\n\r\n    constructor: function MetadataPropertiesContentView(options) {\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty,\r\n        notTabableRegion: true\r\n      };\r\n      this.childTabPanelView = new MetadataPropertiesView(tabOptions);\r\n\r\n      this.propagateEventsToViews(this.childTabPanelView);\r\n    },\r\n\r\n    render: function () {\r\n      this._ensureViewIsIntact();\r\n      this.triggerMethod('before:render', this);\r\n\r\n      var mdv = this.childTabPanelView.render();\r\n\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n      this.$el.append(mdv.el);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n\r\n      this.triggerMethod('render', this);\r\n      return this;\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.childTabPanelView.destroy();\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      this.childTabPanelView && this.childTabPanelView.triggerMethod('panel:activated');\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesContentView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataPropertiesContentView;\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/versions.default.action.items',[\r\n  'csui/lib/underscore', 'csui/models/actionitems',\r\n  // Load and register external default action rules\r\n  'csui-ext!csui/utils/versions.default.action.items'\r\n], function (_, ActionItemCollection, extraActions) {\r\n  'use strict';\r\n\r\n  var defaultActionItems = new ActionItemCollection([\r\n    // Default for versions is always version open command\r\n    {\r\n      type: 144,\r\n      signature: 'VersionOpen',\r\n      sequence: 10\r\n    }\r\n  ]);\r\n\r\n  if (extraActions) {\r\n    defaultActionItems.add(_.flatten(extraActions, true));\r\n  }\r\n\r\n  return defaultActionItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.columns',[\"csui/lib/backbone\", 'i18n!csui/widgets/metadata/impl/nls/lang'],\r\n    function (Backbone, lang) {\r\n\r\n      var TableColumnModel = Backbone.Model.extend({\r\n\r\n        idAttribute: \"key\",\r\n\r\n        defaults: {\r\n          key: null,  // key from the resource definitions\r\n          sequence: 0 // smaller number moves the column to the front\r\n        }\r\n\r\n      });\r\n\r\n      var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n        model: TableColumnModel,\r\n        comparator: \"sequence\",\r\n\r\n        getColumnKeys: function () {\r\n          return this.pluck('key');\r\n        },\r\n\r\n        deepClone: function () {\r\n          return new TableColumnCollection(\r\n              this.map(function (column) {\r\n                return column.attributes;\r\n              }));\r\n        }\r\n      });\r\n\r\n      // Fixed (system) columns have sequence number < 100, dynamic columns\r\n      // have sequence number > 1000\r\n\r\n      var tableColumns = new TableColumnCollection([\r\n        {\r\n          key: 'version_number_name',\r\n          align: 'center',\r\n          title: lang.versionColumnVersionNumberTitle,\r\n          sequence: 10\r\n        },\r\n        {\r\n          key: 'name',\r\n          sequence: 20\r\n        },\r\n        {\r\n          key: 'create_date',\r\n          sequence: 30\r\n        },\r\n        {\r\n          key: 'owner_id',\r\n          sequence: 40\r\n        },\r\n        {\r\n          key: 'file_size',\r\n          align: 'right',\r\n          title: lang.versionColumnSizeTitle,\r\n          sequence: 50\r\n        }\r\n      ]);\r\n\r\n      return tableColumns;\r\n\r\n    });\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask',\r\n  // Load and external tool item masks\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask, dynamicMasks) {\r\n  'use strict';\r\n  dynamicMasks || (dynamicMasks = []);\r\n  var VersionsToolbarItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function VersionsToolbarItemsMask(options) {\r\n      var config     = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n      this.context = options.context;\r\n      this.node = !!options.node ? options.node : options.model;\r\n      this._updateMask();\r\n      this.listenTo(this.node, 'change:id', this._updateMask);\r\n    },\r\n    _updateMask: function () {\r\n      var modified = this.restoreMask({silent: true});\r\n      dynamicMasks.forEach(function (mask) {\r\n        mask = mask({\r\n          context: this.context,\r\n          node: this.node\r\n        });\r\n        if (mask) {\r\n          modified = this.extendMask(mask, {silent: true}) || modified;\r\n        }\r\n      }, this);\r\n      if (modified) {\r\n        this.trigger('update', this);\r\n      }\r\n    }\r\n  });\r\n\r\n  return VersionsToolbarItemsMask;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/versions/metadata.versions',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-metadata-versions\\\">\\r\\n  <div class=\\\"csui-metadata-versions-rowselection-toolbar-view\\\"></div>\\r\\n  <div class=\\\"csui-table-view\\\"></div>\\r\\n  <div class=\\\"csui-pagination-view\\\"></div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_versions_metadata.versions', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/versions/metadata.versions',[],function(){});\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/utils/base',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/toolbar/toolitems.filtered.model',\r\n  'csui/controls/toolbar/toolbar.view',\r\n  'csui/controls/toolbar/delayed.toolbar.view',\r\n  'csui/controls/table/table.view',\r\n  'csui/controls/pagination/nodespagination.view',\r\n  'csui/utils/versions.default.action.items',\r\n  'csui/utils/commands/versions',\r\n  'csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/models/columns',\r\n  'csui/models/nodeversions',\r\n  'csui/models/version',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.columns',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'hbs!csui/widgets/metadata/impl/versions/metadata.versions',\r\n  'css!csui/widgets/metadata/impl/versions/metadata.versions'\r\n], function (module, $, _, Backbone, Marionette, base,\r\n    GlobalMessage,\r\n    LayoutViewEventsPropagationMixin,\r\n    FilteredToolItemsCollection,\r\n    ToolbarView,\r\n    DelayedToolbarView,\r\n    TableView,\r\n    PaginationView,\r\n    defaultActionItems,\r\n    commands,\r\n    TableRowSelectionToolbarView,\r\n    ToolbarCommandController,\r\n    NodeCollection,\r\n    NodeColumnCollection,\r\n    NodeVersionCollection,\r\n    VersionModel,\r\n    metadataVersionsColumns,\r\n    toolbarItems,\r\n    VersionsToolbarItemsMask,\r\n    template) {\r\n  'use strict';\r\n\r\n  var accessibleTable = /\\baccessibleTable\\b(?:=([^&]*)?)?/i.exec(location.search);\r\n  accessibleTable = accessibleTable && accessibleTable[1] !== 'false';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30,\r\n    defaultPageSizes: [30, 50, 100],\r\n    enabled: true\r\n  });\r\n\r\n  var MetadataVersionsTableView = Marionette.LayoutView.extend({\r\n\r\n    className: function () {\r\n      var className = 'metadata-inner-wrapper';\r\n      if (accessibleTable) {\r\n        className += ' csui-no-animation';\r\n      }\r\n      return className;\r\n    },\r\n    template: template,\r\n\r\n    ui: {\r\n      tableRowSelectionToolbarView: '.csui-metadata-versions-rowselection-toolbar-view',\r\n      tableView: '.csui-table-view',\r\n      childContainer: '.csui-table-view',\r\n      paginationView: '.csui-pagination-view'\r\n    },\r\n\r\n    regions: {\r\n      tableRowSelectionToolbarRegion: '@ui.tableRowSelectionToolbarView',\r\n      tableRegion: '@ui.tableView',\r\n      paginationRegion: '@ui.paginationView'\r\n    },\r\n\r\n    constructor: function MetadataVersionsTableView(options) {\r\n      this.commands = options.commands || commands;\r\n      _.defaults(options, {\r\n        pageSize: config.defaultPageSize,\r\n        ddItemsList: config.defaultPageSizes,\r\n        toolbarItems: toolbarItems,\r\n        originatingView: options.originatingView || options.metadataView\r\n      });\r\n\r\n      MetadataVersionsTableView.__super__.constructor.call(this, options);\r\n\r\n      this.selectedNodes = new NodeCollection();\r\n\r\n      this.collection = new NodeVersionCollection(undefined, {\r\n        node: this.options.model,\r\n        autoreset: true,\r\n        expand: \"user\",\r\n        commands: commands.getAllSignatures(),\r\n        onlyClientSideDefinedColumns: true  // ignore columns sent by server\r\n      });\r\n\r\n      this.options.model.versions = this.collection;  // connect version collection with node\r\n\r\n      this.commandController = new ToolbarCommandController({commands: this.commands});\r\n\r\n      if (this.collection.delayedActions) {\r\n        this.listenTo(this.collection.delayedActions, 'error',\r\n            function (collection, request, options) {\r\n              var error = new base.Error(request);\r\n              GlobalMessage.showMessage('error', error.message);\r\n            });\r\n      }\r\n      this.defaultActionItems = defaultActionItems;\r\n\r\n      if (!this.options.toolbarItemsMasks) {\r\n        this.options.toolbarItemsMasks = new VersionsToolbarItemsMask(this.options);\r\n      }\r\n\r\n      this._setTableView();\r\n\r\n      // must be after setTableView\r\n      this._setTableRowSelectionToolbar({\r\n        toolItemFactory: this.options.toolbarItems.tableHeaderToolbar,\r\n        toolbarItemsMask: this.options.toolbarItemsMasks,\r\n        commands: this.options.commands || commands,\r\n      });\r\n\r\n      this._setTableRowSelectionToolbarEventListeners();\r\n\r\n      this._setPagination();\r\n\r\n      this.collection.fetch();\r\n\r\n      // Cause the show events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n      this.listenTo(this.collection, \"add\", this._updateCollection)\r\n          .listenTo(this.collection, \"remove\", this._updateCollection);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView);\r\n      this.tableRegion.show(this.tableView);\r\n      this.paginationRegion.show(this.paginationView);\r\n    },\r\n\r\n    _updateCollection: function () {\r\n      this.collection.fetch();\r\n    },\r\n\r\n    _setTableView: function () {\r\n      this.options || (this.options = {});\r\n\r\n      var args = _.extend({\r\n        tableColumns: metadataVersionsColumns,\r\n        connector: this.model.connector,\r\n        collection: this.collection,\r\n        columns: this.collection.columns,\r\n        columnsWithSearch: [],\r\n        orderBy: \"version_number_name desc\",\r\n        actionItems: defaultActionItems,\r\n        commands: commands,\r\n        originatingView: this.options.originatingView\r\n      }, this.options);\r\n\r\n      /*\r\n      LPAD-60042\r\n      deleting blockingParentView option to fix expand/collapse icon.\r\n      table.view.js checks the condition this.$el[0].children.length > 0 in\r\n      function calculateMaxColumnsDisplayed()\r\n      */\r\n      delete args.blockingParentView;\r\n\r\n      if (!_.contains(this.options.ddItemsList, this.options.pageSize)) {\r\n        this.options.ddItemsList.push(this.options.pageSize);\r\n        this.options.ddItemsList.sort();\r\n      }\r\n\r\n      this.tableView = new TableView(args);\r\n\r\n      // Events\r\n      var cmdOption = {context: this.options.context, originatingView: this};\r\n\r\n      this.listenTo(this.tableView, 'execute:defaultAction', function (node) {\r\n        var action = this.defaultActionItems.find(function (actionItem) {\r\n          if (actionItem.get('type') === node.get('type')) {\r\n            return true;\r\n          }\r\n        }, this);\r\n        var cmd = commands.get(action.get('signature'));\r\n        var status = {nodes: new NodeVersionCollection([node])};\r\n        cmd.execute(status, cmdOption);\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbar: function (options) {\r\n      this._tableRowSelectionToolbarView = new TableRowSelectionToolbarView({\r\n        toolItemFactory: options.toolItemFactory,\r\n        toolbarItemsMask: options.toolbarItemsMask,\r\n        toolbarCommandController: this.commandController,\r\n\r\n        // if toolbarCommandController is not defined, a new ToolbarCommandController\r\n        // with the following commands is created\r\n        commands: commands,\r\n        selectedChildren: this.tableView.selectedChildren,\r\n        container: this.collection.node,\r\n        context: this.options.context,\r\n        originatingView: this.options.originatingView,\r\n        collection: this.collection\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbarEventListeners: function () {\r\n      // listen for change of the selected rows in the table.view and if at least one row is\r\n      // selected, display the table-row-selected-toolbar\r\n      this.listenTo(this.tableView.selectedChildren, 'reset', function () {\r\n        // TODO: Re-use TableRowSelectionToolbarBehavior.\r\n        if (this.tableView.selectedChildren.length > 0) {\r\n          this.tableRowSelectionToolbarRegion.$el.addClass(\r\n              'csui-metadata-versions-rowselection-toolbar-visible');\r\n        } else {\r\n          this.tableRowSelectionToolbarRegion.$el.removeClass(\r\n              'csui-metadata-versions-rowselection-toolbar-visible');\r\n        }\r\n      });\r\n    },\r\n\r\n    _setPagination: function () {\r\n      this.paginationView = new PaginationView({\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: this.options.ddItemsList,\r\n        skipPaginationUpdateRequest: true\r\n      });\r\n    }\r\n\r\n  }, {\r\n\r\n    enabled: function (options) {\r\n      if (config.enabled === false) {\r\n        return false;\r\n      }\r\n      // don't enable if we are viewing properties of a VersionModel\r\n      if (options.node instanceof VersionModel) {\r\n        return false;\r\n      }\r\n      // TODO: Recognize versionable objects in a common way. For example,\r\n      // available_roles in v1 REST API was a viable way. It could be also\r\n      // done by extensibility on the client side.\r\n      return _.contains([144, 736, 5574], options.node.get('type'));\r\n    }\r\n\r\n  });\r\n\r\n  // Add the mixin functionality to the target view\r\n  _.extend(MetadataVersionsTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataVersionsTableView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/impl/metadata.properties.content.view',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.view',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  // Load extra panels to be added to the built-in dropdown tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.panels'\r\n], function (_, Backbone, MetadataPropertiesContentView,\r\n    MetadataVersionsTableView, lang, extraPanels) {\r\n\r\n  var MetadataPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      title: null,\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPanels = new MetadataPanelCollection([\r\n    {\r\n      title: lang.properties,\r\n      name: 'properties',\r\n      sequence: 10,\r\n      contentView: MetadataPropertiesContentView\r\n    }, {\r\n      title: lang.versions,\r\n      name: 'versions',\r\n      sequence: 20,\r\n      contentView: MetadataVersionsTableView\r\n    }\r\n  ]);\r\n\r\n  if (extraPanels) {\r\n    metadataPanels.add(_.flatten(extraPanels, true));\r\n    // assign default name to panels that are not having the 'name' field yet\r\n    var counter = 1;\r\n    metadataPanels.forEach(function (model) {\r\n      if (model.get('name') === undefined) {\r\n        model.set('name', 'unnamed_panel' + counter, {silent: true});\r\n        counter++;\r\n      }\r\n    });\r\n  }\r\n\r\n  return metadataPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/controls/tab.panel/impl/tab.link.dropdown',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<a href=\\\"#\"\n    + this.escapeExpression(((helper = (helper = helpers.uniqueTabId || (depth0 != null ? depth0.uniqueTabId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"uniqueTabId\",\"hash\":{}}) : helper)))\n    + \"\\\" data-binf-toggle=\\\"tab\\\">\\r\\n  <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n</a>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_controls_tab.panel_impl_tab.link.dropdown', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/controls/tab.panel/impl/tab.link.dropdown.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.link.view',\r\n  'hbs!csui/controls/tab.panel/impl/tab.link.dropdown',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, TabLinkView, itemTemplate) {\r\n  \"use strict\";\r\n\r\n  var TabLinkDropDownView = TabLinkView.extend({\r\n\r\n    template: itemTemplate,\r\n\r\n    attributes: function () {\r\n      var title = this.model.get('title');\r\n      return {\r\n        id: 'tablink-' + this.model.get('uniqueTabId'),\r\n        role: 'menuitem',\r\n        'aria-label': title,\r\n        title: title\r\n      };\r\n    },\r\n\r\n    constructor: function TabLinkDropDownView() {\r\n      TabLinkView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.listenTo(this.model, 'change', this.render);\r\n\r\n      this.$el.bind('click', '>a', _.bind(this._linkClicked, this));\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.$el.unbind('click', '>a');\r\n    },\r\n\r\n    activate: function () {\r\n      if (!this.$el.hasClass(\"binf-active\")) {\r\n        this.triggerMethod('clear:active:tab');\r\n        this.ui.link.binf_tab('show');\r\n      }\r\n      // TODO: comment out this code for now because HTML Validator does not allow it\r\n      //this.$el.attr('aria-selected', 'true');\r\n      var index = this.model.collection.indexOf(this.model);\r\n      this._parent.options.activeTab && this._parent.options.activeTab.set('tabIndex', index);\r\n      this.triggerMethod('activate:tab', this);\r\n      this.triggerMethod('click:link');\r\n    },\r\n\r\n    _linkClicked: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.activate();\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinkDropDownView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/controls/tab.panel/impl/tab.links.dropdown',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n  </button>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n    <span class=\\\"cs-icon icon-caret-down\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addToolTipContent || (depth0 != null ? depth0.addToolTipContent : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addToolTipContent\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<span class=\\\"dropdown-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.single_item : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"<ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n</ul>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_controls_tab.panel_impl_tab.links.dropdown', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log', 'csui/lib/marionette',\r\n  'csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin'\r\n], function (module, _, $, log, Marionette, KeyboardBehaviorMixin) {\r\n  'use strict';\r\n\r\n  // This behavior implements a default keyboard navigation by tab keys similar to the browser\r\n  // default and is used when the browser default can't be used because of tabable region behavior.\r\n\r\n  var TabLinksDropdownKeyboardBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function TabLinksDropdownKeyboardBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      view.keyboardBehavior = this;\r\n      this.tabableElements = [];\r\n\r\n      var self = this;\r\n      this.listenTo(view, 'refresh:tabable:elements', function (tabPanel) {\r\n        self.refreshTabableElements(view, tabPanel);\r\n      });\r\n\r\n      KeyboardBehaviorMixin.mixin(view);\r\n\r\n      _.extend(view, {\r\n\r\n        onKeyInView: function (event) {\r\n          var ret;\r\n          if (this.keyboardBehavior.tabableElements.length === 0) {\r\n            // don't handle keystrokes at all if no elements were found for keyboard navigation\r\n            return ret;\r\n          }\r\n          if (event.keyCode === 9) {  // tab\r\n            // log.debug('TabLinksDropdownKeyboardBehavior::onKeyInView ' + this.constructor.name)\r\n            // && console.log(log.last);\r\n\r\n            // event.shiftKey: shift tab -> activate previous region\r\n            ret = this._accSetFocusToPreviousOrNextElement(event.shiftKey);\r\n          }\r\n          return ret;\r\n        }\r\n      });\r\n\r\n    }, // constructor\r\n\r\n    refreshTabableElements: function (view, tabPanel) {\r\n      this.tabableElements = view.$el.find('button:not([disabled])').filter(':visible');\r\n      this.view.currentTabPosition = -1;\r\n      setTimeout(function () {\r\n        view._setFirstAndLastFocusable && view._setFirstAndLastFocusable();\r\n      }, 50);\r\n\r\n      // log.debug('TabLinksDropdownKeyboardBehavior::refreshTabableElements ' +\r\n      //           view.constructor.name + ': found ' + this.tabableElements.length + ' tabable' +\r\n      //           ' elements') && console.log(log.last);\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinksDropdownKeyboardBehavior;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/controls/tab.panel/impl/tab.links.dropdown',[],function(){});\n","csui.define('csui/controls/tab.panel/tab.links.dropdown.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/controls/tab.panel/impl/tab.link.dropdown.view',\r\n  'hbs!csui/controls/tab.panel/impl/tab.links.dropdown',\r\n  'csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'i18n!csui/controls/tab.panel/impl/nls/lang',\r\n  'css!csui/controls/tab.panel/impl/tab.links.dropdown',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, Backbone, Marionette, TabLinkDropDownView, collectionTemplate,\r\n    TabLinksDropdownKeyboardBehavior, DropdownMenuBehavior, lang) {\r\n  \"use strict\";\r\n\r\n  var TabLinkDropDownCollectionView = Marionette.CompositeView.extend({\r\n\r\n    className: 'cs-tab-links binf-dropdown tile-nav',\r\n\r\n    template: collectionTemplate,\r\n    templateHelpers: function () {\r\n      return {\r\n        single_item: this.collection.length === 1 ? true : false,\r\n        addToolTipContent: lang.showMore,\r\n        btnId: _.uniqueId(\"cstabBtn\")\r\n      };\r\n    },\r\n\r\n    childView: TabLinkDropDownView,\r\n    childViewContainer: '>ul',\r\n\r\n    ui: {\r\n      toggle: '>.binf-dropdown-toggle',\r\n      menuButton: '>.binf-btn',\r\n      selectedLabel: '>.binf-btn >.cs-label'\r\n    },\r\n\r\n    behaviors: {\r\n      TabLinksDropdownKeyboardBehavior: {\r\n        behaviorClass: TabLinksDropdownKeyboardBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function TabLinkDropDownCollectionView(options) {\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      this.selected = new Backbone.Model();\r\n      // if selectedTab is passed in, search for it and set activeTab to it\r\n      // also store the data on this.selected model\r\n      var activeTabIndex = options.activeTab && options.activeTab.get(\"tabIndex\");\r\n      if (this.collection && this.collection.length > 0 && activeTabIndex !== undefined &&\r\n          activeTabIndex < this.collection.length) {\r\n        var selectedTabTitle = options.selectedTab && options.selectedTab.get(\"title\");\r\n        if (selectedTabTitle !== undefined &&\r\n            selectedTabTitle === this.collection.at(activeTabIndex).get(\"title\")) {\r\n          this._setSelection(this.collection.at(activeTabIndex));\r\n        } else {\r\n          var matchIndex = -1;\r\n          if (selectedTabTitle !== undefined) {\r\n            for (var i = 0; i < this.collection.length; i++) {\r\n              if (selectedTabTitle === this.collection.at(i).get(\"title\")) {\r\n                matchIndex = i;\r\n              }\r\n            }\r\n          }\r\n          if (matchIndex !== -1) {\r\n            this._setSelection(this.collection.at(matchIndex));\r\n            options.activeTab.set(\"tabIndex\", matchIndex);\r\n          } else {\r\n            this._setSelection(this.collection.at(0));\r\n            options.activeTab.set(\"tabIndex\", 0);\r\n          }\r\n        }\r\n      }\r\n      this.listenTo(this.collection, 'change', this._refreshSelection);\r\n      this.listenTo(this.selected, 'change', this._updateSelection);\r\n    },\r\n\r\n    onRender: function () {\r\n      var title = this.selected.get('title');\r\n      this.ui.selectedLabel.text(title);\r\n      this.ui.menuButton.attr('aria-label', title);\r\n      if (this.collection.length !== 1) {\r\n        this.ui.toggle.binf_dropdown();\r\n      }\r\n      // TODO: comment out this code for now because HTML Validator does not allow it\r\n      // set the selected tab active and aria-selected=true\r\n      var selectedId = this.selected.get('id');\r\n      for (var i = 0; i < this.collection.length; i++) {\r\n        if (selectedId === this.collection.at(i).get(\"id\")) {\r\n          var menuItems = this.$el.find(\"ul li\");\r\n          menuItems.removeClass('binf-active');  //.removeAttr('aria-selected');\r\n          this.$(menuItems.get(i)).addClass('binf-active');  //.attr('aria-selected', 'true');\r\n          break;\r\n        }\r\n      }\r\n    },\r\n\r\n    onChildviewClickLink: function (childView) {\r\n      this._setSelection(childView.model);\r\n      this.ui.toggle.binf_dropdown('toggle');\r\n    },\r\n\r\n    onChildviewClearActiveTab: function (childView) {\r\n      this.children.each(function (view) {\r\n        if (view.$el.hasClass('binf-active')) {\r\n          view.$el.removeClass('binf-active');\r\n        }\r\n        // TODO: comment out this code for now because HTML Validator does not allow it\r\n        //if (view.el.hasAttribute('aria-selected') !== undefined) {\r\n        //  view.$el.removeAttr('aria-selected');\r\n        //}\r\n      });\r\n    },\r\n\r\n    _setSelection: function (model) {\r\n      this.selected.set(model.pick('id', 'title'));\r\n    },\r\n\r\n    _updateSelection: function () {\r\n      var title = this.selected.get('title');\r\n      this.ui.selectedLabel.text(title);\r\n      this.ui.menuButton.attr('aria-label', title);\r\n    },\r\n\r\n    _refreshSelection: function (model) {\r\n      if (model.get('id') === this.selected.get('id')) {\r\n        this._setSelection(model);\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinkDropDownCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.dropdowntab.view',['require', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/controls/tab.panel/tab.panel.view', 'csui/widgets/metadata/metadata.panels',\r\n  'csui/controls/tab.panel/tab.links.dropdown.view',\r\n  'csui/models/browsing.state/nodes/nodes.browsing.state',\r\n  'csui/utils/contexts/factories/browsing.states',\r\n  'csui/models/version', 'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/lib/binf/js/binf'\r\n], function (require, _, Backbone, TabPanelView, metadataPanels, TabLinkDropDownCollectionView,\r\n    NodeBrowsingStateModel, BrowsingStateCollectionFactory, VersionModel, lang) {\r\n  'use strict';\r\n\r\n  var MetadataDropdownTabView = TabPanelView.extend({\r\n\r\n    // FIXME: This removes the tab classes from the paren object\r\n    className: 'metadata-content-wrapper binf-panel binf-panel-default',\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle'\r\n    },\r\n\r\n    contentView: function () {\r\n      return this.options.contentView;\r\n    },\r\n\r\n    contentViewOptions: function () {\r\n      return {\r\n        context: this.options.context,\r\n        model: this.options.node,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty\r\n      };\r\n    },\r\n\r\n    constructor: function MetadataDropdownTabView(options) {\r\n      // Assign the options to this before the parent constructor\r\n      // would do it, so that the _buildTabs below can access it\r\n      this.options = options || (options = {});\r\n      _.defaults(options, {\r\n        TabLinkCollectionViewClass: TabLinkDropDownCollectionView,\r\n        implementTabContentsDefaultKeyboardHandling: false,\r\n        delayTabContent: options.delayTabContent !== false\r\n      });\r\n\r\n      options.tabs = this._buildTabs();\r\n\r\n      TabPanelView.prototype.constructor.call(this, options);\r\n\r\n      this.browsingStates = this.options.context &&\r\n                            this.options.context.getCollection(BrowsingStateCollectionFactory);\r\n\r\n      this.listenTo(this.options.node, \"change\", this._nodeChanged)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n      this.listenTo(this, 'before:destroy', this._clearBrowsingState);\r\n    },\r\n\r\n    _buildTabs: function () {\r\n      return metadataPanels\r\n          .chain()\r\n          .filter(function (panel) {\r\n            // If there is a static method enabled, call it, otherwise\r\n            // consider the panel always enabled\r\n            var contentView = panel.get('contentView'),\r\n                enabled     = contentView.enabled;\r\n            // providing way to render custom properties view for node types that has separate\r\n            // view to show in metadata. Based on key 'customproperties' provided in response.\r\n            if (this.options.node.attributes.customProperties) {\r\n              // filter extra commands based on the key 'executeCommand' for respective node.\r\n              if (panel.attributes.executeCommand) {\r\n                return !enabled || enabled({\r\n                      context: this.options.context,\r\n                      node: this.options.node\r\n                    });\r\n              } else {\r\n                return false;\r\n              }\r\n            } else {\r\n              return !enabled || enabled({\r\n                    context: this.options.context,\r\n                    node: this.options.node\r\n                  });\r\n            }\r\n          }, this)\r\n          .map(function (panel) {\r\n            return panel.attributes;\r\n          })\r\n          .value();\r\n    },\r\n\r\n    onRender: function () {\r\n      this.$el.prepend(\"<div class='csui-metadata-tab-bar'></div>\");\r\n      this._updateBrowsingState();\r\n    },\r\n\r\n    onActivateTab: function (tabContent, tabPane, tabLink) {\r\n      // Warning: this onActivateTab is currently being triggered twice by the 'activate:tab' event.\r\n      // The code in the base 'controls/tab.panel' needs to be revisited later when time permits.\r\n      // Any code being called from here should handle two calls gracefully by itself !!!\r\n      tabContent && tabContent.triggerMethod('panel:activated');\r\n      this._updateBrowsingState();\r\n    },\r\n\r\n    _updateBrowsingState: function () {\r\n      // let the router know and navigate accordingly\r\n      if (this.browsingStates && this.options.node) {\r\n        var stateChanged = false;\r\n        var browsingState = this.browsingStates.at(this.browsingStates.length - 1);\r\n        var currentStateId = browsingState && browsingState.get('id');\r\n        var newStateId = 'metadata';\r\n\r\n        var titleNodeNameSuffix = lang.properties;\r\n        var versionNumInTitle = '';\r\n        var nodeName = this.options.node.get('name');\r\n        var data = {path: {}, query: {}};\r\n        data.path.node_id = this.options.node.get('id');\r\n\r\n        // perspective: 'metadata.navigation' or 'metadata'\r\n        var container = this.options.container || this.options.containerCollection;\r\n        data.query.perspective = container ? 'metadata.navigation' : 'metadata';\r\n        if (container && container.get('id') === this.options.node.get('id')) {\r\n          data.query.perspective = 'metadata';\r\n        }\r\n\r\n        if (this.options.node instanceof VersionModel) {\r\n          data.path.version_num = this.options.node.get('version_number');\r\n          newStateId = 'version';\r\n          versionNumInTitle = _.str.sformat(lang.versionNumInBrowserTitle, data.path.version_num);\r\n        }\r\n\r\n        var tabIndex = this.options.activeTab && this.options.activeTab.get('tabIndex');\r\n        if (tabIndex !== undefined && this.options.collection &&\r\n            tabIndex >= 0 && tabIndex < this.options.collection.length) {\r\n          var tab = this.options.collection.at(tabIndex);\r\n          data.query.panel = tab && tab.get('name');\r\n          var activePanelTitle = tab && tab.get('title');\r\n          activePanelTitle && (titleNodeNameSuffix = activePanelTitle);\r\n        }\r\n\r\n        if (versionNumInTitle.length > 0) {\r\n          titleNodeNameSuffix = versionNumInTitle + ' ' + titleNodeNameSuffix;\r\n        }\r\n        data.path.node_name = nodeName + ' - ' + titleNodeNameSuffix;\r\n\r\n        if (currentStateId !== newStateId) {\r\n          data.query.container_id = this.options.node.get('parent_id');\r\n          browsingState = new NodeBrowsingStateModel(data);\r\n          browsingState.set('id', newStateId, {silent: true});\r\n          this.browsingStates.push(browsingState, {silent: true});\r\n          this.browsingState = browsingState;\r\n          stateChanged = true;\r\n        } else {\r\n          var browsingStatePath = browsingState.get('path') || {};\r\n          var browsingStateQuery = browsingState.get('query') || {};\r\n          // merge and set the data.query\r\n          data.query = _.extend({}, browsingStateQuery, data.query);\r\n          // determine if a stage change is needed\r\n          if (data.path.node_id !== browsingStatePath.node_id ||\r\n              data.path.version_num !== browsingStatePath.version_num ||\r\n              data.query.panel !== browsingStateQuery.panel) {\r\n            stateChanged = true;\r\n          }\r\n          browsingState.set(data, {silent: true});\r\n        }\r\n\r\n        // TODO: fix the TabPanel component because the 'activate:tab' event is triggered twice.\r\n        // the stateChanged check here is to handle this method being called twice.\r\n        if (stateChanged && this.browsingStates.allowUrlUpdate) {\r\n          this.browsingStates.trigger('state:change');\r\n        } else if (this.browsingStates.updateBrowserTitleAfterPageLoaded === true) {\r\n          this.browsingStates.updateBrowserTitleAfterPageLoaded = false;\r\n          this.browsingStates.trigger('update:title');\r\n        }\r\n      }\r\n    },\r\n\r\n    _clearBrowsingState: function () {\r\n      if (this.browsingStates && this.browsingState && this.options.node) {\r\n        this.browsingStates.remove(this.browsingState, {silent: true});\r\n        this.browsingState = undefined;\r\n      }\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        dropdownToggleEl.binf_dropdown('toggle');\r\n      }\r\n    },\r\n\r\n    _updateTabs: function () {\r\n      var tabs = this._buildTabs();\r\n      // FIXME: _convertCollection should return an array of object\r\n      // literals or models; the models below do not change their\r\n      // parent collection without removing them\r\n      this.collection.reset(this._convertCollection({tabs: tabs}).models);\r\n    },\r\n\r\n    _nodeChanged: function () {\r\n      // We switched to other node or fetched the node info\r\n      if (this.options.node.hasChanged('id') || this.options.node.hasChanged('type')) {\r\n        this._updateTabs();\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataDropdownTabView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/utils/url\",\r\n  \"csui/utils/base\"\r\n], function (_, $, Backbone, Url, base) {\r\n\r\n  // handling server calls for metadata\r\n  function MetadataController(status, options, attributes) {\r\n    this.status = status || {};\r\n    this.options = options || {};\r\n    this.attributes = attributes || {};\r\n  }\r\n\r\n  _.extend(MetadataController.prototype, Backbone.Events, {\r\n\r\n    save: function (model, data) {\r\n      // Pass data via the first attrs param to get them set to model\r\n      // attributes\r\n      return model.save(data, {\r\n        wait: true,\r\n        patch: true\r\n      });\r\n    },\r\n\r\n    createItem: function (model, formsValues) {\r\n      return model.save(undefined, {\r\n        // If data does not contain common attributes, which should be just set\r\n        // to model attributes, it should be passed via options.data instead of\r\n        // using the first attrs paremeter\r\n        data: formsValues,\r\n        wait: true\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  MetadataController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataController, {version: \"1.0\"});\r\n\r\n  return MetadataController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/widgets/metadata/impl/header/metadata.header.view',\r\n  'csui/widgets/metadata/impl/metadata.dropdowntab.view', 'csui/models/node/node.model',\r\n  'csui/utils/contexts/factories/node', 'csui/utils/contexts/factories/browsing.states',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadata.controller', 'csui/utils/nodesprites',\r\n  'csui/controls/progressblocker/blocker', 'csui/utils/commandhelper',\r\n  'csui/widgets/permissions/permissions.view',\r\n  'csui/models/nodechildren', 'csui/models/version', 'csui/dialogs/modal.alert/modal.alert',\r\n  'csui/utils/commands', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (_, $, Marionette, base, MetadataHeaderView, MetadataDropdownTabView,\r\n    NodeModel, NodeModelFactory, BrowsingStateCollectionFactory, ViewEventsPropagationMixin,\r\n    MetadataController, NodeSpriteCollection, BlockingView, CommandHelper, PermissionsView,\r\n    NodeChildrenCollection, VersionModel, ModalAlert, commands, lang) {\r\n\r\n  var MetadataView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-metadata',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataView(options) {\r\n      var self = this;\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      this.options = options;\r\n\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n      }\r\n\r\n      // setting initialPanel if it was passed in from data or overriden by URL\r\n      options.model.unset('initialPanel', {silent: true});\r\n      if (options.data.initialPanel) {\r\n        options.model.set('initialPanel', options.data.initialPanel, {silent: true});\r\n      }\r\n\r\n      this.browsingStates = options.context.getCollection(BrowsingStateCollectionFactory);\r\n      var browsingState = this.browsingStates.at(this.browsingStates.length - 1);\r\n      var query = browsingState && browsingState.get('query');\r\n      var perspective = query && query.perspective;\r\n      if (perspective === 'metadata' || perspective === 'metadata.navigation') {\r\n        // find and set the inital 'panel'\r\n        var panel = query && query.panel;\r\n        panel && options.model.set('initialPanel', panel, {silent: true});\r\n\r\n        // check for version_number\r\n        var path = browsingState && browsingState.get('path');\r\n        var versionNumberUrlOverride = path && path.version_num;\r\n        if (versionNumberUrlOverride && !(options.model instanceof VersionModel)) {\r\n          options.model = new VersionModel({\r\n            id: options.model.get('id'),\r\n            version_number: versionNumberUrlOverride,\r\n            initialPanel: options.model.get('initialPanel')\r\n          }, {\r\n            connector: options.model.connector\r\n          });\r\n          this._ensureCompleteVersionNode();\r\n        }\r\n      }\r\n\r\n      this.options.showShortcutSwitch = true;\r\n      this.options.showRequiredFieldsSwitch = true;\r\n      if (this.options.model.get('type') === 1 || !!this.options.model.get('shortcutNode')) {  // shortcut\r\n        if (!!this.options.model.get('shortcutNode') && this.options.model.get('type') !== 1) {\r\n          this.options.shortcutNode = this.options.model.get('shortcutNode');\r\n        } else {\r\n          this.options.model.connector.assignTo(this.options.model.original); //TODO: have to do this?\r\n          this.options.shortcutNode = this.options.model;\r\n          var shortcutResourceScope = this.options.shortcutNode.getResourceScope();\r\n          this.options.model.original.setResourceScope(shortcutResourceScope);\r\n          this.options.model = this.options.model.original;\r\n          this.options.model.set('shortcutNode', this.options.shortcutNode, {silent: true});\r\n        }\r\n        //Load permissions page after getting actions from REST API\r\n        this.options.actionsPromise = this._ensureCompleteNode();\r\n      } else {\r\n        this.options.actionsPromise = $.Deferred().resolve().promise();\r\n      }\r\n\r\n\r\n      // Once PropertiesView is opened , 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n\r\n      this.options.showDropdownMenu = true;\r\n      this.options.originatingView = this.options.originatingView || this;\r\n      this.metadataHeaderView = new MetadataHeaderView(_.extend({\r\n        // Since ItemNameView (which includes DropdownMenuView, etc.) is now being used elsewhere,\r\n        // this boolean flag is to indicate metadata scenario for ItemNameView to know.\r\n        metadataScenario: true,\r\n        // If this widget is placed on a perspective, it becomes the originating view itself\r\n        originatingView: this\r\n      }, this.options));\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName)\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:before:delete',\r\n              function (args) {\r\n                self.trigger('metadata:item:before:delete', args);\r\n              })\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:before:move',\r\n              function (args) {\r\n                self.trigger('metadata:item:before:move', args);\r\n              })\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:deleted', function (args) {\r\n            self.trigger('metadata:item:deleted', args);\r\n          })\r\n          .listenTo(this.metadataHeaderView, \"shortcut:switch\", function (view) {\r\n            self.options.model = view.node;\r\n            self.options.model.set('shortcutNode', self.model.get('shortcutNode'), {silent: true});\r\n            this._ensureCompleteNode()\r\n                .always(function () {\r\n                  !!self.metadataTabView && self.metadataTabView.destroy();\r\n                  if (!!self.options.showPermissionView) {\r\n                    self.metadataTabView = new PermissionsView({\r\n                      model: self.options.model,\r\n                      originatingView: self.options.originatingView,\r\n                      context: self.options.context,\r\n                      showCloseIcon: self.options.originatingView ? false : true,\r\n                      showBackIcon: self.options.originatingView ? true : false,\r\n                      selectedTab: status.selectedTab,\r\n                      selectedProperty: self.options.selectedProperty\r\n                    });\r\n\r\n                  } else {\r\n                    self.metadataTabView = new MetadataDropdownTabView({\r\n                      context: self.options.context,\r\n                      node: self.options.model,\r\n                      containerCollection: self.options.containerCollection,\r\n                      originatingView: self.options.originatingView,\r\n                      metadataView: self,\r\n                      activeTab: self.options.activeTab,\r\n                      delayTabContent: self.options.delayTabContent\r\n                    });\r\n                  }\r\n\r\n                  self.$el.append(self.metadataTabView.render().$el);\r\n                  self.propagateEventsToViews(self.metadataTabView);\r\n                });\r\n          })\r\n          .listenTo(this.metadataHeaderView, \"metadata:close\", function () {\r\n            self.trigger(\"metadata:close\");\r\n          })\r\n          // stops listening, so that the second subscribed event won't do any harm\r\n          .listenTo(this.options.context, 'request', function () {\r\n            self._closeMetadata();\r\n          })\r\n          .listenTo(this.options.context, 'request:perspective', function () {\r\n            self._closeMetadata();\r\n          });\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this,\r\n        blockingParentView: this,\r\n        activeTab: this.options.activeTab,\r\n        selectedTab: this.options.selectedTab,\r\n        selectedProperty: this.options.selectedProperty,\r\n        delayTabContent: self.options.delayTabContent\r\n      };\r\n\r\n      if (this.options.showPermissionView) {\r\n        this.options.actionsPromise.always(function(){\r\n          self.metadataTabView = new PermissionsView({\r\n            model: self.options.model,\r\n            originatingView: self.options.originatingView,\r\n            context: self.options.context,\r\n            showCloseIcon: self.options.originatingView ? false : true,\r\n            showBackIcon: self.options.originatingView ? true : false,\r\n            selectedTab: status.selectedTab,\r\n            selectedProperty: self.options.selectedProperty\r\n          });\r\n          self.propagateEventsToViews(self.metadataTabView, self.metadataHeaderView);\r\n        });\r\n      } else {\r\n        this.metadataTabView = new MetadataDropdownTabView(tabOptions);\r\n        this.propagateEventsToViews(this.metadataTabView, this.metadataHeaderView);\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the shortcut's original node has been fetched\r\n      var fetching = this.options.model.fetching;\r\n      if (fetching) {\r\n        // Note: render always so that the link to Shortcut Properties is available for the \r\n        // user to click on to go into the Properties page and update the Original Location field.\r\n        // This is due to the backward UX design that Original Properties is rendered first.\r\n        // TODO: Find out, why the link \"View shortcut\" is dead after re-rendering\r\n        return fetching.always(_.bind(this.render, this));\r\n      }\r\n\r\n      var mhv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataTabView.render();\r\n\r\n      Marionette.triggerMethodOn(mhv, 'before:show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      this.$el.append(mhv.el);\r\n      this.$el.append(mdv.el);\r\n\r\n      Marionette.triggerMethodOn(mhv, 'show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataTabView, this.metadataHeaderView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataTabView.destroy();\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var data = {'name': itemName};\r\n      var metadataController = new MetadataController();\r\n      var node = this.options.model;\r\n      var collection = this.options.collection;\r\n      var shortcutOriginal;\r\n      // workarounds to handle the refresh of the shortcut node or original node\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === node) {\r\n        var originalNodeInCollection = this.options.collection.findWhere(\r\n            {id: node.get('id')});\r\n        if (originalNodeInCollection) {\r\n          shortcutOriginal = node;\r\n          node = originalNodeInCollection;\r\n        } else {\r\n          collection = undefined;\r\n        }\r\n      }\r\n\r\n      self._blockActions();\r\n      metadataController.save(node, data)\r\n          .done(function () {\r\n            return node.fetch()\r\n                .then(function () {\r\n                  if (shortcutOriginal) {\r\n                    shortcutOriginal.set(node.attributes);\r\n                  }\r\n                  // Following command causing failure in breadcrumb collection update,\r\n                  // While renaming the item in metadata view, and clicking directly on breadcrumb\r\n                  // ancestor. After commenting out nodes table parent item renaming functionality\r\n                  // is working fine.\r\n                  //self.options.context && self.options.context.trigger('current:folder:changed');\r\n                  args.success && args.success();\r\n                  self._unblockActions();\r\n                  if (self.options.originatingView &&\r\n                      _.isFunction(self.options.originatingView.unblockActions)) {\r\n                    self.options.originatingView.unblockActions();\r\n                  }\r\n                });\r\n          })\r\n          .fail(function (error) {\r\n            self._unblockActions();\r\n            var errorMsg = CommandHelper._getErrorMessageFromResponse(error);\r\n            errorMsg === undefined && (errorMsg = lang.failedToSaveName);\r\n            args.error && args.error(errorMsg);\r\n          });\r\n    },\r\n\r\n    _ensureCompleteVersionNode: function () {\r\n      this._blockActions();\r\n      return this.options.model.fetch()\r\n          .always(_.bind(this._unblockActions, this))\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message);\r\n          });\r\n    },\r\n\r\n    _ensureCompleteNode: function () {\r\n      var node = this.options.model;\r\n\r\n      function checkExpansion(property) {\r\n        var value = node.get(property + '_id');\r\n        if (value && !_.isObject(value) && !_.isObject(node.get(property + '_id_expand'))) {\r\n          node.setExpand('properties', property);\r\n          return true;\r\n        }\r\n      }\r\n\r\n      var expandable = _.invoke(['original', 'parent', 'create_user',\r\n        'modify_user', 'owner_user', 'reserved_user'], checkExpansion);\r\n      expandable = _.contains(expandable, true);\r\n\r\n      var actionsNeeded = node.actions.length <= 1;\r\n\r\n      if (expandable || actionsNeeded) {\r\n        this._blockActions();\r\n        return node.fetch()\r\n            .always(_.bind(this._unblockActions, this))\r\n            .fail(_.bind(function (request) {\r\n              var error = new base.Error(request);\r\n              ModalAlert.showError(error.message);\r\n            }, this));\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      var node = this.options.model;\r\n      if (node.get('type') === 1 && node.original && node.original.get('type') === 0) {\r\n        this.trigger(\"metadata:close\");\r\n      } else {\r\n        this.trigger('metadata:close:without:animation');\r\n      }\r\n    },\r\n\r\n    _blockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.blockActions && origView.blockActions();\r\n    },\r\n\r\n    _unblockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.unblockActions && origView.unblockActions();\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.action.one.item.properties.view',[\"module\", \"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/marionette\",\r\n  \"csui/widgets/metadata/impl/header/metadata.header.view\",\r\n  \"csui/widgets/metadata/metadata.properties.view\", 'csui/utils/log',\r\n  \"csui/controls/mixins/view.events.propagation/view.events.propagation.mixin\",\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (module, _, $, Marionette, MetadataHeaderView, MetadataPropertiesView,\r\n    log, ViewEventsPropagationMixin) {\r\n\r\n  var MetadataActionOneItemPropertiesView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-add-item-metadata-form',\r\n    template: false,\r\n\r\n    // public\r\n    constructor: function MetadataActionOneItemPropertiesView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      options.showRequiredFieldsSwitch = true;\r\n      this.metadataHeaderView = new MetadataHeaderView(options);\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName);\r\n      this.listenTo(this.metadataHeaderView, \"update:button\", _.bind(function (args) {\r\n        this.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      this.metadataPropertiesView = new MetadataPropertiesView({\r\n        node: options.model,\r\n        collection: options.collection,\r\n        container: options.container,\r\n        context: options.context,\r\n        formMode: 'create',\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        metadataView: this,\r\n        formCollection: options.formCollection,\r\n        suppressAddProperties: options.suppressAddProperties\r\n      });\r\n      if (!options.collection) {\r\n        this.listenTo(this.metadataPropertiesView.allForms, 'sync', this._updateSchema);\r\n      }\r\n      this.listenTo(this.metadataPropertiesView, 'render:forms', this.setNameFieldFocus);\r\n      this.propagateEventsToViews(this.metadataHeaderView, this.metadataPropertiesView);\r\n    },\r\n\r\n    // private\r\n    _updateSchema: function() {\r\n      // just update name schema in name field of header\r\n      var generalForm = this.metadataPropertiesView.allForms.first(),\r\n          formSchema = generalForm && generalForm.get('schema'),\r\n          nameSchema = formSchema && formSchema.properties && formSchema.properties.name;\r\n      if (nameSchema) {\r\n        this.metadataHeaderView.metadataItemNameView.updateNameSchema(nameSchema);\r\n      } else {\r\n        log.warn('Form collection lacks name field in the first form.') && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    // private\r\n    onRender: function () {\r\n      var inv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataPropertiesView.render();\r\n\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      if (this.options.suppressHeaderView !== true) {\r\n        this.$el.append(inv.el);\r\n      }\r\n      this.$el.append(mdv.el);\r\n\r\n      if (this.options.suppressHeaderView) {\r\n        this.$el.addClass('without-header-bar');\r\n      }\r\n\r\n      if (this.options.extraViewClass) {\r\n        this.$el.addClass(this.options.extraViewClass);\r\n      }\r\n\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n    },\r\n\r\n    // private\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataHeaderView, this.metadataPropertiesView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataPropertiesView.destroy();\r\n    },\r\n\r\n    // public\r\n    validate: function () {\r\n      var bNameIsValid = this.metadataHeaderView.validateName();\r\n      var bFormsAreValid = this.metadataPropertiesView.validateForms();\r\n\r\n      return bNameIsValid && bFormsAreValid;\r\n    },\r\n\r\n    // public\r\n    getValues: function () {\r\n      var data = {};\r\n      var validation = this.validate();\r\n      if (validation) {\r\n        var itemName = this.metadataHeaderView.getNameValue();\r\n        data = {\r\n          \"name\": itemName,\r\n          \"type\": this.options.model.get('type'),\r\n          \"parent_id\": this.options.model.get('parent_id')\r\n        };\r\n        var formsValues = this.metadataPropertiesView.getFormsValues();\r\n        _.extend(data, formsValues);\r\n      }\r\n\r\n      return data;\r\n    },\r\n\r\n    // public\r\n    setNameFieldFocus: function () {\r\n      if (this.firstFocusCalled !== true && this.options.suppressHeaderView !== true) {\r\n        this.metadataHeaderView.setNameEditModeFocus();\r\n      }\r\n      this.firstFocusCalled = true;\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var itemName = args.sender.getValue();\r\n      this.model.set('name', itemName, {silent: true});\r\n      args.success && args.success();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataActionOneItemPropertiesView.version = \"1.0\";\r\n\r\n  _.extend(MetadataActionOneItemPropertiesView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataActionOneItemPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/common/base.metadata.action.view',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/controls/dialog/dialog.view\", \"csui/controls/progressblocker/blocker\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, $, Backbone, DialogView, BlockingView, lang) {\r\n\r\n  function BaseMetadataActionView() {\r\n  }\r\n\r\n  _.extend(BaseMetadataActionView.prototype, Backbone.Events, {\r\n\r\n    // public: display metadata view in either originatingView with animation or modal dialog\r\n    // @parameter:\r\n    // - options: {\r\n    //    - originatingView: animate and show the form in the originating view\r\n    //    - view: the view to show\r\n    //    - dialogOptions: {\r\n    //      - dialogTitle: dialog title\r\n    //      - OkButtonTitle: the OK button title\r\n    //      - OkButtonClick: method to handle the OkClick\r\n    //      - CancelButtonTitle: (optional) the Cancel button title\r\n    //      - CancelButtonClick: (optional) method to handle the CancelClick\r\n    //    }\r\n    // }\r\n    baseDisplayForm: function (options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.deferred = $.Deferred();\r\n\r\n      if (options.view) {\r\n        BlockingView.imbue(options.view);\r\n      }\r\n\r\n      // replace the originatingView with sliding left/right animation\r\n      if (options.originatingView) {\r\n\r\n        // TODO: UX and Josef will ask for this in the future, add this support when time permits\r\n\r\n      } else {  // show Metadata View in a modal dialog\r\n\r\n        var dialogOptions = options.dialogOptions || {};\r\n        var okAction = dialogOptions.OkButtonClick || this._cancelAction;\r\n        var cancelAction = dialogOptions.CancelButtonClick || this._cancelAction;\r\n        var buttons = [\r\n          {\r\n            id: 'okButton',\r\n            default: true,\r\n            label: dialogOptions.OkButtonTitle ? dialogOptions.OkButtonTitle :\r\n                   lang.defaultDialogOkButtonTitle,\r\n            click: _.bind(okAction, this, options)\r\n          },\r\n          {\r\n            id: 'cancel',\r\n            label: dialogOptions.CancelButtonTitle ? dialogOptions.CancelButtonTitle :\r\n                   lang.defaultDialogCancelButtonTitle,\r\n            click: _.bind(cancelAction, this),\r\n            actionToken: dialogOptions.CancelButtonActionToken\r\n          }\r\n        ];\r\n        if (this.options.view.model) {\r\n          if (!(this.options.view.model.get('name'))) {\r\n            buttons[0].disabled = true;\r\n          }\r\n        }\r\n        var title = dialogOptions.dialogTitle ? dialogOptions.dialogTitle :\r\n                    lang.defaultDialogTitle;\r\n        var dialog = new DialogView({\r\n          className: 'cs-item-action-metadata',\r\n          title: title,\r\n          buttons: buttons,\r\n          largeSize: true,\r\n          view: options.view\r\n        });\r\n        this.dialog = dialog;\r\n        this.listenTo(this.dialog, \"hide\", this._cancelAction)\r\n            .listenTo(this.dialog, \"update:button\", _.bind(function (args) {\r\n              // Apply overlay[pointer-events:none] for button to prevent user interaction\r\n              // until the respective action is performed instead of disabling the button\r\n              // which may cause ambiguity\r\n              if (args.overlay !== undefined) {\r\n                var buttonModel = this.dialog.footerView.collection.get('okButton'),\r\n                    button      = this.dialog.footerView.children.findByModel(buttonModel),\r\n                    method      = button && !button.$el.is(\":disabled\") && args.overlay ?\r\n                                  'addClass' : 'removeClass';\r\n                button.$el[method](\"cs-button-overlay\");\r\n              } else {\r\n                this.dialog.footerView.updateButton('okButton', args);\r\n              }\r\n            }, this));\r\n\r\n        dialog.show();\r\n\r\n      }\r\n\r\n      return this.deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _cancelAction: function (args) {\r\n      var resetRequiredSwitch = !!this.node && !!this.node.collection &&\r\n                                !!this.node.collection.requireSwitched &&\r\n                                (!!this.node.get('action') ||\r\n                                 (!!this.options.view && this.options.view.options.action));\r\n      if (resetRequiredSwitch) {\r\n        this.node.collection.requireSwitched = false;\r\n      }\r\n      if (this.options.view) {\r\n        this.options.view.unblockActions();\r\n      }\r\n      this.dialog.destroy();\r\n\r\n      // assume that the close button was clicked if args is undefined\r\n      if (args === undefined) {\r\n        args = {\r\n          buttonAttributes: {\r\n            actionToken: \"closeMetadataActionView\"\r\n          }\r\n        };\r\n      }\r\n\r\n      this.deferred.reject(args);\r\n    }\r\n\r\n  });\r\n\r\n  BaseMetadataActionView.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(BaseMetadataActionView, {version: \"1.0\"});\r\n\r\n  return BaseMetadataActionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',['require', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url',\r\n  'csui/utils/log', 'csui/widgets/metadata/impl/common/base.metadata.action.view',\r\n  'csui/models/forms', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (require, _, $, Url, log, BaseMetadataActionView, FormCollection, lang, ModalAlert) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories view displays the category form for the user to fill out\r\n  // categories values, validates the form and adds the category to the object when the user clicks\r\n  // on the Add button.\r\n  //\r\n  function MetadataAddCategoriesView() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesView.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    displayForm: function (options) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n\r\n      options || (options = {});\r\n      this.node = options.model;\r\n      this.catId = options.catId;\r\n      this.catName = options.catName;\r\n\r\n      var catCollection = new FormCollection([options.catModel]);\r\n      catCollection.fetching = false;\r\n      catCollection.fetched = true;\r\n\r\n      require([\"csui/widgets/metadata/metadata.action.one.item.properties.view\"\r\n      ], function (MetadataActionOneItemPropertiesView) {\r\n\r\n        self.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n          model: options.model,\r\n          collection: catCollection,\r\n          context: options.context,\r\n          commands: options.commands,\r\n          suppressAddProperties: true,\r\n          suppressHeaderView: true,\r\n          extraViewClass: 'add-category'\r\n        });\r\n\r\n        var baseUIOptions = {};\r\n        baseUIOptions.callerProcessData = options.callerProcessData;\r\n        baseUIOptions.originatingView = options.originatingView;\r\n        baseUIOptions.view = self.metadataAddItemPropView;\r\n        var dialogOptions = {};\r\n        dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                    lang.addNewCategoryDialogTitle;\r\n        dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                      lang.addNewCategoryDialogAddButtonTitle;\r\n        dialogOptions.OkButtonClick = self._addCategory;\r\n        baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n        self.baseDisplayForm(baseUIOptions)\r\n            .done(function (resp) {\r\n              deferred.resolve(resp);\r\n            })\r\n            .fail(function (error2) {\r\n              deferred.reject(error2);\r\n            });\r\n\r\n      }, function (error) {\r\n        log.warn('Failed to load MetadataActionOneItemPropertiesView. {0}', error)\r\n        && console.log(log.last);\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _addCategory: function (args) {\r\n      var valid = this.metadataAddItemPropView.validate();\r\n      if (valid) {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n        var nodeId = this.node.get('id');\r\n        var catData = this.metadataAddItemPropView.getValues();\r\n        var data = {id: nodeId, category_id: this.catId};\r\n        if (catData.roles && catData.roles.categories) {\r\n          _.each(catData.roles.categories, function (cat, key) {\r\n            data = _.extend(data, cat);\r\n          });\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.node.urlBase(), 'categories');\r\n        var formData = new FormData();\r\n        var options = {\r\n          type: 'POST',\r\n          url: fullUrl\r\n        };\r\n        formData.append('body', JSON.stringify(data));\r\n        _.extend(options, {\r\n          data: formData,\r\n          contentType: false,\r\n          processData: false\r\n        });\r\n\r\n        this.node.connector &&\r\n        this.node.connector.extendAjaxOptions(options);\r\n\r\n        this.metadataAddItemPropView.blockActions();\r\n        $.ajax(options)\r\n            .done(_.bind(function (resp) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              this.dialog.destroy();\r\n              this.deferred.resolve(resp);\r\n            }, this))\r\n            .fail(_.bind(function (error) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              var serverError = '';\r\n              if (error && error.responseJSON && error.responseJSON.error) {\r\n                serverError = error.responseJSON.error;\r\n              }\r\n              var title = lang.addNewCategoryFailTitle;\r\n              var message = _.str.sformat(lang.addNewCategoryFailMessage,\r\n                  this.catName, this.node.get('name'), nodeId, serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n\r\n      } else {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n            'cs-formfield-invalid');\r\n\r\n      }\r\n\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesView, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.categories.controller',['require', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/utils/base', 'csui/utils/log', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/widgets/metadata/impl/metadata.utils',\r\n  'csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',\r\n  'csui/models/node/node.model', 'csui/models/appliedcategoryform',\r\n  'csui/dialogs/node.picker/node.picker', 'csui/utils/commands',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (require, _, $, Backbone, Url, base, log, lang, ModalAlert,\r\n    MetadataUtils, MetadataAddCategoriesView, NodeModel, AppliedCategoryFormModel,\r\n    NodePicker, commands) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories controller handles adding category to an existing item, a new item\r\n  // being created or copied or moved.\r\n  //\r\n\r\n  function MetadataAddCategoriesController() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesController.prototype, Backbone.Events, {\r\n\r\n    // Public: add category to an existing item, new item being created or copied or moved\r\n    //\r\n    // Parameters:\r\n    // - <object> options containing:\r\n    //   - action: the action 'create', 'copy', 'move', or undefined for an existing item\r\n    //   - node: an existing or a temporary NodeModel for a new item being created with undefined id\r\n    //   - collection: the existing category collection\r\n    //   - container: the container where the item is/will be in\r\n    //   - inheritance: the category inheritance 'original', 'destination' or 'merged'\r\n    //   - context: the application context\r\n    //   - parentView: the view to have blockingView on\r\n    //\r\n    // Return:\r\n    // - <object> jQuery deferred object containing the new 'catModel' if succeeds\r\n    //\r\n    AddNewCategory: function (options) {\r\n      var deferred = $.Deferred();\r\n      var nodePicker = new NodePicker({\r\n        startLocation: 'category.volume',\r\n        context: options.context,\r\n        selectableTypes: [131],\r\n        unselectableNodes: !options.collection ? [] :\r\n                           options.collection.where({role_name: \"categories\"}),\r\n        selectMultiple: false,\r\n        dialogTitle: lang.selectCategoryTitle,\r\n        globalSearch: true,\r\n        selectButtonLabel: lang.selectCategoryButtonLabel\r\n      });\r\n      nodePicker.show()\r\n          .done(_.bind(function (args) {\r\n            _.reduce(args.nodes, function (promise, node) {\r\n                  return promise.then(_.bind(function () {\r\n                    var catId = node.get('id');\r\n                    var catName = node.get('name');\r\n\r\n                    // with adding a new item, the object does not exist yet.  Just load the form.\r\n                    if (options.node.get('id') === undefined || options.action) {\r\n                      // load the category create form for the user to fill out values\r\n                      return this._loadNewCategoryForm(options, catId, catName);\r\n                    } else {\r\n                      // code path new: display the form in a modal dialog with the Add button\r\n                      return this._displayAddCategoryForm(options, catId, catName);\r\n                    }\r\n                  }, this));\r\n                }, $.Deferred().resolve(), this)\r\n                .done(function (resp3) {\r\n                  deferred.resolve(resp3);\r\n                })\r\n                .fail(function (error3) {\r\n                  deferred.reject(error3);\r\n                });\r\n          }, this))\r\n          .fail(function (error2) {\r\n            deferred.reject(error2);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private: display the form in a modal dialog with the Add button\r\n    _displayAddCategoryForm: function (options, catId, catName) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n      this._getCategoryModel(options, catId, catName)\r\n          .done(function (resp) {\r\n            var formOptions = {\r\n              model: options.node,\r\n              context: options.context,\r\n              commands: commands,\r\n              catId: catId,\r\n              catName: catName, catModel: resp.catModel\r\n            };\r\n            var metadataAddCatView = new MetadataAddCategoriesView();\r\n            metadataAddCatView.displayForm(formOptions)\r\n                .done(function (resp2) {\r\n                  self._loadNewCategoryForm(options, catId, catName, \"update\")\r\n                      .done(function (resp3) {\r\n                        deferred.resolve(resp3);\r\n                      })\r\n                      .fail(function (error3) {\r\n                        deferred.reject(error3);\r\n                      });\r\n                })\r\n                .fail(function (error2) {\r\n                  deferred.reject(error2);\r\n                });\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: load the category create form first for the user to fill out values\r\n    _loadNewCategoryForm: function (options, catId, catName, formType) {\r\n      if (catId && options.collection.get(catId)) {\r\n        var title = lang.addNewCategoryFailTitle;\r\n        var message = _.str.sformat(lang.categoryExistsMessage, catName);\r\n        ModalAlert.showError(message, title);\r\n        return $.Deferred().reject({});\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      this._getCategoryModel(options, catId, catName, formType)\r\n          .done(_.bind(function (resp) {\r\n            deferred.resolve(resp);\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: get the category model\r\n    _getCategoryModel: function (options, catId, catName, formType) {\r\n\r\n      var allowDeleteCat = true;\r\n      // default: formType = 'create'\r\n      if (!formType) {\r\n        formType = 'create';\r\n        if (options.action === undefined) {\r\n          allowDeleteCat = false;\r\n        }\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      var fullUrl;\r\n      var connector = (options.node && options.node.connector) ||\r\n                      (options.container && options.container.connector);\r\n      var nodeId = options.node.get('id');\r\n      //TO:DO pId is passed to made it availabe in TKLFieldView need to fix as this temp fix\r\n      if (options.container) {\r\n        options.node.pId = options.container.get('id');\r\n      }\r\n      if (options.node.get('id') === undefined && options.action === 'create') {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/create?parent_id=' + options.container.get('id') +\r\n            '&type=' + options.node.get('type') + '&category_id=' + catId);\r\n      } else if (options.action === 'copy' || options.action === 'move') {\r\n        var inheritanceVal = 0;\r\n        if (options.inheritance === 'destination') {\r\n          inheritanceVal = 1;\r\n        } else if (options.inheritance === 'merged') {\r\n          inheritanceVal = 2;\r\n        }\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/' + options.action + '?id=' + nodeId +\r\n            '&parent_id=' + options.container.get('id') +\r\n            '&inheritance=' + inheritanceVal + '&category_id=' + catId);\r\n      } else {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/categories/' + formType + '?id=' + nodeId +\r\n            '&category_id=' + catId);\r\n      }\r\n\r\n      var ajaxOptions = {\r\n        type: 'GET',\r\n        url: fullUrl\r\n      };\r\n      connector.extendAjaxOptions(ajaxOptions);\r\n      if (options.parentView) {\r\n        options.parentView.blockActions();\r\n        //prevent pointer events on add button untill new category form is rendered\r\n        options.parentView.trigger(\"update:button\", true);\r\n      }\r\n      $.ajax(ajaxOptions)\r\n          .done(_.bind(function (resp) {\r\n            options.parentView && (options.parentView.unblockActions());\r\n\r\n            // different calls have different data structure\r\n            var categoriesForm, data, fOptions, schema;\r\n            if (options.action === 'create' ||\r\n                options.action === 'copy' || options.action === 'move') {\r\n              if (resp.forms.length > 1) {\r\n                categoriesForm = _.find(resp.forms, function (form) {\r\n                  return form.role_name === \"categories\";\r\n                });\r\n                if (categoriesForm) {\r\n                  data = (categoriesForm.data[catId]) || {};\r\n                  fOptions = (categoriesForm.options.fields[catId]) || {};\r\n                  schema = (categoriesForm.schema.properties[catId]) || {};\r\n                }\r\n              }\r\n            } else {\r\n              categoriesForm = resp && resp.forms && resp.forms[0];\r\n              data = (categoriesForm && categoriesForm.data) || {};\r\n              fOptions = (categoriesForm.options) || {};\r\n              schema = (categoriesForm.schema) || {};\r\n            }\r\n\r\n            if (categoriesForm) {\r\n\r\n              if (fOptions.form) {\r\n                fOptions = _.omit(fOptions, 'form');\r\n              }\r\n              if (schema.title === undefined && catName) {\r\n                schema.title = catName;\r\n              }\r\n\r\n              var metadataUtils = new MetadataUtils();\r\n              var required = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(fOptions,\r\n                  schema);\r\n\r\n              var catModel = new AppliedCategoryFormModel({\r\n                id: catId,\r\n                title: catName || (fOptions && fOptions.fields && fOptions.fields.category_id &&\r\n                                   fOptions.fields.category_id.label),\r\n                allow_delete: allowDeleteCat,\r\n                required: required\r\n              }, {\r\n                node: options.node,\r\n                categoryId: catId,\r\n                action: 'none'\r\n              });\r\n\r\n              catModel.set({\r\n                data: data,\r\n                options: fOptions,\r\n                schema: _.omit(schema, 'description'),\r\n                role_name: \"categories\",\r\n                removeable: true\r\n              });\r\n\r\n              deferred.resolve({catModel: catModel});\r\n\r\n            } else {\r\n              deferred.reject({});\r\n            }\r\n\r\n          }, this))\r\n          .fail(_.bind(function (error) {\r\n            if (options.parentView) {\r\n              options.parentView.unblockActions();\r\n              options.parentView.trigger(\"update:button\", false);\r\n            }\r\n            var serverError = this._getRespError(error);\r\n            var title = lang.loadNewCategoryFailTitle;\r\n            var message = _.str.sformat(lang.loadNewCategoryFailMessage,\r\n                catName, options.node.get('name'), nodeId, serverError);\r\n            ModalAlert.showError(message, title);\r\n            deferred.reject(error);\r\n          }, this));\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesController, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/nodesprites',\r\n  'csui/utils/commands', \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert,\r\n    nodeSpriteCollection, commands) {\r\n\r\n  //\r\n  // Metadata Add Item Controller allows the adding of item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataAddItemController() {\r\n  }\r\n\r\n  _.extend(MetadataAddItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n      // Compute the type name only if the new node includes the type name\r\n      // sent by the server, to be able to fall back to it\r\n      var addableTypeName = node.get('type_name') ?\r\n                            nodeSpriteCollection.findTypeByNode(node) :\r\n                            lang.addItemMetadataDialogTitleGeneric;\r\n\r\n      this.node = node;\r\n      this.metadataController = options.metadataController;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        id: options.id,\r\n        context: status.context || options && options.context,\r\n        commands: commands,\r\n        action: 'create',\r\n        inheritance: options.inheritance,\r\n        // Performs the complete fetch and preparation of the creation forms\r\n        collection: options.completeFormCollection,\r\n        // Performs just fetch; the preparation is performed by the csui forms collection\r\n        formCollection: options.formCollection\r\n      });\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  _.str.sformat(lang.addItemMetadataDialogTitle1, addableTypeName);\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addItemMetadataDialogButtonAddTitle;\r\n      dialogOptions.OkButtonClick = this._addItem;\r\n      dialogOptions.CancelButtonActionToken = options.cancelButtonActionToken;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n      this.listenTo(this.metadataAddItemPropView, \"update:button\", _.bind(function (args) {\r\n        this.dialog && this.dialog.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _addItem: function (args) {\r\n      function updateButtons(dialog, attributes) {\r\n        if (dialog && dialog.footerView) {\r\n          dialog.footerView.getButtons().forEach(function (buttonView) {\r\n            buttonView.updateButton(attributes);\r\n          });\r\n        }\r\n      }\r\n\r\n      if (!!args.view.metadataPropertiesView.allFormsRendered) {\r\n        var enable = false;\r\n        if (args.callerProcessData !== true) {\r\n          updateButtons(this.dialog, {disabled: true});\r\n          enable = true;\r\n        }\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = this.metadataController ||\r\n                                     new MetadataController();\r\n\r\n            this.metadataAddItemPropView.blockActions();\r\n            enable = false;\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.listenToOnce(this.dialog, \"hide\", function () {\r\n                    this.metadataAddItemPropView.unblockActions();\r\n                    updateButtons(this.dialog, {disabled: false});\r\n                  });\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(_.bind(function (resp) {\r\n                  this.metadataAddItemPropView.unblockActions();\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                  updateButtons(this.dialog, {disabled: false});\r\n                }, this));\r\n          }\r\n        }\r\n        if (enable) {\r\n          updateButtons(this.dialog, {disabled: false});\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddItemController, {version: \"1.0\"});\r\n\r\n  return MetadataAddItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log', 'csui/lib/marionette'\r\n], function (module, _, $, log, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior implements a default keyboard navigation for the metadata navigation list.\r\n\r\n  var TabPosition = {\r\n    none: -1,\r\n    header: 0,\r\n    list: 1\r\n  };\r\n\r\n  var MetadataNavigationListKeyboardBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListKeyboardBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      view.keyboardBehavior = this;\r\n      this.tabableElements = [];\r\n\r\n      var self = this;\r\n      this.listenTo(view, 'show', function () {\r\n        self.refreshTabableElements(view);\r\n      });\r\n      this.listenTo(view, 'click:item', function (item) {\r\n        // clear the currently focused element\r\n        var selIndex = view.selectedIndex;\r\n        var selectedElem = view.selectedIndexElem(selIndex);\r\n        selectedElem && selectedElem.prop('tabindex', '-1');\r\n        // set the new element tabindex\r\n        view.currentTabPosition = TabPosition.list;\r\n        view.selectedIndex = view.collection.indexOf(item.model);\r\n      });\r\n\r\n      _.extend(view, {\r\n\r\n        _focusHeader: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            this.currentTabPosition = TabPosition.header;\r\n            return $(this.ui.header);\r\n          }\r\n          return undefined;\r\n        },\r\n\r\n        _focusList: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          this.currentTabPosition = TabPosition.list;\r\n          return this.getSelectedItem().$el;\r\n        },\r\n\r\n        _setFocus: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            return this._focusHeader();\r\n          } else {\r\n            return this._focusList();\r\n          }\r\n        },\r\n\r\n        _headerIsInFocus: function () {\r\n          return this.$(this.ui.header).is(\":focus\");\r\n        },\r\n\r\n        _listIsInFocus: function () {\r\n          var inFocus = false;\r\n          var i;\r\n          for (i = 0; i < this.collection.length; i++) {\r\n            var $elem = this.selectedIndexElem(i);\r\n            if ($elem && $elem.is(\":focus\")) {\r\n              inFocus = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          return inFocus;\r\n        },\r\n\r\n        _checkFocusAndSetCurrentTabPosition: function () {\r\n          if (this._headerIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.header;\r\n          } else if (this._listIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.list;\r\n          } else {\r\n            this.currentTabPosition = TabPosition.none;\r\n          }\r\n        },\r\n\r\n        // handle scenario that currentlyFocusedElement does not have event param for shiftTab\r\n        _setFirstAndLastFocusable: function () {\r\n          if (this.headerFocusable === true) {\r\n            $(this.ui.header).prop('tabindex', '0');\r\n          }\r\n          this.getSelectedItem() && this.getSelectedItem().$el.prop('tabindex', '0');\r\n        },\r\n\r\n        currentlyFocusedElement: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          this._setFirstAndLastFocusable();\r\n          if (event && event.shiftKey) {\r\n            return this._focusList();\r\n          }\r\n          // maintain old position\r\n          if (this.currentTabPosition === TabPosition.header) {\r\n            return this._focusHeader();\r\n          } else if (this.currentTabPosition === TabPosition.list) {\r\n            return this._focusList();\r\n          } else {\r\n            return this._setFocus();\r\n          }\r\n        },\r\n\r\n        _resetFocusedListElem: function () {\r\n          // workaround the general behaviors that it keeps the old focus\r\n          // reset focus back to the active list item before moving out of the region\r\n          var selIndex, selectedElem;\r\n\r\n          // clear the currently focused element\r\n          selIndex = this.selectedIndex;\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          selectedElem && selectedElem.prop('tabindex', '-1');\r\n\r\n          // set to the active element\r\n          selIndex = this.getSelectedIndex();\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          if (selectedElem) {\r\n            selectedElem.prop('tabindex', '0');\r\n            this.selectedIndex = selIndex;\r\n          }\r\n\r\n          // always have the header focusable\r\n          $(this.ui.header).prop('tabindex', '0');\r\n        },\r\n\r\n        _moveTo: function (event, $elem, $preElem) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // this.trigger('changed:focus', this);\r\n          setTimeout(_.bind(function () {\r\n            $preElem && $preElem.prop('tabindex', '-1');\r\n            $elem.prop('tabindex', '0');\r\n            $elem.focus();\r\n          }, this), 50);\r\n        },\r\n\r\n        onKeyInView: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (event.keyCode === 9) {\r\n            // tab\r\n            if (event.shiftKey) {  // shift tab -> activate previous region\r\n              if (this.currentTabPosition === TabPosition.list &&\r\n                  this.headerFocusable === true && this.headerElement) {\r\n                if ($(this.ui.header).is(\":visible\")) {\r\n                  this._moveTo(event, this._focusHeader());\r\n                  this._resetFocusedListElem();\r\n                }\r\n              }\r\n            } else {\r\n              if (this.currentTabPosition === TabPosition.header) {\r\n                if (this.$el.find(\">.cs-content\").is(\":visible\")) {\r\n                  this._moveTo(event, this._focusList());\r\n                }\r\n              } else {\r\n                setTimeout(_.bind(function () {\r\n                  this._resetFocusedListElem();\r\n                }, this), 50);\r\n              }\r\n            }\r\n          } else if (event.keyCode === 32 || event.keyCode === 13) {\r\n            // space(32) or enter(13)\r\n            if (this.currentTabPosition === TabPosition.header) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.clickBack();\r\n            } else if (this.currentTabPosition === TabPosition.list) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.selectAt(this.selectedIndex);\r\n            }\r\n          }\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (this.currentTabPosition !== TabPosition.list) {\r\n            this.onKeyInView(event);\r\n            return;\r\n          }\r\n\r\n          var selIndex = this.selectedIndex;\r\n          if (selIndex < 0 || selIndex === undefined) {\r\n            selIndex = this.getSelectedIndex();\r\n          }\r\n          var $preElem = this.selectedIndexElem(selIndex);\r\n\r\n          switch (event.which) {\r\n          case 33: // page up\r\n            this._moveTo(event, this._selectFirst(), $preElem);\r\n            break;\r\n          case 34: // page down\r\n            this._moveTo(event, this._selectLast(), $preElem);\r\n            break;\r\n          case 38: // up\r\n            this._moveTo(event, this._selectPrevious(), $preElem);\r\n            break;\r\n          case 40: // down\r\n            this._moveTo(event, this._selectNext(), $preElem);\r\n            break;\r\n          default:\r\n            this.onKeyInView(event);\r\n            return; // exit this handler for other keys\r\n          }\r\n        },\r\n\r\n        _selectFirst: function () {\r\n          this.selectedIndex = 0;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectLast: function () {\r\n          this.selectedIndex = this.collection.length - 1;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectNext: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex < this.collection.length - 1) {\r\n            this.selectedIndex++;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectPrevious: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex > 0) {\r\n            this.selectedIndex--;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        selectAt: function (index) {\r\n          if (index >= this.collection.length || index < 0) {\r\n            return;\r\n          }\r\n          var $elem = this.selectedIndexElem(index);\r\n          $elem && $elem.click();\r\n        }\r\n\r\n      });\r\n\r\n    }, // constructor\r\n\r\n    refreshTabableElements: function (view) {\r\n      log.debug('MetadataNavigationListKeyboardBehavior::refreshTabableElements ' +\r\n                view.constructor.name) &&\r\n      console.log(log.last);\r\n      if (view.options.data.back_button) {\r\n        this.view.headerFocusable = true;\r\n        this.view.headerElement = view.ui.header;\r\n      }\r\n      this.view.currentTabPosition = TabPosition.none;\r\n      this.view.selectedIndex = -1;\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListKeyboardBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/controls/list/simplelist.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, $,\r\n    SimpleListView,\r\n    TabableRegionBehavior,\r\n    MetadataNavigationListKeyboardBehavior,\r\n    NodeTypeIconView,\r\n    VersionModel,\r\n    lang) {\r\n\r\n  var MetadataNavigationListView = SimpleListView.extend({\r\n\r\n    childViewOptions: function (model) {\r\n      return {\r\n        templateHelpers: function () {\r\n          var nameAttribute = this.options.nameAttribute || 'name';\r\n          return {enableIcon: true, name: this.model.get(nameAttribute)};\r\n        },\r\n        nameAttribute: this.options.data.nameAttribute\r\n      };\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyDown'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListKeyboardBehavior: {\r\n        behaviorClass: MetadataNavigationListKeyboardBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationListView(options) {\r\n      this.events = _.extend({}, SimpleListView.prototype.events, this.events);\r\n      SimpleListView.apply(this, arguments);\r\n\r\n      // Do not use childEvents, because SimpleListView does it and our property\r\n      // would overwrite their value and disable their event handlers\r\n      this.listenTo(this, 'childview:render', this.onRenderItem);\r\n      this.listenTo(this, 'childview:before:destroy', this.onBeforeDestroyItem);\r\n    },\r\n\r\n    onRenderItem: function (childView) {\r\n      // for version metadata, show the version number in place of the icon\r\n      if (childView.model instanceof VersionModel) {\r\n        var verNum = childView.model.get('version_number_name');\r\n        $(childView.$('.csui-type-icon').get(0)).append(\r\n            \"<span title='\" + verNum + \"' class='list-item-version'>\" + verNum + \"</span>\"\r\n        );\r\n      } else {\r\n        childView._nodeIconView = new NodeTypeIconView({\r\n          el: childView.$('.csui-type-icon').get(0),\r\n          node: childView.model\r\n        });\r\n        childView._nodeIconView.render();\r\n        // Checking for ThumbnailView\r\n        if (this.options.originatingView && this.options.originatingView.thumbnailView) {\r\n          this.$el.addClass(\"csui-metadata-navigation-thumbnail\");\r\n          var nodeUrl = childView.model && childView.model.thumbnail &&\r\n                        childView.model.thumbnail.url;\r\n          if (nodeUrl) {\r\n            childView._nodeIconView.$el.find('.csui-icon').css('background-image',\r\n                'url(' + nodeUrl + ')');\r\n          }\r\n        }\r\n        else {\r\n          this.$el.find(\".csui-metadata-navigation-thumbnail\").removeClass(\r\n              \"csui-metadata-navigation-thumbnail\");\r\n        }\r\n      }\r\n\r\n      // show a red star if the model has enforced required attribute\r\n      var show_required = this.options.data && this.options.data.show_required === true;\r\n      var enforcedRequire = childView.model && childView.model.options &&\r\n                            childView.model.options.enforcedRequiredAttrs === true;\r\n      if (show_required && enforcedRequire) {\r\n        var titleEl = childView.$('.list-item-title').get(0);\r\n        if (titleEl) {\r\n          var cssClasses, tooltip;\r\n          if (childView.model.validated === true) {\r\n            // change the star to green checkmark if the model passed validation\r\n            cssClasses = 'cs-icon-required category_required_done';\r\n            tooltip = lang.requiredPassedTooltip;\r\n          } else {\r\n            //show red star icon for required attributes to be filled\r\n            cssClasses = 'cs-icon-required category_required';\r\n            tooltip = lang.requiredTooltip;\r\n          }\r\n          $(titleEl).before(\"<span class='\" + cssClasses + \"' alt='\" + tooltip +\r\n                            \"' title='\" + tooltip + \"'></span>\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onBeforeDestroyItem: function (childView) {\r\n      if (childView._nodeIconView) {\r\n        childView._nodeIconView.destroy();\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_common_metadata.action.multiple.items', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.behavior',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette'\r\n], function (_, $, Backbone, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior provides shared functionality for the metadata navigation list.\r\n\r\n  var MetadataNavigationListBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      _.extend(view, {\r\n\r\n        onBeforeShow: function () {\r\n          this._showChildViews();\r\n        },\r\n        onShow: function () {\r\n          this._showScrollPosition();\r\n        },\r\n        onBeforeDestroy: function () {\r\n          if (this.mdv && this.mdv.internal) {\r\n            this.mdv.destroy();\r\n          }\r\n          if (this.mdn) {\r\n            this.mdn.destroy();\r\n          }\r\n        },\r\n\r\n        _showChildViews: function () {\r\n          this.navigationRegion.show(this.mdn);\r\n          this.contentRegion.show(this.mdv);\r\n        },\r\n\r\n        _showScrollPosition: function () {\r\n          if (this.initiallySelected instanceof Backbone.Model) {\r\n            var index = this.mdn.collection.findIndex({id: this.initiallySelected.get('id')});\r\n            (index < 0 || index > this.mdn.collection.length - 1) && (index = 0);\r\n            return this.mdn.setSelectedIndex(index);\r\n          } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n            var firstSelected = this.initiallySelected.models[0];\r\n            var selIndex = this.mdn.collection.indexOf(firstSelected);\r\n            this.mdn.setSelectedIndex(selIndex);\r\n          } else {\r\n            if (this.mdn.collection.models.length > 0) {\r\n              this.mdn.setSelectedIndex(0);\r\n            }\r\n          }\r\n\r\n        }\r\n      });\r\n\r\n    } // constructor\r\n\r\n  });\r\n\r\n  return MetadataNavigationListBehavior;\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/common/metadata.action.multiple.items',[],function(){});\n","csui.define('csui/widgets/metadata/impl/common/metadata.action.multiple.items.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior', \"csui/lib/jsonpath\",\r\n  'css!csui/widgets/metadata/impl/common/metadata.action.multiple.items'\r\n], function (_, Backbone, Marionette, MetadataNavigationListView,\r\n    MetadataActionOneItemPropertiesView, template, LayoutViewEventsPropagationMixin,\r\n    MetadataNavigationListBehavior, jsonPath) {\r\n\r\n  var MetadataActionMultipleItemsView = Marionette.LayoutView.extend({\r\n\r\n    className: 'cs-metadata-add-items',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataActionMultipleItemsView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.initiallySelected = this.options.selected;\r\n      this.commonCategories = options.commonCategories;\r\n      this.initialFormData = options.initialFormData;\r\n      this.requiredFields = [];\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n      if (options.applyFlag) {\r\n        initiallySelectedModel.set(\"applyFlag\", options.applyFlag);\r\n      }\r\n\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: initiallySelectedModel,\r\n        container: this.container,\r\n        context: this.context,\r\n        commands: options.commands,\r\n        originatingView: this.originatingView,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        data: {\r\n          back_button: false,\r\n          title: '',\r\n          show_required: true\r\n        }\r\n      });\r\n      //Set the Initial categories to all uploadable files\r\n      if (options.applyFlag) {\r\n        this.setInitialCategories();\r\n      }\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      var valid = this.validateAndSetValuesToNode();\r\n      if (valid) {\r\n        this._showNode(item.model);\r\n      } else {\r\n        item.cancelClick = true;\r\n      }\r\n    },\r\n\r\n    // set initial category values to all Alpaca forms\r\n    setInitialCategories: function () {\r\n      var that = this;\r\n      _.each(this.mdn.collection.models, function (model) {\r\n        var fileAttr = {};\r\n        if (model.get(\"data\") === undefined) {\r\n          fileAttr.advanced_versioning = false;\r\n          fileAttr.name = model.get(\"newName\") || model.get(\"name\");\r\n          fileAttr.mime_type = model.get(\"mime_type\");\r\n          fileAttr.type = model.get(\"type\") || 144;\r\n          fileAttr.parent_id = this.mdv.options.container.get(\"id\");\r\n          _.extend(fileAttr, JSON.parse(JSON.stringify(that.commonCategories)));\r\n        }\r\n        model.set('data', fileAttr);\r\n      }, this);\r\n\r\n    },\r\n\r\n    getRequiredFields: function () {\r\n      var formValues = {},\r\n          that       = this;\r\n      that.requiredFields = [];\r\n      if (this.initialFormData && this.initialFormData.models) {\r\n        _.each(this.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                var requiredFields = jsonPath(schema, \"$..[?(@.required===true)]\",\r\n                    {resultType: \"PATH\"});\r\n                var nonValidateFields = jsonPath(options, \"$..[?(@.validate===false)]\",\r\n                    {resultType: \"PATH\"});\r\n\r\n                // getting field id for non validate fields\r\n                var nonValidateFieldsIds = [];\r\n                _.each(nonValidateFields, function (nvField) {\r\n                  var matches = nvField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    nonValidateFieldsIds.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // getting field id for Required Fields\r\n                var reqFieldId = [];\r\n                _.each(requiredFields, function (reqField) {\r\n                  var matches = reqField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    reqFieldId.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // eliminating non validating fields from required field ids.\r\n                reqFieldId = reqFieldId.filter(function (n) {\r\n                  // Eliminate if validation not required.\r\n                  return nonValidateFieldsIds.indexOf(n) === -1;\r\n                });\r\n                if (reqFieldId.length > 0) {\r\n                  that.requiredFields.push(reqFieldId);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    validateAndSetValuesToAllNode: function () {\r\n      var that           = this,\r\n          requiredFields = {},\r\n          valid          = true;\r\n      var formsValid = true;\r\n      this.getRequiredFields();\r\n      _.each(this.mdn.collection.models, _.bind(function (form) {\r\n        var data = form.get('data');\r\n        _.each(data.roles.categories, function (category) {\r\n          valid = valid && that._checkForAlpacaRequiredFields(form, category);\r\n        });\r\n        form.validated = valid;\r\n        formsValid = formsValid && valid;\r\n      }, this));\r\n      return formsValid;\r\n    },\r\n\r\n    // private\r\n    _checkForAlpacaRequiredFields: function (form, category) {\r\n      var valid    = true,\r\n          reqArray = [];\r\n      if (!!this.requiredFields) {\r\n        var nullCount = false;\r\n        _.each(this.requiredFields, function (arrayElement) {\r\n          reqArray = jsonPath(category, \"$..\" + arrayElement.toString(),\r\n              {resultType: \"PATH\"}.toArray);\r\n          _.each(reqArray, function (arrayElement) {\r\n            var checkNull = function (element) {\r\n              if (element instanceof Array && (element !== null || element !== \"\")) {\r\n                _.each(element, function (childElement) {\r\n                  checkNull(childElement);\r\n                });\r\n              } else if (element === null || element === \"\") {\r\n                nullCount = true;\r\n                return;\r\n              }\r\n            };\r\n            if (!nullCount) {\r\n              checkNull(arrayElement);\r\n            } else {\r\n              valid = false;\r\n              return;\r\n            }\r\n          });\r\n          if (nullCount) {\r\n            valid = false;\r\n            return;\r\n          }\r\n        });\r\n      }\r\n      return valid;\r\n    },\r\n\r\n    // public: validate the current form and set values to node if valid.\r\n    //         returns true if form is valid; otherwise, false.\r\n    validateAndSetValuesToNode: function () {\r\n      var item = this.mdn.getSelectedItem();\r\n      var valid = this.mdv.validate();\r\n      if (valid) {\r\n        var data = this.mdv.getValues();\r\n        // store the newly added categories data\r\n        if (item.model.newCategories.models.length > 0) {\r\n          _.each(item.model.newCategories.models, function (catModel) {\r\n            var catId = catModel.get('id');\r\n            var roleName = catModel.get('role_name');\r\n            var catData = {};\r\n            if (data && data.roles && data.roles[roleName]) {\r\n              catData = data.roles[roleName];\r\n            }\r\n            if (_.isEmpty(catData[catId]) === false) {\r\n              _.each(catModel.attributes.data, function (iValue, iKey) {\r\n                if (_.has(catData[catId], iKey)) {\r\n                  catModel.attributes.data[iKey] = catData[catId][iKey];\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n        item.model.validated = true;\r\n        item.model.set('data', data);  // intentionally trigger the set to redraw list item\r\n        return true;\r\n      }\r\n      if (!!this.mdv.metadataPropertiesView.allFormsRendered) {\r\n        item.model.validated = false;\r\n        item.model.trigger('change', item.model); // intentionally trigger the set to redraw list item\r\n      }\r\n      return false;\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n      model.set(\"applyFlag\", this.options.applyFlag);\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: model,\r\n        container: this.container,\r\n        context: this.context,\r\n        originatingView: this.originatingView,\r\n        action: this.options.action,\r\n        inheritance: this.options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close',\r\n          _.bind(function () {\r\n            this.trigger(\"metadata:close\", {sender: this});\r\n          }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataActionMultipleItemsView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataActionMultipleItemsView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert, commands) {\r\n\r\n  function MetadataAddMultipleDocsController() {\r\n  }\r\n\r\n  _.extend(MetadataAddMultipleDocsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      var applyFlag        = false,\r\n          commonCategories = this._getCommonCategories(options);\r\n      if (options.initialFormData && options.initialFormData.models &&\r\n          options.initialFormData.models.length > 1) {\r\n        applyFlag = true;\r\n      }\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        action: 'create',\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        commonCategories: commonCategories,\r\n        applyFlag: applyFlag,\r\n        initialFormData: options.initialFormData\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.addDocumentMetadataDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addDocumentMetadataDialogAddButtonTitle;\r\n      dialogOptions.OkButtonClick = this._addItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    _getCommonCategories: function (options) {\r\n      var formValues = {},\r\n          that       = this;\r\n      if (options.initialFormData && options.initialFormData.models) {\r\n        _.each(options.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                // For categories, merge the properties to the\r\n                // roles.categories.<category_id> object\r\n                var catId = tab.get(\"id\").toString();\r\n                category = role[catId] || (role[catId] = {});\r\n                // when attributes are not set, the server deletes\r\n                // the category unless it is set to null\r\n                if (_.isEmpty(values)) {\r\n                  category = null;\r\n                } else {\r\n                  //Replace null values with empty string\r\n                  values = JSON.parse(JSON.stringify(values).replace(/null/g, \"\\\"\\\"\"));\r\n                  _.extend(category, values);\r\n                }\r\n              } else {\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                //TODO: uncomment this once classifications are displayed on upload dialog\r\n                //_.extend(role, values);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return formValues;\r\n    },\r\n\r\n    // private\r\n    _addItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n          var allValid = true;\r\n          this.metadataAddItems.validateAndSetValuesToAllNode();\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            allValid = allValid && (model.validated ? true : false);\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('fileObject');\r\n              var extended_data = model.get('extended_data');\r\n              if (data && item) {\r\n                item.set('newName', data.name);\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  _.extend(extended_data, extendedData);\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.addDocumentMetadataDialogTitle;\r\n            var message = lang.missingRequiredMetadataForDocuments;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        } else {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n              'cs-formfield-invalid');\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddMultipleDocsController, {version: \"1.0\"});\r\n\r\n  return MetadataAddMultipleDocsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.document.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/models/nodes\", \"csui/models/node/node.model\",\r\n  \"csui/widgets/metadata/metadata.add.item.controller\", \"csui/widgets/metadata/impl/metadata.utils\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataAddItemController, MetadataUtils,\r\n    MetadataAddMultipleDocsController, lang) {\r\n  'use strict';\r\n\r\n  function MetadataAddDocumentController() {\r\n  }\r\n\r\n  _.extend(MetadataAddDocumentController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    addItemsRequiredMetadata: function (fileUploadCollection, options) {\r\n      var deferred      = $.Deferred(),\r\n          fileModels    = fileUploadCollection.models,\r\n          file          = _.find(fileUploadCollection.models, function (fileUploadModel) {\r\n                return fileUploadModel.get('newVersion') === undefined;\r\n              }) || fileModels[0],\r\n          tempName      = fileModels.length > 0 ? file.get('file').name : 'temp_name',\r\n          utilOptions   = {\r\n            action: 'create',\r\n            addableType: options.addableType,\r\n            name: tempName,\r\n            container: options.container,\r\n            docParentId: fileModels.length > 0 ? file.get('id') : null\r\n          },\r\n          metadataUtils = new MetadataUtils(),\r\n          newFiles      = $.grep(fileUploadCollection.models, function (fileUploadModel) {\r\n            return fileUploadModel.get('newVersion') === undefined;\r\n          }); //Collection might contain new versions of existing items, remove such items\r\n\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if (resp.hasRequiredMetadata === true) {\r\n              var metadataDeferred = $.Deferred();\r\n\r\n              if (newFiles && newFiles.length === 1) {\r\n                // add one item with required metadata\r\n                metadataDeferred = this._addOneItemWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (newFiles && newFiles.length > 1) {\r\n                // add multiple items with required metadata\r\n                if (resp.initialFormData) {\r\n                  options.initialFormData = resp.initialFormData;\r\n                }\r\n                metadataDeferred = this._addMultipleItemsWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else {\r\n                deferred.reject();\r\n              }\r\n\r\n              metadataDeferred.done(function (resp) {\r\n                deferred.resolve(resp);\r\n              }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed with add item as normal\r\n              deferred.resolve({});\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var file = item.get('file');\r\n          var node = new NodeModel({\r\n            name: item.get('newName') || file.name,\r\n            type: item.get('type') || 144,\r\n            size: file.size,\r\n            mime_type: file.type,\r\n            fileObject: item,\r\n            extended_data: item.get('extended_data')\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          _.extend(node.options, {\r\n            enforcedRequiredAttrs: true\r\n          });\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: add one item with required metadata\r\n    _addOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container,\r\n        context: options.context\r\n      };\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        dialogTitle: lang.addDocumentMetadataDialogTitle,\r\n        addButtonTitle: lang.addDocumentMetadataDialogAddButtonTitle,\r\n        cancelButtonActionToken: \"cancelAddOneItemWithRequiredMetadata\"\r\n      };\r\n\r\n      // show add item metadata view\r\n      var metadataAddItemController = new MetadataAddItemController();\r\n      metadataAddItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            var item = items[0];\r\n            item.set('newName', resp.data.name);\r\n\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              item.set('extended_data', extendedData);\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (args) {\r\n            var error = (args && args.error) ? args.error : undefined;\r\n            var userAction;\r\n\r\n            if (args && args.buttonAttributes) {\r\n              if (args.buttonAttributes.actionToken === \"cancelAddOneItemWithRequiredMetadata\") {\r\n                userAction = \"cancelAddOneItemWithRequiredMetadata\";\r\n              }\r\n              else if (args.buttonAttributes.actionToken === \"closeMetadataActionView\") {\r\n                userAction = \"closeMetadataActionView\";\r\n              }\r\n            }\r\n            deferred.reject({error: error, userAction: userAction});\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: add multiple items with required metadata\r\n    _addMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n\r\n      var metadataAddMultipleDocsController = new MetadataAddMultipleDocsController();\r\n      metadataAddMultipleDocsController\r\n          .displayForm(cmdStatus, options)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function () {\r\n            deferred.reject();\r\n          });\r\n\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataAddDocumentController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataAddDocumentController, {version: \"1.0\"});\r\n\r\n  return MetadataAddDocumentController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert, commands) {\r\n\r\n  //\r\n  // Metadata Copy/Move One Item Controller allows copying/moving of ONE item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataCopyMoveOneItemController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveOneItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n\r\n      this.node = node;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItem;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItem: function (args) {\r\n      if (args.view.metadataPropertiesView && args.view.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = new MetadataController();\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(function (resp) {\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveOneItemController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveOneItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert) {\r\n\r\n  function MetadataCopyMoveMultipleItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          var allValid = true;\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            var modelValid = model.options.enforcedRequiredAttrs === true ?\r\n                             (model.validated ? true : false ) : true;\r\n            allValid = allValid && modelValid;\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('itemObject');\r\n              if (data && item) {\r\n                item.newName = data.name;\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  item.extended_data = extendedData;\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.defaultDialogTitle;\r\n            var message = lang.missingRequiredMetadataForObjects;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveMultipleItemsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.copy.move.items.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/models/nodes\",\r\n  \"csui/models/node/node.model\", \"csui/widgets/metadata/impl/metadata.utils\", \"csui/models/actions\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataUtils, ActionCollection,\r\n    MetadataCopyMoveOneItemController, MetadataCopyMoveMultipleItemsController, lang) {\r\n\r\n  function MetadataCopyMoveItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveItemsController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: copy/move one or multiple items with open metadata option\r\n    //\r\n    CopyMoveItemsWithMetadata: function (items, options) {\r\n      return this.CopyMoveItemsRequiredMetadata(items, _.extend(options, {openMetadata: true}));\r\n    },\r\n\r\n    // private\r\n    _copyMoveItemsWithMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var metadataDeferred = $.Deferred();\r\n\r\n      if (items && items.length > 0) {\r\n        options.id || (options.id = items[0].id);\r\n        options.container || (options.container = options.targetFolder);\r\n      }\r\n\r\n      if (items && items.length === 1) {\r\n        // copy/move one item with metadata\r\n        metadataDeferred = this._copyMoveOneItemWithRequiredMetadata(items, options);\r\n      } else if (items && items.length > 1) {\r\n        // copy/move multiple items with metadata\r\n        metadataDeferred = this._copyMoveMultipleItemsWithRequiredMetadata(items, options);\r\n      } else {\r\n        deferred.reject();\r\n      }\r\n\r\n      metadataDeferred.done(function (resp) {\r\n        deferred.resolve();\r\n      }).fail(function (error) {\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    CopyMoveItemsRequiredMetadata: function (items, options) {\r\n      if (!items || items.length < 1) {\r\n        return $.Deferred().reject();\r\n      }\r\n\r\n      // 'original' does not need checking\r\n      if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      // latest PM decision is to deal only with 'destination'.  Option 'merged' is only for 1 item.\r\n      if (options.openMetadata !== true && items.length > 1 && options.inheritance === 'merged') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      // talking the server developers, only need to check with one object\r\n      var utilOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        items: items,\r\n        container: options.targetFolder,\r\n        context: options.context\r\n      };\r\n      var metadataUtils = new MetadataUtils();\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadataOnNodes(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if ((resp.requiredMetadata && resp.enforcedItems && resp.enforcedItems.length > 0) ||\r\n                options.openMetadata === true) {\r\n              if (resp.requiredMetadata) {\r\n                utilOptions = _.extend(utilOptions, {enforcedItems: resp.enforcedItems});\r\n              }\r\n              this._copyMoveItemsWithMetadata(items, utilOptions)\r\n                  .done(function (resp) {\r\n                    deferred.resolve(resp);\r\n                  }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed normally\r\n              deferred.resolve();\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var enforcedRequiredAttrs = _.find(options.enforcedItems,\r\n              function (enfItem) { return enfItem.id === item.id; }) === undefined ? false : true;\r\n          var node = new NodeModel({\r\n            id: item.id,\r\n            name: item.newName || item.name,\r\n            container: item.container,\r\n            mime_type: item.mime_type,\r\n            original_id: item.original_id,\r\n            type: item.type,\r\n            type_name: item.type_name,\r\n            action: options.action,\r\n            inheritance: options.inheritance,\r\n            itemObject: item,\r\n            size: item.size,\r\n            size_formatted: (item.type === 144 || item.type === 749 || item.type === 736 ||\r\n                             item.type === 30309) ? item.size_formatted : undefined\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          if (item.type === 140) { // for url object\r\n            node.attributes.url = item.url;\r\n          }\r\n          _.extend(node.options, {\r\n            original: item.original,\r\n            enforcedRequiredAttrs: enforcedRequiredAttrs\r\n          });\r\n          node.original = item.original || node.original;\r\n          node.actions = item.actions || new ActionCollection();\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: copy/move one item with required metadata\r\n    _copyMoveOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container\r\n      };\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = lang.copyOneItemMetadataDialogTitle;\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = lang.moveOneItemMetadataDialogTitle;\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      }\r\n      dialogTitle = this._extendDialogTitle(dialogTitle, options.inheritance);\r\n\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        action: options.action,\r\n        context: options.context,\r\n        inheritance: options.inheritance,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n\r\n      // show copy/move one item metadata view\r\n      var metadataCopyMoveOneItemController = new MetadataCopyMoveOneItemController();\r\n      metadataCopyMoveOneItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            items[0].newName = resp.data.name;\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              items[0].extended_data = extendedData;\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: copy/move multiple items with metadata\r\n    _copyMoveMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = _.str.sformat(lang.copyMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = _.str.sformat(lang.moveMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      }\r\n      dialogTitle = this._extendDialogTitle(dialogTitle, options.inheritance);\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n      var cmdOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        container: options.container,\r\n        context: options.context,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n      var metadataCopyMoveMultipleItemsController = new MetadataCopyMoveMultipleItemsController();\r\n      metadataCopyMoveMultipleItemsController\r\n          .displayForm(cmdStatus, cmdOptions)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: extend the dialog title based on the inheritance\r\n    _extendDialogTitle: function (dialogTitle, inheritance) {\r\n      var extDialogTitle = dialogTitle;\r\n      if (inheritance === 'original') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceOriginalProperties;\r\n      } else if (inheritance === 'destination') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceDestinationProperties;\r\n      } else if (inheritance === 'merged') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceMergedProperties;\r\n      }\r\n      return extDialogTitle;\r\n    }\r\n\r\n  });\r\n\r\n  MetadataCopyMoveItemsController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataCopyMoveItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveItemsController;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_metadatanavigation_impl_metadatanavigation', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang',{\r\n  dialogTitle: 'Favorites',\r\n  searchPlaceholder: 'Search Favorites',\r\n  versionsTitle: 'Versions'\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.view',\r\n  'hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/utils/contexts/factories/browsing.states', 'csui/utils/contexts/factories/next.node',\r\n  'i18n!csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation'\r\n], function (_, Backbone, Marionette, TabableRegionBehavior, MetadataNavigationListBehavior,\r\n    MetadataNavigationListView, MetadataView, template, LayoutViewEventsPropagationMixin,\r\n    BrowsingStateCollectionFactory, NextNodeModelFactory, lang) {\r\n  'use strict';\r\n\r\n  //\r\n  // Constructor options:\r\n  // - showTitleIcon: boolean to show or hide the icon in the title bar\r\n  //\r\n  var MetadataNavigationView = Marionette.LayoutView.extend({\r\n\r\n    className: 'cs-metadata',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options || (options = {});\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.containerCollection = options.containerCollection;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.showCloseIcon = options.showCloseIcon;\r\n      this.initiallySelected = this.options.selected;\r\n      this.selectedTab = options.selectedTab;\r\n      this.selectedProperty = options.selectedProperty;\r\n      this.showPermissionView = options.showPermissionView;\r\n      // TODO: Put the title on the iterface (to options). New scenarios\r\n      // should not be hardcoded here one after another.  The should\r\n      // specify what they need on the interface.\r\n      var title = options.container ? options.container.get('name') : '';\r\n      if (!title && options.collection.length > 0 &&\r\n          !!options.collection.models[0].collection.title) {\r\n        title = options.collection.models[0].collection.title;\r\n      }\r\n      // for versions, use a static title\r\n      if (Object.getPrototypeOf(options.collection).constructor.name === 'NodeVersionCollection') {\r\n        title = lang.versionsTitle;\r\n      }\r\n\r\n      // Set toolbarItems from originating view to this.options, because when creating\r\n      // MetadataView, this is used as originatingView and we want to use the toolbar or menu\r\n      // items that are specified at the initial originatingView\r\n      if (!this.options.toolbarItems && this.originatingView && this.originatingView.options &&\r\n          this.originatingView.options.toolbarItems) {\r\n        this.options.toolbarItems = this.originatingView.options.toolbarItems;\r\n      }\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n      this.mdv = (this.options.data && this.options.data.contentView) ?\r\n                 this.options.data.contentView :\r\n                 new MetadataView({\r\n                   model: initiallySelectedModel,\r\n                   container: this.container,\r\n                   containerCollection: this.containerCollection,\r\n                   collection: this.collection,\r\n                   context: this.context,\r\n                   originatingView: this,\r\n                   metadataNavigationView: this,\r\n                   isExpandedView: !!this.options.isExpandedView,\r\n                   showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n                   selectedTab: this.selectedTab,\r\n                   selectedProperty: this.selectedProperty,\r\n                   showPermissionView: this.showPermissionView\r\n                 });\r\n      if (!this.options.data || !this.options.data.contentView) {\r\n        this.mdv.internal = true;\r\n      }\r\n\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        containerCollection: this.containerCollection,\r\n        data: {\r\n          back_button: (this.originatingView || this.containerCollection) ? true : false,\r\n          title: title,\r\n          nameAttribute: options.nameAttribute\r\n        },\r\n        originatingView: options.originatingView\r\n      });\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.listenTo(this.mdv, 'disable:active:item', function (args) {\r\n        this.mdn.$el.find('.binf-active').addClass('active-item-disable');\r\n      }).listenTo(this.mdv, 'enable:active:item', function () {\r\n        this.mdn.$el.find('.active-item-disable').removeClass('active-item-disable');\r\n      });\r\n\r\n      if (this.options.originatingView) {\r\n        this.listenTo(this.options.originatingView, 'before:destroy', function () {\r\n          this._closeMetadata();\r\n        });\r\n      }\r\n\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected instanceof Backbone.Model) {\r\n        var index = this.collection.findIndex({id: this.initiallySelected.get('id')});\r\n        if (index < 0 || index > this.collection.length - 1) { return null; }\r\n        return this.collection.at(index);\r\n      } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      this._showNode(item.model);\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _moveToNextItemAfterDeleteOrMove: function () {\r\n      if (this.mdn.collection.length === 0) {\r\n        this._closeMetadata();\r\n      } else {\r\n        var nextIndex = this.indexOfItemDeleteOrMove;\r\n        nextIndex === this.mdn.collection.length && (nextIndex--);\r\n        this.mdn.selectAt(nextIndex);\r\n      }\r\n    },\r\n\r\n    onItemBeforeDelete: function (args) {\r\n      this.indexOfItemDeleteOrMove = this.mdn.getSelectedIndex();\r\n    },\r\n\r\n    onItemDeleted: function (args) {\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    onItemBeforeMove: function (args) {\r\n      this.indexOfItemDeleteOrMove = this.mdn.getSelectedIndex();\r\n      this.listenToOnce(this.containerCollection, 'remove', _.bind(this.onItemMoved, this));\r\n    },\r\n\r\n    onItemMoved: function (removedNode) {\r\n      this.mdn.collection.remove(removedNode);\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      var selectedTab = this.mdv.metadataTabView.tabLinks ?\r\n                        this.mdv.metadataTabView.tabLinks.selected :\r\n                        this.mdv.options.selectedTab ? this.mdv.options.selectedTab : \"\",\r\n          activeTab   = this.mdv.metadataTabView.options.activeTab ?\r\n                        this.mdv.metadataTabView.options.activeTab :\r\n                        this.mdv.options.activeTab ? this.mdv.options.activeTab : \"\";\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n\r\n      // clear browsingState version number because it is not applicable to the next node\r\n      var browsingStates = this.context.getCollection(BrowsingStateCollectionFactory);\r\n      var browsingState = browsingStates && browsingStates.at(browsingStates.length - 1);\r\n      if (browsingState && _.has(browsingState.attributes.path, 'version_num')) {\r\n        delete browsingState.attributes.path.version_num;\r\n      }\r\n\r\n      this.mdv = new MetadataView({\r\n        model: model,\r\n        container: this.container,\r\n        containerCollection: this.containerCollection,\r\n        collection: this.collection,\r\n        context: this.context,\r\n        originatingView: this,\r\n        metadataNavigationView: this,\r\n        showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n        activeTab: activeTab,\r\n        selectedTab: selectedTab,\r\n        showPermissionView: this.showPermissionView\r\n      });\r\n      this.mdv.internal = true;\r\n\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    onMetadataClose: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      var browsingStates = this.context.getCollection(BrowsingStateCollectionFactory);\r\n      browsingStates && (browsingStates.triggerStateChangeOnStateRemoval = true);\r\n      this.trigger('metadata:close', {sender: this});\r\n\r\n      if (!this.originatingView && this.containerCollection && this.containerCollection.node) {\r\n        // there is no originatingView to go back; thus, go to the container\r\n        var id = this.containerCollection.node.get('id');\r\n        if (this.context && id !== undefined) {\r\n          var nextNode = this.context.getModel(NextNodeModelFactory);\r\n          if (nextNode) {\r\n            if (nextNode.get('id') === id) {\r\n              // when id is same as nextNode's id, nextNode.set(id) event is not triggered\r\n              nextNode.unset('id', {silent: true});\r\n            }\r\n            nextNode.set('id', id);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close', _.bind(function () {\r\n        this._closeMetadata();\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:close:without:animation', _.bind(function () {\r\n        this.trigger('metadata:close:without:animation', {sender: this});\r\n      }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n      this.listenTo(this.mdv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.onItemBeforeDelete(args);\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.onItemDeleted(args);\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.onItemBeforeMove(args);\r\n      }, this));\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataNavigationView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/lang',{\r\n\r\n  FetchNodeFailTitle: 'Error',\r\n  FetchNodeFailMessage: 'Failed to fetch node \"{0}\". \\n\\n{1}'\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata.navigation/impl/metadata.navigation',[],function(){});\n","csui.define('csui/widgets/metadata.navigation/metadata.navigation.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/controls/progressblocker/blocker', 'csui/utils/contexts/factories/node',\r\n  'csui/utils/contexts/factories/children', 'csui/utils/contexts/factories/children2',\r\n  'csui/widgets/nodestable/nodestable.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/behaviors/default.action/impl/defaultaction', 'csui/dialogs/modal.alert/modal.alert',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata.navigation/impl/metadata.navigation'\r\n], function (_, $, Backbone, Marionette, base, BlockingView, NodeModelFactory,\r\n    ChildrenCollectionFactory, Children2CollectionFactory, NodesTableView,\r\n    ViewEventsPropagationMixin, MetadataNavigationViewImpl, DefaultActionController,\r\n    ModalAlert, lang) {\r\n  'use strict';\r\n\r\n  // TODO: remove this code when v1 and v2 browse call is finalized\r\n  if (NodesTableView.useV2RestApi) {\r\n    ChildrenCollectionFactory = Children2CollectionFactory;\r\n  }\r\n\r\n  //\r\n  // Public: Metadata Navigation View\r\n  // Description: view consists of the navigation list panel on the left and metadata view panel.\r\n  //\r\n  var MetadataNavigationView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-metadata-navigation-wrapper',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      options.showCloseIcon = false;\r\n      this.options = options;\r\n      this.defaultActionController = new DefaultActionController();\r\n\r\n      // Once PropertiesView is opened, 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the complete data have been fetched\r\n      var fetching = this._ensureCompleteData();\r\n      if (fetching) {\r\n        return fetching.done(_.bind(this.render, this));\r\n      }\r\n\r\n      this.metadataNavigationView && this.metadataNavigationView.destroy();\r\n      var mnv = this.metadataNavigationView = new MetadataNavigationViewImpl(this.options);\r\n      this.propagateEventsToViews(this.metadataNavigationView);\r\n\r\n      this.metadataNavigationView.render();\r\n      Marionette.triggerMethodOn(mnv, 'before:show', mnv, this);\r\n      this.$el.append(mnv.el);\r\n      Marionette.triggerMethodOn(mnv, 'show', mnv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.metadataNavigationView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataNavigationView);\r\n        this.metadataNavigationView.destroy();\r\n      }\r\n    },\r\n\r\n    _ensureCompleteData: function () {\r\n      var self = this;\r\n      var deferred;\r\n      var options = this.options;\r\n      if (!options.model || (!options.collection && !options.containerCollection)) {\r\n        deferred = $.Deferred();\r\n      }\r\n\r\n      function ensureCollectionAfterModel() {\r\n        self._ensureCollection()\r\n            .always(function () {\r\n              self.unblockActions();\r\n            })\r\n            .done(function (response) {\r\n              deferred && deferred.resolve(response);\r\n            })\r\n            .fail(function (error) {\r\n              deferred && deferred.reject(error);\r\n            });\r\n      }\r\n\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        options.model.ensureFetched()\r\n            .done(function (response) {\r\n              ensureCollectionAfterModel();\r\n            })\r\n            .fail(function (error) {\r\n              self.unblockActions();\r\n              self._showFetchNodeFailMessage(error, options.model.get(\"id\"));\r\n              deferred && deferred.reject(error);\r\n            });\r\n      } else if (!options.collection || !options.containerCollection) {\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        ensureCollectionAfterModel();\r\n      }\r\n\r\n      return deferred && deferred.promise();\r\n    },\r\n\r\n    _ensureCollection: function () {\r\n      var self = this;\r\n      var deferred = $.Deferred();\r\n      var options = this.options;\r\n\r\n      var collection = options.collection || options.containerCollection;\r\n      if (!collection) {\r\n        options.container = options.context.getModel(NodeModelFactory, {\r\n          attributes: {id: options.model.get('parent_id')},\r\n          temporary: true\r\n        });\r\n        options.container.ensureFetched()\r\n            .done(function (response) {\r\n              collection = options.context.getCollection(\r\n                  ChildrenCollectionFactory, {\r\n                    options: {\r\n                      node: options.container,\r\n                      commands: self.defaultActionController.commands,\r\n                      defaultActionCommands: self.defaultActionController.actionItems.getAllCommandSignatures(\r\n                          self.defaultActionController.commands),\r\n                      delayRestCommands: false\r\n                    }\r\n\r\n                  });\r\n              collection.ensureFetched()\r\n                  .done(function (response2) {\r\n                    self._ensureModelInCollection(collection);\r\n                    deferred && deferred.resolve(response2);\r\n                  })\r\n                  .fail(function (error2) {\r\n                    self.unblockActions();\r\n                    self._showFetchNodeFailMessage(error2, options.container.get(\"id\"));\r\n                    deferred && deferred.reject(error2);\r\n                  });\r\n            })\r\n            .fail(function (error) {\r\n              self.unblockActions();\r\n              self._showFetchNodeFailMessage(error, options.container.get(\"id\"));\r\n              deferred && deferred.reject(error);\r\n            });\r\n\r\n        return deferred && deferred.promise();\r\n      }\r\n\r\n      this._ensureModelInCollection(collection);\r\n\r\n      return deferred && deferred.promise().resolve();\r\n    },\r\n\r\n    _ensureModelInCollection: function (collection) {\r\n      // if the model is not in the collection, insert it at the beginning\r\n      if (!collection.findWhere({id: this.options.model.get('id')})) {\r\n        collection.add(this.options.model, {at: 0, silent: true});\r\n      }\r\n\r\n      this.options.collection || (this.options.collection = collection);\r\n      this.options.containerCollection || (this.options.containerCollection = collection);\r\n    },\r\n\r\n    _showFetchNodeFailMessage: function (error, nodeId) {\r\n      var errorObj = new base.Error(error);\r\n      var title = lang.FetchNodeFailTitle;\r\n      var message = _.str.sformat(lang.FetchNodeFailMessage, nodeId, errorObj.message);\r\n      ModalAlert.showError(message, title);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataNavigationView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/root/lang',{\r\n  ToolbarItemOpen: 'Open',\r\n  ToolbarItemDownload: 'Download',\r\n  ToolbarItemEdit: 'Edit',\r\n  ToolbarItemProperties: 'Properties',\r\n  location: \"Location\",\r\n  docPreviewImgAlt: 'Document Preview',\r\n  name: \"Name\",\r\n  description: \"Description\",\r\n  created: \"Created\",\r\n  createdBy: \"Created by\",\r\n  type: \"Type\",\r\n  modified: \"Modified\",\r\n  ownedBy: \"Owned by\",\r\n  size: \"Size\"\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/document.overview/impl/document.overview',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"cs-content-wrapper\\\">\\r\\n  <div class=\\\"cs-content-header\\\">\\r\\n    <div class=\\\"title-container\\\"></div>\\r\\n    <div class=\\\"actions-container\\\">\\r\\n      <div class=\\\"commentRegion\\\"></div>\\r\\n      <div class=\\\"favoriteRegion\\\"></div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n  <div class=\\\"cs-content-container\\\">\\r\\n    <div class=\\\"description-container cs-content\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"modified_section general-information\\\"></div>\\r\\n      <div class=\\\"type_section general-information\\\"></div>\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"location-container general-information\\\">\\r\\n        <div class=\\\"alpaca-container-item\\\">\\r\\n          <div class=\\\"binf-form-group alpaca-field alpaca-field-text alpaca-optional\\r\\n              alpaca-readonly\\\">\\r\\n            <label class=\\\"binf-control-label alpaca-control-label binf-col-sm-3\\\">\\r\\n              \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.location : stack1), depth0))\n    + \"\\r\\n            </label>\\r\\n            <div id=\\\"location\\\" class=\\\"binf-col-sm-9 location-view\\\">\\r\\n\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"description_section general-information\\\">\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"binf-col-md-4 thumbnail-container binf-text-left cs-content\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemOpen : stack1), depth0))\n    + \"\\\">\\r\\n          <span class=\\\"thumbnail_not_loaded thumbnail_empty\\\" data-cstabindex=\\\"0\\\"></span>\\r\\n          <img src=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imgSrc || (depth0 != null ? depth0.imgSrc : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imgSrc\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"img-doc-preview binf-hidden\\\" alt=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imgAlt || (depth0 != null ? depth0.imgAlt : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imgAlt\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"cs-content-footer\\\">\\r\\n    <button class=\\\"binf-btn primary-btn open-command\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemOpen : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn\\\"\\r\\n            data-signature=\\\"Download\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemDownload : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn edit-btn\\\"\\r\\n            data-signature=\\\"Edit\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemEdit : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn\\\"\\r\\n            data-signature=\\\"Properties\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemProperties : stack1), depth0))\n    + \"</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_document.overview_impl_document.overview', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/document.overview/impl/document.overview',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/document.overview/document.overview.view',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/lib/jquery',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/controls/form/form.view',\r\n  'csui/models/nodeancestors',\r\n  'csui/utils/nodesprites',\r\n  'csui/models/node/node.model',\r\n  'csui/utils/contexts/factories/connector',\r\n  'csui/controls/form/fields/nodepickerfield.view',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/utils/commands/impl/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/favorites/favorite.star.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/utils/commands',\r\n  'i18n!csui/widgets/document.overview/impl/nls/lang',\r\n  'hbs!./impl/document.overview',\r\n  'css!./impl/document.overview'\r\n\r\n], function (_, Backbone, Marionette, $,\r\n    MetadataItemNameView,\r\n    ViewEventsPropagationMixin,\r\n    FormView,\r\n    NodeAncestorCollection,\r\n    NodeSpriteCollection,\r\n    NodeModel,\r\n    ConnectorFactory,\r\n    NodePickerFieldView,\r\n    NodeTypeIconView,\r\n    NodeModelFactory, Thumbnail, DocumentGeneralFormModel, CommentView,\r\n    FavoriteStarView, ToolbarCommandController,\r\n    NodeCollection,\r\n    DefaultActionBehavior, PerfectScrollingBehavior, commands, lang, documentOverviewTemplate) {\r\n  'use strict';\r\n\r\n  var DocumentOverviewView = FormView.extend({\r\n\r\n    constructor: function DocumentOverviewView(options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      if (!options.node) {\r\n        options.node = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n      }\r\n      //disable breadcrumb show\r\n      Backbone.trigger(\"show:breadcrumbsoverride\");\r\n      this.options = options;\r\n      this._createModel();\r\n      FormView.prototype.constructor.call(this, this.options);\r\n\r\n      this.listenTo(this.options.node, 'change', this.updateForm);\r\n\r\n      this._createMetadataItemNameView();\r\n\r\n      this.commandController = new ToolbarCommandController({\r\n        commands: options.commands || commands\r\n      });\r\n      this.commands = this.commandController.commands;\r\n      this.reloadWidget = false;\r\n      this.parentNode = undefined;\r\n      this.supportOriginatingView = true;\r\n    },\r\n    fieldToRefresh: 'modify_date',\r\n\r\n    _createMetadataItemNameView: function () {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var inv = this.metadataItemNameView = new MetadataItemNameView({\r\n        model: this.options.node,\r\n        container: this.options.node.parent,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: {},\r\n        commands: this.commands,\r\n        originatingView: this,\r\n        showDropdownMenu: true\r\n      });\r\n      this.listenTo(inv, 'metadata:item:name:save', this._saveItemName);\r\n      this.listenTo(inv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:delete', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:move', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.trigger('metadata:item:deleted', args);\r\n      }, this));\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    reloadWidget: false,\r\n\r\n    formTemplate: documentOverviewTemplate,\r\n\r\n    className: 'cs-form csui-general-form cs-document-overview-wrapper',\r\n\r\n    ui: {\r\n      command: \".command-btn\",\r\n      open: \".open-command\",\r\n      location: \"#location\"\r\n    },\r\n\r\n    events: {\r\n      \"click @ui.command\": '_triggerMenuItemAction',\r\n      \"click @ui.open\": '_executeDefaultAction'\r\n    },\r\n\r\n    behaviors: {\r\n      DefaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      },\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: '.cs-content-container',\r\n        suppressScrollX: true\r\n      }\r\n    },\r\n\r\n    _executeDefaultAction: function (event) {\r\n      event.stopImmediatePropagation();\r\n      event.preventDefault();\r\n      this.defaultActionController\r\n          .executeAction(this.options.node, {\r\n            context: this.options.context,\r\n            originatingView: this\r\n          });\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var name = {'name': itemName};\r\n      var node = this.options.model;\r\n      node.setFields('versions.element(0)', 'owner_id');\r\n      node.set(name, {silent: true});\r\n      var data = _.clone(node.attributes);\r\n      return node.save(data, {\r\n        data: name,\r\n        wait: true,\r\n        silent: true\r\n      }).then(function () {\r\n        node.fetch({silent: true}).done(function () {\r\n          self._updateFieldsToRefersh();\r\n          self.metadataItemNameView._toggleEditMode(false, false);\r\n        });\r\n      });\r\n    },\r\n\r\n    _triggerMenuItemAction: function (event) {\r\n      event.stopImmediatePropagation();\r\n      event.preventDefault();\r\n      var signature = $(event.target).data(\"signature\");\r\n      var command = this.commands.findWhere({signature: signature});\r\n      var originatingView = this;\r\n      originatingView.collection = new NodeCollection([this.options.node]);\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.options.node]),\r\n        container: this.options.node,\r\n        originatingView: originatingView\r\n      };\r\n\r\n      if (command && command.enabled(status)) {\r\n        command.execute(status);\r\n      }\r\n    },\r\n\r\n    _createModel: function () {\r\n      var node = this.options.node;\r\n      this.options.model = new DocumentGeneralFormModel({\r\n        data: {\r\n          \"name\": node.get(\"name\"),\r\n          \"description\": node.get(\"description\"),\r\n          \"create_date\": node.get(\"create_date\"),\r\n          \"create_user_id\": node.get(\"create_user_id\"),\r\n          \"type\": node.get(\"type\"),\r\n          \"type_name\": node.get(\"type_name\"),\r\n          \"mime_type\": NodeSpriteCollection.findTypeByNode(node),\r\n          \"modify_date\": node.get(\"modify_date\"),\r\n          \"owner_user_id\": node.get(\"owner_user_id\"),\r\n          \"size\": node.get(\"size_formatted\"),\r\n          \"reserved_user_id\": node.get(\"reserved_user_id\")\r\n        },\r\n        schema: {\r\n          \"properties\": {\r\n            \"name\": {\r\n              \"maxLength\": 248,\r\n              \"minLength\": 1,\r\n              \"readonly\": true,\r\n              \"required\": true,\r\n              \"title\": \"Name\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"description\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Description\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"create_date\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Created\",\r\n              \"type\": \"string\",\r\n              \"format\": \"datetime\"\r\n            },\r\n            \"create_user_id\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Created By\",\r\n              \"type\": \"otcs_user_picker\"\r\n            },\r\n            \"type\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Type\",\r\n              \"type\": \"integer\"\r\n            },\r\n            \"type_name\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Type\",\r\n              \"type\": \"string\"\r\n            },\r\n            \"modify_date\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Modified\",\r\n              \"type\": \"string\",\r\n              \"format\": \"datetime\"\r\n            },\r\n            \"owner_user_id\": {\r\n              \"readonly\": true,\r\n              \"required\": false,\r\n              \"title\": \"Owned By\",\r\n              \"type\": \"otcs_user_picker\"\r\n            },\r\n            \"size\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"title\": \"Size\",\r\n              \"type\": \"string\",\r\n              \"tooltip\": \"838,049 bytes\"\r\n            },\r\n            \"mime_type\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"title\": \"Type\",\r\n              \"type\": \"string\"\r\n            }\r\n          },\r\n          \"type\": \"object\",\r\n          \"title\": \"General\"\r\n        },\r\n        options: {\r\n          \"fields\": {\r\n            \"name\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.name,\r\n              \"readonly\": true,\r\n              \"type\": \"text\"\r\n            },\r\n            \"description\": {\r\n              \"hidden\": false,\r\n              \"rows\": 5,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.description,\r\n              \"readonly\": true,\r\n              \"type\": \"textarea\",\r\n              \"placeholder\": \"Add description\"\r\n            },\r\n            \"create_date\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.created,\r\n              \"readonly\": true,\r\n              \"type\": \"datetime\",\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"create_user_id\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.createdBy,\r\n              \"readonly\": true,\r\n              \"type\": \"otcs_user\",\r\n              \"type_control\": {\r\n                \"name\": \"Admin\"\r\n              },\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"type\": {\r\n              \"hidden\": true,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.type,\r\n              \"readonly\": true,\r\n              \"type\": \"integer\"\r\n            },\r\n            \"type_name\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.type,\r\n              \"readonly\": true,\r\n              \"type\": \"text\"\r\n            },\r\n            \"modify_date\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.modified,\r\n              \"readonly\": true,\r\n              \"type\": \"datetime\",\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"owner_user_id\": {\r\n              \"hidden\": false,\r\n              \"hideInitValidationError\": true,\r\n              \"label\": lang.ownedBy,\r\n              \"readonly\": true,\r\n              \"type\": \"otcs_user\",\r\n              \"type_control\": {\r\n                \"name\": \"Admin\"\r\n              },\r\n              \"placeholder\": \"n/a\"\r\n            },\r\n            \"size\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"label\": lang.size,\r\n              \"placeholder\": \"n/a\",\r\n              \"type\": \"text\"\r\n            },\r\n            \"mime_type\": {\r\n              \"hidden\": false,\r\n              \"readonly\": true,\r\n              \"label\": lang.type,\r\n              \"placeholder\": \"n/a\",\r\n              \"type\": \"text\"\r\n            }\r\n          }\r\n        }\r\n      }, this.options);\r\n      this.options.model._addReserveInfo(this.options.model.attributes);\r\n    },\r\n\r\n    _updateModel: function () {\r\n      var node = this.options.node;\r\n\r\n      _.extend(this.model.attributes.data, {\r\n        \"name\": node.get(\"name\"),\r\n        \"description\": node.get(\"description\"),\r\n        \"create_date\": node.get(\"create_date\"),\r\n        \"create_user_id\": node.get(\"create_user_id\"),\r\n        \"type\": node.get(\"type\"),\r\n        \"type_name\": node.get(\"type_name\"),\r\n        \"mime_type\": NodeSpriteCollection.findTypeByNode(node),\r\n        \"modify_date\": node.get(\"modify_date\"),\r\n        \"owner_user_id\": node.get(\"owner_user_id\"),\r\n        \"size\": node.get(\"size_formatted\"),\r\n        \"reserved_user_id\": node.get(\"reserved_user_id\")\r\n      });\r\n      this.model._addReserveInfo(this.model.attributes);\r\n    },\r\n\r\n    _getLayout: function () {\r\n      var data = this.alpaca.data;\r\n      data.name = this.model.get(\"data\").name;\r\n      var template = this.getOption('formTemplate'),\r\n          html     = template.call(this, {\r\n            data: data,\r\n            mode: this.mode,\r\n            lang: lang,\r\n            // a 1x1 transparent gif, to avoid an empty src tag\r\n            imgSrc: \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n            imgAlt: lang.docPreviewImgAlt\r\n          }),\r\n          bindings = this._getBindings(),\r\n          view     = {\r\n            parent: 'bootstrap-csui',\r\n            layout: {\r\n              template: html,\r\n              bindings: bindings\r\n            }\r\n          };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = {\r\n        name: 'name_section',\r\n        owner_user_id: '.owner_section',\r\n        modify_date: '.modified_section',\r\n        mime_type: '.type_section',\r\n        description: '.description_section',\r\n        size: '.size_section',\r\n        status: 'status_section'\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.model && this.model.node && this.model.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n\r\n      return bindings;\r\n    },\r\n\r\n    updateForm: function (event) {\r\n        //  perform this operations whenever change happen to the node.\r\n        this._updateModel();\r\n        this._createModel();\r\n        FormView.prototype.constructor.call(this, this.options);\r\n        this.metadataItemNameView = new MetadataItemNameView({\r\n          model: this.options.node,\r\n          container: this.options.node.parent,\r\n          containerCollection: this.options.containerCollection,\r\n          collection: this.options.collection,\r\n          context: this.options.context,\r\n          nameSchema: {},\r\n          commands: this.commands,\r\n          originatingView: this,\r\n          showDropdownMenu: true\r\n        });\r\n        this.listenTo(this.metadataItemNameView, 'metadata:item:name:save', this._saveItemName);\r\n        this.propagateEventsToViews(this.metadataItemNameView);\r\n        FormView.prototype.updateForm.apply(this, arguments); \r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showNodeIcon();\r\n      this._showMetadataItemName();\r\n      this._showThumbnail();\r\n      this._addLocationView();\r\n      this._addCommentView();\r\n      this._addFavoriteView();\r\n      this._checkDescriptionContent();\r\n      this._checkEditPermission();\r\n    },\r\n\r\n    // overriding this method to validate the node's name, for document overview page only.\r\n    _validateAndSave: function () {\r\n      var currentValue = this.metadataItemNameView.getValue().trim();\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      inputValue = inputValue.trim();\r\n      if (inputValue.length === 0 || currentValue !== inputValue) {\r\n        this.metadataItemNameView.ItemNameBehavior.validateInputName(inputValue).done(\r\n            _.bind(function (success) {\r\n              if (success) {\r\n                this.metadataItemNameView.setInputBoxValue(inputValue);\r\n                this.metadataItemNameView.setValue(inputValue);\r\n                this.metadataItemNameView.modelHasEmptyName = false;\r\n                this.metadataItemNameView.trigger(\"metadata:item:name:save\", {\r\n                  sender: this.metadataItemNameView\r\n                });\r\n              } else {\r\n                return false;\r\n              }\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    _showThumbnail: function () {\r\n      this.thumbnail = this.options.thumbnail ||\r\n                       new Thumbnail({\r\n                         node: this.options.node\r\n                       });\r\n      this.listenTo(this.thumbnail, 'load', this._showImage)\r\n          .listenTo(this.thumbnail, 'error', this._showDefaultImage)\r\n          .listenTo(this, 'destroy', _.bind(this._destroyThumbnail, this));\r\n\r\n      if (this.mode !== 'create' && !this.thumbnailSet) {\r\n        var self = this;\r\n        this.thumbnailSet = true;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (!!this.thumbnail.url) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.load();\r\n        }\r\n        // default action\r\n        this.$el.find('.thumbnail_section').click(function () {\r\n          self.triggerMethod('execute:DefaultAction', self.options.node);\r\n        });\r\n      }\r\n    },\r\n\r\n    _showImage: function () {\r\n      var self                 = this,\r\n          img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded');\r\n      img.attr(\"src\", this.thumbnail.url);\r\n      img.prop('tabindex', '0');\r\n      img.one('load', function (evt) {\r\n\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass('cs-form-img-vertical');\r\n        } else {\r\n          img.addClass('cs-form-img-horizontal');\r\n        }\r\n        img.addClass('cs-form-img-border');\r\n        //hide the thumbnail background span and show the real img\r\n        thumbnailNotLoadedEl.addClass('binf-hidden');\r\n        img.removeClass('binf-hidden');\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded'),\r\n          className            = NodeSpriteCollection.findClassByNode(this.options.node);\r\n      thumbnailNotLoadedEl.addClass(className);\r\n      thumbnailNotLoadedEl.removeClass('thumbnail_empty');\r\n      thumbnailNotLoadedEl.removeClass('csui-icon-notification-error');\r\n      thumbnailNotLoadedEl.removeClass('binf-hidden');\r\n      img.addClass('binf-hidden');\r\n\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n    },\r\n\r\n    _showNodeIcon: function () {\r\n      if (!this._nodeIconView) {\r\n        this._nodeIconView = new NodeTypeIconView({\r\n          el: this.$el.find('.csui-type-icon').get(0),\r\n          node: this.options.node\r\n        });\r\n        this._nodeIconView.render();\r\n        //enable breadcrumb show\r\n        Backbone.trigger(\"show:breadcrumbsoverride\");\r\n      }\r\n    },\r\n\r\n    _showMetadataItemName: function () {\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.$el.find(\".title-container\").append(inv.el);\r\n    },\r\n\r\n    _addLocationView: function () {\r\n      var self = this;\r\n\r\n      var locationRegion = new Marionette.Region({\r\n        el: this.$el.find(this.ui.location)\r\n      });\r\n      var field = new NodePickerFieldView({\r\n        model: this._getParentNode(), // parent of the document\r\n        context: this.options.context,\r\n        formView: this\r\n      });\r\n      locationRegion.show(field);\r\n\r\n      // check permission\r\n      var newAncestors = new NodeAncestorCollection(undefined, {\r\n        node: this._getParentNode()\r\n      });\r\n      this.listenTo(newAncestors, 'error', function (result) {\r\n        self.$(\".location-container\").hide();\r\n      });\r\n      newAncestors.fetch();\r\n    },\r\n\r\n    _getParentNode: function () {\r\n      if (this.parentNode === undefined) {\r\n        this.parentNode = this.options.node.parent;\r\n\r\n        this.parentNode.attributes.schema = this.options.model.attributes.schema;\r\n        this.parentNode.attributes.schema.readonly = true;\r\n        this.parentNode.attributes.options = this.options.model.attributes.options;\r\n        this.parentNode.attributes.data = this.parentNode.attributes.id;\r\n      }\r\n\r\n      return this.parentNode;\r\n    },\r\n\r\n    _addCommentView: function () {\r\n      var commentOptions = this.options;\r\n      commentOptions.model = this.options.node;\r\n      var commentView = new CommentView(commentOptions);\r\n\r\n      var commentRegion = new Marionette.Region({\r\n        el: this.$el.find(\".commentRegion\")\r\n      });\r\n      commentRegion.show(commentView);\r\n    },\r\n\r\n    _checkDescriptionContent: function () {\r\n      var e = this.$el.find(\".description_section .cs-field-textarea-data\");\r\n      if (!e || (e.length === 0)) {\r\n        this.$el.find(\".description_section\").hide();\r\n      } else {\r\n        this.$el.find(\".description_section\").show();\r\n      }\r\n    },\r\n\r\n    _addFavoriteView: function () {\r\n      var favoriteOptions = this.options;\r\n      favoriteOptions.model = this.options.node;\r\n      favoriteOptions.popoverAtBodyElement = true;\r\n      var favoriteView = new FavoriteStarView(favoriteOptions);\r\n\r\n      var favoriteRegion = new Marionette.Region({\r\n        el: this.$el.find(\".favoriteRegion\")\r\n      });\r\n      favoriteRegion.show(favoriteView);\r\n    },\r\n\r\n    _checkEditPermission: function () {\r\n      var command = this.commands.findWhere({signature: \"Edit\"});\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.options.node]),\r\n        container: this.options.node.parent\r\n      };\r\n\r\n      if (!(command && command.enabled(status))) {\r\n        this.$el.find(\".edit-btn\").addClass(\"binf-hidden\");\r\n      }\r\n    },\r\n\r\n    _destroyForm: function () {\r\n      FormView.prototype._destroyForm.apply(this, arguments);\r\n      this._destroyThumbnail();\r\n    },\r\n\r\n    _destroyThumbnail: function () {\r\n      if (this.thumbnail) {\r\n        this.thumbnail.destroy();\r\n        this.thumbnail = undefined;\r\n      }\r\n      this.thumbnailSet = false;\r\n    },\r\n\r\n    _updateFieldsToRefersh: function () {\r\n      var alpacaForm = this.$el.alpaca('get');\r\n      if (!!alpacaForm) {\r\n        var data = this.options.model.attributes;\r\n        var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh],\r\n            value = data[this.fieldToRefresh];\r\n        if (!!field && field.getValue() !== value) {\r\n          field.setValue(value);\r\n          field.refresh();\r\n        }\r\n\r\n      }\r\n    }\r\n  });\r\n\r\n  _.extend(DocumentOverviewView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return DocumentOverviewView;\r\n\r\n});\r\n\n","\ncsui.define('json!csui/widgets/document.overview/document.overview.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": [144]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata/metadata.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"actions\": [\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/header.dropdown.menu.items\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/header.dropdown.menu.items.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"dropdownMenuList\",\r\n          \"title\": \"{{dropdownMenuTitle}}\",\r\n          \"description\": \"{{dropdownMenuDescription}}\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/add.properties.menuitems\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/add.properties.menuitems.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"addPropertiesToolbar\",\r\n          \"title\": \"{{addPropertiesTitle}}\",\r\n          \"description\": \"{{addPropertiesDescription}}\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","csui.define('csui/widgets/document.overview/impl/nls/document.overview.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/root/document.overview.manifest',{\r\n  \"widgetTitle\": \"Document Overview\",\r\n  \"widgetDescription\": \"Shows basic information about a document and offers the most often actions for it.\",\r\n  \"idTitle\": \"Document\",\r\n  \"idDescription\": \"A document to show the overview for\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/impl/nls/metadata.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/nls/root/metadata.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\",\r\n  \"dropdownMenuTitle\": \"Object Context Menu\",\r\n  \"dropdownMenuDescription\": \"Context menu, which is displayed when clicking on the arrow on the right side of the name of the opened object.\",\r\n  \"addPropertiesTitle\": \"Add Feature Menu\",\r\n  \"addPropertiesDescription\": \"Drop-down menu, which is displayed when clicking on the plus on the right side of the property tabs.\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\"\r\n});\r\n\n","\n","csui.define('bundles/csui-metadata',[\r\n  // Controls\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n\r\n  // Application widgets\r\n  'csui/widgets/metadata/metadata.view',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'csui/widgets/metadata/metadata.add.categories.controller',\r\n  'csui/widgets/metadata/metadata.add.document.controller',\r\n  'csui/widgets/metadata/metadata.add.item.controller',\r\n  'csui/widgets/metadata/metadata.copy.move.items.controller',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/widgets/metadata.navigation/metadata.navigation.view',\r\n  'csui/widgets/document.overview/document.overview.view',\r\n\r\n  // Application widgets manifests\r\n  'json!csui/widgets/document.overview/document.overview.manifest.json',\r\n  'json!csui/widgets/metadata/metadata.manifest.json',\r\n  'json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',\r\n  'i18n!csui/widgets/document.overview/impl/nls/document.overview.manifest',\r\n  'i18n!csui/widgets/metadata/impl/nls/metadata.manifest',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',\r\n\r\n  // Tool items and tool item masks\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n\r\n  // Metadata general action fields\r\n  'csui/widgets/metadata/metadata.general.action.fields'\r\n\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n\r\n  css.styleLoad(require, 'csui/bundles/csui-metadata', true);\r\n\r\n});\r\n\n"]}