csui.define("csui/lib/ally",[],function(){var e,t=function(){function e(t,i,n){function s(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[r]={"exports":{}};t[r][0].call(u.exports,function(e){return s(t[r][1][e]||e)},u,u.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}return e}()({"1":[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return e&&"object"===(void 0===e?"undefined":ae(e))&&"default"in e?e.default:e}function o(){for(var e=[document.activeElement];e[0]&&e[0].shadowRoot;)e.unshift(e[0].shadowRoot.activeElement);return e}function r(){var e=be({"context":document.activeElement});return[document.activeElement].concat(e)}function a(e){ye.some(function(t){return!!e[t]&&(xe=t,!0)})}function l(e,t){return xe||a(e),e[xe](t)}function c(){var e={"activeElement":document.activeElement,"windowScrollTop":window.scrollTop,"windowScrollLeft":window.scrollLeft,"bodyScrollTop":document.body.scrollTop,"bodyScrollLeft":document.body.scrollLeft},t=document.createElement("iframe");t.setAttribute("style","position:absolute; position:fixed; top:0; left:-2px; width:1px; height:1px; overflow:hidden;"),t.setAttribute("aria-live","off"),t.setAttribute("aria-busy","true"),t.setAttribute("aria-hidden","true"),document.body.appendChild(t);var i=t.contentWindow,n=i.document;n.open(),n.close();var s=n.createElement("div");return n.body.appendChild(s),e.iframe=t,e.wrapper=s,e.window=i,e.document=n,e}function u(e,t){e.wrapper.innerHTML="";var i="string"==typeof t.element?e.document.createElement(t.element):t.element(e.wrapper,e.document),n=t.mutate&&t.mutate(i,e.wrapper,e.document);return n||!1===n||(n=i),!i.parentNode&&e.wrapper.appendChild(i),n&&n.focus&&n.focus(),t.validate?t.validate(i,n,e.document):e.document.activeElement===n}function d(e){e.activeElement===document.body?(document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),we.is.IE10&&document.body.focus()):e.activeElement&&e.activeElement.focus&&e.activeElement.focus(),document.body.removeChild(e.iframe),window.scrollTop=e.windowScrollTop,window.scrollLeft=e.windowScrollLeft,document.body.scrollTop=e.bodyScrollTop,document.body.scrollLeft=e.bodyScrollLeft}function h(e,t){if(document.hasFocus())try{window.localStorage&&window.localStorage.setItem(e,JSON.stringify(t))}catch(e){}else try{window.localStorage&&window.localStorage.removeItem(e)}catch(e){}}function p(){var e=document.createElement("div");return e.innerHTML='<svg><foreignObject width="30" height="30">\n      <input type="text"/>\n  </foreignObject></svg>',e.firstChild.firstChild}function f(e){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>"}function m(e){if(!e.focus)try{HTMLElement.prototype.focus.call(e)}catch(t){ft(e)}}function b(e,t,i){return m(t),i.activeElement===t}function g(){var e=Re(St);return Object.keys(Et).forEach(function(t){e[t]=Et[t]()}),e}function v(e){var t=e.webkitUserModify||"";return Boolean(t&&-1!==t.indexOf("write"))}function y(e){return[e.getPropertyValue("overflow"),e.getPropertyValue("overflow-x"),e.getPropertyValue("overflow-y")].some(function(e){return"auto"===e||"scroll"===e})}function x(e){return e.display.indexOf("flex")>-1}function w(e,t,i,n){return("div"===t||"span"===t)&&(!(i&&"div"!==i&&"span"!==i&&!y(n))&&(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth))}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.except,n=void 0===i?{"flexbox":!1,"scrollable":!1,"shadow":!1}:i;Nt||(Nt=Ft());var s=pe({"label":"is/focus-relevant","resolveDocument":!0,"context":t});if(!n.shadow&&s.shadowRoot)return!0;var o=s.nodeName.toLowerCase();if("input"===o&&"hidden"===s.type)return!1;if("input"===o||"select"===o||"button"===o||"textarea"===o)return!0;if("legend"===o&&Nt.focusRedirectLegend)return!0;if("label"===o)return!0;if("area"===o)return!0;if("a"===o&&s.hasAttribute("href"))return!0;if("object"===o&&s.hasAttribute("usemap"))return!1;if("object"===o){var r=s.getAttribute("type");if(!Nt.focusObjectSvg&&"image/svg+xml"===r)return!1;if(!Nt.focusObjectSwf&&"application/x-shockwave-flash"===r)return!1}if("iframe"===o||"object"===o)return!0;if("embed"===o||"keygen"===o)return!0;if(s.hasAttribute("contenteditable"))return!0;if("audio"===o&&(Nt.focusAudioWithoutControls||s.hasAttribute("controls")))return!0;if("video"===o&&(Nt.focusVideoWithoutControls||s.hasAttribute("controls")))return!0;if(Nt.focusSummary&&"summary"===o)return!0;var a=Dt(s);if("img"===o&&s.hasAttribute("usemap"))return a&&Nt.focusImgUsemapTabindex||Nt.focusRedirectImgUsemap;if(Nt.focusTable&&("table"===o||"td"===o))return!0;if(Nt.focusFieldset&&"fieldset"===o)return!0;var c="svg"===o,u=s.ownerSVGElement,d=s.getAttribute("focusable"),h=Pt(s);if("use"===o&&null!==h&&!Nt.focusSvgUseTabindex)return!1;if("foreignobject"===o)return null!==h&&Nt.focusSvgForeignobjectTabindex;if(l(s,"svg a")&&s.hasAttribute("xlink:href"))return!0;if((c||u)&&s.focus&&!Nt.focusSvgNegativeTabindexAttribute&&h<0)return!1;if(c)return a||Nt.focusSvg||Nt.focusSvgInIframe||Boolean(Nt.focusSvgFocusableAttribute&&d&&"true"===d);if(u){if(Nt.focusSvgTabindexAttribute&&a)return!0;if(Nt.focusSvgFocusableAttribute)return"true"===d}if(a)return!0;var p=window.getComputedStyle(s,null);if(v(p))return!0;if(Nt.focusImgIsmap&&"img"===o&&s.hasAttribute("ismap")){if(ve({"context":s}).some(function(e){return"a"===e.nodeName.toLowerCase()&&e.hasAttribute("href")}))return!0}if(!n.scrollable&&Nt.focusScrollContainer)if(Nt.focusScrollContainerWithoutOverflow){if(w(s,o))return!0}else if(y(p))return!0;if(!n.flexbox&&Nt.focusFlexboxContainer&&x(p))return!0;var f=s.parentElement;if(!n.scrollable&&f){var m=f.nodeName.toLowerCase(),b=window.getComputedStyle(f,null);if(Nt.focusScrollBody&&w(f,o,m,b))return!0;if(Nt.focusChildrenOfFocusableFlexbox&&x(b))return!0}return!1}function I(e,t){if(e.findIndex)return e.findIndex(t);var i=e.length;if(0===i)return-1;for(var n=0;n<i;n++)if(t(e[n],n,e))return n;return-1}function _(e){if(Ht||(Ht=qt("object, iframe")),void 0!==e._frameElement)return e._frameElement;e._frameElement=null;var t=e.parent.document.querySelectorAll(Ht);return[].some.call(t,function(t){return Bt(t)===e.document&&(e._frameElement=t,!0)}),e._frameElement}function k(e){var t=$t(e);if(!t.parent||t.parent===t)return null;try{return t.frameElement||_(t)}catch(e){return null}}function T(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}function A(e){return e.some(function(e){return"none"===T(e,"display")})}function E(e){var t=I(e,function(e){var t=T(e,"visibility");return"hidden"===t||"collapse"===t});if(-1===t)return!1;var i=I(e,function(e){return"visible"===T(e,"visibility")});return-1===i||t<i}function S(e){var t=1;return"summary"===e[0].nodeName.toLowerCase()&&(t=2),e.slice(t).some(function(e){return"details"===e.nodeName.toLowerCase()&&!1===e.open})}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.except,n=void 0===i?{"notRendered":!1,"cssDisplay":!1,"cssVisibility":!1,"detailsElement":!1,"browsingContext":!1}:i,s=pe({"label":"is/visible","resolveDocument":!0,"context":t}),o=s.nodeName.toLowerCase();if(!n.notRendered&&Wt.test(o))return!0;var r=ve({"context":s}),a="audio"===o&&!s.hasAttribute("controls");if(!n.cssDisplay&&A(a?r.slice(1):r))return!1;if(!n.cssVisibility&&E(r))return!1;if(!n.detailsElement&&S(r))return!1;if(!n.browsingContext){var l=k(s),c=M.except(n);if(l&&!c(l))return!1}return!0}function F(e,t){return t.querySelector('map[name="'+ce(e)+'"]')||null}function O(e){var t=e.getAttribute("usemap");if(!t)return null;var i=ue(e);return F(t.slice(1),i)}function V(e){var t=e.parentElement;return t.name&&"map"===t.nodeName.toLowerCase()?ue(e).querySelector('img[usemap="#'+ce(t.name)+'"]')||null:null}function R(e){return"fieldset"===e.nodeName.toLowerCase()&&e.disabled}function D(e){return"form"===e.nodeName.toLowerCase()&&e.disabled}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.except,n=void 0===i?{"onlyFocusableBrowsingContext":!1,"visible":!1}:i,s=pe({"label":"is/only-tabbable","resolveDocument":!0,"context":t});if(!n.visible&&!Kt(s))return!1;if(!n.onlyFocusableBrowsingContext&&(we.is.GECKO||we.is.TRIDENT||we.is.EDGE)){var o=k(s);if(o&&Pt(o)<0)return!1}var r=s.nodeName.toLowerCase(),a=Pt(s);return"label"===r&&we.is.GECKO?null!==a&&a>=0:!!(we.is.GECKO&&s.ownerSVGElement&&!s.focus&&"a"===r&&s.hasAttribute("xlink:href")&&we.is.GECKO)}function N(e){var t=e.nodeName.toLowerCase();if("embed"===t||"keygen"===t)return!0;var i=Pt(e);if(e.shadowRoot&&null===i)return!0;if("label"===t)return!ti.focusLabelTabindex||null===i;if("legend"===t)return null===i;if(ti.focusSvgFocusableAttribute&&(e.ownerSVGElement||"svg"===t)){var n=e.getAttribute("focusable");return n&&"false"===n}return"img"===t&&e.hasAttribute("usemap")?null===i||!ti.focusImgUsemapTabindex:"area"===t&&!Ut(e)}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.except,n=void 0===i?{"disabled":!1,"visible":!1,"onlyTabbable":!1}:i;ti||(ti=Ft());var s=ei.rules.except({"onlyFocusableBrowsingContext":!0,"visible":n.visible}),o=pe({"label":"is/focusable","resolveDocument":!0,"context":t});if(!Lt.rules({"context":o,"except":n})||N(o))return!1;if(!n.disabled&&Yt(o))return!1;if(!n.onlyTabbable&&s(o))return!1;if(!n.visible){var r={"context":o,"except":{}};if(ti.focusInHiddenIframe&&(r.except.browsingContext=!0),ti.focusObjectSvgHidden){"object"===o.nodeName.toLowerCase()&&(r.except.cssVisibility=!0)}if(!Kt.rules(r))return!1}var a=k(o);if(a){if(!("object"!==a.nodeName.toLowerCase()||ti.focusInZeroDimensionObject||a.offsetWidth&&a.offsetHeight))return!1}return!("svg"===o.nodeName.toLowerCase()&&ti.focusSvgInIframe&&!a&&null===o.getAttribute("tabindex"))}function B(e){var t=function(t){return t.shadowRoot?NodeFilter.FILTER_ACCEPT:e(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};return t.acceptNode=t,t}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.includeContext,n=e.includeOnlyTabbable,s=e.strategy;t||(t=document.documentElement);for(var o=ii.rules.except({"onlyTabbable":n}),r=ue(t),a=r.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,"all"===s?ni:B(o),!1),l=[];a.nextNode();)a.currentNode.shadowRoot?(o(a.currentNode)&&l.push(a.currentNode),l=l.concat($({"context":a.currentNode.shadowRoot,"includeOnlyTabbable":n,"strategy":s}))):l.push(a.currentNode);return i&&("all"===s?Lt(t)&&l.unshift(t):o(t)&&l.unshift(t)),l}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.includeContext,n=e.includeOnlyTabbable,s=ri(),o=t.querySelectorAll(s),r=ii.rules.except({"onlyTabbable":n}),a=[].filter.call(o,r);return i&&r(t)&&a.unshift(t),a}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.except,n=void 0===i?{"flexbox":!1,"scrollable":!1,"shadow":!1,"visible":!1,"onlyTabbable":!1}:i;li||(li=Ft());var s=pe({"label":"is/tabbable","resolveDocument":!0,"context":t});if(we.is.BLINK&&we.is.ANDROID&&we.majorVersion>42)return!1;var o=k(s);if(o){if(we.is.WEBKIT&&we.is.IOS)return!1;if(Pt(o)<0)return!1;if(!n.visible&&(we.is.BLINK||we.is.WEBKIT)&&!Kt(o))return!1;if("object"===o.nodeName.toLowerCase()){var r="Chrome"===we.name&&we.majorVersion>=54||"Opera"===we.name&&we.majorVersion>=41;if(we.is.WEBKIT||we.is.BLINK&&!r)return!1}}var a=s.nodeName.toLowerCase(),c=Pt(s),u=null===c?null:c>=0;if(we.is.EDGE&&we.majorVersion>=14&&o&&s.ownerSVGElement&&c<0)return!0;var d=!1!==u,h=null!==c&&c>=0;if(s.hasAttribute("contenteditable"))return d;if(ci.test(a)&&!0!==u)return!1;if(we.is.WEBKIT&&we.is.IOS){var p="input"===a&&"text"===s.type||"password"===s.type||"select"===a||"textarea"===a||s.hasAttribute("contenteditable");if(!p){p=v(window.getComputedStyle(s,null))}if(!p)return!1}if("use"===a&&null!==c&&(we.is.BLINK||we.is.WEBKIT&&9===we.majorVersion))return!0;if(l(s,"svg a")&&s.hasAttribute("xlink:href")){if(d)return!0;if(s.focus&&!li.focusSvgNegativeTabindexAttribute)return!0}if("svg"===a&&li.focusSvgInIframe&&d)return!0;if(we.is.TRIDENT||we.is.EDGE){if("svg"===a)return!!li.focusSvg||(s.hasAttribute("focusable")||h);if(s.ownerSVGElement)return!(!li.focusSvgTabindexAttribute||!h)||s.hasAttribute("focusable")}if(void 0===s.tabIndex)return Boolean(n.onlyTabbable);if("audio"===a){if(!s.hasAttribute("controls"))return!1;if(we.is.BLINK)return!0}if("video"===a)if(s.hasAttribute("controls")){if(we.is.BLINK||we.is.GECKO)return!0}else if(we.is.TRIDENT||we.is.EDGE)return!1;if("object"===a&&(we.is.BLINK||we.is.WEBKIT))return!1;if("iframe"===a)return!1;if(!n.scrollable&&we.is.GECKO){if(y(window.getComputedStyle(s,null)))return d}if(we.is.TRIDENT||we.is.EDGE){if("area"===a){var f=V(s);if(f&&Pt(f)<0)return!1}var m=window.getComputedStyle(s,null);if(v(m))return s.tabIndex>=0;if(!n.flexbox&&x(m))return null!==c?h:ui(s)&&di(s);if(w(s,a))return!1;var b=s.parentElement;if(b){var g=b.nodeName.toLowerCase(),C=window.getComputedStyle(b,null);if(w(b,a,g,C))return!1;if(x(C))return h}}return s.tabIndex>=0}function H(e,t){return e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}function W(e,t){return I(e,function(e){return t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING})}function K(e,t,i){var n=[];return t.forEach(function(t){var s=!0,o=e.indexOf(t);-1===o&&(o=W(e,t),s=!1),-1===o&&(o=e.length);var r=he(i?i(t):t);r.length&&n.push({"offset":o,"replace":s,"elements":r})}),n}function z(e,t){var i=0;t.sort(function(e,t){return e.offset-t.offset}),t.forEach(function(t){var n=t.replace?1:0,s=[t.offset+i,n].concat(t.elements);e.splice.apply(e,s),i+=t.elements.length-n})}function U(e){var t=e.nodeName.toLowerCase();return"input"===t||"textarea"===t||"select"===t||"button"===t}function G(e,t){var i=e.getAttribute("for");return i?t.getElementById(i):e.querySelector("input, select, textarea")}function Z(e){var t=e.parentNode;return ai({"context":t,"strategy":"strict"}).filter(U)[0]||null}function Q(e,t){var i=pi({"context":t.body,"strategy":"strict"});if(!i.length)return null;var n=mi({"list":i,"elements":[e]}),s=n.indexOf(e);return s===n.length-1?null:n[s+1]}function X(e,t){return bi.focusRedirectLegend?"fieldset"!==e.parentNode.nodeName.toLowerCase()?null:"tabbable"===bi.focusRedirectLegend?Q(e,t):Z(e,t):null}function J(e){if(!bi.focusRedirectImgUsemap)return null;var t=O(e);return t&&t.querySelector("area")||null}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parent,i=e.element,n=e.includeSelf;if(t)return function(e){return Boolean(n&&e===t||t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)};if(i)return function(e){return Boolean(n&&i===e||e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)};throw new TypeError("util/compare-position#getParentComparator required either options.parent or options.element")}function ee(e){var t=e.context,i=e.filter,n=function(e){var t=Y({"parent":e});return i.some(t)},s=[],o=function(e){return i.some(function(t){return e===t})?NodeFilter.FILTER_REJECT:n(e)?NodeFilter.FILTER_ACCEPT:(s.push(e),NodeFilter.FILTER_REJECT)};o.acceptNode=o;for(var r=ue(t),a=r.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,o,!1);a.nextNode(););return s}function te(e){return e.hasAttribute("autofocus")}function ie(e){return e.tabIndex<=0}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=pe({"label":"query/shadow-hosts","resolveDocument":!0,"defaultToDocument":!0,"context":t}),n=ue(t),s=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,_i,!1),o=[];for(i.shadowRoot&&(o.push(i),o=o.concat(ne({"context":i.shadowRoot})));s.nextNode();)o.push(s.currentNode),o=o.concat(ne({"context":s.currentNode.shadowRoot}));return o}function se(e,t){var i=e.indexOf(t);if(i>0){return e.splice(i,1).concat(e)}return e}function oe(e,t){return Mi.tabsequenceAreaAtImgPosition&&(e=Ti(e,t)),e=Si(e)}var re=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le=s(e("platform")),ce=s(e("css.escape")),ue=function(e){return e?e.nodeType===Node.DOCUMENT_NODE?e:e.ownerDocument||document:document},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=ue(t),n=void 0;try{n=i.activeElement}catch(e){}return n&&n.nodeType||(n=i.body||i.documentElement),n},he=function(e){if(!e)return[];if(Array.isArray(e))return e;if(void 0!==e.nodeType)return[e];if("string"==typeof e&&(e=document.querySelectorAll(e)),void 0!==e.length)return[].slice.call(e,0);throw new TypeError("unexpected input "+String(e))},pe=function(e){var t=e.context,i=e.label,n=void 0===i?"context-to-element":i,s=e.resolveDocument,o=e.defaultToDocument,r=he(t)[0];if(s&&r&&r.nodeType===Node.DOCUMENT_NODE&&(r=r.documentElement),!r&&o)return document.documentElement;if(!r)throw new TypeError(n+" requires valid options.context");if(r.nodeType!==Node.ELEMENT_NODE&&r.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)throw new TypeError(n+" requires options.context to be an Element");return r},fe=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=pe({"label":"get/shadow-host","context":t}),n=null;i;)n=i,i=i.parentNode;return n.nodeType===n.DOCUMENT_FRAGMENT_NODE&&n.host?n.host:null},me=function(e){var t=pe({"label":"is/shadowed","resolveDocument":!0,"context":e});return Boolean(fe({"context":t}))},be=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=[],n=pe({"label":"get/shadow-host-parents","context":t});n&&(n=fe({"context":n}));)i.push(n);return i},ge=function(){return null===document.activeElement&&document.body.focus(),me(document.activeElement)?r():o()},ve=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=[],n=pe({"label":"get/parents","context":t});n;)i.push(n),(n=n.parentNode)&&n.nodeType!==Node.ELEMENT_NODE&&(n=null);return i},ye=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],xe=null,we=JSON.parse(JSON.stringify(le)),Ce=we.os.family||"",Ie="Android"===Ce,_e="Windows"===Ce.slice(0,7),ke="OS X"===Ce,Te="iOS"===Ce,Ae="Blink"===we.layout,Ee="Gecko"===we.layout,Se="Trident"===we.layout,Me="EdgeHTML"===we.layout,Fe="WebKit"===we.layout,Oe=parseFloat(we.version),Ve=Math.floor(Oe);we.majorVersion=Ve,we.is={"ANDROID":Ie,"WINDOWS":_e,"OSX":ke,"IOS":Te,"BLINK":Ae,"GECKO":Ee,"TRIDENT":Se,"EDGE":Me,"WEBKIT":Fe,"IE9":Se&&9===Ve,"IE10":Se&&10===Ve,"IE11":Se&&11===Ve};var Re=function(e){var t=c(),i={};return Object.keys(e).map(function(n){i[n]=u(t,e[n])}),d(t),i},De="undefined"!=typeof window&&window.navigator.userAgent||"",Pe=function(e){var t=void 0;try{t=window.localStorage&&window.localStorage.getItem(e),t=t?JSON.parse(t):{}}catch(e){t={}}return t}("ally-supports-cache");Pe.userAgent===De&&"1.4.1"===Pe.version||(Pe={}),Pe.userAgent=De,Pe.version="1.4.1";var Ne={"get":function(){return Pe},"set":function(e){Object.keys(e).forEach(function(t){Pe[t]=e[t]}),Pe.time=(new Date).toISOString(),h("ally-supports-cache",Pe)}},Le=function(){var e=void 0;try{document.querySelector("html >>> :first-child"),e=">>>"}catch(t){try{document.querySelector("html /deep/ :first-child"),e="/deep/"}catch(t){e=""}}return e},Be="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$e={"element":"div","mutate":function(e){return e.innerHTML='<map name="image-map-tabindex-test"><area shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" tabindex="-1" alt="" src="'+Be+'">',e.querySelector("area")}},je={"element":"div","mutate":function(e){return e.innerHTML='<map name="image-map-tabindex-test"><area href="#void" tabindex="-1" shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" alt="" src="'+Be+'">',!1},"validate":function(e,t,i){if(we.is.GECKO)return!0;var n=e.querySelector("area");return n.focus(),i.activeElement===n}},qe={"element":"div","mutate":function(e){return e.innerHTML='<map name="image-map-area-href-test"><area shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-area-href-test" alt="" src="'+Be+'">',e.querySelector("area")},"validate":function(e,t,i){return!!we.is.GECKO||i.activeElement===t}},He={"name":"can-focus-audio-without-controls","element":"audio","mutate":function(e){try{e.setAttribute("src",Be)}catch(e){}}},We={"element":"div","mutate":function(e){return e.innerHTML='<map name="broken-image-map-test"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#broken-image-map-test" alt="" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ">',e.querySelector("area")}},Ke={"element":"div","mutate":function(e){return e.setAttribute("tabindex","-1"),e.setAttribute("style","display: -webkit-flex; display: -ms-flexbox; display: flex;"),e.innerHTML='<span style="display: block;">hello</span>',e.querySelector("span")}},ze={"element":"fieldset","mutate":function(e){e.setAttribute("tabindex",0),e.setAttribute("disabled","disabled")}},Ue={"element":"fieldset","mutate":function(e){e.innerHTML="<legend>legend</legend><p>content</p>"}},Ge={"element":"span","mutate":function(e){e.setAttribute("style","display: -webkit-flex; display: -ms-flexbox; display: flex;"),e.innerHTML='<span style="display: block;">hello</span>'}},Ze={"element":"form","mutate":function(e){e.setAttribute("tabindex",0),e.setAttribute("disabled","disabled")}},Qe={"element":"a","mutate":function(e){return e.href="#void",e.innerHTML='<img ismap src="'+Be+'" alt="">',e.querySelector("img")}},Xe={"element":"div","mutate":function(e){return e.innerHTML='<map name="image-map-tabindex-test"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#image-map-tabindex-test" tabindex="-1" alt="" src="'+Be+'">',e.querySelector("img")}},Je={"element":function(e,t){var i=t.createElement("iframe");e.appendChild(i);var n=i.contentWindow.document;return n.open(),n.close(),i},"mutate":function(e){e.style.visibility="hidden";var t=e.contentWindow.document,i=t.createElement("input");return t.body.appendChild(i),i},"validate":function(e){var t=e.contentWindow.document,i=t.querySelector("input");return t.activeElement===i}},Ye=!we.is.WEBKIT,et=function(){return Ye},tt={"element":"div","mutate":function(e){e.setAttribute("tabindex","invalid-value")}},it={"element":"label","mutate":function(e){e.setAttribute("tabindex","-1")},"validate":function(e,t,i){e.offsetHeight;return e.focus(),i.activeElement===e}},nt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0ic3ZnIj48dGV4dCB4PSIxMCIgeT0iMjAiIGlkPSJzdmctbGluay10ZXh0Ij50ZXh0PC90ZXh0Pjwvc3ZnPg==",st={"element":"object","mutate":function(e){e.setAttribute("type","image/svg+xml"),e.setAttribute("data",nt),e.setAttribute("width","200"),e.setAttribute("height","50"),e.style.visibility="hidden"}},ot={"name":"can-focus-object-svg","element":"object","mutate":function(e){e.setAttribute("type","image/svg+xml"),e.setAttribute("data",nt),e.setAttribute("width","200"),e.setAttribute("height","50")},"validate":function(e,t,i){return!!we.is.GECKO||i.activeElement===e}},rt=!we.is.IE9,at=function(){return rt},lt={"element":"div","mutate":function(e){return e.innerHTML='<map name="focus-redirect-img-usemap"><area href="#void" shape="rect" coords="63,19,144,45"></map><img usemap="#focus-redirect-img-usemap" alt="" src="'+Be+'">',e.querySelector("img")},"validate":function(e,t,i){var n=e.querySelector("area");return i.activeElement===n}},ct={"element":"fieldset","mutate":function(e){return e.innerHTML='<legend>legend</legend><input tabindex="-1"><input tabindex="0">',!1},"validate":function(e,t,i){var n=e.querySelector('input[tabindex="-1"]'),s=e.querySelector('input[tabindex="0"]');return e.focus(),e.querySelector("legend").focus(),i.activeElement===n&&"focusable"||i.activeElement===s&&"tabbable"||""}},ut={"element":"div","mutate":function(e){return e.setAttribute("style","width: 100px; height: 50px; overflow: auto;"),e.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>',e.querySelector("div")}},dt={"element":"div","mutate":function(e){e.setAttribute("style","width: 100px; height: 50px;"),e.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>'}},ht={"element":"div","mutate":function(e){e.setAttribute("style","width: 100px; height: 50px; overflow: auto;"),e.innerHTML='<div style="width: 500px; height: 40px;">scrollable content</div>'}},pt={"element":"details","mutate":function(e){return e.innerHTML="<summary>foo</summary><p>content</p>",e.firstElementChild}},ft=function(e){if(!e.ownerSVGElement&&"svg"!==e.nodeName.toLowerCase())return!1;var t=p();e.appendChild(t);var i=t.querySelector("input");return i.focus(),i.disabled=!0,e.removeChild(t),!0},mt={"element":"div","mutate":function(e){return e.innerHTML=f('<text focusable="true">a</text>'),e.querySelector("text")},"validate":b},bt={"element":"div","mutate":function(e){return e.innerHTML=f('<text tabindex="0">a</text>'),e.querySelector("text")},"validate":b},gt={"element":"div","mutate":function(e){return e.innerHTML=f('<text tabindex="-1">a</text>'),e.querySelector("text")},"validate":b},vt={"element":"div","mutate":function(e){return e.innerHTML=f(['<g id="ally-test-target"><a xlink:href="#void"><text>link</text></a></g>','<use xlink:href="#ally-test-target" x="0" y="0" tabindex="-1" />'].join("")),e.querySelector("use")},"validate":b},yt={"element":"div","mutate":function(e){return e.innerHTML=f('<foreignObject tabindex="-1"><input type="text" /></foreignObject>'),e.querySelector("foreignObject")||e.getElementsByTagName("foreignObject")[0]},"validate":b},xt=Boolean(we.is.GECKO&&"undefined"!=typeof SVGElement&&SVGElement.prototype.focus),wt=function(){return xt},Ct={"element":"div","mutate":function(e){return e.innerHTML=f(""),e.firstChild},"validate":b},It={"element":"div","mutate":function(e){e.setAttribute("tabindex","3x")}},_t={"element":"table","mutate":function(e,t,i){var n=i.createDocumentFragment();n.innerHTML="<tr><td>cell</td></tr>",e.appendChild(n)}},kt={"element":"video","mutate":function(e){try{e.setAttribute("src",Be)}catch(e){}}},Tt=we.is.GECKO||we.is.TRIDENT||we.is.EDGE,At=function(){return Tt},Et={"cssShadowPiercingDeepCombinator":Le,"focusInZeroDimensionObject":et,"focusObjectSwf":at,"focusSvgInIframe":wt,"tabsequenceAreaAtImgPosition":At},St={"focusAreaImgTabindex":$e,"focusAreaTabindex":je,"focusAreaWithoutHref":qe,"focusAudioWithoutControls":He,"focusBrokenImageMap":We,"focusChildrenOfFocusableFlexbox":Ke,"focusFieldsetDisabled":ze,"focusFieldset":Ue,"focusFlexboxContainer":Ge,"focusFormDisabled":Ze,"focusImgIsmap":Qe,"focusImgUsemapTabindex":Xe,"focusInHiddenIframe":Je,"focusInvalidTabindex":tt,"focusLabelTabindex":it,"focusObjectSvg":ot,"focusObjectSvgHidden":st,"focusRedirectImgUsemap":lt,"focusRedirectLegend":ct,"focusScrollBody":ut,"focusScrollContainerWithoutOverflow":dt,"focusScrollContainer":ht,"focusSummary":pt,"focusSvgFocusableAttribute":mt,"focusSvgTabindexAttribute":bt,"focusSvgNegativeTabindexAttribute":gt,"focusSvgUseTabindex":vt,"focusSvgForeignobjectTabindex":yt,"focusSvg":Ct,"focusTabindexTrailingCharacters":It,"focusTable":_t,"focusVideoWithoutControls":kt},Mt=null,Ft=function(){return Mt||(Mt=Ne.get(),Mt.time||(Ne.set(g()),Mt=Ne.get()),Mt)},Ot=void 0,Vt=/^\s*(-|\+)?[0-9]+\s*$/,Rt=/^\s*(-|\+)?[0-9]+.*$/,Dt=function(e){Ot||(Ot=Ft());var t=Ot.focusTabindexTrailingCharacters?Rt:Vt,i=pe({"label":"is/valid-tabindex","resolveDocument":!0,"context":e}),n=i.hasAttribute("tabindex"),s=i.hasAttribute("tabIndex");if(!n&&!s)return!1;if((i.ownerSVGElement||"svg"===i.nodeName.toLowerCase())&&!Ot.focusSvgTabindexAttribute)return!1;if(Ot.focusInvalidTabindex)return!0;var o=i.getAttribute(n?"tabindex":"tabIndex");return"-32768"!==o&&Boolean(o&&t.test(o))},Pt=function(e){if(!Dt(e))return null;var t=e.hasAttribute("tabindex"),i=t?"tabindex":"tabIndex",n=parseInt(e.getAttribute(i),10);return isNaN(n)?-1:n},Nt=void 0;C.except=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return C({"context":t,"except":e})};return t.rules=C,t};var Lt=C.except({}),Bt=function(e){try{return e.contentDocument||e.contentWindow&&e.contentWindow.document||e.getSVGDocument&&e.getSVGDocument()||null}catch(e){return null}},$t=function(e){return ue(e).defaultView||window},jt=void 0,qt=function(e){if("string"!=typeof jt){var t=Le();t&&(jt=", html "+t+" ")}return jt?e+jt+e.replace(/\s*,\s*/g,",").split(",").join(jt):e},Ht=void 0,Wt=/^(area)$/;M.except=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return M({"context":t,"except":e})};return t.rules=M,t};var Kt=M.except({}),zt=void 0,Ut=function(e){zt||(zt=Ft());var t=pe({"label":"is/valid-area","context":e});if("area"!==t.nodeName.toLowerCase())return!1;var i=t.hasAttribute("tabindex");if(!zt.focusAreaTabindex&&i)return!1;var n=V(t);return!(!n||!Kt(n))&&(!(!zt.focusBrokenImageMap&&(!n.complete||!n.naturalHeight||n.offsetWidth<=0||n.offsetHeight<=0))&&(zt.focusAreaWithoutHref||t.href?!ve({"context":n}).slice(1).some(function(e){var t=e.nodeName.toLowerCase();return"button"===t||"a"===t}):zt.focusAreaTabindex&&i||zt.focusAreaImgTabindex&&n.hasAttribute("tabindex")))},Gt=void 0,Zt=void 0,Qt={"input":!0,"select":!0,"textarea":!0,"button":!0,"fieldset":!0,"form":!0},Xt=function(e){Gt||(Gt=Ft(),Gt.focusFieldsetDisabled&&delete Qt.fieldset,Gt.focusFormDisabled&&delete Qt.form,Zt=new RegExp("^("+Object.keys(Qt).join("|")+")$"));var t=pe({"label":"is/native-disabled-supported","context":e}),i=t.nodeName.toLowerCase();return Boolean(Zt.test(i))},Jt=void 0,Yt=function(e){Jt||(Jt=Ft());var t=pe({"label":"is/disabled","context":e});if(t.hasAttribute("data-ally-disabled"))return!0;if(!Xt(t))return!1;if(t.disabled)return!0;var i=ve({"context":t});return!!i.some(R)||!(Jt.focusFormDisabled||!i.some(D))};P.except=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return P({"context":t,"except":e})};return t.rules=P,t};var ei=P.except({}),ti=void 0;L.except=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return L({"context":t,"except":e})};return t.rules=L,t};var ii=L.except({}),ni=B(Lt),si=void 0,oi=void 0,ri=function(){return si||(si=Ft()),"string"==typeof oi?oi:(oi=(si.focusTable?"table, td,":"")+(si.focusFieldset?"fieldset,":"")+"svg a,a[href],area[href],input, select, textarea, button,iframe, object, embed,keygen,"+(si.focusAudioWithoutControls?"audio,":"audio[controls],")+(si.focusVideoWithoutControls?"video,":"video[controls],")+(si.focusSummary?"summary,":"")+"[tabindex],[contenteditable]",oi=qt(oi))},ai=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.includeContext,n=e.includeOnlyTabbable,s=e.strategy,o=void 0===s?"quick":s,r=pe({"label":"query/focusable","resolveDocument":!0,"defaultToDocument":!0,"context":t}),a={"context":r,"includeContext":i,"includeOnlyTabbable":n,"strategy":o};if("quick"===o)return j(a);if("strict"===o||"all"===o)return $(a);throw new TypeError('query/focusable requires option.strategy to be one of ["quick", "strict", "all"]')},li=void 0,ci=/^(fieldset|table|td|body)$/;q.except=function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return q({"context":t,"except":e})};return t.rules=q,t};var ui=Lt.rules.except({"flexbox":!0}),di=q.except({"flexbox":!0}),hi=q.except({}),pi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.includeContext,n=e.includeOnlyTabbable,s=e.strategy,o=hi.rules.except({"onlyTabbable":n});return ai({"context":t,"includeContext":i,"includeOnlyTabbable":n,"strategy":s}).filter(o)},fi=function(e){return e.sort(H)},mi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.list,i=e.elements,n=e.resolveElement,s=t.slice(0),o=he(i).slice(0);return fi(o),z(s,K(s,o,n)),s},bi=void 0,gi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.skipFocusable;bi||(bi=Ft());var n=pe({"label":"get/focus-redirect-target","context":t});if(!i&&ii(n))return null;var s=n.nodeName.toLowerCase(),o=ue(n);return"label"===s?G(n,o):"legend"===s?X(n,o):"img"===s?J(n):null},vi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.except,n=pe({"label":"get/focus-target","context":t}),s=null,o=function(e){return ii.rules({"context":e,"except":i})?(s=e,!0):(s=gi({"context":e,"skipFocusable":!0}),Boolean(s))};return o(n)?s:(ve({"context":n}).slice(1).some(o),s)},yi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.filter;if(t=pe({"label":"get/insignificant-branches","defaultToDocument":!0,"context":t}),i=he(i),!i.length)throw new TypeError("get/insignificant-branches requires valid options.filter");return ee({"context":t,"filter":i})},xi={"activeElement":de,"activeElements":ge,"focusRedirectTarget":gi,"focusTarget":vi,"insignificantBranches":yi,"parents":ve,"shadowHostParents":be,"shadowHost":fe},wi=function(e){var t=pe({"label":"is/active-element","resolveDocument":!0,"context":e});if(ue(t).activeElement===t)return!0;var i=fe({"context":t});return!(!i||i.shadowRoot.activeElement!==t)},Ci={"activeElement":wi,"disabled":Yt,"focusRelevant":Lt,"focusable":ii,"onlyTabbable":ei,"shadowed":me,"tabbable":hi,"validArea":Ut,"validTabindex":Dt,"visible":Kt},Ii=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.sequence,n=e.strategy,s=e.ignoreAutofocus,o=e.defaultToContext,r=e.includeOnlyTabbable,a=-1;i||(t=he(t||document.body)[0],i=pi({"context":t,"includeOnlyTabbable":r,"strategy":n})),i.length&&!s&&(a=I(i,te)),i.length&&-1===a&&(a=I(i,ie));var l=ii.rules.except({"onlyTabbable":r});return-1===a&&o&&t&&l(t)?t:i[a]||null},_i=function(e){return e.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP};_i.acceptNode=_i;var ki=function(){function e(t){n(this,e),this._document=ue(t),this.maps={}}return re(e,[{"key":"getAreasFor","value":function(e){return this.maps[e]||this.addMapByName(e),this.maps[e]}},{"key":"addMapByName","value":function(e){var t=F(e,this._document);t&&(this.maps[t.name]=pi({"context":t}))}},{"key":"extractAreasFromList","value":function(e){return e.filter(function(e){if("area"!==e.nodeName.toLowerCase())return!0;var t=e.parentNode;return this.maps[t.name]||(this.maps[t.name]=[]),this.maps[t.name].push(e),!1},this)}}]),e}(),Ti=function(e,t){var i=t.querySelectorAll("img[usemap]"),n=new ki(t),s=n.extractAreasFromList(e);return i.length?mi({"list":s,"elements":i,"resolveElement":function(e){var t=e.getAttribute("usemap").slice(1);return n.getAreasFor(t)}}):s},Ai=function(){function e(t,i){n(this,e),this.context=t,this.sortElements=i,this.hostCounter=1,this.inHost={},this.inDocument=[],this.hosts={},this.elements={}}return re(e,[{"key":"_registerHost","value":function(e){if(!e._sortingId){e._sortingId="shadow-"+this.hostCounter++,this.hosts[e._sortingId]=e;var t=fe({"context":e});t?(this._registerHost(t),this._registerHostParent(e,t)):this.inDocument.push(e)}}},{"key":"_registerHostParent","value":function(e,t){this.inHost[t._sortingId]||(this.inHost[t._sortingId]=[]),this.inHost[t._sortingId].push(e)}},{"key":"_registerElement","value":function(e,t){this.elements[t._sortingId]||(this.elements[t._sortingId]=[]),this.elements[t._sortingId].push(e)}},{"key":"extractElements","value":function(e){return e.filter(function(e){var t=fe({"context":e});return!t||(this._registerHost(t),this._registerElement(e,t),!1)},this)}},{"key":"sort","value":function(e){var t=this._injectHosts(e);return t=this._replaceHosts(t),this._cleanup(),t}},{"key":"_injectHosts","value":function(e){return Object.keys(this.hosts).forEach(function(e){var t=this.elements[e],i=this.inHost[e],n=this.hosts[e].shadowRoot;this.elements[e]=this._merge(t,i,n)},this),this._merge(e,this.inDocument,this.context)}},{"key":"_merge","value":function(e,t,i){var n=mi({"list":e,"elements":t});return this.sortElements(n,i)}},{"key":"_replaceHosts","value":function(e){return mi({"list":e,"elements":this.inDocument,"resolveElement":this._resolveHostElement.bind(this)})}},{"key":"_resolveHostElement","value":function(e){var t=mi({"list":this.elements[e._sortingId],"elements":this.inHost[e._sortingId],"resolveElement":this._resolveHostElement.bind(this)}),i=Pt(e);return null!==i&&i>-1?[e].concat(t):t}},{"key":"_cleanup","value":function(){Object.keys(this.hosts).forEach(function(e){delete this.hosts[e]._sortingId},this)}}]),e}(),Ei=function(e,t,i){var n=new Ai(t,i),s=n.extractElements(e);return s.length===e.length?i(e):n.sort(s)},Si=function(e){var t={},i=[],n=e.filter(function(e){var n=e.tabIndex;return void 0===n&&(n=Pt(e)),n<=0||null===n||void 0===n||(t[n]||(t[n]=[],i.push(n)),t[n].push(e),!1)});return i.sort().map(function(e){return t[e]}).reduceRight(function(e,t){return t.concat(e)},n)},Mi=void 0,Fi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,i=e.includeContext,n=e.includeOnlyTabbable,s=e.strategy;Mi||(Mi=Ft());var o=he(t)[0]||document.documentElement,r=pi({"context":o,"includeContext":i,"includeOnlyTabbable":n,"strategy":s});return r=document.body.createShadowRoot&&we.is.BLINK?Ei(r,o,oe):oe(r,o),i&&(r=se(r,o)),r},Oi={"firstTabbable":Ii,"focusable":ai,"shadowHosts":ne,"tabbable":pi,"tabsequence":Fi},Vi="undefined"!=typeof window&&window.ally,Ri={"get":xi,"is":Ci,"query":Oi,"noConflict":function(){return"undefined"!=typeof window&&window.ally===this&&(window.ally=Vi),this}};t.exports=Ri},{"css.escape":2,"platform":3}],"2":[function(t,i,n){(function(t){!function(t,s){"object"==typeof n?i.exports=s(t):"function"==typeof e&&e.amd?e([],s.bind(t,t)):s(t)}(void 0!==t?t:this,function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,i=String(e),n=i.length,s=-1,o="",r=i.charCodeAt(0);++s<n;)t=i.charCodeAt(s),o+=0!=t?t>=1&&t<=31||127==t||0==s&&t>=48&&t<=57||1==s&&t>=48&&t<=57&&45==r?"\\"+t.toString(16)+" ":(0!=s||1!=n||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?i.charAt(s):"\\"+i.charAt(s):"\ufffd";return o};return e.CSS||(e.CSS={}),e.CSS.escape=t,t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"3":[function(t,i,n){(function(t){(function(){"use strict";function s(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t,i){var n={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&i&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&i&&(e=e.replace(RegExp(t,"i"),i)),e=a(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function r(e,t){var i=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=w)for(;++i<n;)t(e[i],i,e);else l(e,t)}function a(e){return e=p(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:s(e)}function l(e,t){for(var i in e)k.call(e,i)&&t(e[i],i,e)}function c(e){return null==e?s(e):T.call(e).slice(8,-1)}function u(e,t){var i=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(i)||"object"==i&&!e[t])}function d(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function h(e,t){var i=null;return r(e,function(n,s){i=t(i,n,s,e)}),i}function p(e){return String(e).replace(/^ +| +$/g,"")}function f(e){function t(t){return h(t,function(t,i){var n=i.pattern||d(i);return!t&&(t=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(i.label&&!RegExp(n,"i").test(i.label)?i.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),i=i.label||i,t=a(t[0].replace(RegExp(n,"i"),i).replace(RegExp("; *(?:"+i+"[_-])?","i")," ").replace(RegExp("("+i+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function i(){return this.description||""}var n=b,s=e&&"object"==typeof e&&"String"!=c(e);s&&(n=e,e=null);var r=n.navigator||{},m=r.userAgent||"";e||(e=m);var v,y,x=s||I==g,w=s?!!r.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(T.toString()),_=s?"Object":"ScriptBridgingProxyObject",k=s?"Object":"Environment",A=s&&n.java?"JavaPackage":c(n.java),E=s?"Object":"RuntimeObject",S=/\bJava/.test(A)&&n.java,M=S&&c(n.environment)==k,F=S?"a":"\u03b1",O=S?"b":"\u03b2",V=n.document||{},R=n.operamini||n.opera,D=C.test(D=s&&R?R["[[Class]]"]:c(R))?D:R=null,P=e,N=[],L=null,B=e==m,$=B&&R&&"function"==typeof R.version&&R.version(),j=function(t){return h(t,function(t,i){return t||RegExp("\\b"+(i.pattern||d(i))+"\\b","i").exec(e)&&(i.label||i)})}([{"label":"EdgeHTML","pattern":"Edge"},"Trident",{"label":"WebKit","pattern":"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),q=function(t){return h(t,function(t,i){return t||RegExp("\\b"+(i.pattern||d(i))+"\\b","i").exec(e)&&(i.label||i)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{"label":"Microsoft Edge","pattern":"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{"label":"Silk","pattern":"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{"label":"SRWare Iron","pattern":"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{"label":"Opera Mini","pattern":"OPiOS"},"Opera",{"label":"Opera","pattern":"OPR"},"Chrome",{"label":"Chrome Mobile","pattern":"(?:CriOS|CrMo)"},{"label":"Firefox","pattern":"(?:Firefox|Minefield)"},{"label":"Firefox for iOS","pattern":"FxiOS"},{"label":"IE","pattern":"IEMobile"},{"label":"IE","pattern":"MSIE"},"Safari"]),H=t([{"label":"BlackBerry","pattern":"BB10"},"BlackBerry",{"label":"Galaxy S","pattern":"GT-I9000"},{"label":"Galaxy S2","pattern":"GT-I9100"},{"label":"Galaxy S3","pattern":"GT-I9300"},{"label":"Galaxy S4","pattern":"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{"label":"Kindle Fire","pattern":"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{"label":"Wii U","pattern":"WiiU"},"Wii","Xbox One",{"label":"Xbox 360","pattern":"Xbox"},"Xoom"]),W=function(t){return h(t,function(t,i,n){return t||(i[H]||i[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+d(n)+"(?:\\b|\\w*\\d)","i").exec(e))&&n})}({"Apple":{"iPad":1,"iPhone":1,"iPod":1},"Archos":{},"Amazon":{"Kindle":1,"Kindle Fire":1},"Asus":{"Transformer":1},"Barnes & Noble":{"Nook":1},"BlackBerry":{"PlayBook":1},"Google":{"Google TV":1,"Nexus":1},"HP":{"TouchPad":1},"HTC":{},"LG":{},"Microsoft":{"Xbox":1,"Xbox One":1},"Motorola":{"Xoom":1},"Nintendo":{"Wii U":1,"Wii":1},"Nokia":{"Lumia":1},"Samsung":{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},"Sony":{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),K=function(t){return h(t,function(t,i){var n=i.pattern||d(i);return!t&&(t=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=o(t,n,i.label||i)),t})}(["Windows Phone","Android","CentOS",{"label":"Chrome OS","pattern":"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(j&&(j=[j]),W&&!H&&(H=t([W])),(v=/\bGoogle TV\b/.exec(H))&&(H=v[0]),/\bSimulator\b/i.test(e)&&(H=(H?H+" ":"")+"Simulator"),"Opera Mini"==q&&/\bOPiOS\b/.test(e)&&N.push("running in Turbo/Uncompressed mode"),"IE"==q&&/\blike iPhone OS\b/.test(e)?(v=f(e.replace(/like iPhone OS/,"")),W=v.manufacturer,H=v.product):/^iP/.test(H)?(q||(q="Safari"),K="iOS"+((v=/ OS ([\d_]+)/i.exec(e))?" "+v[1].replace(/_/g,"."):"")):"Konqueror"!=q||/buntu/i.test(K)?W&&"Google"!=W&&(/Chrome/.test(q)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(H))||/\bAndroid\b/.test(K)&&/^Chrome/.test(q)&&/\bVersion\//i.test(e)?(q="Android Browser",K=/\bAndroid\b/.test(K)?K:"Android"):"Silk"==q?(/\bMobi/i.test(e)||(K="Android",N.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&N.unshift("accelerated")):"PaleMoon"==q&&(v=/\bFirefox\/([\d.]+)\b/.exec(e))?N.push("identifying as Firefox "+v[1]):"Firefox"==q&&(v=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(K||(K="Firefox OS"),H||(H=v[1])):q&&!(v=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(q))||(q&&!H&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(v+"/")+8))&&(q=null),(v=H||W||K)&&(H||W||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(K))&&(q=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(K)?K:v)+" Browser")):K="Kubuntu",$||($=function(t){return h(t,function(t,i){return t||(RegExp(i+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",d(q),"(?:Firefox|Minefield|NetFront)"])),(v="iCab"==j&&parseFloat($)>3&&"WebKit"||/\bOpera\b/.test(q)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(e)&&("Mac OS"==K?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(q)&&"NetFront")&&(j=[v]),"IE"==q&&(v=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(q+=" Mobile",K="Windows Phone "+(/\+$/.test(v)?v:v+".x"),N.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(q="IE Mobile",K="Windows Phone 8.x",N.unshift("desktop mode"),$||($=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=q&&"Trident"==j&&(v=/\brv:([\d.]+)/.exec(e))&&(q&&N.push("identifying as "+q+($?" "+$:"")),q="IE",$=v[1]),B){if(u(n,"global"))if(S&&(v=S.lang.System,P=v.getProperty("os.arch"),K=K||v.getProperty("os.name")+" "+v.getProperty("os.version")),x&&u(n,"system")&&(v=[n.system])[0]){K||(K=v[0].os||null);try{v[1]=n.require("ringo/engine").version,$=v[1].join("."),q="RingoJS"}catch(e){v[0].global.system==n.system&&(q="Narwhal")}}else"object"==typeof n.process&&!n.process.browser&&(v=n.process)?(q="Node.js",P=v.arch,K=v.platform,$=/[\d.]+/.exec(v.version)[0]):M&&(q="Rhino");else c(v=n.runtime)==_?(q="Adobe AIR",K=v.flash.system.Capabilities.os):c(v=n.phantom)==E?(q="PhantomJS",$=(v=v.version||null)&&v.major+"."+v.minor+"."+v.patch):"number"==typeof V.documentMode&&(v=/\bTrident\/(\d+)/i.exec(e))&&($=[$,V.documentMode],(v=+v[1]+4)!=$[1]&&(N.push("IE "+$[1]+" mode"),j&&(j[1]=""),$[1]=v),$="IE"==q?String($[1].toFixed(1)):$[0]);K=K&&a(K)}$&&(v=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec($)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(B&&r.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(L=/b/i.test(v)?"beta":"alpha",$=$.replace(RegExp(v+"\\+?$"),"")+("beta"==L?O:F)+(/\d+\+?/.exec(v)||"")),"Fennec"==q||"Firefox"==q&&/\b(?:Android|Firefox OS)\b/.test(K)?q="Firefox Mobile":"Maxthon"==q&&$?$=$.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(H)?(K=null,"Xbox 360"==H&&/\bIEMobile\b/.test(e)&&N.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(q)&&(!q||H||/Browser|Mobi/.test(q))||"Windows CE"!=K&&!/Mobi/i.test(e)?"IE"==q&&B&&null===n.external?N.unshift("platform preview"):(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(e))&&(v=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||$)?(v=[v,/BB10/.test(e)],K=(v[1]?(H=null,W="BlackBerry"):"Device Software")+" "+v[0],$=null):this!=l&&"Wii"!=H&&(B&&R||/Opera/.test(q)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==q&&/\bOS X (?:\d+\.){2,}/.test(K)||"IE"==q&&(K&&!/^Win/.test(K)&&$>5.5||/\bWindows XP\b/.test(K)&&$>8||8==$&&!/\bTrident\b/.test(e)))&&!C.test(v=f.call(l,e.replace(C,"")+";"))&&v.name&&(v="ing as "+v.name+((v=v.version)?" "+v:""),C.test(q)?(/\bIE\b/.test(v)&&"Mac OS"==K&&(K=null),v="identify"+v):(v="mask"+v,q=D?a(D.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(v)&&(K=null),B||($=null)),j=["Presto"],N.push(v)):q+=" Mobile",(v=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(v=[parseFloat(v.replace(/\.(\d)$/,".0$1")),v],"Safari"==q&&"+"==v[1].slice(-1)?(q="WebKit Nightly",L="alpha",$=v[1].slice(0,-1)):$!=v[1]&&$!=(v[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||($=null),v[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==v[0]&&537.36==v[2]&&parseFloat(v[1])>=28&&"WebKit"==j&&(j=["Blink"]),B&&(w||v[1])?(j&&(j[1]="like Chrome"),v=v[1]||(v=v[0],v<530?1:v<532?2:v<532.05?3:v<533?4:v<534.03?5:v<534.07?6:v<534.1?7:v<534.13?8:v<534.16?9:v<534.24?10:v<534.3?11:v<535.01?12:v<535.02?"13+":v<535.07?15:v<535.11?16:v<535.19?17:v<536.05?18:v<536.1?19:v<537.01?20:v<537.11?"21+":v<537.13?23:v<537.18?24:v<537.24?25:v<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),v=v[0],v=v<400?1:v<500?2:v<526?3:v<533?4:v<534?"4+":v<535?5:v<537?6:v<538?7:v<601?8:"8"),j&&(j[1]+=" "+(v+="number"==typeof v?".x":/[.+]/.test(v)?"":"+")),"Safari"==q&&(!$||parseInt($)>45)&&($=v)),"Opera"==q&&(v=/\bzbov|zvav$/.exec(K))?(q+=" ",N.unshift("desktop mode"),"zvav"==v?(q+="Mini",$=null):q+="Mobile",K=K.replace(RegExp(" *"+v+"$"),"")):"Safari"==q&&/\bChrome\b/.exec(j&&j[1])&&(N.unshift("desktop mode"),q="Chrome Mobile",$=null,/\bOS X\b/.test(K)?(W="Apple",K="iOS 4.3+"):K=null),$&&0==$.indexOf(v=/[\d.]+$/.exec(K))&&e.indexOf("/"+v+"-")>-1&&(K=p(K.replace(v,""))),j&&!/\b(?:Avant|Nook)\b/.test(q)&&(/Browser|Lunascape|Maxthon/.test(q)||"Safari"!=q&&/^iOS/.test(K)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(q)&&j[1])&&(v=j[j.length-1])&&N.push(v),N.length&&(N=["("+N.join("; ")+")"]),W&&H&&H.indexOf(W)<0&&N.push("on "+W),H&&N.push((/^on /.test(N[N.length-1])?"":"on ")+H),K&&(v=/ ([\d.+]+)$/.exec(K),y=v&&"/"==K.charAt(K.length-v[0].length-1),K={"architecture":32,"family":v&&!y?K.replace(v[0],""):K,"version":v?v[1]:null,"toString":function(){var e=this.version;return this.family+(e&&!y?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(v=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(P))&&!/\bi686\b/i.test(P)?(K&&(K.architecture=64,K.family=K.family.replace(RegExp(" *"+v),"")),q&&(/\bWOW64\b/i.test(e)||B&&/\w(?:86|32)$/.test(r.cpuClass||r.platform)&&!/\bWin64; x64\b/i.test(e))&&N.unshift("32-bit")):K&&/^OS X/.test(K.family)&&"Chrome"==q&&parseFloat($)>=39&&(K.architecture=64),e||(e=null);var z={};return z.description=e,z.layout=j&&j[0],z.manufacturer=W,z.name=q,z.prerelease=L,z.product=H,z.ua=e,z.version=q&&$,z.os=K||{"architecture":null,"family":null,"version":null,"toString":function(){return"null"}},z.parse=f,z.toString=i,z.version&&N.unshift($),z.name&&N.unshift(q),K&&q&&(K!=String(K).split(" ")[0]||K!=q.split(" ")[0]&&!H)&&N.push(H?"("+K+")":"on "+K),N.length&&(z.description=N.join(" ")),z}var m={"function":!0,"object":!0},b=m[typeof window]&&window||this,g=b,v=m[typeof n]&&n,y=m[typeof i]&&i&&!i.nodeType&&i,x=v&&y&&"object"==typeof t&&t;!x||x.global!==x&&x.window!==x&&x.self!==x||(b=x);var w=Math.pow(2,53)-1,C=/\bOpera/,I=this,_=Object.prototype,k=_.hasOwnProperty,T=_.toString,A=f();"function"==typeof e&&"object"==typeof e.amd&&e.amd?(b.platform=A,e(function(){return A})):v&&y?l(A,function(e,t){v[t]=e}):b.platform=A}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1);return delete t.noConflict,t}),function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("csui/lib/jquery")):"function"==typeof csui.define&&csui.define.amd?csui.define("csui/lib/bootstrap3-typeahead",["csui/lib/jquery"],function(e){return t(e)}):t(e.jQuery)}(this,function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=e(this.options.menu),this.$appendTo=this.options.appendTo?e(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.currentHighlighter=this.options.currentHighlighter,this.nextHighlighter=this.options.nextHighlighter,this.accessbility=this.options.accessbility,this.addItem=!1,this.prettyScrolling=e.isFunction(e.fn.perfectScrollbar)&&this.options.prettyScrolling,this.$scrollContainer=this.options.scrollContainer?e(this.options.scrollContainer):null,this.scrollContainerHeight=this.options.scrollContainerHeight,this.handleNoResults=!!this.options.handleNoResults,this.emptyTemplate=this.handleNoResults&&this.options.emptyTemplate?this.options.emptyTemplate:"",this.handleNoResults&&(this.dataFound=!1)};t.prototype={"constructor":t,"select":function(){var e=this.$menu.find(".binf-active").data("value");if(this.$element.data("active",e),this.autoSelect||e){var t=this.updater(e);this.$element.val(this.displayText(t)||t).change(),this.afterSelect(t)}return this.hide()},"updater":function(e){return e},"setSource":function(e){this.source=e},"show":function(){var t,i=e.extend({},this.$element.position(),{"height":this.$element[0].offsetHeight});return t="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,this.prettyScrolling&&(this.$appendTo=this.$appendTo?this.$scrollContainer.appendTo(this.$appendTo):this.$scrollContainer.insertAfter(this.$element)),this.options.beforeShow&&this.options.beforeShow(this),(this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({"top":i.top+i.height+t,"left":i.left}).show(),this.prettyScrolling&&this.$scrollContainer.show().css({"height":this.$menu[0].offsetHeight>this.scrollContainerHeight?this.scrollContainerHeight:this.$menu[0].offsetHeight}).perfectScrollbar({"suppressScrollX":!0,"scrollYMarginOffset":15}).scrollTop(0),this.shown=!0,this.options.afterShow&&this.options.afterShow(this),this},"hide":function(){return this.prettyScrolling&&this.$scrollContainer.hide(),this.$menu.hide(),this.shown=!1,this},"lookup":function(t){if(this.query=void 0!==t&&null!==t?t:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var i=e.proxy(function(){var t=this;e.isFunction(this.source)?e.when(this.source(this.query,e.proxy(this.process,this))).done(function(e){t.process(e)}):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(i,this.delay)},"process":function(t){if(0===t.length&&this.handleNoResults)return this.dataFound=!1,this.renderNoResults().show();this.dataFound=!0;var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length||this.options.addItem?(t.length>0?this.$element.data("active",t[0]):this.$element.data("active",null),this.options.addItem&&t.push(this.options.addItem),"all"==this.options.items?this.render(t).show():this.render(t.slice(0,this.options.items)).show()):this.shown?this.hide():this},"matcher":function(e){return~this.displayText(e).toLowerCase().indexOf(this.query.toLowerCase())},"sorter":function(e){for(var t,i=[],n=[],s=[];t=e.shift();){var o=this.displayText(t);o.toLowerCase().indexOf(this.query.toLowerCase())?~o.indexOf(this.query)?n.push(t):s.push(t):i.push(t)}return i.concat(n,s)},"highlighter":function(t){var i,n,s,o,r,a=e("<div></div>"),l=this.query,c=t.toLowerCase().indexOf(l.toLowerCase());if(0===(i=l.length))return a.text(t).html();for(;c>-1;)n=t.substr(0,c),s=t.substr(c,i),o=t.substr(c+i),r=e("<strong></strong>").text(s),a.append(document.createTextNode(n)).append(r),t=o,c=t.toLowerCase().indexOf(l.toLowerCase());return a.append(document.createTextNode(t)).html()},"render":function(t){var i=this,n=this,s=!1;return t=e(t).map(function(t,o){var r=n.displayText(o);return t=e(i.options.item).data("value",o),t.find("a").html(i.highlighter(r)),t.attr("id","user-item"+o.cid),r==n.$element.val()&&(t.addClass("binf-active"),n.$element.data("active",o),s=!0),t[0]}),this.autoSelect&&!s&&(t.first().addClass("binf-active"),this.$element.data("active",t.first().data("value"))),this.$menu.html(t),this.nextHighlighter(t.first()),this},"renderNoResults":function(){return this.$menu.html(this.emptyTemplate).addClass("csui-no-results-wrapper"),this},"displayText":function(e){return e.name||e},"next":function(t){var i=this.$menu.find(".binf-active").removeClass("binf-active"),n=i.next();this.currentHighlighter(i),n.length||(n=e(this.$menu.find("li")[0])),this.accessbility(n),n.addClass("binf-active"),this._scrollIntoView(n[0]),this.nextHighlighter(n)},"prev":function(e){var t=this.$menu.find(".binf-active").removeClass("binf-active"),i=t.prev();this.currentHighlighter(t),i.length||(i=this.$menu.find("li").last()),this.accessbility(i),i.addClass("binf-active"),this._scrollIntoView(i[0]),this.nextHighlighter(i)},"listen":function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},"destroy":function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},"eventSupported":function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},"move":function(e){if(this.shown)switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(this.handleNoResults&&!this.dataFound)return;if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(this.handleNoResults&&!this.dataFound)return;if(e.shiftKey)return;e.preventDefault(),this.next()}},"keydown":function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.shown||40!=t.keyCode?this.move(t):this.lookup()},"keypress":function(e){this.suppressKeyPressRepeat||this.move(e)},"keyup":function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;if(this.handleNoResults&&!this.dataFound)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;case 113:return;default:this.lookup()}e.preventDefault()},"focus":function(e){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},"blur":function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},"click":function(e){e.preventDefault(),this.dataFound?(this.select(),this.$element.focus()):this.hide()},"mouseenter":function(t){this.mousedover=!0,this.currentHighlighter(this.$menu.find(".binf-active")),this.$menu.find(".binf-active").removeClass("binf-active"),e(t.currentTarget).addClass("binf-active"),this.nextHighlighter(this.$menu.find(".binf-active"))},"mouseleave":function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()},"_scrollIntoView":function(e){var t=this.$menu.find(e),i=this.$menu.parent(),n=t.height(),s=t.offset().top-i.offset().top,o=i.scrollTop(),r=i.height();s<0?i.scrollTop(o+s):s+n>r&&i.scrollTop(o+s+2*n-r)}};var i=e.fn.typeahead;e.fn.typeahead=function(i){var n=arguments;return"string"==typeof i&&"getActive"==i?this.data("active"):this.each(function(){var s=e(this),o=s.data("typeahead"),r="object"==typeof i&&i;o||s.data("typeahead",o=new t(this,r)),"string"==typeof i&&(n.length>1?o[i].apply(o,Array.prototype.slice.call(n,1)):o[i]())})},e.fn.typeahead.defaults={"source":[],"items":8,"menu":'<ul class="typeahead binf-dropdown-menu" role="listbox" id="user-picker-ul"></ul>',"item":'<li role="option"><a href="#"></a></li>',"minLength":1,"scrollHeight":0,"autoSelect":!0,"afterSelect":e.noop,"currentHighlighter":e.noop,"nextHighlighter":e.noop,"addItem":!1,"delay":0,"prettyScrolling":!1,"scrollContainer":'<div class="typeahead scroll-container"></div>',"scrollContainerHeight":320},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||i.typeahead(i.data())})}),csui.define("csui/lib/jquery.mousehover",["csui/lib/jquery"],function(e){"use strict";function t(e,t,i){var n;if("object"==typeof e)return e;if(!e)throw new Error("Missing event handler or method.");if(i||(i="object"==typeof t?t:{}),n=i.namespace,n=n?"."+n:"","string"==typeof e){if("off"!==e)throw new Error("Unsupported method.");return{"namespace":n}}return{"handlerIn":e,"handlerOut":"function"==typeof t?t:e,"namespace":n}}var i,n=e.fn.mousehover;return navigator.userAgent.indexOf("iPad")>0||navigator.userAgent.indexOf("iPhone")>0?e.fn.mousehover=function(e,t,i){return this}:"onpointerenter"in window&&!1!==navigator.pointerEnabled?e.fn.mousehover=function(e,i,n){var s=t(e,i,n),o=s.namespace;return(e=s.handlerIn)?(i=s.handlerOut,this.on("pointerenter"+o,function(t){"mouse"===t.originalEvent.pointerType&&e.call(this,t)}).on("pointerleave"+o,function(e){"mouse"===e.originalEvent.pointerType&&i.call(this,e)})):this.off("pointerenter"+o+" pointerleave"+o)}:"ontouchstart"in window?(i="mousehover-start",e.fn.mousehover=function(n,s,o){var r=t(n,s,o),a=r.namespace;return(n=r.handlerIn)?(s=r.handlerOut,this.on("touchend"+a,function(){e(this).data(i,(new Date).getTime())}).on("mouseenter"+a,function(t){var s=e(this),o=s.data(i);if(o&&(new Date).getTime()-o<50)return e(this).removeData(i);e(this).data(i,!0),n.call(this,t)}).on("mouseleave"+a,function(t){var n=e(this);n.data(i)&&(n.removeData(i),s.call(this,t))})):this.off("touchend"+a+" mouseenter"+a+" mouseleave"+a)}):e.fn.mousehover=function(e,i,n){var s=t(e,i,n),o=s.namespace;return(e=s.handlerIn)?(i=s.handlerOut,this.on("mouseenter"+o,e).on("mouseleave"+o,i)):this.off("mouseenter"+o+" mouseleave"+o)},e.fn.mousehover.noConflict=function(){return e.fn.mousehover=n,this},e.fn.mousehover}),csui.define("csui/lib/jsonpath",[],function(){function jsonPath(obj,expr,arg){var P={"resultType":arg&&arg.resultType||"VALUE","result":[],"normalize":function(e){var t=[];return e.replace(/[\['](\??\(.*?\))[\]']/g,function(e,i){return"[#"+(t.push(i)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function(e,i){return t[i]})},"asPath":function(e){
for(var t=e.split(";"),i="$",n=1,s=t.length;n<s;n++)i+=/^[0-9*]+$/.test(t[n])?"["+t[n]+"]":"['"+t[n]+"']";return i},"store":function(e,t){return e&&(P.result[P.result.length]="PATH"==P.resultType?P.asPath(e):t),!!e},"trace":function(e,t,i){if(e){var n=e.split(";"),s=n.shift();if(n=n.join(";"),t&&t.hasOwnProperty(s))P.trace(n,t[s],i+";"+s);else if("*"===s)P.walk(s,n,t,i,function(e,t,i,n,s){P.trace(e+";"+i,n,s)});else if(".."===s)P.trace(n,t,i),P.walk(s,n,t,i,function(e,t,i,n,s){"object"==typeof n[e]&&P.trace("..;"+i,n[e],s+";"+e)});else if(/,/.test(s))for(var o=s.split(/'?,'?/),r=0,a=o.length;r<a;r++)P.trace(o[r]+";"+n,t,i);else/^\(.*?\)$/.test(s)?P.trace(P.eval(s,t,i.substr(i.lastIndexOf(";")+1))+";"+n,t,i):/^\?\(.*?\)$/.test(s)?P.walk(s,n,t,i,function(e,t,i,n,s){P.eval(t.replace(/^\?\((.*?)\)$/,"$1"),n[e],e)&&P.trace(e+";"+i,n,s)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(s)&&P.slice(s,n,t,i)}else P.store(i,t)},"walk":function(e,t,i,n,s){if(i instanceof Array)for(var o=0,r=i.length;o<r;o++)o in i&&s(o,e,t,i,n);else if("object"==typeof i)for(var a in i)i.hasOwnProperty(a)&&s(a,e,t,i,n)},"slice":function(e,t,i,n){if(i instanceof Array){var s=i.length,o=0,r=s,a=1;e.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(e,t,i,n){o=parseInt(t||o),r=parseInt(i||r),a=parseInt(n||a)}),o=o<0?Math.max(0,o+s):Math.min(s,o),r=r<0?Math.max(0,r+s):Math.min(s,r);for(var l=o;l<r;l+=a)P.trace(l+";"+t,i,n)}},"eval":function(x,_v,_vname){try{return $&&_v&&eval(x.replace(/@/g,"_v"))}catch(e){throw new SyntaxError("jsonPath: "+e.message+": "+x.replace(/@/g,"_v").replace(/\^/g,"_a"))}}},$=obj;if(expr&&obj&&("VALUE"==P.resultType||"PATH"==P.resultType))return P.trace(P.normalize(expr).replace(/^\$;/,""),obj,"$"),!!P.result.length&&P.result}return jsonPath}),csui.define("csui/behaviors/collection.error/collection.error.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/error/error.view"],function(e,t,i,n){"use strict";function s(t){var i=this.getOption(t);return e.isFunction(i)?i.call(this.view):i}return i.Behavior.extend({"constructor":function(o,r){i.Behavior.prototype.constructor.apply(this,arguments),this.view=r;var a=s.call(this,"collection")||r.collection||r.options.collection,l=r.getEmptyView;r.getEmptyView=function(){return a.error?n:l.apply(r,arguments)};var c=r.emptyViewOptions;r.emptyViewOptions=function(){var i=a.error;return i?{"model":new t.Model({"message":i.message})}:e.isFunction(c)?c.apply(r,arguments):c},this.listenTo(a,"error",function(){r.collection.reset()})}})}),csui.define("hbs!csui/behaviors/collection.state/impl/collection.state",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return"<p>"+this.escapeExpression((s=null!=(s=t.message||(null!=e?e.message:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"message","hash":{}}):s))+"</p>"}});return i.registerPartial("csui_behaviors_collection.state_impl_collection.state",n),n}),csui.define("csui/behaviors/collection.state/collection.state.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/behaviors/collection.state/impl/collection.state"],function(e,t,i){"use strict";return t.ItemView.extend({"className":"csui-collection-state","template":i,"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change:state",this.render).listenTo(this,"render",this._updateClasses)},"serializeData":function(){return e.extend(this.model.toJSON(),{"message":this.options.stateMessages[this.model.get("state")]})},"_updateClasses":function(){this.$el.removeClass("csui-state-empty csui-state-loading csui-state-failed").addClass("csui-state-"+this.model.get("state"))}})}),csui.define("csui/behaviors/collection.state/collection.state.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/behaviors/collection.state/collection.state.view"],function(e,t,i,n){"use strict";function s(t){var i=this.getOption(t);return e.isFunction(i)?i.call(this.view):i}return i.Behavior.extend({"constructor":function(o,r){i.Behavior.prototype.constructor.apply(this,arguments),this.view=r;var a=r.collection||r.options.collection,l=s.call(this,"collection")||a;this.listenTo(l,"request",this._fetchingCollectionStarted).listenTo(l,"sync",this._fetchingCollectionSucceeded).listenTo(l,"error",this._fetchingCollectionFailed).listenTo(a,"reset",this._collectionReset),this.collectionState=new t.Model({"state":l.fetching?"loading":l.error?"failed":l.length?"full":"empty"});var c=this.getOption("stateView");!e.isFunction(c)||c.prototype instanceof t.View||(c=c.call(r)),r.emptyView=c||n;var u=this;r.emptyViewOptions=function(){return e.extend({"model":u.collectionState,"stateMessages":s.call(u,"stateMessages")||{}},s.call(u,"stateViewOptions"))}},"_collectionReset":function(e){var t=this.collectionState.get("state");"loading"!==t&&"error"!==t&&this.collectionState.set("state",e.length?"full":"empty")},"_fetchingCollectionStarted":function(){0===this.view.collection.length&&(this.collectionState.set("state","loading"),this.view.collection.reset(),this.view.blockWithoutIndicator&&this.view.blockWithoutIndicator())},"_fetchingCollectionSucceeded":function(){this.collectionState.set("state",this.view.collection.length?"full":"empty"),this.view.unblockActions&&this.view.unblockActions()},"_fetchingCollectionFailed":function(){this.collectionState.set("state","failed"),this.view.unblockActions&&this.view.unblockActions()}})}),csui.define("csui/models/facettopic",["csui/lib/backbone"],function(e){"use strict";return e.Model.extend({"idAttribute":"value","constructor":function(){e.Model.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/models/facettopics",["csui/lib/backbone","csui/models/facettopic"],function(e,t){"use strict";return e.Collection.extend({"model":t,"constructor":function(t,i){e.Collection.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/models/facet",["csui/lib/backbone","csui/models/facettopics"],function(e,t){"use strict";return e.Model.extend({"constructor":function(i){e.Model.prototype.constructor.apply(this,arguments),this.topics=new t(i&&i.topics)},"parse":function(e,t){return this.topics&&this.topics.reset(e.topics),e}})}),csui.define("csui/models/facets",["csui/lib/underscore","csui/lib/backbone","csui/models/facet","csui/utils/deepClone/deepClone"],function(e,t,i){"use strict";function n(e){return e.isFetchable&&e.isFetchable()}function s(e,t){return t=!!t,e.filter(function(e){return e.topics.some(function(e){var i=!!e.get("selected");return t===i})}).map(function(e){return e=e.toJSON(),e.topics=e.topics.filter(function(e){var i=!!e.selected;return t===i}),e})}return t.Collection.extend({"model":i,"constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments),this.filters=i&&i.filters||[]},"clone":function(){return new this.constructor(this.models,{"filters":e.deepClone(this.filters)})},"setFilter":function(t,i,s){if(!e.isEqual(this.filters,t))return this.filters=t,!1!==i&&n(this)&&this.fetch(s),!0},"addFilter":function(t,i,s){var o,r=this.filters,a=[];if(Array.isArray(t)||(t=[t]),t.forEach(function(t){var i=e.findWhere(r,{"id":t.id});if(i){var n=i.values,s=t.values.filter(function(t){return!e.findWhere(n,{"id":t.id})});s.length&&(n.push.apply(n,s),o=!0)}else t.values.length&&a.push(t)}),a.length&&(r.push.apply(r,a),o=!0),o)return!1!==i&&n(this)&&this.fetch(s),!0},"removeFilter":function(t,i,s){var o;if(Array.isArray(t)||(t=[t]),this.filters=e.reject(this.filters,function(i){var n=e.findWhere(t,{"id":i.id});if(n){var s=n.values,r=e.reject(i.values,function(t){if(e.findWhere(s,{"id":t.id}))return o=!0,!0});if(!r.length)return o=!0,!0;i.values=r}}),o)return!1!==i&&n(this)&&this.fetch(s),!0},"clearFilter":function(e,t){if(this.filters.length>0)return this.filters=[],!1!==e&&n(this)&&this.fetch(t),!0},"getAvailableFacets":function(){return s(this,!1)},"getSelectedFacets":function(){return s(this,!0)}})}),csui.define("hbs!csui/controls/facet.bar/impl/facet.bar.item",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return'<a href="#" role="button" class="csui-facet-item-content" aria-label="'+this.escapeExpression((s=null!=(s=t.facetItemAria||(null!=e?e.facetItemAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"facetItemAria","hash":{}}):s))+'">\r\n  <div>\r\n    <span class="csui-label">\r\n      <span class="csui-facet-item-facet-name">'+this.escapeExpression((s=null!=(s=t.facetName||(null!=e?e.facetName:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"facetName","hash":{}}):s))+':</span>\r\n      <span class="csui-facet-item-topic-name">'+this.escapeExpression((s=null!=(s=t.topicName||(null!=e?e.topicName:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"topicName","hash":{}}):s))+'</span>\r\n    </span>\r\n    <span class="csui-icon binf-close" data-csui-facet="'+this.escapeExpression((s=null!=(s=t.facetId||(null!=e?e.facetId:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"facetId","hash":{}}):s))+'"\r\n          data-csui-topic="'+this.escapeExpression((s=null!=(s=t.topicId||(null!=e?e.topicId:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"topicId","hash":{}}):s))+'"></span>\r\n  </div>\r\n</a>\r\n'}});return i.registerPartial("csui_controls_facet.bar_impl_facet.bar.item",n),n}),csui.define("csui/controls/facet.bar/impl/facet.bar.item.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/facet.bar/impl/facet.bar.item"],function(e,t,i,n,s){return n.ItemView.extend({"className":"csui-facet-item","tagName":"li","template":s,"ui":{"item":".csui-facet-item","content":".csui-facet-item-content"},"events":{"click @ui.item":"cancelClick","click @ui.content":"cancelClick"},"constructor":function(){n.ItemView.prototype.constructor.apply(this,arguments)},"cancelClick":function(e){t(e.target).hasClass("binf-close")||(e.preventDefault(),e.stopPropagation())}})}),csui.define("css!csui/controls/facet.bar/impl/facet.bar",[],function(){}),csui.define("csui/controls/facet.bar/facet.bar.items.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/facet.bar/impl/facet.bar.item.view","css!csui/controls/facet.bar/impl/facet.bar"],function(e,t,i,n){return i.CollectionView.extend({"childView":n,"tagName":"ol","className":"csui-facet-list","constructor":function(e){i.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this.collection,"reset",this._checkOverflow),this.listenTo(this.collection,"change",this._checkOverflow),this.listenTo(this.collection,"add",this._checkOverflow),this.listenTo(this.collection,"remove",this._checkOverflow),this.listenTo(this,"dom:refresh",this._calcScrollSteps),this.listenTo(this,"dom:refresh",this._checkOverflow)},"_calcScrollSteps":function(){var e=this.$el[0],t=e.offsetWidth,i=e.scrollWidth;this.scrollStepPx=t/3*2,this.maxScrollLeft=i>t?i-t+8:0},"_checkOverflow":function(){if(this.$el.length){var e=this.$el[0],t=e.offsetWidth,i=e.scrollWidth;this.trigger("overflow",t<i),this.trigger("scrolled",{"currentScrollLeft":this.$el.scrollLeft(),"maxScrollLeft":this.maxScrollLeft})}},"scrollLeft":function(){var e=this.$el,t=e.scrollLeft(),i=t;return t<this.maxScrollLeft&&(i=t+this.scrollStepPx,i>this.maxScrollLeft&&(i=this.maxScrollLeft),e.animate({"scrollLeft":i},500)),this.trigger("scrolled",{"currentScrollLeft":i,"maxScrollLeft":this.maxScrollLeft}),i},"scrollRight":function(){var e=this.$el,t=e.scrollLeft(),i=0;return t>this.scrollStepPx&&(i=t-this.scrollStepPx),e.animate({"scrollLeft":i},500),this.trigger("scrolled",{"currentScrollLeft":i,"maxScrollLeft":this.maxScrollLeft}),e.scrollLeft()}})}),csui.define("csui/behaviors/keyboard.navigation/tabables.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base"],function(e,t,i,n,s,o){"use strict";function r(e,i){var n=i||this.options||{},s=n[e];return t.isFunction(s)?n[e].call(this.view):s}s=s(e.id);var a=(e.config(),n.Behavior.extend({"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments);var i=this;this.view=t,this._pushTabableHandler(),this.tabableRegions=[],this.mustSortTabableRegions=!1,this.listenTo(t,"render",this._registerEventHandlers),this.listenTo(t,"destroy",this._popTabableHandler),this.listenTo(t,"dom:refresh",this.setFocusInActiveTabableRegion),setTimeout(function(){t.$el.on("keydown.csui-tabables",function(e){if(9===e.keyCode&&r.call(i,"containTabFocus"))return i._maintainTabFocus(e)})}),this.listenTo(t,"changed:focus",this._setFocusToNextRegion)},"registerTabableRegion":function(e){return i.contains(this.view.el,e.view.el)?(this.unregisterTabableRegionBehavior(e),this.tabableRegions.push(e),this.mustSortTabableRegions=!0,!0):(s.debug("registerTabableRegion: not registering non descendant view "+e.view.constructor.name)&&console.log(s.last),!1)},"unregisterTabableRegionBehavior":function(e){e&&t.contains(this.tabableRegions,e)&&(s.debug("unregisterTabableRegion "+e.view.constructor.name)&&console.log(s.last),this.tabableRegions=t.reject(this.tabableRegions,function(t){return t===e}))},"_pushTabableHandler":function(){if(s.debug("_pushTabableHandler in view "+this.view.constructor.name)&&console.log(s.last),a.tabablesHandlers.length>0){var e=t.last(a.tabablesHandlers);t.each(e.tabableRegions,function(t){t._unregisterEventHandlers.call(t),e._clearTabIndexes.call(e,t.view)},this)}a.tabablesHandlers.push(this)},"_popTabableHandler":function(){if(a.tabablesHandlers.length>0){var e=t.last(a.tabablesHandlers);if(s.debug("_popTabableHandler in view "+e.view.constructor.name)&&console.log(s.last),t.each(e.tabableRegions,function(e){e._unregisterEventHandlers.call(e)}),e.view.$el.off("keydown.csui-tabables"),e.stopListening(e.view),a.tabablesHandlers.pop(),a.tabablesHandlers.length>0){var i=t.last(a.tabablesHandlers);t.each(i.tabableRegions,function(e){e.setInitialTabIndex.call(e),e._registerEventHandlers.call(e)}),i._setFocusInActiveTabableRegion()}}},"_sortTabableRegions":function(){var e=this.tabableRegions,i=[];this.view.$el.find(".csui-acc-tab-region").each(function(n,s){var o=t.find(e,function(e){return e.view.el===s});o&&i.push(o)}),this.tabableRegions=i,this.mustSortTabableRegions=!1},"_getNextActiveRegion":function(e,i){var n,s,r=this.tabableRegions;r=t.filter(r,function(e){return!e.$el.hasClass("binf-hidden")});var a=r.length-1,l=this._getActiveIndex(r);if(n=i?e?0===l?a:l-1:l===a?0:l+1:e?0===l?0:l-1:l===a?a:l+1,1===r.length)return s=r[0];for(;n!=l;){s=r[n];var c=s.getCurrentlyFocusedElementFromView(e);if(s.view.isTabable()&&c&&o.isVisibleInWindowViewport(c))return s;e?0===n?n=i?a:l:n>0&&--n:n===a?n=i?0:l:n<a&&++n}},"_getActiveIndex":function(e){if(this.currentlyActiveTabableRegion){this._sortTabableRegions();var t=this.currentlyActiveTabableRegion,i=this.tabableRegions;e&&(i=e);for(var n=0;n<i.length;n++)if(t.view.cid===i[n].view.cid)return n}},"_deactivateCurrentActiveTabableRegion":function(){var e=this._getActiveIndex();if(void 0!==e&&this.tabableRegions[e]){var t=this.tabableRegions[e].view;t.$el.removeClass("csui-acc-tab-region-active"),delete this.currentlyActiveTabableRegion,t.accDeactivateTabableRegion&&(s.debug("deactivating tabable region "+t.constructor.name)&&console.log(s.last),this.tabableRegions[e].ignoreFocusEvents=!0,t.accDeactivateTabableRegion.call(t),this.tabableRegions[e].ignoreFocusEvents=!1)}return e},"_setTabableRegionActive":function(e,t){s.debug("activating "+e.view.constructor.name+" as active tabable region")&&console.log(s.last),this._deactivateCurrentActiveTabableRegion(),e.view.$el.addClass("csui-acc-tab-region-active"),this.currentlyActiveTabableRegion=e,e.view.accActivateTabableRegion&&(e.ignoreFocusEvents=!0,e.view.accActivateTabableRegion.call(e.view,t),e.ignoreFocusEvents=!1)},"_setFocusInActiveTabableRegion":function(e){if(this.currentlyActiveTabableRegion)this.currentlyActiveTabableRegion.setFocus(e);else{var i=t.sortBy(this.tabableRegions,function(e){return e.view.options.initialActivationWeight}),n=t.last(i);n&&n.view.options.initialActivationWeight>0&&(s.debug("setFocus: "+n.view.constructor.name)&&console.log(s.last),n.setFocus(e))}},"_clearTabIndexes":function(e){var t=e.$el.find(a.focusablesSelector).addBack(a.focusablesSelector);t.length?t.prop("tabindex",-1):s.debug("_clearTabIndexes: no focusables found in "+e.constructor.name)&&console.log(s.last)},"_maintainTabFocus":function(e){var t=e.shiftKey,i=this._getActiveIndex();if(void 0!==i){var n=this.tabableRegions[i],s=r.call(this,"recursiveNavigation");if(n&&n.onlastTabElement(t,e)){var o=this._getNextActiveRegion(t,!1);return o||(o=this._getNextActiveRegion(t,s)),o&&(this._setTabableRegionActive(o,t),this._setFocusInActiveTabableRegion(t)),!1}}return!0},"_setFocusToNextRegion":function(e){var t=r.call(this,"recursiveNavigation"),i=this._getNextActiveRegion(e,t);i&&(this._setTabableRegionActive(i),this._setFocusInActiveTabableRegion())}},{"tabablesHandlers":[],"focusablesSelector":"a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]","clearTabIndexes":function(e){var n=t.last(a.tabablesHandlers);n&&i.contains(n.view.el,e.el)&&n._clearTabIndexes.call(n,e)},"setTabableRegionActive":function(e){var n=t.last(a.tabablesHandlers);n&&i.contains(n.view.el,e.view.el)&&n._setTabableRegionActive.call(n,e)},"registerTabableRegion":function(e){s.debug("registerTabableRegion for view "+e.view.constructor.name)&&console.log(s.last);var i=t.last(a.tabablesHandlers);if(i)return i.registerTabableRegion.call(i,e)},"unregisterTabableRegion":function(e){e&&t.each(a.tabablesHandlers,function(t){t.unregisterTabableRegionBehavior.call(t,e)})},"setFocusInActiveTabableRegion":function(){var e=t.last(a.tabablesHandlers);e&&e._setFocusInActiveTabableRegion.call(e)},"popTabableHandler":function(){var e=t.last(a.tabablesHandlers);e&&e._popTabableHandler()}}));return a}),csui.define("csui/behaviors/keyboard.navigation/tabable.region.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/behaviors/keyboard.navigation/tabables.behavior"],function(e,t,i,n,s,o,r){"use strict";var a=n.Behavior.extend({"defaults":{"initialActivationWeight":0},"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments),this.view=i,i.tabableRegionBehavior=this,t.extend(i,this.defaults),t.defaults(i,{"isTabable":function(){return!0},"onLastTabElement":function(){return!0}}),i.options&&!i.options.initialActivationWeight&&(i.options.initialActivationWeight=this.options.initialActivationWeight),this._registerEventHandlers()},"_registerEventHandlers":function(){if(!this._eventsRegistered){var e=this.view,t=this;this.listenTo(e,"render",this._applyClasses),this.listenTo(e,"dom:refresh",function(){r.clearTabIndexes(e),r.registerTabableRegion(this)&&(t.isRegistered=!0,this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"refresh:tabindexes",function(){r.clearTabIndexes(e),t.isRegistered&&(this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"destroy",function(){r.unregisterTabableRegion(this),r.clearTabIndexes(e),t.isRegistered=!1}),this.listenTo(e,"tabable",function(){r.clearTabIndexes(e),r.registerTabableRegion(this)&&(this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"tabable:not",function(){r.unregisterTabableRegion(this),r.clearTabIndexes(e),this.isRegistered=!1}),this.listenTo(e,"changed:focus",function(){t.isRegistered&&this.moveTabIndex()}),this.listenTo(e,"escaped:focus",function(){r.setFocusInActiveTabableRegion()}),this._eventsRegistered=!0}},"_unregisterEventHandlers":function(){var e=this.view;this.stopListening(e),this._eventsRegistered=!1},"getCurrentlyFocusedElementFromView":function(e){if(t.isFunction(this.view.currentlyFocusedElement)){var n=this.view.currentlyFocusedElement({"shiftKey":e});return n instanceof i?n:i(n)}return t.isString(this.view.currentlyFocusedElement)?this.view.$(this.view.currentlyFocusedElement):(s.debug("setInitialTabIndex: "+this.view.constructor.name+" does not have currentlyFocusedElement -> not setting tabindex in that view ")&&console.log(s.last),i())},"onlastTabElement":function(e,t){return this.view.onLastTabElement(e,t)},"setFocus":function(e){if(!this.options.notSetFocus){var t=this.getCurrentlyFocusedElementFromView(e);t&&o.isVisibleInWindowViewport(t)&&(this.ignoreFocusEvents=!0,t.focus(),this.ignoreFocusEvents=!1)}},"setInitialTabIndex":function(){if(this.currentlyFocusedElement&&this.currentlyFocusedElement.off("focus."+this.view.cid),this.view.isTabable())try{if(this.currentlyFocusedElement=this.getCurrentlyFocusedElementFromView(),this.currentlyFocusedElement&&this.currentlyFocusedElement.length>0){var e=this;this.currentlyFocusedElement.prop("tabindex",0),this.currentlyFocusedElement.addClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement.on("focus."+this.view.cid,function(){e.ignoreFocusEvents||r.setTabableRegionActive(e)})}}catch(e){console.warn("Could not set as active element: ",this.view.cid,e.message)}else this.currentlyFocusedElement=i()},"moveTabIndex":function(){var e=this;this.currentlyFocusedElement&&(this.currentlyFocusedElement.off("focus."+this.view.cid),this.currentlyFocusedElement.prop("tabindex",-1),this.currentlyFocusedElement.removeClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement=i());var t=this.getCurrentlyFocusedElementFromView();t.prop("tabindex",0),this.currentlyFocusedElement=t,this.currentlyFocusedElement.addClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement.on("focus."+this.view.cid,function(){e.ignoreFocusEvents||r.setTabableRegionActive(e)})},"_applyClasses":function(){this.$el.addClass(a.accessibilityRegionClass)}},{"accessibilityRegionClass":"csui-acc-tab-region","accessibilityActiveRegionClass":"csui-acc-tab-region-active","accessibilityFocusableClass":"csui-acc-focusable","accessibilityActiveElementClass":"csui-acc-focusable-active"});return a}),csui.define("hbs!csui/controls/facet.bar/impl/facet.bar",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'<button class="binf-btn binf-btn-primary csui-filter-save binf-hidden"\r\n        aria-label="'+this.escapeExpression((s=null!=(s=t.saveAsAria||(null!=e?e.saveAsAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"saveAsAria","hash":{}}):s))+'">'+this.escapeExpression((s=null!=(s=t.saveas||(null!=e?e.saveas:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"saveas","hash":{}}):s))+"</button>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="csui-facet-list-bar">\r\n  <div class="csui-mover csui-overflow-left binf-hidden">\r\n    <a href="#" title="'+this.escapeExpression((o=null!=(o=t.previous||(null!=e?e.previous:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"previous","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.previous||(null!=e?e.previous:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"previous","hash":{}}):o))+'">\r\n      <span class="csui-icon goto_previous_page"  ></span>\r\n    </a>\r\n    <span class="csui-facet-list-fade csui-facet-list-fadein"></span>\r\n  </div>\r\n\r\n  <div class="csui-facet-list-area"></div>\r\n\r\n  <div class="csui-mover csui-overflow-right binf-hidden">\r\n    <span class="csui-facet-list-fade csui-facet-list-fadeout"></span>\r\n    <a href="#" title="'+this.escapeExpression((o=null!=(o=t.next||(null!=e?e.next:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"next","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.next||(null!=e?e.next:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"next","hash":{}}):o))+'">\r\n      <span class="csui-icon goto_next_page" ></span>\r\n    </a>\r\n  </div>\r\n</div>\r\n\r\n<a href="#" class="csui-clear-all binf-hidden" role="button" aria-label="'+this.escapeExpression((o=null!=(o=t.clearAllAria||(null!=e?e.clearAllAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"clearAllAria","hash":{}}):o))+"\">\r\n  <div class='cs-icon binf-close'></div>\r\n  <div class='clear-label'>"+this.escapeExpression((o=null!=(o=t.clearAll||(null!=e?e.clearAll:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"clearAll","hash":{}}):o))+"</div>\r\n</a>\r\n"+(null!=(s=t.if.call(e,null!=e?e.showSaveFilter:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")}});return i.registerPartial("csui_controls_facet.bar_impl_facet.bar",n),n}),csui.define("csui/controls/facet.bar/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/facet.bar/impl/nls/root/lang",{"clearAll":"Clear all","saveAs":"Save As","saveAsAria":"Save as Virtual Folder","previous":"Show previous filter(s)","next":"Show next filter(s)","clearAllAria":"Clear all filters","facetItemAria":"Selected filter {0}:{1}, press to clear."}),csui.define("csui/controls/facet.bar/facet.bar.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/models/facets","csui/models/facettopics","csui/controls/facet.bar/facet.bar.items.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/facet.bar/impl/facet.bar","i18n!csui/controls/facet.bar/impl/nls/lang","csui/utils/commands","css!csui/controls/facet.bar/impl/facet.bar"],function(e,t,i,n,s,o,r,a,l,c,u){"use strict";return n.LayoutView.extend({"className":"csui-facet-bar csui-facet-bar-hidden","template":l,"ui":{"facetListArea":"> .csui-facet-list-bar > .csui-facet-list-area","facetList":"> .csui-facet-list-bar > .div.csui-facet-list-area > .csui-facet-list","clearAll":".csui-clear-all","moveLeft":".csui-overflow-left","moveRight":".csui-overflow-right","movers":".csui-mover","leftFader":".csui-mover.csui-overflow-left > .csui-facet-list-fade","rightFader":".csui-mover.csui-overflow-right > .csui-facet-list-fade","saveFilter":".csui-filter-save"},"regions":{"facetBarItemsRegion":".csui-facet-list-area","clearAllRegion":".csui-clear-all"},"triggers":{"click .csui-clear-all":"clear:all"},"events":{"click @ui.moveLeft":"onMoveLeft","click @ui.moveRight":"onMoveRight","click .csui-facet-item .binf-close":"onRemoveFilter","click @ui.saveFilter":"onClickSaveFilter","keydown":"onKeyInView"},"constructor":function(s){n.LayoutView.prototype.constructor.apply(this,arguments),this.allTopicsCollection=new i.Collection(this._getAllTopics(this.collection.filters)),this.listenTo(this.collection,"reset",this._filtersUpdated,this),this.onWinResize=t.bind(function(){this.render(),this._filtersUpdated()},this),e(window).bind("resize.facetview",this.onWinResize)},"onKeyInView":function(t){var i=t.keyCode,n=!0,s=e(t.target);switch(i){case 46:s.parent().hasClass("csui-facet-item")&&(this._triggerRemoveFilter(s.find(".binf-close")),n=!1);break;case 13:s.parent().hasClass("csui-facet-item")&&(this._triggerRemoveFilter(s.find(".binf-close")),n=!1),s.hasClass("csui-clear-all")&&(this.ui.saveFilter&&this.ui.saveFilter.length>0&&this.ui.saveFilter.addClass("binf-hidden"),this.trigger("remove:all"),n=!1);break;case 32:n=!1}return n},"onDestroy":function(){e(window).unbind("resize.facetview",this.onWinResize)},"onRender":function(){this.visibleItemIndex=0,this.facetBarItemsView=new r({"collection":this.allTopicsCollection}),this.listenTo(this.facetBarItemsView,"overflow",this._makeSlideable),this.listenTo(this.facetBarItemsView,"scrolled",this._updateFading),this.facetBarItemsRegion.show(this.facetBarItemsView)},"onMoveLeft":function(e){e.preventDefault(),e.stopPropagation(),this.facetBarItemsView.scrollRight()},"onMoveRight":function(e){e.preventDefault(),e.stopPropagation(),this.facetBarItemsView.scrollLeft()},"_makeSlideable":function(e){e?(this.ui.facetListArea.addClass("csui-facet-list-overflowed"),this.ui.movers.removeClass("binf-hidden")):(this.ui.facetListArea.removeClass("csui-facet-list-overflowed"),this.ui.movers.addClass("binf-hidden"))},"_updateFading":function(e){0===e.currentScrollLeft?(this.ui.leftFader.addClass("binf-hidden"),this.ui.rightFader.removeClass("binf-hidden")):e.currentScrollLeft===e.maxScrollLeft?(this.ui.leftFader.removeClass("binf-hidden"),this.ui.rightFader.addClass("binf-hidden")):(this.ui.leftFader.removeClass("binf-hidden"),this.ui.rightFader.removeClass("binf-hidden"))},"_getAllTopics":function(){for(var e=[],i=this.collection.filters,n=0;n<i.length;n++)for(var s=i[n],o=s.values,r=s.id,a=this.collection.get(r),l=a.get("name"),u=0;u<o.length;u++){var d=o[u],h=d.id,p=a.topics.get(h),f=p.get("name");e.push({"facetName":l,"topicName":f,"facetId":r,"topicId":h,"facetItemAria":t.str.sformat(c.facetItemAria,l,f)})}return e},"_filtersUpdated":function(){this.allTopicsCollection.reset(this._getAllTopics(this.collection.filters)),this.allTopicsCollection.length>0?(this.$el.removeClass("csui-facet-bar-hidden"),this.$el.find(".csui-clear-all").removeClass("binf-hidden"),this.trigger("facet:bar:visible")):(this.$el.addClass("csui-facet-bar-hidden"),this.$el.find(".csui-clear-all").addClass("binf-hidden"),this.$el.find(".csui-filter-save").addClass("binf-hidden"),this.trigger("facet:bar:hidden")),this.options.showSaveFilter&&this.allTopicsCollection.length>0&&this.ui.saveFilter&&this.ui.saveFilter.length>0&&this.ui.saveFilter.removeClass("binf-hidden")},"templateHelpers":function(){return{"clearAll":c.clearAll,"saveas":c.saveAs,"saveAsAria":c.saveAsAria,"showSaveFilter":this.options.showSaveFilter,"previous":c.previous,"next":c.next,"clearAllAria":c.clearAllAria}},"onClearAll":function(){this.ui.saveFilter&&this.ui.saveFilter.length>0&&this.ui.saveFilter.addClass("binf-hidden"),this.trigger("remove:all")},"onRemoveFilter":function(t){t.preventDefault(),t.stopPropagation(),this._triggerRemoveFilter(e(t.target))},"applyFilter":function(e){this.trigger("apply:filter",e.newFilter)},"onClickSaveFilter":function(e){var t=this.options.context,n=this.collection.connector,s=this.collection.node,o=this.collection,r=u.get("SaveFilter"),a=r.execute({"context":t,"nodes":new i.Collection(s),"facets":o,"container":s,"connector":n});a.always(function(){a.state()})},"_triggerRemoveFilter":function(e){this.trigger("remove:filter",{"id":e.attr("data-csui-facet"),"values":[{"id":e.attr("data-csui-topic")}]})}})}),csui.define("hbs!csui/controls/listitem/impl/listitemstandard",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){return'<a class="csui-tileview-contains-more-btn"> '},"3":function(e,t,i,n){var s;return'<span class="csui-type-icon '+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'"></span>'},"5":function(e,t,i,n){var s;return'<span class="'+this.escapeExpression((s=null!=(s=t["end-icon-class"]||(null!=e?e["end-icon-class"]:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"end-icon-class","hash":{}}):s))+'"></span>'},"7":function(e,t,i,n){return"</a>"},"9":function(e,t,i,n){return'<div class="csui-tileview-more-btn"></div>'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return(null!=(s=t.if.call(e,null!=e?e.showInlineActionBar:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+"\r\n"+(null!=(s=t.if.call(e,null!=e?e.enableIcon:e,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop}))?s:"")+'\r\n<span title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'" class="list-item-title">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{
"name":"name","hash":{}}):o))+"</span>\r\n"+(null!=(s=t.if.call(e,null!=e?e["end-icon"]:e,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop}))?s:"")+"\r\n"+(null!=(s=t.if.call(e,null!=e?e.showInlineActionBar:e,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop}))?s:"")+"\r\n"+(null!=(s=t.if.call(e,null!=e?e.showInlineActionBar:e,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop}))?s:"")+"\r\n"}});return i.registerPartial("csui_controls_listitem_impl_listitemstandard",n),n}),csui.define("css!csui/controls/listitem/impl/listitemstandard",[],function(){}),csui.define("csui/controls/listitem/listitemstandard.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/behaviors/default.action/default.action.behavior","csui/utils/node.links/node.links","hbs!csui/controls/listitem/impl/listitemstandard","css!csui/controls/listitem/impl/listitemstandard"],function(e,t,i,n,s,o,r){"use strict";return n.ItemView.extend({"tagName":function(){return this.showInlineActionBar?"div":"a"},"className":"csui-item-standard binf-list-group-item","triggers":{"click":"click:item"},"behaviors":{"DefaultAction":{"behaviorClass":s}},"template":r,"templateHelpers":function(){return t.reduce(this.options,function(e,t,i){if("string"==typeof t){var n=this._getValue(t);"icon"===i&&(n="csui-icon "+n,e.enableIcon=!0),e[i]=n}return e},{},this)},"constructor":function(e){e.toolbarData&&this._setInlineActions(e),this.context=e.context,n.ItemView.call(this,e)},"_setInlineActions":function(e){this.tileViewToolbarItems=e.toolbarData.toolbaritems||{},this.showInlineActionBar=!0,this.collection=e.toolbarData.collection||{},this.triggers={"click @ui.titleName":"click:item","click @ui.icon":"click:item"},this.ui={"titleName":".list-item-title","icon":".csui-icon-group"},this.events={"mouseenter":"onShowCommands","mouseleave":"onDestroyCommands","keydown":"onKeyDown"}},"setElementData":function(){var e;return this.showInlineActionBar?e=this.$el.find("a"):(e=this.$el,e.prop("tabindex","-1")),e},"onRender":function(){var e=this.model&&this.model.get("id");if(this.eleData=this.setElementData(),null!=e&&this.eleData.attr("href",o.getUrl(this.model)),this.model&&this.options&&this.options.checkDefaultAction){var t=!1===this.model.fetched||!this.defaultActionController.hasAction(this.model);this.$el[t?"addClass":"removeClass"]("inactive")}this.$el.removeAttr("role")},"_getValue":function(e){if(0===e.indexOf("{")){var i=e.substring(1,e.length-1).split("."),n=this.model.attributes;return t.find(i,function(e){if(void 0===(n=n[e]))return!0}),n}return e},"onShowCommands":function(e){if(!this.showInlineActionBar)return!1;this._showInlineBar(e)},"onKeyDown":function(e){13!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),e.stopPropagation(),this.trigger("click:item",{"target":this.model}))},"_showInlineBar":function(i){this.showInlineActionsLock=!0,this.$el.addClass("csui-tile-with-more-btn"),i.preventDefault(),i.stopPropagation();var s=this,o=["csui/controls/tableactionbar/tableactionbar.view",this.tileViewToolbarItems];e(o,function(e,i){if(s.inlineBarView=new e(t.extend({"context":s.options.context,"originatingView":s,"commands":s.defaultActionController.commands,"model":s.model,"collection":i.inlineActionbar,"containerCollection":s.collection,"status":{"originatingView":s}},i.inlineActionbar.options)),s.showInlineActionsLock){var o=s.$el.find(".csui-tileview-more-btn");new n.Region({"el":o}).show(s.inlineBarView)}})},"onDestroyCommands":function(){if(this.showInlineActionsLock=!1,!this.showInlineActionBar)return!1;this.inlineBarView&&this.inlineBarView.destroy(),this.$el.removeClass("csui-tile-with-more-btn")}})}),csui.define("hbs!csui/controls/list/impl/simplelist",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'  <div class="cs-header binf-panel-heading cs-header-with-go-back" tabindex="0" role="link" aria-label="'+this.escapeExpression((s=null!=(s=t.goBackAria||(null!=e?e.goBackAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"goBackAria","hash":{}}):s))+'">\r\n    <span class="icon circular arrow_back cs-go-back" title="'+this.escapeExpression((s=null!=(s=t.goBackTooltip||(null!=e?e.goBackTooltip:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"goBackTooltip","hash":{}}):s))+'"></span>\r\n    <span class="cs-title cs-title-with-go-back" title="'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+'">'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+"</span>\r\n  </div>\r\n"},"3":function(e,t,i,n){var s;return null!=(s=t.if.call(e,null!=e?e.title:e,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop}))?s:""},"4":function(e,t,i,n){var s;return'  <div class="cs-header binf-panel-heading" tabindex="0">\r\n    <span class="cs-title" title="'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+'">'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+"</span>\r\n  </div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return(null!=(s=t.if.call(e,null!=e?e.back_button:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.program(3,n,0)}))?s:"")+'\r\n<div class="cs-content">\r\n  <div class="cs-list-group"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_list_impl_simplelist",n),n}),csui.define("hbs!csui/controls/list/impl/simplelistitem",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'<span class="csui-type-icon '+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'"></span>'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="binf-list-group-item" title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.nameTitleAria||(null!=e?e.nameTitleAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"nameTitleAria","hash":{}}):o))+'">\r\n'+(null!=(s=t.if.call(e,null!=e?e.enableIcon:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'\r\n<span title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'" class="list-item-title">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"</span>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_list_impl_simplelistitem",n),n}),csui.define("csui/controls/list/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/list/impl/nls/root/lang",{"goBackTooltip":"Go back","goBackAria":"Go back to {0}","goBackTitleForEmptyTitle":"Back","emptyViewDefaultText":"No items.","clearAll":"Clear all","clearAllAria":"Clear search","expandView":"Expand","expandAria":"Expand widget","searchView":"Search","searchAria":"Search widget","collapseSearch":"Close search","collapseAria":"Clear all and close search","elementsVisibleAria":"{0} Elements are visible","nameTitleAria":"{0} of type {1}"}),csui.define("css!csui/controls/list/impl/simplelist",[],function(){}),csui.define("csui/controls/list/simplelist.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/listitem/listitemstandard.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/node.links/node.links","hbs!csui/controls/list/impl/simplelist","hbs!csui/controls/list/impl/simplelistitem","csui/utils/nodesprites","i18n!csui/controls/list/impl/nls/lang","css!csui/controls/list/impl/simplelist"],function(e,t,i,n,s,o,r,a,l,c,u,d){"use strict";var h=n.ItemView.extend({"constructor":function(){n.ItemView.prototype.constructor.apply(this,arguments)},"tagName":"a","template":c,"serializeData":function(){var e=n.ItemView.prototype.serializeData.apply(this,arguments);if(e){var t=e.icon;t&&(e.icon="csui-icon "+t)}return e},"onRender":function(){null!=(this.model&&this.model.get("id"))&&this.$el.attr("href",a.getUrl(this.model));var t,i=u.findByNode(this.model)||{};i.attributes&&(t=i.get("mimeType"));var n=t||this.model.get("type_name")||this.model.get("type");if(this.model.get("name")&&n){var s=e.str.sformat(d.nameTitleAria,this.model.get("name"),n);this.$el.attr("aria-label",s)}},"modelEvents":{"change":"render"},"triggers":{"click":"click:item"}});return n.CompositeView.extend({"constructor":function(t){if(t||(t={}),t.data||(t.data={}),this.behaviors&&e.any(this.behaviors,function(e,t){return e.behaviorClass===r})||(this.behaviors=e.extend({"PerfectScrolling":{"behaviorClass":r,"contentParent":"> .cs-content","suppressScrollX":!0,"scrollYMarginOffset":15}},this.behaviors)),n.CompositeView.call(this,t),this.options.data&&this.options.data.items){if(!this.collection){var s=i.Collection.extend({"model":i.Model.extend({"idAttribute":null})});this.collection=new s}this.collection.add(this.options.data.items)}},"ui":{"header":".cs-header","headerGoBack":".cs-header-with-go-back","back":".cs-go-back","backTitle":".cs-title-with-go-back"},"events":{"click @ui.back":"onClickBack","click @ui.backTitle":"onClickBack","click @ui.headerGoBack":"onClickBack"},"childEvents":{"click:item":"onClickItem","render":"_onChildRender"},"className":"cs-simplelist binf-panel binf-panel-default","template":l,"templateHelpers":function(){var t=this.options.data.back_button,i=this.options.data.title;return!t||void 0!==i&&0!==i.length||(i=d.goBackTitleForEmptyTitle),{"back_button":t,"goBackTooltip":d.goBackTooltip,"title":i,"goBackAria":e.str.sformat(d.goBackAria,i)}},"childViewContainer":".cs-list-group","childView":h,"childViewOptions":function(){return{"template":this.options.childViewTemplate}},"_onChildRender":function(e){var i=e.$el;i.is("[data-csui-active]")&&(i.append(t("<div>").addClass("arrow-overlay")),i.addClass("binf-active"))},"getSelectedItem":function(){var e=this.getSelectedIndex();return this.children.findByIndex(e)},"getSelectedIndex":function(){var e=this.$el.find("[data-csui-active]");return this.$el.find(".cs-list-group>a").index(e)},"setSelectedIndex":function(i){if(!(isNaN(i)||i<0)){var n=e.str.sformat("div a:nth-child({0})",i+1),s=this.$(n);this._setCssItemSelected(s),t(s[0]).focus();var o=this.$(".cs-content");if(!this._isScrolledIntoView(s)){var r=s.position().top,a=r>0?s.height()-o.height()+r:r;o.animate({"scrollTop":o.scrollTop()+a},500)}}},"selectedIndexElem":function(i){if(isNaN(i)||i<0)return null;var n=e.str.sformat("div a:nth-child({0})",i+1),s=this.$(n);return t(s[0])},"selectNext":function(){var e=this.getSelectedIndex(),t=Math.min(e+1,this.collection.models.length);this.setSelectedIndex(t)},"selectPrevious":function(){var e=this.getSelectedIndex(),t=Math.max(e-1,0);this.setSelectedIndex(t)},"onClickItem":function(e){e.cancelClick=!1,this.trigger("click:item",e),!1===e.cancelClick&&this._setCssItemSelected(e.$el)},"onClickBack":function(e){e.preventDefault(),e.stopPropagation(),this.clickBack()},"clickBack":function(){this.trigger("click:back")},"_setCssItemSelected":function(e){if(e instanceof t){var i=e.siblings("[data-csui-active]");i.removeClass("binf-active").removeAttr("data-csui-active"),i.find(".arrow-overlay").remove(),e.append(t("<div>").addClass("arrow-overlay")),e.addClass("binf-active").attr("data-csui-active",""),e.siblings().prop("tabindex","-1")}},"_isScrolledIntoView":function(e){var t=this.$(".cs-content"),i=e.position().top,n=i+e.height();return i>=0&&n<=t.height()}})}),csui.define("csui/controls/facet.panel/impl/facet/facet.key.navigation",["csui/lib/underscore","csui/lib/jquery"],function(e,t){"use strict";return{"onKeyInView":function(e){var t=e.keyCode,i=!1;switch(t){case 27:this.trigger("escape:focus"),this.activeChild&&this.activeChild.removeClass("csui-focus");break;case 32:case 13:this.execute(this.activeChild);break;case 38:case 33:case 40:case 34:if(this.activeChild&&this.activeChild.hasClass("csui-focus"))break;i=!0;break;case 9:if(this.activeChild&&this.$el.hasClass("csui-focus")){i=this.tab(e.shiftKey);break}i=!0;break;default:i=!0}return i},"execute":function(e){this.$el.addClass("csui-focus"),this.$el.find(".facet-disabled").length?this.onShowFacet():this.setfocus(e)},"setfocus":function(e){if(e&&e.is(":visible")||(e=this.getActiveChild()),e.hasClass("csui-focus"))switch(e){case this.ui.facetHeaderIcon:if(this.ui.facetHeader.hasClass("binf-disabled"))break;e.trigger("click"),this.ui.facetHeaderIcon.hasClass("icon-expandArrowDown")?(this.trigger("escape:focus"),this.activeChild=this.getActiveChild()):e.addClass("csui-focus");break;case this.ui.apply:case this.ui.cancel:e.trigger("click"),this.trigger("escape:focus"),this.activeChild=void 0;break;case this.ui.facetMore:e.trigger("click"),e===this.ui.facetMore&&this.activateChild(e)}else this.activateChild(e)},"tab":function(e){var t=this.$el.find(".csui-facet-item:not(.binf-hidden)");return!this.activeChild.hasClass("csui-focus")||(this.activeChild=e?this._getPrevActiveChild(t):this._getNextActiveChild(t),this.activateChild(this.activeChild),!1)},"activateChild":function(e){e||(e=this.getActiveChild()),this.prevChild&&this.prevChild.removeClass("csui-focus"),e.addClass("csui-focus"),e.focus(),this.prevChild=this.activeChild},"getActiveChild":function(){var e=this.$el.find(".csui-facet-item:not(.binf-hidden)");return this.activeChild&&this.activeChild.is(":visible")||(this.ui.facetHeaderIcon.hasClass("icon-expandArrowDown")?this.activeChild=this.ui.facetHeaderIcon:(this.activeChild=t(e[0]).find("span"),0===this.activeChild.length&&(this.activeChild=t(e[0]).find("div[tabindex]")),this.activeChildIndex=0)),this.activeChild},"cursorNextFilter":function(e,i,n){var s=this.$el.find(".csui-facet-item:not(.binf-hidden)"),o=s.length-1;this.activeChildIndex=i?0===this.activeChildIndex?o:--this.activeChildIndex:this.activeChildIndex===o?0:++this.activeChildIndex,n.hasClass("icon")?this.activeChild=t(s[this.activeChildIndex]).find("span"):this.activeChild=t(s[this.activeChildIndex]).find(".csui-filter-name"),this.children.findByIndex(this.activeChildIndex).activeChild=this.activeChild,this.activateChild(this.activeChild)},"_getLastFilterFocus":function(e){var t=this.activeChildIndex;return this.activeChildIndex=t&&t<e.length?t:0,this.children.findByIndex(this.activeChildIndex).activeChild},"_getNextActiveChild":function(e){var t=this.activeChild;switch(this.activeChild){case this.ui.facetHeaderIcon:this.ui.facetHeaderIcon.hasClass("icon-expandArrowUp")&&(t=this._getLastFilterFocus(e));break;case this.ui.facetMore:this.$el.find(".csui-multi-select").length>0?t=this.ui.apply:0===this.$el.find(".csui-multi-select").length&&this.ui.facetHeaderIcon.hasClass("icon-expandArrowUp")&&(t=this.ui.facetHeaderIcon);break;case this.ui.cancel:this.$el.find(".csui-multi-select").length>0&&!this.ui.facetHeader.hasClass("binf-disabled")&&this.ui.facetHeaderIcon.hasClass("icon-expandArrowUp")?t=this.ui.facetHeaderIcon:this.ui.facetHeader.hasClass("binf-disabled")&&(t=this._getLastFilterFocus(e));break;case this.ui.apply:t=this.ui.cancel;break;default:this.ui.facetMore.length>0?t=this.ui.facetMore:this.$el.find(".csui-multi-select").length>0?t=this.ui.apply:0===this.$el.find(".csui-multi-select").length&&0===this.ui.facetMore.length&&(t=this.ui.facetHeaderIcon)}return t},"_getPrevActiveChild":function(e){var t=this.activeChild;switch(this.activeChild){case this.ui.facetHeaderIcon:this.$el.find(".csui-multi-select").length>0?t=this.ui.cancel:0===this.$el.find(".csui-multi-select").length&&0===this.ui.facetMore.length?t=this._getLastFilterFocus(e):0===this.$el.find(".csui-multi-select").length&&this.ui.facetMore.length>0&&(t=this.ui.facetMore);break;case this.ui.facetMore:t=this._getLastFilterFocus(e);break;case this.ui.cancel:t=this.ui.apply;break;case this.ui.apply:t=this.ui.facetMore.length>0?this.ui.facetMore:this._getLastFilterFocus(e);break;default:if(this.ui.facetHeader.hasClass("binf-disabled")){t=this.ui.cancel;break}t=this.ui.facetHeaderIcon}return t}}}),csui.define("hbs!csui/controls/facet.panel/impl/facet/facet.item",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'  <span class="icon icon-checkbox '+this.escapeExpression((s=null!=(s=t.showOnHover||(null!=e?e.showOnHover:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"showOnHover","hash":{}}):s))+'" role="checkbox" aria-checked="false" aria-label="'+this.escapeExpression((s=null!=(s=t.filterCheckboxAria||(null!=e?e.filterCheckboxAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"filterCheckboxAria","hash":{}}):s))+'" tabindex="-1">\r\n    <input type="checkbox" aria-label="'+this.escapeExpression((s=null!=(s=t.filterCheckboxAria||(null!=e?e.filterCheckboxAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"filterCheckboxAria","hash":{}}):s))+'"/>\r\n  </span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return(null!=(s=t.if.call(e,null!=e?e.enableCheckBox:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'<div class="csui-filter-name" tabindex="-1" aria-label="'+this.escapeExpression((o=null!=(o=t.filterTitleAria||(null!=e?e.filterTitleAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"filterTitleAria","hash":{}}):o))+'">\r\n  <div class="csui-name">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'</div>\r\n  <div class="csui-total">'+this.escapeExpression((o=null!=(o=t.total||(null!=e?e.total:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"total","hash":{}}):o))+"</div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_facet.panel_impl_facet_facet.item",n),n}),csui.define("csui/controls/facet.panel/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/facet.panel/impl/nls/root/lang",{"facetsTitle":"Refine by","facetTitleAria":"Refine by {0}","searchIconTooltip":"Search by {0}","filterTitleAria":"Filter {0} with {1} items","filterCheckboxAria":"Filter {0} with {1} items","searchClearIconTooltip":"Clear all","emptyFacetMessage":"No filters available.","emptyFilteredFacetMessage":"No more filters available.","loadingFacetMessage":"Loading filters...","failedFacetMessage":"Loading filters failed.","noFiles":"No drop files were provided.","addTypeDenied":"Cannot add documents to {0}.","showMore":"Show more","showMoreAria":"Show more filters","showLess":"Show less","showLessAria":"Show less filters","apply":"Apply","applyFiltersAria":"Apply selected filters","clear":"Cancel","clearFiltersAria":"Clear selected filters","showFacetAria":"Show facet","hideFacetAria":"Hide facet","filterOptions":"Filter options"}),csui.define("css!csui/controls/facet.panel/impl/facet/facet.item",[],function(){}),csui.define("csui/controls/facet.panel/impl/facet/facet.item.view",["csui/lib/jquery","csui/utils/base","csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/facet.panel/impl/facet/facet.item","i18n!csui/controls/facet.panel/impl/nls/lang","css!csui/controls/facet.panel/impl/facet/facet.item"],function(e,t,i,n,s,o){return n.ItemView.extend({"template":s,"className":"csui-facet-item","constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments),this.showInputOnHover=!t.isTouchBrowser()},"triggers":{"click .csui-filter-name":"single:filter:select"},"events":{"click input":"onCheckBoxSelect","change input":"onChangeValue","keydown > span":"onKeyInView","keydown .csui-filter-name":"onKeyInView"},"ui":{"icon":"> span","checkbox":"> span input","filterName":"> .csui-filter-name"},"templateHelpers":function(){var e=this.showInputOnHover?"":"csui-showAlways",t=i.str.sformat(o.filterTitleAria,this.options.model.get("name"),this.options.model.get("total")),n=i.str.sformat(o.filterCheckboxAria,this.options.model.get("name"),this.options.model.get("total"));return{"showOnHover":e,"enableCheckBox":this.options.enableCheckBoxes,"filterTitleAria":t,"filterCheckboxAria":n}},"onRender":function(){this.$el.attr("role","menuitem")},"onKeyInView":function(t){var i=t.keyCode,n=e(t.target);switch(i){case 32:case 13:n.hasClass("icon")?this.ui.checkbox.trigger("click"):this.trigger("single:filter:select",this);break;case 39:case 37:break;case 38:case 40:this.trigger("keyupdown",38===i,n);break;default:return!0}return!1},"onCheckBoxSelect":function(e){this.trigger("multi:filter:select",this)},"onChangeValue":function(e){var t=e.target;t.disabled?this.ui.icon.removeClass("icon-checkbox icon-checkbox-selected").addClass("icon-checkbox-disabled"):t.checked?(this.ui.icon.removeClass("icon-checkbox icon-checkbox-disabled").addClass("icon-checkbox-selected"),this.ui.icon[0].setAttribute("aria-checked","true")):(this.ui.icon.removeClass("icon-checkbox-selected icon-checkbox-disabled").addClass("icon-checkbox"),this.ui.icon[0].setAttribute("aria-checked","false"))},"getIndex":function(){return this._index}})}),csui.define("hbs!csui/controls/facet.panel/impl/facet/facet",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'    <div class="csui-filter-more" role="button" tabindex="-1" aria-label="'+this.escapeExpression((s=null!=(s=t.moreFiltersAria||(null!=e?e.moreFiltersAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"moreFiltersAria","hash":{}}):s))+'">\r\n        <div class="csui-more-text">'+this.escapeExpression((s=null!=(s=t.more||(null!=e?e.more:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"more","hash":{}}):s))+'</div>\r\n        <div class="cs-icon '+this.escapeExpression((s=null!=(s=t["more-icon"]||(null!=e?e["more-icon"]:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"more-icon","hash":{}}):s))+'"></div>\r\n    </div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="csui-facet-header">\r\n  <div class="header-label" title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'</div>\r\n  <div class="header-count" title="'+this.escapeExpression((o=null!=(o=t.count||(null!=e?e.count:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"count","hash":{}}):o))+'"> ('+this.escapeExpression((o=null!=(o=t.count||(null!=e?e.count:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"count","hash":{}}):o))+')</div>\r\n  <div class="cs-icon csui-button-icon icon-expandArrowUp" role="button" title="'+this.escapeExpression((o=null!=(o=t.showFacetAria||(null!=e?e.showFacetAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"showFacetAria","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.showFacetAria||(null!=e?e.showFacetAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"showFacetAria","hash":{}}):o))+'" tabindex="-1"></div>\r\n</div>\r\n\r\n<div class="csui-facet-content '+this.escapeExpression((o=null!=(o=t["show-content"]||(null!=e?e["show-content"]:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"show-content","hash":{}}):o))+'" role="presentation">\r\n  <div class="cs-filter-group" role="presentation"></div>\r\n'+(null!=(s=t.if.call(e,null!=e?e.more:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'  <div class="csui-facet-controls '+this.escapeExpression((o=null!=(o=t["show-controls"]||(null!=e?e["show-controls"]:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"show-controls","hash":{}}):o))+'">\r\n      <button class="csui-btn binf-btn binf-btn-primary csui-apply" aria-label="'+this.escapeExpression((o=null!=(o=t.applyFiltersAria||(null!=e?e.applyFiltersAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"applyFiltersAria","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.apply||(null!=e?e.apply:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"apply","hash":{}}):o))+'</button>\r\n      <button class="csui-btn binf-btn binf-btn-secondary csui-clear" aria-label="'+this.escapeExpression((o=null!=(o=t.clearFiltersAria||(null!=e?e.clearFiltersAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"clearFiltersAria","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.clear||(null!=e?e.clear:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"clear","hash":{}}):o))+"</button>\r\n  </div>\r\n\r\n</div>\r\n"}});return i.registerPartial("csui_controls_facet.panel_impl_facet_facet",n),n}),csui.define("css!csui/controls/facet.panel/impl/facet/facet",[],function(){}),csui.define("csui/controls/facet.panel/impl/facet/facet.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/models/facettopics","csui/controls/facet.panel/impl/facet/facet.key.navigation","csui/utils/log","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/facet.panel/impl/facet/facet.item.view","hbs!csui/controls/facet.panel/impl/facet/facet","i18n!csui/controls/facet.panel/impl/nls/lang","css!csui/controls/facet.panel/impl/facet/facet"],function(e,t,i,n,s,o,r,a,l,c,u){var d=n.CompositeView.extend({"childView":l,"template":c,"className":"csui-facet","childViewContainer":".cs-filter-group","ui":{"facetContent":".csui-facet-content","facetHeader":".csui-facet-header","facetHeaderIcon":".csui-facet-header > .cs-icon","facetSubmitControls":".csui-facet-controls","facetCollapseControls":".csui-facet-collapse-controls","facetMoreText":".csui-more-text","facetMoreIcon":".csui-filter-more .cs-icon","facetMore":".csui-filter-more","apply":".csui-facet-controls .csui-apply","cancel":".csui-facet-controls .csui-clear","selectCount":".header-count"},"childEvents":{"single:filter:select":"onSingleFilterSelect","multi:filter:select":"onMultiFilterSelect","keyupdown":"cursorNextFilter","keyleftright":"cursorInsideFilter"},"events":{"click .csui-filter-more:not(.binf-disabled)":"onShowMore","click .csui-facet-header":"onShowFacet","mouseleave":"onMouseLeave","keydown":"onKeyInView"},"triggers":{"click .csui-clear":"clear:all","click .csui-apply":"apply:all"},"templateHelpers":function(){var e=this.showAll?u.showLess:u.showMore,t=this.showAll?u.showLessAria:u.showMoreAria;return{"more":this.collection.length>this.itemsToShow?e:void 0,"moreFiltersAria":t,"more-icon":this.showAll?"icon-expandArrowUp":"icon-expandArrowDown","apply":u.apply,"applyFiltersAria":u.applyFiltersAria,"clear":u.clear,"clearFiltersAria":u.clearFiltersAria,"show-controls":this.selectItems.length>0?"csui-multi-select":"","show-content":this.showFacet?"":"binf-hidden","showFacetAria":this.showFacet?u.hideFacetAria:u.showFacetAria}},"childViewOptions":function(){return{"enableCheckBoxes":this.model.get("select_multiple")}},"constructor":function(e){n.CompositeView.prototype.constructor.apply(this,arguments),this.$el.attr("tabindex",0),this.options=e||{},this.collection=this.model.topics,this.itemsToShow=this.model.get("items_to_show"),this.showAll=!1,this.showFacet=!0,this.selectItems=[]},"onClearAll":function(){var e=this.$el.find("input:checkbox");this.selectItems=[],this.ui.facetCollapseControls.removeClass("multi-select"),e.prop("checked",!1).trigger("change"),this._setDisabledFilters(0),this.$el.removeClass("multi-select"),this._updateFacetSubmitControls(),this.ui.facetHeader.removeClass("binf-disabled"),this.trigger("activate:facet",this)},"onApplyAll":function(){var e=this.model,t=this._getFilterArray();this.newFilter={"id":e.get("id"),"values":t},this.trigger("apply:filter")},"onAddChild":function(e){if(e.getIndex()>=this.itemsToShow){var t=this.showAll?"more":"more binf-hidden";e.$el.addClass(t)}},"onRender":function(){0===this.collection.length&&this.$el.hide(),this.$el.attr("role","menu"),this.$el.attr("aria-label",t.str.sformat(u.facetTitleAria,this.model.get("name")))},"onSingleFilterSelect":function(e){if(!e.$el.hasClass("binf-disabled"))if(this.$el.hasClass("multi-select"))e.$el.find("input:checkbox").click();else{var t=this.model;this.newFilter={"id":t.get("id"),"values":[{"id":e.model.get("value")}]},this.trigger("apply:filter")}},"onShowMore":function(e){e&&(e.preventDefault(),e.stopPropagation()),this.showAll=!this.showAll,this._setMoreLabel(this.showAll),this.trigger("facet:size:change")},"onShowFacet":function(e){if(e&&(e.preventDefault(),e.stopPropagation()),this.showFacet=!this.showFacet,this.showFacet)this.ui.facetContent.removeClass("binf-hidden"),this.ui.facetCollapseControls.removeClass("multi-select"),this.ui.facetHeaderIcon[0].className="cs-icon csui-button-icon icon-expandArrowUp",this.ui.facetHeaderIcon[0].setAttribute("aria-label",u.hideFacetAria),this.ui.facetHeaderIcon[0].setAttribute("title",u.hideFacetAria);else{var t=this.$el.find("input:checked").length;this.ui.facetContent.addClass("binf-hidden"),this.ui.facetHeaderIcon[0].className="cs-icon csui-button-icon icon-expandArrowDown",this.ui.facetHeaderIcon[0].setAttribute("aria-label",u.showFacetAria),this.ui.facetHeaderIcon[0].setAttribute("title",u.showFacetAria),t&&this.ui.facetCollapseControls.addClass("multi-select")}this.trigger("facet:size:change")},"onMouseLeave":function(e){e.preventDefault(),e.stopPropagation()},"getIndex":function(){return this._index},"onMultiFilterSelect":function(e){var t=this.$el.find("input:checked").length;this._updateSelectList(e),this._updateFacetSubmitControls(t),this._setDisabledFilters(t),this.selectItems=0===t?[]:this.selectItems,this.trigger("activate:facet",this)},"_updateFacetSubmitControls":function(){this.$el.find("input:checked").length>0?(this.ui.facetSubmitControls.addClass("csui-multi-select"),this.$el.addClass("multi-select"),this.ui.facetHeader.addClass("binf-disabled")):(this.ui.facetSubmitControls.removeClass("csui-multi-select"),this.$el.removeClass("multi-select"),this.ui.facetHeader.removeClass("binf-disabled"))},"_updateSelectList":function(e){var t=e.getIndex();this.selectItems[t]?delete this.selectItems[t]:this.selectItems[t]=e},"_setDisabledFilters":function(e){var t=this.$el.find("input:not(:checked)");e<5?(t.prop("disabled",!1).trigger("change"),t.parent().parent().removeClass("binf-disabled")):(t.prop("disabled",!0).trigger("change"),t.parent().parent().addClass("binf-disabled")),this.ui.selectCount.text(e)},"_setMoreLabel":function(e){var t=this.$el.find(".csui-facet-item.more");this.ui.facetMoreIcon[0]&&(e?(t.removeClass("binf-hidden"),this.ui.facetMoreIcon[0].className="cs-icon icon-expandArrowUp",this.ui.facetMoreText.text(u.showLess),this.ui.facetMore[0].setAttribute("aria-label",u.showLessAria),this.ui.facetMoreText[0].setAttribute("aria-expanded","true")):(t.addClass("binf-hidden"),this.ui.facetMoreIcon[0].className="cs-icon icon-expandArrowDown",this.ui.facetMoreText.text(u.showMore),this.ui.facetMore[0].setAttribute("aria-label",u.showMoreAria),this.ui.facetMoreText[0].setAttribute("aria-expanded","false"))),this.trigger("facet:size:change")},"_getFilterArray":function(){var e=[];return t.each(this.selectItems,function(t){t&&e.push({"id":t.model.get("value")})}),e}});return t.extend(d.prototype,o),d}),csui.define("csui/controls/facet.panel/impl/facet.panel.key.navigation",["csui/lib/underscore","csui/lib/jquery"],function(e,t){"use strict";return{"currentlyFocusedElement":function(){
var e=this.$(".cs-list-group .csui-facet[tabindex=-1]");return e.length&&e.prop("tabindex",0),this.getActiveChild()},"onSetNextChildFocus":function(e){this.activeChildIndex=e.getIndex()},"accActivateTabableRegion":function(){t(document).unbind("mousedown",this._onRemoveKeyboardFocus),t(document).bind("mousedown",this._onRemoveKeyboardFocus)},"_removeKeyboardFocus":function(){this.$el.find(".csui-focus").removeClass("csui-focus"),t(document).unbind("mousedown",this._onRemoveKeyboardFocus)},"onKeyInView":function(e){switch(e.keyCode){case 38:case 33:this._getPrevActiveChild().focus();break;case 40:case 34:this._getNextActiveChild().focus();break;default:return!0}return!1},"resetFacetFocus":function(e){e.$el.focus()},"getActiveChild":function(){if(!this.$childViewContainer)return t();if(!this.activeChild){var e=this.$childViewContainer[0];e&&e.childNodes[0]&&(this.activeChild=t(e.childNodes[0]),this.activeChildIndex=0)}return this.activeChild},"_getNextActiveChild":function(){var e=this.$childViewContainer[0].childNodes;return e.length-1>this.activeChildIndex?this.activeChildIndex++:this.activeChildIndex=0,t(e[this.activeChildIndex])},"_getPrevActiveChild":function(){var e=this.$childViewContainer[0].childNodes;return this.activeChildIndex>0?this.activeChildIndex--:this.activeChildIndex=e.length-1,t(e[this.activeChildIndex])}}}),csui.define("hbs!csui/controls/facet.panel/impl/facet.panel",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'  <div class="cs-header binf-panel-heading">\r\n    <span class="cs-title">'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+"</span>\r\n  </div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return(null!=(s=t.if.call(e,null!=e?e.showTitle:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'\r\n\x3c!--<div class="csui-horizontal-separator"></div>--\x3e\r\n<div class="cs-content" tabindex="-1">\r\n  <div class="cs-list-group" role="region" aria-label="'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'"></div>\r\n</div>\r\n\r\n\r\n'}});return i.registerPartial("csui_controls_facet.panel_impl_facet.panel",n),n}),csui.define("css!csui/controls/facet.panel/impl/facet.panel",[],function(){}),csui.define("csui/controls/facet.panel/facet.panel.view",["csui/lib/underscore","csui/lib/jquery","csui/models/facets","csui/controls/list/simplelist.view","csui/controls/facet.panel/impl/facet/facet.view","csui/behaviors/collection.state/collection.state.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/facet.panel/impl/facet.panel.key.navigation","csui/controls/progressblocker/blocker","hbs!csui/controls/facet.panel/impl/facet.panel","i18n!csui/controls/facet.panel/impl/nls/lang","css!csui/controls/facet.panel/impl/facet.panel"],function(e,t,i,n,s,o,r,a,l,c,u){"use strict";var d=n.extend({"template":c,"className":"cs-simplelist csui-facet-panel","behaviors":{"CollectionState":{"behaviorClass":o,"stateMessages":function(){return{"empty":e.isEmpty(this.facets.filters)?u.emptyFacetMessage:u.emptyFilteredFacetMessage,"loading":u.loadingFacetMessage,"failed":u.failedFacetMessage}}},"TabableRegion":{"behaviorClass":r}},"childView":s,"childEvents":{"apply:filter":"applyFilter","activate:facet":"setActiveFacet","facet:size:change":"_updateScrollbar","escape:focus":"resetFacetFocus"},"events":{"keydown":"onKeyInView"},"templateHelpers":function(){return{"showTitle":this.options.data.showTitle,"title":this.options.data.title}},"onAddChild":function(e){var t=e.$el,i=this;e.getIndex()===this.collection.length-1&&t.css("border-bottom","0px"),t.on("focus",function(){i.onSetNextChildFocus(e)})},"constructor":function(t){this.facets=t.collection,t.collection=this._getAvailableFacets(),n.prototype.constructor.apply(this,arguments),this.options.data.title=u.facetsTitle,this.options.data.showTitle=void 0===this.options.showTitle||this.options.showTitle,this._onRemoveKeyboardFocus=e.bind(this._removeKeyboardFocus,this),this.options.blockingParentView?l.delegate(this,this.options.blockingParentView):l.imbue({"parent":this,"local":this.options.blockingLocal})},"_getAvailableFacets":function(){var e=this.facets.getAvailableFacets();return this.listenTo(this.facets,"reset",function(){var e=this.facets.getAvailableFacets();this.collection.reset(e)}),new i(e)},"isTabable":function(){return!(this.$el.parent().hasClass("binf-hidden")||this.$el.parent().hasClass("csui-facetview-hidden"))},"onRenderCollection":function(){this.trigger("refresh:tabindexes")},"onBeforeDestroy":function(){t(document).unbind("mousedown",this._onRemoveKeyboardFocus)},"applyFilter":function(e){this.trigger("apply:filter",e.newFilter)},"setActiveFacet":function(e){e.selectItems.length>0?this.children.each(function(t){t.getIndex()!==e.getIndex()&&t.$el.find(".csui-facet-content").addClass("facet-disabled")}):this.$el.find(".csui-facet-content").removeClass("facet-disabled")},"_updateScrollbar":function(){this.triggerMethod("update:scrollbar",this)}});return e.extend(d.prototype,a),d}),csui.define("csui/controls/list/behaviors/list.view.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,n,s){"use strict";var o={"none":-1,"header":0,"list":1,"footer":2};return s.Behavior.extend({"constructor":function(e,n){s.Behavior.prototype.constructor.apply(this,arguments),n.keyboardBehavior=this,this.tabableElements=[];var r=this;this.listenTo(n,"show",function(){r.refreshTabableElements(n)}),this.listenTo(n,"childview:click:item childview:click:tree:header",function(e){var t=n.selectedIndex,i=n.getElementByIndex(t);i&&i.prop("tabindex","-1"),n.currentTabPosition=o.list,n.selectedIndex=n.collection.indexOf(e.model),(i=n.getElementByIndex(n.selectedIndex))&&i.prop("tabindex","0")}),this.listenTo(n,"change:filterValue",function(){r.refreshTabableElements(n)}),this.listenTo(n,"before:collection:scroll:fetch",function(){n._beforeCollectionScrollFetch()}),this.listenTo(n,"collection:scroll:fetch",function(){n._afterCollectionScrollFetch()}),t.extend(n,{"_focusHeader":function(e){this.currentTabPosition=o.header;var t=e&&e.shiftKey;return i(t?this.ui.searchIcon:this.ui.searchInput.css&&"none"!==this.ui.searchInput.css("display")?this.ui.searchInput:this.ui.searchIcon)},"_focusList":function(e){return this.currentTabPosition=o.list,(this.selectedIndex<0||this.selectedIndex>this.collection.length-1)&&(this.selectedIndex=0),this.getElementByIndex(this.selectedIndex,e)},"_focusFooter":function(){return this.currentTabPosition=o.footer,i(this.ui.tileExpand)},"currentlyFocusedElement":function(e){return e&&e.shiftTab?this._footerIsVisible()?this._focusFooter():this._focusList():this._headerIsVisible()?this._focusHeader():this._focusList()},"_footerIsInFocus":function(){return!(this.currentTabPosition!==o.footer&&!this.ui.tileExpand.is(":focus"))},"_footerIsVisible":function(){return!(!this.ui.tileExpand.css||"none"===this.ui.tileExpand.css("display")||this.ui.tileExpand.hasClass("binf-hidden"))},"isMoreActionsDropdownOpen":function(){return!!this.$el.find(".csui-table-cell-name-appendix .csui-table-actionbar .binf-dropdown-menu").is(":visible")},"_headerIsInFocus":function(){return!!(this.currentTabPosition===o.header||this.ui.searchIcon.is(":focus")||this.ui.searchInput.is(":focus")||this.ui.clearer.is(":focus"))},"_headerIsVisible":function(){return!(!this.ui.searchIcon.css||"none"===this.ui.searchIcon.css("display")||this.ui.searchIcon.hasClass("binf-hidden"))},"_beforeCollectionScrollFetch":function(){if(this.selectedIndexInFocus=!1,this.selectedIndex>=0&&this.selectedIndex<this.collection.length){var e=this.getElementByIndex(this.selectedIndex);e&&e.is(":focus")&&(e.prop("tabindex","-1"),this.selectedIndexInFocus=!0)}},"_afterCollectionScrollFetch":function(){!0===this.selectedIndexInFocus&&this.selectedIndex>=0&&this.selectedIndex<this.collection.length&&setTimeout(t.bind(function(){var e=this.getElementByIndex(this.selectedIndex);e&&(e.prop("tabindex","0"),e.focus())},this),100)},"_onKeyInSearchArea":function(e){this.ui.searchIcon.is(":focus")||this.ui.clearer.is(":focus")?(e.preventDefault(),e.stopPropagation(),i(e.target).click()):this.ui.searchInput.is(":focus")&&13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.filterChanged(e))},"_moveTo":function(e,i,n){e.preventDefault(),e.stopPropagation(),setTimeout(t.bind(function(){this.trigger("before:keyboard:change:focus"),n&&n.prop("tabindex","-1"),i&&i.prop("tabindex","0"),i&&i.focus(),this.trigger("after:keyboard:change:focus")},this),50)},"onKeyInView":function(e){if(9===e.keyCode){var n=this.currentTabPosition;if(this._headerIsInFocus()&&!this.ui.searchIcon.is(":focus"))return;switch(this._headerIsInFocus()&&(n=this.currentTabPosition=o.header),this._footerIsInFocus()&&(n=this.currentTabPosition=o.footer),e.shiftKey?n-=0===this.collection.length?2:1:n+=0===this.collection.length?2:1,n!==o.header||this._headerIsVisible()||(n-=1),n!==o.footer||this._footerIsVisible()||(n+=1),n){case o.header:this._moveTo(e,this._focusHeader(e));break;case o.list:this._moveTo(e,this._focusList());break;case o.footer:this._moveTo(e,this._focusFooter());break;default:this.currentTabPosition=o.none}}else if(32===e.keyCode||13===e.keyCode)this._headerIsInFocus()?(this.currentTabPosition=o.header,this._onKeyInSearchArea(e)):(e.preventDefault(),e.stopPropagation(),i(e.target).click());else if(27===e.keyCode){if(this.isMoreActionsDropdownOpen())return!1;if(this._headerIsInFocus()){e.preventDefault(),e.stopPropagation();var s=this.ui.searchInput.is(":visible");s&&(this.searchClicked(e),setTimeout(t.bind(function(){this.ui.searchIcon.prop("tabindex","0"),this.ui.searchIcon.focus()},this),250))}}},"onKeyDown":function(e){if(this._headerIsInFocus()||this._footerIsInFocus())return void this.onKeyInView(e);var t;switch(e.which){case 33:case 36:t=this.getElementByIndex(this.selectedIndex),this._moveTo(e,this._selectFirst(),t);break;case 34:case 35:t=this.getElementByIndex(this.selectedIndex),this._moveTo(e,this._selectLast(e),t);break;case 38:this.selectedIndex>0?(t=this.getElementByIndex(this.selectedIndex),this._moveTo(e,this._selectPrevious(e),t)):(e.preventDefault(),e.stopPropagation());break;case 40:this.selectedIndex<this.collection.length-1?(t=this.getElementByIndex(this.selectedIndex),this._moveTo(e,this._selectNext(),t)):(e.preventDefault(),e.stopPropagation());break;default:return void this.onKeyInView(e)}},"_selectFirst":function(){return this.selectedIndex=0,this.getElementByIndex(this.selectedIndex)},"_selectLast":function(e){var t,i=this.selectedIndex;(i<0||i>=this.collection.length)&&(i=0);for(var n=this.collection.length;n>i&&!t;)n--,t=this.getElementByIndex(n,e);return t?(this.selectedIndex=n,t):this.getElementByIndex(this.selectedIndex)},"_selectNext":function(){var e,t=this.selectedIndex;for((t<0||t>=this.collection.length)&&(t=-1);t<this.collection.length-1&&!e;)t++,e=this.getElementByIndex(t);return e?(this.selectedIndex=t,e):this.getElementByIndex(this.selectedIndex)},"_selectPrevious":function(e){return this.selectedIndex>0&&this.selectedIndex--,this.getElementByIndex(this.selectedIndex,e)}})},"refreshTabableElements":function(e){n.debug("ListViewKeyboardBehavior::refreshTabableElements "+e.constructor.name)&&console.log(n.last),this.view.currentTabPosition=o.none,this.view.selectedIndex=-1}})}),csui.define("hbs!csui/controls/list/impl/emptylist",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return'<div class="cs-emptylist-placeholder"></div>\r\n<div class="cs-emptylist-text"><p class="csui-no-result-message" title="'+this.escapeExpression((s=null!=(s=t.text||(null!=e?e.text:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"text","hash":{}}):s))+'">'+this.escapeExpression((s=null!=(s=t.text||(null!=e?e.text:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"text","hash":{}}):s))+'</p></div>\r\n<div class="cs-emptylist-placeholder"></div>\r\n'}});return i.registerPartial("csui_controls_list_impl_emptylist",n),n}),csui.define("css!csui/controls/list/impl/emptylist",[],function(){}),csui.define("csui/controls/list/emptylist.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/list/impl/emptylist","i18n!csui/controls/list/impl/nls/lang","css!csui/controls/list/impl/emptylist"],function(e,t,i,n,s){return i.ItemView.extend({"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments)},"className":"cs-emptylist-container","template":n,"templateHelpers":function(){return{"text":this.options.text||s.emptyViewDefaultText}}})}),csui.define("hbs!csui/controls/list/impl/list",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'    <div class="tile-type-icon">\r\n      <span class="icon '+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'" aria-label="'+this.escapeExpression((s=null!=(s=t.expandAria||(null!=e?e.expandAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"expandAria","hash":{}}):s))+'"></span>\r\n    </div>\r\n'},"3":function(e,t,i,n){var s;return null!=(s=t.if.call(e,null!=e?e.imageUrl:e,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop}))?s:""},"4":function(e,t,i,n){var s;return'      <div class="tile-type-image '+this.escapeExpression((s=null!=(s=t.imageClass||(null!=e?e.imageClass:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"imageClass","hash":{}}):s))+'">\r\n        <span class="tile-type-icon tile-type-icon-img"><img src="'+this.escapeExpression((s=null!=(s=t.imageUrl||(null!=e?e.imageUrl:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"imageUrl","hash":{}}):s))+'"\r\n                                                             alt="'+this.escapeExpression((s=null!=(s=t.expandAria||(null!=e?e.expandAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"expandAria","hash":{}}):s))+'"></span>\r\n      </div>\r\n'},"6":function(e,t,i,n){var s;return'      <div class="search-box">\r\n        <input class="search" type="search" placeholder="'+this.escapeExpression((s=null!=(s=t.searchPlaceholder||(null!=e?e.searchPlaceholder:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"searchPlaceholder","hash":{}}):s))+'"\r\n               title="'+this.escapeExpression((s=null!=(s=t.searchPlaceholder||(null!=e?e.searchPlaceholder:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"searchPlaceholder","hash":{}}):s))+'">\r\n        <span class="clearer csui-icon formfield_clear" title="'+this.escapeExpression((s=null!=(s=t.clearAll||(null!=e?e.clearAll:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"clearAll","hash":{}}):s))+'"\r\n              aria-label="'+this.escapeExpression((s=null!=(s=t.clearAllAria||(null!=e?e.clearAllAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"clearAllAria","hash":{}}):s))+'" role="button"></span>\r\n        <span class="fadeout csui-icon" title="'+this.escapeExpression((s=null!=(s=t.searchPlaceholder||(null!=e?e.searchPlaceholder:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"searchPlaceholder","hash":{}}):s))+'"></span>\r\n      </div>\r\n      <span title="'+this.escapeExpression((s=null!=(s=t.searchTooltip||(null!=e?e.searchTooltip:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"searchTooltip","hash":{}}):s))+'" class="cs-search-icon icon icon-search" role="button"\r\n            aria-label="'+this.escapeExpression((s=null!=(s=t.searchAria||(null!=e?e.searchAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"searchAria","hash":{}}):s))+'" aria-expanded="false"></span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="tile-header">\r\n\r\n'+(null!=(s=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.program(3,n,0)}))?s:"")+'\r\n  <div class="tile-title">\r\n    <h2 class="csui-heading">'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'</h2>\r\n  </div>\r\n\r\n  <div class="tile-controls">\r\n'+(null!=(s=t.if.call(e,null!=e?e.hideSearch:e,{"name":"if","hash":{},"fn":this.noop,"inverse":this.program(6,n,0)}))?s:"")+'  </div>\r\n\r\n</div>\r\n<div class="tile-content" role="listbox">\r\n  <div class="binf-list-group"></div>\r\n  <div class="binf-sr-only" aria-live="off"></div>\r\n</div>\r\n\r\n<div class="tile-footer">\r\n  <div class="cs-more tile-expand" title="'+this.escapeExpression((o=null!=(o=t.expandTitle||(null!=e?e.expandTitle:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"expandTitle","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.expandAria||(null!=e?e.expandAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"expandAria","hash":{}}):o))+'"\r\n       role="button">\r\n    <div class="icon circular icon-tileExpand"></div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_list_impl_list",n),n}),csui.define("css!csui/controls/list/impl/list",[],function(){}),csui.define("csui/controls/list/list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/list/emptylist.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n","hbs!csui/controls/list/impl/list","i18n!csui/controls/list/impl/nls/lang","css!csui/controls/list/impl/list","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i,n,s,o,r,a,l){var c=i.ItemView.extend({"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments)}});return i.CompositeView.extend({"direction":r.settings.rtl?"left":"right","constructor":function(t){t||(t={}),e.defaults(t,{"filterValue":""}),this.behaviors&&e.any(this.behaviors,function(e,t){return e.behaviorClass===o})||(this.behaviors=e.extend({"PerfectScrolling":{"behaviorClass":o,"contentParent":"> .tile-content","suppressScrollX":!0,"scrollYMarginOffset":15}},this.behaviors)),i.CompositeView.prototype.constructor.call(this,t);var n=this.templateHelpers()&&this.templateHelpers().title?" "+this.templateHelpers().title.toLowerCase():"",s={"expandTitle":e.str.sformat(l.expandView,n),"expandAria":l.expandAria,"searchTooltip":e.str.sformat(l.searchView,n),"collapseSearchTooltip":l.collapseSearch};this.templateHelpers=e.defaults(this.templateHelpers(),l,s)},"templateHelpers":function(){},"setValidator":function(){this.validator=setInterval(e.bind(this.validateInput,this),10)},"unsetValidator":function(){clearInterval(this.validator)},"className":"cs-list tile content-tile","template":a,"childViewContainer":".binf-list-group","childView":c,"childViewOptions":function(){return{"template":this.options.childViewTemplate}},"emptyView":s,"ui":{"headerTitle":".tile-title","searchIcon":".cs-search-icon","searchBox":".search-box","searchInput":".search","clearer":".clearer","tileExpand":".tile-expand","fadeout":".fadeout"},"events":{"keydown":"onKeyDown"},"triggers":{"click .tile-header":"click:header"},"onKeyDown":function(e){},"onRender":function(){this.ui.searchInput.hide(),this.ui.clearer.toggle(!1),this.ui.searchIcon.on("click",e.bind(this.searchClicked,this)),this.ui.searchBox.on("click",e.bind(this.searchBoxClicked,this)),this.ui.clearer.on("click",e.bind(this.searchFieldClearerClicked,this)),this.ui.searchInput.on("input",e.bind(this.searchInput,this)),this.srOnly=this.$el.find(".tile-content .binf-sr-only"),this.tileHeader=this.$el.find(".tile-header"),this.titleId=e.uniqueId("dlgTitle"),this.$(this.ui.headerTitle).find(".csui-heading").attr("id",this.titleId),this.$(this.tileHeader).parent().attr("role","region").attr("aria-labelledby",this.titleId),this.tileHeader.focusin(e.bind(this.focusinAria,this)),this.tileHeader.focusout(e.bind(this.focusoutAria,this))},"focusinAria":function(){this.srOnly.attr("aria-live","polite"),this.setElementsVisibleAria()},"focusoutAria":function(){this.srOnly.attr("aria-live","off"),this.srOnly.html("")},"searchBoxClicked":function(e){e.stopPropagation()},"searchFieldClearerClicked":function(){this.ui.searchInput.val(""),this.filterChanged(),this.ui.searchInput.focus()},"isSearchOpen":function(){return this.ui.searchInput.is&&this.ui.searchInput.is(":visible")},"searchClicked":function(t){this.ui.searchInput.val(""),this.ui.clearer.toggle(!1),this.ui.headerTitle.toggle("fade",e.bind(function(){this._resetFilter()},this)),this.ui.searchInput.toggle("blind",{"direction":this.direction},200,e.bind(function(){this.isSearchOpen()?(this.setValidator(),this.ui.searchInput.prop("tabindex","0"),this.ui.searchInput.focus(),this.ui.fadeout.show(),this.iconsAriaLabel=this.$(this.ui.searchIcon).attr("aria-label"),this.$(this.ui.searchIcon).attr("title",l.collapseSearch).attr("aria-expanded","true").attr("aria-label",l.collapseAria),this.$(this.ui.searchIcon).addClass("icon-search-hide")):(this.unsetValidator(),this.ui.fadeout.hide(),this.$(this.ui.searchIcon).attr("title",this.templateHelpers.searchTooltip).attr("aria-expanded","false").attr("aria-label",this.iconsAriaLabel),this.$(this.ui.searchIcon).removeClass("icon-search-hide"))},this)),t&&t.stopPropagation()},"validateInput":function(){if(this.ui.searchInput.val){var e=this.ui.searchInput.val&&!!this.ui.searchInput.val().length;this.ui.clearer.toggle(e),this.ui.clearer.prop("tabindex",e?"0":"-1")}},"searchInput":function(t){this.keyInputTimer&&clearTimeout(this.keyInputTimer),this.keyInputTimer=setTimeout(e.bind(function(){this.keyInputTimer=void 0,this.filterChanged()},this),300)},"filterChanged":function(){this.options.filterValue=this.ui.searchInput.val(),this.trigger("change:filterValue"),this.setElementsVisibleAria()},"setElementsVisibleAria":function(){var t=this.collection?this.collection.size():"0";this.srOnly.html(e.str.sformat(l.elementsVisibleAria,t))},"_resetFilter":function(){this.ui.searchInput.val(""),this.filterChanged()},"getElementByIndex":function(i){if(isNaN(i)||i<0)return null;var n=this.showInlineActionBar?"div.csui-item-standard:nth-child({0})":"div a:nth-child({0})",s=e.str.sformat(n,i+1),o=this.$(s);return t(o[0])}})}),csui.define("csui/controls/list/list.state.view",["csui/behaviors/collection.state/collection.state.view","hbs!csui/controls/list/impl/emptylist","css!csui/controls/list/impl/emptylist"],function(e,t){"use strict";return e.extend({"constructor":function(){e.prototype.constructor.apply(this,arguments)},"className":"cs-emptylist-container "+e.prototype.className,"template":t,"serializeData":function(){return{"text":e.prototype.serializeData.apply(this,arguments).message}}})}),csui.define("hbs!csui/controls/listitem/impl/simpletreelistitem",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'    <span class="csui-button-icon container-icon '+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'"></span>\r\n'},"3":function(e,t,i,n){var s;return this.escapeExpression((s=null!=(s=t.tooltip||(null!=e?e.tooltip:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"tooltip","hash":{}}):s))},"5":function(e,t,i,n){var s;return this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"name","hash":{}}):s))},"7":function(e,t,i,n){var s;return'    <span class="csui-button-icon dropdown-icon icon-expandArrowUp" title="'+this.escapeExpression((s=null!=(s=t.collapseLabel||(null!=e?e.collapseLabel:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"collapseLabel","hash":{}}):s))+'"></span>\r\n'},"9":function(e,t,i,n){var s;return'    <span class="csui-button-icon dropdown-icon icon-expandArrowDown" title="'+this.escapeExpression((s=null!=(s=t.expandLabel||(null!=e?e.expandLabel:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"expandLabel","hash":{}}):s))+'"></span>\r\n'},"11":function(e,t,i,n){return" binf-hidden"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="cs-header binf-panel-heading" tabindex="0" aria-label="'+this.escapeExpression((o=null!=(o=t.ariaName||(null!=e?e.ariaName:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"ariaName","hash":{}}):o))+'">\r\n'+(null!=(s=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'  <span class="cs-title" title="'+(null!=(s=t.if.call(e,null!=e?e.tooltip:e,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.program(5,n,0)}))?s:"")+'">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"</span>\r\n"+(null!=(s=t.if.call(e,null!=e?e.expand:e,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.program(9,n,0)}))?s:"")+'</div>\r\n\r\n<div class="cs-content'+(null!=(s=t.unless.call(e,null!=e?e.expand:e,{"name":"unless","hash":{},"fn":this.program(11,n,0),"inverse":this.noop}))?s:"")+'">\r\n  <div role="group" class="cs-list-group"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_listitem_impl_simpletreelistitem",n),n}),csui.define("hbs!csui/controls/listitem/impl/simpletreelistleaf",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return this.escapeExpression((s=null!=(s=t.tooltip||(null!=e?e.tooltip:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"tooltip","hash":{}}):s))},"3":function(e,t,i,n){var s;return this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"name","hash":{}}):s))},"5":function(e,t,i,n){return'<span class="csui-tileview-more-btn"></span>'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="binf-list-group-item">\r\n  <span class="csui-type-icon '+this.escapeExpression((o=null!=(o=t.icon||(null!=e?e.icon:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"icon","hash":{}}):o))+'"></span>\r\n  <span title="'+(null!=(s=t.if.call(e,null!=e?e.tooltip:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.program(3,n,0)}))?s:"")+'"\r\n        class="list-item-title">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"</span>\r\n  "+(null!=(s=t.if.call(e,null!=e?e.showInlineActionBar:e,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop}))?s:"")+"\r\n\r\n</div>\r\n"}});return i.registerPartial("csui_controls_listitem_impl_simpletreelistleaf",n),n}),csui.define("csui/controls/listitem/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/listitem/impl/nls/root/lang",{"treeListExpandTooltip":"Expand","treeListCollapseTooltip":"Collapse"}),csui.define("css!csui/controls/listitem/impl/simpletreelistitem",[],function(){}),csui.define("csui/controls/listitem/simpletreelistitem.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/list/emptylist.view","csui/controls/node-type.icon/node-type.icon.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/node.links/node.links","csui/behaviors/default.action/default.action.behavior","hbs!csui/controls/listitem/impl/simpletreelistitem","hbs!csui/controls/listitem/impl/simpletreelistleaf","i18n!csui/controls/listitem/impl/nls/lang","css!csui/controls/listitem/impl/simpletreelistitem"],function(e,t,i,n,s,o,r,a,l,c,u,d,h,p){"use strict";var f={"none":-1,"header":0,"list":1},m=s.ItemView.extend({"tagName":"a","attributes":function(){return{"role":"treeitem"}},"template":h,"modelEvents":{"change":"render"},"triggers":{"click":"click:item"},"events":function(){var e={"keydown":"onKeyDown"};return this.options.toolbarData&&(e=t.extend(e,{"click":"onExecuteClick","mouseenter":"onShowCommands","mouseleave":"onDestroyCommands"})),e},"behaviors":{"DefaultAction":{"behaviorClass":u}},"onExecuteClick":function(e){if(1===i(e.target).closest(".csui-tileview-more-btn").length)return!0;e.stopPropagation(),e.preventDefault(),this.trigger("click:item",{"target":this.model})},"constructor":function(e){this.showInlineActionBar=!!e.toolbarData,this.showInlineActionBar&&(this.triggers={},this._setInlineActions(e)),s.ItemView.prototype.constructor.apply(this,arguments),this.context=e.context},"_setInlineActions":function(e){this.tileViewToolbarItems=e.toolbarData.toolbaritems||{},this.collection=e.toolbarData.collection||{}},"onShowCommands":function(e){this.$el.addClass("csui-tile-with-more-btn"),this._showInlineBar(e)},"_showInlineBar":function(i){this.showInlineActionsLock=!0,i.preventDefault(),i.stopPropagation();var n=["csui/controls/tableactionbar/tableactionbar.view",this.tileViewToolbarItems];e(n,t.bind(function(e,i){if(this.inlineBarView=new e(t.extend({"context":this.options.context,"originatingView":this,"commands":this.defaultActionController.commands,"model":this.model,"collection":i.inlineActionbar,"containerCollection":this.collection,"status":{"originatingView":this}},i.inlineActionbar.options)),this.showInlineActionsLock){var n=this.$el.find(".csui-tileview-more-btn");new s.Region({"el":n}).show(this.inlineBarView)}},this))},"onDestroyCommands":function(){this.showInlineActionsLock=!1,this.showInlineActionBar&&(this.inlineBarView&&this.inlineBarView.destroy(),this.$el.removeClass("csui-tile-with-more-btn"))},"onKeyDown":function(e){13!=e.keyCode&&32!=e.keyCode||(e.preventDefault(),e.stopPropagation(),this.trigger("click:item",{"target":this.model}))},"onRender":function(){if(null!=(this.model&&this.model.get("id"))&&this.$el.attr("href",c.getUrl(this.model)),this._nodeIconView&&this._nodeIconView.destroy(),this._nodeIconView=new a({"el":this.$(".csui-type-icon").get(0),"node":this.model}),this._nodeIconView.render(),this.model&&this.options&&this.options.checkDefaultAction){var e=!1===this.model.fetched||!this.defaultActionController.hasAction(this.model);this.$el[e?"addClass":"removeClass"]("inactive")}},"onBeforeDestroy":function(){this._nodeIconView&&this._nodeIconView.destroy()}});return s.CompositeView.extend({"className":"cs-simpletreelistitem binf-panel binf-panel-default","attributes":function(){return{"role":"treeitem"}},"template":d,"templateHelpers":function(){return{"icon":this.options.model&&this.options.model.get("icon"),"name":this.options.model&&this.options.model.get("name"),"expandLabel":p.treeListExpandTooltip,"collapseLabel":p.treeListCollapseTooltip}},"ui":{"header":".cs-header","headerDropdownIcon":".cs-header .dropdown-icon","content":"> .cs-content","contentList":"> .cs-content > .cs-list-group"},"events":{"keydown":"onKeyInView"},"childEvents":{"click:item":"onClickItem","render":"_onChildRender"},"childViewContainer":".cs-list-group","childView":m,"childViewOptions":function(){return{"text":this.options.emptyViewDefaultText,"checkDefaultAction":this.options.checkDefaultAction,"template":this.options.childViewTemplate,"templateHelpers":this.options.childViewTemplateHelpers,"toolbarData":this.options.toolbarData,"context":this.options.context}},"emptyView":r,"_onChildRender":function(e){var t=e.$el;t.is("[data-csui-active]")&&t.addClass("binf-active")},"constructor":function(e){e||(e={}),e.model&&e.model.childrenCollection?e.collection=e.model.childrenCollection:e.collection=new n.Collection,s.CompositeView.call(this,e)},"onRender":function(){this.model&&!0===this.model.get("flatten")&&(this.$el.addClass("flatten-tree"),
this.ui.header.addClass("binf-hidden"),this.collection.length>0&&this.ui.content.removeClass("binf-hidden"),this.$el.removeAttr("role"),this.ui.contentList.removeAttr("role")),this.ui.header.on("click",t.bind(this.onClickHeader,this)),this._setDropdownIconClass(),this.tabPosition=f.none,this.selectedIndex=-1},"onClickHeader":function(e){e.preventDefault(),e.stopPropagation(),this.ui.content.toggleClass("binf-hidden"),this._setDropdownIconClass(),this.ui.header.focus(),this.tabPosition=f.header,this.selectedIndex=-1,this.triggerMethod("click:tree:header",this)},"_setDropdownIconClass":function(){this.ui.content.hasClass("binf-hidden")?(this.ui.headerDropdownIcon.removeClass("icon-expandArrowUp"),this.ui.headerDropdownIcon.addClass("icon-expandArrowDown"),this.ui.headerDropdownIcon.attr("title",p.treeListExpandTooltip),this.model&&!0!==this.model.get("flatten")&&this.$el.attr("aria-expanded","false")):(this.ui.headerDropdownIcon.addClass("icon-expandArrowUp"),this.ui.headerDropdownIcon.removeClass("icon-expandArrowDown"),this.ui.headerDropdownIcon.attr("title",p.treeListCollapseTooltip),this.model&&!0!==this.model.get("flatten")&&this.$el.attr("aria-expanded","true"))},"onClickItem":function(e){e.cancelClick=!1,this.triggerMethod("click:tree:item",e),!1===e.cancelClick&&(this._setCssItemSelected(e.$el),e.$el.focus()),this.tabPosition=f.list,this.selectedIndex=e._index?e._index:-1},"_setCssItemSelected":function(e){if(e instanceof i){e.siblings("[data-csui-active]").removeClass("binf-active").removeAttr("data-csui-active"),e.addClass("binf-active").attr("data-csui-active",""),e.siblings().prop("tabindex","-1")}},"currentlyFocusedElement":function(e){var t;if(e&&!this.ui.content.hasClass("binf-hidden")&&(34===e.keyCode||35===e.keyCode||38===e.keyCode||9===e.keyCode&&e.shiftKey)){var i=this.collection.length-1;if(t=this.getElementByIndex(i))return this.tabPosition=f.list,this.selectedIndex=i,t}if(!this.model||!0!==this.model.get("flatten"))return this.tabPosition=f.header,this.selectedIndex=-1,this.ui.header;if(this.collection.length>0){var n=0;if(e&&38===e.keyCode&&(n=this.collection.length-1),t=this.getElementByIndex(n))return this.tabPosition=f.list,this.selectedIndex=n,t}this.tabPosition=f.none,this.selectedIndex=-1},"_moveTo":function(e,t,i){e.preventDefault(),e.stopPropagation(),this.trigger("before:keyboard:change:focus"),i&&i.prop("tabindex","-1"),t.prop("tabindex","0"),t.focus(),this.trigger("after:keyboard:change:focus")},"onKeyInView":function(e){var t;switch(e.keyCode){case 38:this.tabPosition===f.list&&0===this.selectedIndex?this.model&&!0===this.model.get("flatten")?(this.tabPosition=f.none,this.selectedIndex=-1):(t=this.getElementByIndex(this.selectedIndex),this.tabPosition=f.header,this.selectedIndex=-1,this._moveTo(e,this.ui.header,t)):this.tabPosition===f.list&&this.selectedIndex>0&&(t=this.getElementByIndex(this.selectedIndex),this._moveTo(e,this._selectPrevious(),t));break;case 40:this.ui.content.hasClass("binf-hidden")||this.selectedIndex<this.collection.length-1&&(this.tabPosition=f.list,t=this.getElementByIndex(this.selectedIndex),this._moveTo(e,this._selectNext(),t));break;case 33:case 34:this.tabPosition=f.none,this.selectedIndex=-1;break;case 13:case 32:this._clickTargetByKeyboard(e);break;case 37:if(this.tabPosition!==f.header||this.ui.content.hasClass("binf-hidden")){if(this.tabPosition===f.list){var i=this.model&&this.model.get("flatten");i||(t=this.getElementByIndex(this.selectedIndex),this.tabPosition=f.header,this.selectedIndex=-1,this._moveTo(e,this.ui.header,t))}}else this._clickTargetByKeyboard(e);break;case 39:this.tabPosition===f.header&&(this.ui.content.hasClass("binf-hidden")?this._clickTargetByKeyboard(e):this.collection.length>0&&(this.tabPosition=f.list,this.selectedIndex=0,this._moveTo(e,this.getElementByIndex(this.selectedIndex),this.ui.header)))}return!0},"_clickTargetByKeyboard":function(e){e.preventDefault(),e.stopPropagation(),i(e.target).click()},"_selectNext":function(){return this.selectedIndex<this.collection.length-1&&this.selectedIndex++,this.getElementByIndex(this.selectedIndex)},"_selectPrevious":function(){return this.selectedIndex>0&&this.selectedIndex--,this.getElementByIndex(this.selectedIndex)},"getElementByIndex":function(e){if(isNaN(e)||e<0)return null;var n=t.str.sformat("div a:nth-child({0})",e+1),s=this.$(n);return i(s[0])}})}),csui.define("hbs!csui/controls/list/impl/simpletreelist",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return'<div class="cs-list-group"></div>\r\n'}});return i.registerPartial("csui_controls_list_impl_simpletreelist",n),n}),csui.define("css!csui/controls/list/impl/simpletreelist",[],function(){}),csui.define("csui/controls/list/simpletreelist.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/listitem/simpletreelistitem.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/default.action/default.action.behavior","hbs!csui/controls/list/impl/simpletreelist","css!csui/controls/list/impl/simpletreelist"],function(e,t,i,n,s,o,r,a,l){return n.CollectionView.extend({"constructor":function(t){t||(t={}),this.behaviors&&e.any(this.behaviors,function(e,t){return e.behaviorClass===r})||(this.behaviors=e.extend({"PerfectScrolling":{"behaviorClass":r,"contentParent":"> .cs-content","suppressScrollX":!0,"scrollYMarginOffset":15}},this.behaviors)),n.CollectionView.call(this,t)},"ui":{},"events":{},"childEvents":{"click:item":"onClickItem","render":"_onChildRender"},"className":"cs-simpletreelist binf-panel binf-panel-default","template":l,"childViewContainer":".cs-list-group","childView":o,"childViewOptions":function(){return{"template":this.options.childViewTemplate}},"_onChildRender":function(e){var t=e.$el;t.is("[data-csui-active]")&&t.addClass("binf-active")},"onClickItem":function(e){e.cancelClick=!1,this.trigger("click:item",e),!1===e.cancelClick&&this._setCssItemSelected(e.$el)},"_setCssItemSelected":function(e){if(e instanceof t){e.siblings("[data-csui-active]").removeClass("binf-active").removeAttr("data-csui-active"),e.addClass("binf-active").attr("data-csui-active","")}}})}),csui.define("hbs!csui/controls/listitem/impl/listitemobject",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'  <img class="cs-icon" src="'+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'" alt="">\r\n'},"3":function(e,t,i,n){var s;return'    <div class="cs-key">'+this.escapeExpression((s=null!=(s=t.key||(null!=e?e.key:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"key","hash":{}}):s))+"</div>\r\n"},"5":function(e,t,i,n){var s;return'      <span class="cs-size"> ('+this.escapeExpression((s=null!=(s=t.size||(null!=e?e.size:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"size","hash":{}}):s))+")</span>\r\n"},"7":function(e,t,i,n){var s;return'    <div class="cs-stage">\r\n      <span class="cs-label">'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=(s=null!=e?e.stage:e)?s.label:s,{"name":"csui-l10n","hash":{}}))+'</span>\r\n      <span class="cs-value">'+this.escapeExpression(this.lambda(null!=(s=null!=e?e.stage:e)?s.value:s,e))+"</span>\r\n    </div>\r\n"},"9":function(e,t,i,n){var s;return'    <div class="cs-price '+this.escapeExpression((s=null!=(s=t.priceClass||(null!=e?e.priceClass:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"priceClass","hash":{}}):s))+'">'+this.escapeExpression((s=null!=(s=t.price||(null!=e?e.price:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"price","hash":{}}):s))+'</div>\r\n    <div class="cs-currency">'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=e?e.currency:e,{"name":"csui-l10n","hash":{}}))+"</div>\r\n"},"11":function(e,t,i,n){var s;return'    <div class="cs-date">\r\n      <div class="cs-label">'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=(s=null!=e?e.date:e)?s.label:s,{"name":"csui-l10n","hash":{}}))+'</div>\r\n      <div class="cs-value '+this.escapeExpression(this.lambda(null!=(s=null!=e?e.date:e)?s.class:s,e))+'">'+this.escapeExpression(this.lambda(null!=(s=null!=e?e.date:e)?s.value:s,e))+"</div>\r\n    </div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return(null!=(s=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'\r\n<div class="cs-left">\r\n'+(null!=(s=t.if.call(e,null!=e?e.key:e,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop}))?s:"")+'  <div class="cs-title">\r\n    <span class="cs-name">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"</span>\r\n"+(null!=(s=t.if.call(e,null!=e?e.size:e,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop}))?s:"")+"  </div>\r\n"+(null!=(s=t.if.call(e,null!=(s=null!=e?e.stage:e)?s.value:s,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop}))?s:"")+'</div>\r\n\r\n<div class="cs-right">\r\n'+(null!=(s=t.if.call(e,null!=e?e.price:e,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop}))?s:"")+(null!=(s=t.if.call(e,null!=(s=null!=e?e.date:e)?s.value:s,{"name":"if","hash":{},"fn":this.program(11,n,0),"inverse":this.noop}))?s:"")+"</div>\r\n"}});return i.registerPartial("csui_controls_listitem_impl_listitemobject",n),n}),csui.define("css!csui/controls/listitem/impl/listitemobject",[],function(){}),csui.define("csui/controls/listitem/listitemobject.view",["csui/lib/underscore","csui/lib/marionette","csui/lib/numeral","csui/lib/moment","csui/lib/handlebars","csui/utils/base","hbs!csui/controls/listitem/impl/listitemobject","csui/utils/handlebars/l10n","css!csui/controls/listitem/impl/listitemobject"],function(e,t,i,n,s,o,r){return t.ItemView.extend({"constructor":function(){t.ItemView.apply(this,arguments)},"triggers":{"click":"click:item"},"className":"cs-item-object list-group-item binf-clearfix","template":r,"templateHelpers":function(){return this._getObject(this.options.data||{})},"_getObject":function(t){return e.reduce(t,function(e,t,i){return"string"==typeof t?t=this._getValue(t):"object"==typeof t&&(t=void 0!==t.expression?this._getValue(t):this._getObject(t)),e[i]=t,e},{},this)},"_getValue":function(e){var t;return"string"!=typeof e&&(t=e,e=e.expression),e=this._replacePlaceholders(e),t&&(e=this._applyValueRanges(e,t),e=this._applyValueMap(e,t)),e},"_replacePlaceholders":function(t){for(var i,n,s,o=/{([^}]+)}/g;i=o.exec(t);)n=i[1].split("."),s=this.model.attributes,e.find(n,function(e){if(null==(s=s[e]))return s="",!0}),t=t.substring(0,i.index)+s+t.substring(i.index+i[0].length);return t},"_applyValueMap":function(e,t){var i=t.valueMap;return i&&null==(e=i[e])&&(e=i["*"]),e},"_applyValueRanges":function(t,n){var s=n.valueRanges;if(s){var r;r="Date"===n.type?function(e){return o.parseDate(e)}:function(e){return i(e).value()},t=r(t),e.find(s,function(e){var i=e.greaterOrEqual;if(void 0!==i&&(i=r(i))>t)return!1;var n=e.lessThan;return!(void 0!==n&&(n=r(n))<=t)&&(t=e.value,!0)})}return t}})}),csui.define("hbs!csui/controls/listitem/impl/listitemstateful",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s;return'<span class="csui-type-icon '+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'"></span>'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s,o;return'<div class="SLIIcon">\r\n      '+(null!=(s=t.if.call(e,null!=e?e.enableIcon:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop}))?s:"")+'\r\n</div>\r\n<div class="SLIRightDiv">\r\n  <div class="SLITitleDiv">\r\n    <div class="SLITitle">\r\n      <span title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'</span>\r\n    </div>\r\n    <div class="SLIDescription">\r\n      <span title="'+this.escapeExpression((o=null!=(o=t.description||(null!=e?e.description:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"description","hash":{}}):o))+'" aria-hidden="true">'+this.escapeExpression((o=null!=(o=t.description||(null!=e?e.description:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"description","hash":{}}):o))+'</span>\r\n    </div>\r\n  </div>\r\n  <div class="SLIInfo SLIInfo'+this.escapeExpression((o=null!=(o=t.infoState||(null!=e?e.infoState:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"infoState","hash":{}}):o))+'">\r\n    <span title="'+this.escapeExpression((o=null!=(o=t.info||(null!=e?e.info:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"info","hash":{}}):o))+'" aria-hidden="true">'+this.escapeExpression((o=null!=(o=t.info||(null!=e?e.info:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"info","hash":{}}):o))+"</span>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_listitem_impl_listitemstateful",n),n}),csui.define("css!csui/controls/listitem/impl/listitemstateful",[],function(){}),csui.define("csui/controls/listitem/listitemstateful.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/listitem/listitemstandard.view","hbs!csui/controls/listitem/impl/listitemstateful","css!csui/controls/listitem/impl/listitemstateful"],function(e,t,i,n,s){return n.extend({"className":"SLI binf-list-group-item","template":s,"constructor":function(){n.apply(this,arguments)}})}),csui.define("hbs!csui/controls/toolbar/toolitem",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n){var s;return null!=(s=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.program(18,n,0)}))?s:""},"4":function(e,t,i,n){var s;return null!=(s=t.if.call(e,null!=e?e.renderIconAndText:e,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.program(7,n,0)}))?s:""},"5":function(e,t,i,n){var s;return'      <a title="'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+'" href="#" class="csui-toolitem" tabindex="-1" data-cstabindex="-1">\r\n        <span class="'+this.escapeExpression((s=null!=(s=t.icon||(null!=e?e.icon:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"icon","hash":{}}):s))+'" data-cstabindex="-1"></span>'+this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"name","hash":{}}):s))+"\r\n      </a>\r\n"},"7":function(e,t,i,n){var s;return null!=(s=t.if.call(e,null!=e?e.renderTextOnly:e,{"name":"if","hash":{},"fn":this.program(8,n,0),"inverse":this.program(11,n,0)}))?s:""},"8":function(e,t,i,n){var s,o;return'        <a href="#" class="csui-toolitem" data-cstabindex="-1" title="'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"\r\n"+(null!=(s=t.if.call(e,null!=e?e.menuWithMoreOptions:e,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop}))?s:"")+"        </a>\r\n"},"9":function(e,t,i,n){return'            <span class="csui-button-icon csui-icon-rightArrow icon-expandArrowUp" data-cstabindex="-1"></span>\r\n'},"11":function(e,t,i,n){var s,o;return'        <a href="#" title="'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'" class="csui-toolitem"\r\n           data-cstabindex="-1" '+(null!=(s=t.if.call(e,null!=e?e.toolItemAria:e,{"name":"if","hash":{},"fn":this.program(12,n,0),"inverse":this.program(14,n,0)}))?s:"")+"\r\n          "+(null!=(s=t.if.call(e,null!=e?e.hasToolItemAriaExpand:e,{"name":"if","hash":{},"fn":this.program(16,n,0),"inverse":this.noop}))?s:"")+'>\r\n          <span class="'+this.escapeExpression((o=null!=(o=t.icon||(null!=e?e.icon:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"icon","hash":{}}):o))+'" data-cstabindex="-1"></span>\r\n        </a>\r\n'},"12":function(e,t,i,n){var s;return'aria-label="'+this.escapeExpression((s=null!=(s=t.toolItemAria||(null!=e?e.toolItemAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"toolItemAria","hash":{}}):s))+'" '},"14":function(e,t,i,n){var s;return'\r\n           aria-label="'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+'" '},"16":function(e,t,i,n){var s;return'aria-expanded="'+this.escapeExpression((s=null!=(s=t.toolItemAriaExpand||(null!=e?e.toolItemAriaExpand:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"toolItemAriaExpand","hash":{}}):s))+'" '},"18":function(e,t,i,n){var s,o;return'    <a href="#" class="csui-toolitem" data-cstabindex="-1" title="'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"\r\n"+(null!=(s=t.if.call(e,null!=e?e.menuWithMoreOptions:e,{"name":"if","hash":{},"fn":this.program(19,n,0),"inverse":this.noop}))?s:"")+"    </a>\r\n"},"19":function(e,t,i,n){return'        <span class="csui-button-icon csui-icon-rightArrow icon-expandArrowUp" data-cstabindex="-1"></span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return null!=(s=t.if.call(e,null!=e?e.isSeparator:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.program(3,n,0)}))?s:""}});return i.registerPartial("csui_controls_toolbar_toolitem",n),n}),csui.define("csui/controls/toolbar/toolitem.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/toolbar/toolitem","csui/lib/binf/js/binf"],function(e,t,i,n){"use strict";return i.ItemView.extend({"tagName":"li","className":function(){var e=this.model.get("className")||"";return this.model.isSeparator()&&(e+=" binf-divider"),e},"attributes":function(){var e={};if(this.model.isSeparator())e["aria-hidden"]="true";else{var t=this.model.get("signature")||"";e["data-csui-command"]=t.toLowerCase()}return this.options.role?e.role=this.options.role:e.role="menuitem",e},"template":n,"templateHelpers":function(){var e={"renderIconAndText":!0===this.options.renderIconAndText,"renderTextOnly":!0===this.options.renderTextOnly,"isSeparator":this.model.isSeparator(),"toolItemAria":this.model.get("toolItemAria"),"hasToolItemAriaExpand":void 0!==this.model.get("toolItemAriaExpand"),"toolItemAriaExpand":this.model.get("toolItemAriaExpand")};return e.title=this.model.get("title")?this.model.get("title"):this.model.get("name"),e},"events":{"click a":"_handleClick","keydown":"onKeyInView"},"constructor":function(e){this.options=e||{},i.ItemView.prototype.constructor.apply(this,arguments)},"onKeyInView":function(t){e(t.target);if(13===t.keyCode||32===t.keyCode)return this._handleClick(t),!1},"renderIconAndText":function(){this.options.renderIconAndText=!0,this.render(),this.options.renderIconAndText=!1},"renderTextOnly":function(){this.options.renderTextOnly=!0,this.render(),this.options.renderTextOnly=!1},"isSeparator":function(){return this.model.isSeparator()},"closeDropdown":function(){this.$el.closest("li.binf-dropdown.binf-open").find(".binf-dropdown-toggle").binf_dropdown("toggle")},"_handleClick":function(e){e.preventDefault(),!0===this.model.get("menuWithMoreOptions")?e.stopPropagation():this.closeDropdown();var t={"toolItem":this.model};this.triggerMethod("before:toolitem:action",t),t.cancel||this.triggerMethod("toolitem:action",t)}})}),csui.define("hbs!csui/controls/toolbar/impl/flyout.toolitem",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n){var s,o;return'  <a href="#" class="csui-toolitem '+(null!=(s=t.if.call(e,null!=e?e.disabled:e,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop}))?s:"")+'" title ='+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+' data-cstabindex="-1">\r\n    <span>'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+"</span>\r\n  </a>\r\n"},"2":function(e,t,i,n){return"binf-disabled"},"4":function(e,t,i,n){var s;return'  <a href="#" class="csui-toolitem csui-flyout-arrow" title='+this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"name","hash":{}}):s))+' data-binf-toggle="dropdown" role="button"\r\n     aria-label="'+this.escapeExpression((s=null!=(s=t.expandTitle||(null!=e?e.expandTitle:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"expandTitle","hash":{}}):s))+'" aria-expanded="false" data-cstabindex="-1">\r\n    <span>'+this.escapeExpression((s=null!=(s=t.name||(null!=e?e.name:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"name","hash":{}}):s))+'</span>\r\n    <span class="csui-button-icon icon-expandArrowDown" title="'+this.escapeExpression((s=null!=(s=t.expandTitle||(null!=e?e.expandTitle:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"expandTitle","hash":{}}):s))+'"></span>\r\n  </a>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return(null!=(s=t.if.call(e,null!=e?e.flyoutArrowDisabled:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.program(4,n,0)}))?s:"")+'<ul class="binf-dropdown-menu" role="menu"></ul>\r\n\r\n\r\n'}});return i.registerPartial("csui_controls_toolbar_impl_flyout.toolitem",n),n}),csui.define("csui/controls/toolbar/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/toolbar/impl/nls/root/localized.strings",{"loadingActionsMessage":"Loading actions...","failedActionsMessage":"Loading actions failed.","showMoreLabel":"show more actions"}),csui.define("csui/controls/toolbar/flyout.toolitem.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/toolbar/toolitem.view","hbs!csui/controls/toolbar/impl/flyout.toolitem","i18n!csui/controls/toolbar/impl/nls/localized.strings"],function(e,t,i,n,s,o){"use strict";var r=n.extend({"constructor":function(){n.prototype.constructor.apply(this,arguments),this.listenTo(this,"render",this._promote)},"_promote":function(){var e=this.model.get("promoted")?"addClass":"removeClass";this.$el[e]("csui-promoted")}});return i.CompositeView.extend({"tagName":"li","className":"csui-flyout binf-dropdown","attributes":function(){return{"data-csui-command":(this.model.get("signature")||"").toLowerCase()}},"template":s,"templateHelpers":function(){var e=this.model.get("name"),t=this.model.get("promoted")||this.model.toolItems.findWhere({"promoted":!0}),i=this.model.toolItems.length<=1;return e||(e=(t||this.model.toolItems.first()).get("name")),{"name":e,"disabled":!t,"expandTitle":o.showMoreLabel,"flyoutArrowDisabled":i}},"childViewContainer":".binf-dropdown-menu","childView":r,"childEvents":{"toolitem:action":function(e,t){this.triggerMethod("toolitem:action",t)}},"events":{"click > a":function(e){if(e.preventDefault(),this.model.toolItems.length<=1)if(this.model.get("promoted")){var t={"toolItem":this.model};this.triggerMethod("toolitem:action",t)}else{var i=this.model.toolItems.findWhere({"promoted":!0});i&&this.triggerMethod("toolitem:action")}}},"constructor":function(){i.CompositeView.prototype.constructor.apply(this,arguments),this.listenTo(this.collection,"add change reset",function(e){this.render()})},"onKeyInView":function(e){t(e.target);if(13===e.keyCode)return this._handleClick(e),!1}})}),csui.define("hbs!csui/controls/toolbar/impl/toolitem.custom",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return"<div class='custom-view-region'></div>\r\n"}});return i.registerPartial("csui_controls_toolbar_impl_toolitem.custom",n),n}),csui.define("csui/controls/toolbar/toolitem.custom.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/commandhelper","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","hbs!csui/controls/toolbar/impl/toolitem.custom","csui/lib/binf/js/binf"],function(e,t,i,n,s,o){var r=i.LayoutView.extend({"tagName":"li","attributes":function(){return{"id":this.model.get("signature")}},"template":o,"regions":{"customViewRegion":".custom-view-region"},"ui":{"customViewDiv":".custom-view-region"},"events":{"keydown":"onKeyInView","click":"_clickToolItem"},"constructor":function(e){e||(e={}),i.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"className":function(){return this.model.get("className")||""},"_disable":function(){this.$el.addClass("binf-hidden"),this.ui.customViewDiv.removeClass("csui-acc-focusable")},"onRender":function(){var e=this.model.get("viewClass");if(e){var i,s=this.model.status,o=this.model.get("commandData");i=o&&!0===o.useContainer?s&&s.container:s&&n.getJustOneNode(s);var r=this.options.context||s&&s.context,a={"model":i,"context":r,"status":s,"toolbarCommandController":this.options.toolbarCommandController,"toolbarItemsMask":this.options.toolbarItemsMask,"originatingView":this.options.originatingView,"blockingParentView":this.options.blockingParentView};o&&o.viewOptions&&t.extend(a,o.viewOptions),this.customView=new e(a),this.customView.enabled?this.customView.enabled()?(this.customView.render(),this.customViewRegion.show(this.customView)):this._disable():(this.customView.render(),this.customViewRegion.show(this.customView))}else this._disable()},"onShow":function(){t.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("show")})},"onAfterShow":function(){t.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("after:show")})},"_clickToolItem":function(e){e.preventDefault(),this.ui.customViewDiv.prop("tabindex","0"),this.ui.customViewDiv.focus(),this._closeDropdownToggleOnClick(),this.customView.el!==e.target&&0===this.customView.$el.find(e.target).length&&this.customView.$el.click()},"_closeDropdownToggleOnClick":function(){this.$el.closest("li.binf-dropdown.binf-open").find(".binf-dropdown-toggle").binf_dropdown("toggle")},"onKeyInView":function(t){e(t.target);32!==t.keyCode&&13!==t.keyCode||this._clickToolItem(t)}});return t.extend(r.prototype,s),r}),csui.define("csui/controls/toolbar/toolitem.model",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";var i=t.Model.extend({"idAttribute":null,"isSeparator":function(){return this.get("signature")==i.separator_signature}});return i.createSeparator=function(){return new i({"signature":i.separator_signature})},i.separator_signature="-",i}),csui.define("csui/controls/toolbar/toolitems.factory",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/toolbar/toolitem.model"],function(e,t,i,n,s){"use strict";return i.Object.extend({"constructor":function(e,o){this.collection=new t.Collection([],{"model":s}),this.runsInTouchBrowser=o&&void 0!==o.runsInTouchBrowser?o.runsInTouchBrowser:n.isTouchBrowser(),this.set(e),i.Object.prototype.constructor.call(this,o)},"set":function(t){e.isArray(t)?e.each(t,function(e){this._setToolItemDefinition(e)},this):this._setToolItemDefinition(t)},"addItem":function(e){var t,i=e.get("group"),n=!1;e.get("onlyInTouchBrowser")&&this.runsInTouchBrowser||(this.collection.find(function(e,s){if(e.get("group")===i)n=!0;else if(n)return t=s,!0}),n&&t?this.collection.add(e,{"at":t}):this.collection.add(e))},"reset":function(e){this.collection.reset(e)},"getCollection":function(){return this.collection},"_setToolItemDefinition":function(t){var i=this.runsInTouchBrowser;if(0===this.collection.length){var n=[];e.each(t,function(t,s){n.push({"signature":"disabled","group":s}),e.each(t,function(t){t.onlyInTouchBrowser&&!i||(e.extend(t,{"group":s}),n.push(t))})}),this.collection.reset(n)}}})}),csui.define("csui/controls/toolbar/toolitems.filtered.model",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/controls/toolbar/toolitem.model","csui/controls/toolbar/toolitems.factory","csui/utils/commands"],function(e,t,i,n,s,o,r){"use strict";return n.Collection.extend({"constructor":function(e,i){if(t.isArray(e))this.unfilteredModels=e;else if(e instanceof o){this.addTrailingDivider=e.options.addTrailingDivider,this.addGroupSeparators=!1!==e.options.addGroupSeparators,this.suppressGroupSeparators=e.options.suppressGroupSeparators;var a=e.getCollection();this.unfilteredModels=a.models,this.listenTo(a,"add",this.refilter,this).listenTo(a,"remove",this.refilter,this).listenTo(a,"reset",function(){this.unfilteredModels=a.models,this.refilter()},this)}else e instanceof n.Collection&&e.model instanceof s&&(this.unfilteredModels=e.models);i||(i={}),this.commands=i.commands||r,this.setStatus(i.status),this.delayedActions=i.delayedActions,this.mask=i.mask,this._filtering=0,n.Collection.prototype.constructor.call(this,this.unfilteredModels,i),this.delayedActions&&this.listenTo(this.delayedActions,"sync",this.refilter).listenTo(this.delayedActions,"error",this.refilter),this.mask&&this.listenTo(this.mask,"update",this.refilter)},"sort":function(e){e||(e={});var t=this.models,i=function(e,i){var n=!!t[e].get("csuiNonPromotedItem"),s=!!t[i].get("csuiNonPromotedItem");return!n&&s?-1:n&&!s?1:e-i};return this.models=t.map(function(e,t){return t}).sort(i).map(function(e){return t[e]}),e.silent||this.trigger("sort",this,e),this},"destroy":function(){this.stopListening()},"refilter":function(){function e(){var e=this.filterModels(this.unfilteredModels);this.reset(e,{"silent":!!this.silentFetch}),this.silentFetch=!1,--this._filtering}if(!this._filtering){++this._filtering;var t=this._resolveCustomViews();t?t.always(e.bind(this)):e.call(this)}},"set":function(e,t){return this._filtering||(e=this.filterModels(e)),n.Collection.prototype.set.call(this,e,t)},"setStatus":function(e){if(e){if(this.status&&(this.status.nodes&&(this.status.nodes.remove(this.status.container),this.stopListening(this.status.nodes)),this.status.container&&this.stopListening(this.status.container)),this.status=e,e.nodes){var i=["change","reset"];i=t.union(i,e.listenEvents);var n=i.join(" ");this.listenTo(e.nodes,n,this.refilter)}e.container&&this.listenTo(e.container,"change",this.refilter)}},"filterModels":function(e){if(this.delayedActions&&(this.delayedActions.fetching||this.delayedActions.error)||!this.status)return[];++this._filtering;var i=this._filterToolItems(e);return i=t.reject(i,function(e){return e.get("flyout")&&!1===e.get("promoted")&&!e.toolItems.length}),t.each(i,function(e){if(e.get("flyout")&&1===e.toolItems.length&&e.toolItems.first().get("promoted")){var t=e.get("name");e.set(e.toolItems.first().attributes),t&&e.set("name",t)}}),--this._filtering,i},"_filterToolItems":function(e){var i=new n.Collection(void 0,{"model":s});return t.each(e,function(e){if(!this.mask||this.mask.passItem(e)){e=e.clone();var o=e.get("flyout"),r=i;if(o){var a=i.findWhere({"flyout":o})
;a?r=a.toolItems:e.toolItems=new n.Collection(void 0,{"model":s})}var l=this.commands.get(e.get("signature")),c=e.get("enabled");if(l){var u=t.extend({},this.status.data,e.get("commandData")),d=t.defaults({"toolItem":e,"data":u},this.status);if(l.isNonPromoted&&l.isNonPromoted(d)&&e.set("csuiNonPromotedItem",!0),!l.enabled||l.enabled(d,{"data":e.get("commandData")})||c){if(o){var h=e.get("actions");h&&(h=new n.Collection(h,{"model":s}),h=this._filterToolItems(h.models),e.toolItems.reset(h))}}else e=null}else e.toolItems||c||(e=null);if(e){var p=e.get("group"),f=r.findLastIndex(function(e){return e.get("group")===p});f<0?(r.length>0&&this.addGroupSeparators&&(!this.suppressGroupSeparators||-1===this.suppressGroupSeparators.indexOf(p))&&r.push(s.createSeparator()),r.push(e)):r.add(e,{"at":f+1}),e.status=this.status}}},this),i.models},"_resolveCustomViews":function(){var t=this.unfilteredModels.filter(function(e){return"string"==typeof e.get("customView")});if(t.length){var n=t.map(function(e){return e.get("customView")}),s=i.Deferred();return e(n,function(){for(var e=0,i=n.length;e<i;++e)t[e].set("customView",arguments[e]);s.resolve()},function(e){for(var i=0,o=n.length;i<o;++i)t[i].set("customView",e);s.reject(e)}),s.promise()}}})}),csui.define("hbs!csui/controls/toolbar/impl/lazy.loading.template",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return'<li role="menuitem" class="csui-loading-parent-wrapper binf-disabled csui-disbaled">\r\n  <span class="csui-loading-dots-wrapper">\r\n    <span class="csui-loading-dot"></span>\r\n    <span class="csui-loading-dot"></span>\r\n    <span class="csui-loading-dot"></span>\r\n  </span>\r\n</li>'}});return i.registerPartial("csui_controls_toolbar_impl_lazy.loading.template",n),n}),csui.define("css!csui/controls/toolbar/impl/toolbar",[],function(){}),csui.define("csui/controls/toolbar/toolbar.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/toolbar/toolitem.view","csui/controls/toolbar/flyout.toolitem.view","csui/controls/toolbar/toolitem.custom.view","csui/models/nodes","csui/controls/toolbar/toolitems.filtered.model","hbs!csui/controls/toolbar/impl/lazy.loading.template","css!csui/controls/toolbar/impl/toolbar"],function(e,t,i,n,s,o,r,a,l,c){"use strict";return n.CollectionView.extend({"tagName":"ul","parentScrollElement":".csui-metadata-myattachments","className":function(){var e="csui-align-left";return this.options.hAlign&&("right"===this.options.hAlign?e="csui-align-right":"none"===this.options.hAlign&&(e="")),"csui-toolbar binf-nav binf-nav-pills "+e},"attributes":function(){var e={};return this.options.role&&(e.role=this.options.role),e},"events":{"keydown":"onKeyInView"},"getChildView":function(e){var t=e.get("customView"),n=e.get("viewClass");if(!0===t&&n&&n.prototype instanceof i.View)return r;if(t){if(!0===t)return e.get("commandData").customView||s;if(t.prototype instanceof i.View)return t}return e.get("flyout")?o:s},"childViewOptions":function(e){return{"collection":e.toolItems,"toolbarCommandController":this.options.toolbarCommandController,"toolbarItemsMask":this.options.toolbarItemsMask,"originatingView":this.options.originatingView,"blockingParentView":this.options.blockingParentView}},"constructor":function(i){i||(i={}),this.parentScrollElement=i.parentScrollElement||this.parentScrollElement,n.CollectionView.prototype.constructor.apply(this,arguments),i.el&&t(i.el).addClass(e.result(this,"className")),this.listenTo(this,"dom:refresh",this._onDomRefresh).listenTo(this,"before:execute:command",this._setBlocked).listenTo(this,"after:execute:command",this._setUnblocked),i.keyboardNavigationEnabled&&(this._keyboardNavigationEnabled=!0,this.listenTo(this.collection,"remove",function(){this._accFocusedToolbarItemIndex>this.collection.length-1&&(this._accFocusedToolbarItemIndex=this.collection.length-1)}),this.listenTo(this.collection,"reset",function(){this._accFocusedToolbarItemIndex=this.collection.length>0?0:-1}),this._accFocusedToolbarItemIndex=this.collection.length>0?0:-1),this.fetchingNonPromotedActions=!1,t(window).on("resize."+this.cid,this._handleWindowResize.bind(this))},"filter":function(e){return!e.isSeparator()},"_onDomRefresh":function(){this._adjusting||this._adjustToFit()},"onBeforeRender":function(){this._unwrapDropDown()},"onRender":function(){this._toolbarBlocked&&this.$el.addClass("binf-disabled")},"onDestroy":function(){t(window).off("resize."+this.cid)},"_getFocusedElementByIndex":function(e){var t=e+1;return this.$el.find(">li:nth-child("+t+")>a.csui-acc-focusable")},"getVisibleToolitemsCount":function(){return this.$el.find(">li>a.csui-acc-focusable").length},"currentlyFocusedElement":function(){return this._keyboardNavigationEnabled&&this._accFocusedToolbarItemIndex>=0?this._getFocusedElementByIndex(this._accFocusedToolbarItemIndex):t()},"setFocusByIndex":function(e){this._getFocusedElementByIndex(e).focus()},"letRightmostItemGetFocus":function(){this._accFocusedToolbarItemIndex=this.collection.length-1},"closeDropdown":function(){this.children.call("closeDropdown")},"onKeyInView":function(e){if(this._keyboardNavigationEnabled&&0!==this.collection.length)switch(e.keyCode){case 37:e.stopPropagation(),this._accFocusedToolbarItemIndex>0?(this._accFocusedToolbarItemIndex=this._accFocusedToolbarItemIndex-1,this.triggerMethod("changed:focus")):(this._accFocusedToolbarItemIndex=0,this.triggerMethod("focusout",{"direction":"left"}));break;case 39:e.stopPropagation(),this._accFocusedToolbarItemIndex<this.collection.length-1?(this._accFocusedToolbarItemIndex=this._accFocusedToolbarItemIndex+1,this.triggerMethod("changed:focus")):(this._accFocusedToolbarItemIndex=this.collection.length-1,this.triggerMethod("focusout",{"direction":"right"}))}},"_handleWindowResize":function(){if(this._handleWindowResizeTimeout&&clearTimeout(this._handleWindowResizeTimeout),!this.isDestroyed){var e=this;this._handleWindowResizeTimeout=setTimeout(function(){e._handleWindowResizeTimeout=void 0;var t=void 0===e.options.originatingView||e.options.originatingView.isDisplayed;!e.isDestroyed&&t&&e.render()},100),this._adjustToFit()}},"_setBlocked":function(){var e=this;this._blockedTimer=setTimeout(function(){!1===e._toolbarBlocked&&e.$el.removeClass("binf-disabled"),e._blockedTimer=void 0},500),this._toolbarBlocked=!0,this.$el.addClass("binf-disabled")},"_setUnblocked":function(e){if(this._toolbarBlocked=!1,!this._blockedTimer&&(this.$el.removeClass("binf-disabled"),e&&e.cancelled)){var t=this.$el.find("[data-csui-command="+e.commandSignature.toLowerCase()+"] a"),i=t.length?t.closest("ul.csui-more-dropdown-menu"):{};i.length?i.siblings("a.binf-dropdown-toggle").focus():t.focus()}},"_adjustToFit":function(){if(this.$el.is(":visible")){if(this._unwrapDropDown(),this._adjusting=!0,this.$el.addClass("csui-measuring"),this.children.length>0){var t=e.sortBy(this.children.toArray(),"cid"),n=t[0].$el.offset().top,r=this.$el[0].getBoundingClientRect()?this.$el[0].getBoundingClientRect().width:this.$el.width();if(this.options.toolbarItemViewOptions={"toolItemCounter":0,"pEl":void 0,"pIsSeparator":void 0,"ppEl":void 0,"dropDownMenuEl":void 0,"currentRight":0,"rightMost":r,"firstOffsetY":n,"index":0},e.chain(t).filter(function(e){return e instanceof s||e instanceof o}).each(function(e,t){this.options.toolbarItemViewOptions.index=t,this._wrapToolItemView(e)},this),this.options.lazyActions&&t.length&&e.filter(t,function(e){return e instanceof s||e instanceof o}).length){var l,u=!0,d=!0,h=[];if(l=this.collection.status.nodes instanceof a?this.collection.status.nodes:this.collection.status.nodes instanceof i.Collection?new a(this.collection.status.nodes.models):e.isArray(this.collection.status.nodes)?new a(this.collection.status.nodes):new a,l.connector||(l.connector=this.collection.status.collection.connector),l.each(function(e){u=u&&e.get("csuiLazyActionsRetrieved"),d=d&&e.isLocallyCreated,h=h.length?h:e.nonPromotedActionCommands}),l.nonPromotedActionCommands=h,l.lazyActionsRetrieved=u,!u&&!d&&h.length&&(this.fetchingNonPromotedActions||this._renderLazyActions(l),!this.$el.find(".csui-loading-parent-wrapper").length)){if(this.$el.find(".csui-more-dropdown-menu").length)this.$el.find(".binf-dropdown.csui-more-dropdown-wrapper").addClass("csui-toolbar-hide-child");else{var p=this.options.toolbarItemViewOptions.currentRight+10+46;(this.options.toolbarItemViewOptions.toolItemCounter===this.options.maxItemsShown||p>this.options.toolbarItemViewOptions.rightMost)&&this.$el.find("li:last").addClass("csui-toolbar-hide-child")}this.$el.append(c)}}}this.$el.removeClass("csui-measuring"),this._adjusting=!1}},"_wrapToolItemView":function(e){var t=e.model.isSeparator();if(t||this.options.toolbarItemViewOptions.toolItemCounter++,this.options.toolbarItemViewOptions.dropDownMenuEl)t&&this.options.toolbarItemViewOptions.index+1===this.children.length||(e.$el.attr("role","menuitem"),e.$el.find(".csui-flyout-arrow").addClass("binf-hidden"),e.$el.find(".csui-flyout-arrow-enabled").removeClass("csui-flyout-arrow-enabled"),this.options.toolbarItemViewOptions.dropDownMenuEl.append(e.$el));else{if(!t){var i=e.$el.offset().top,n=e.$el[0].getBoundingClientRect()?e.$el[0].getBoundingClientRect().width:e.$el.width();if(this.options.toolbarItemViewOptions.currentRight=this.options.toolbarItemViewOptions.currentRight+parseInt(n,10),i!==this.options.toolbarItemViewOptions.firstOffsetY||this.options.toolbarItemViewOptions.currentRight>this.options.toolbarItemViewOptions.rightMost||this.options.toolbarItemViewOptions.toolItemCounter>this.options.maxItemsShown)this.options.toolbarItemViewOptions.pIsSeparator?this.options.toolbarItemViewOptions.ppEl&&(this.options.toolbarItemViewOptions.ppEl.attr("role","menuitem"),this.options.toolbarItemViewOptions.dropDownMenuEl=this._wrapWithDropDown(this.options.toolbarItemViewOptions.ppEl,e),this.options.toolbarItemViewOptions.dropDownMenuEl.children().first().after(this.options.toolbarItemViewOptions.pEl)):this.options.toolbarItemViewOptions.pEl?(this.options.toolbarItemViewOptions.pEl.attr("role","menuitem"),this.options.toolbarItemViewOptions.dropDownMenuEl=this._wrapWithDropDown(this.options.toolbarItemViewOptions.pEl,e)):this.options.toolbarItemViewOptions.dropDownMenuEl=this._wrapWithDropDown(e.$el,e);else{e.$el.find("a.csui-toolitem").addClass("csui-acc-focusable")}}this.options.toolbarItemViewOptions.ppEl=this.options.toolbarItemViewOptions.pEl,this.options.toolbarItemViewOptions.pEl=e.$el,this.options.toolbarItemViewOptions.pIsSeparator=t}},"_wrapWithDropDown":function(t,i){t.wrap('<li class="binf-dropdown csui-wrapper csui-more-dropdown-wrapper"><ul class="binf-dropdown-menu csui-more-dropdown-menu" role="menu"></ul></li>');var n=this._makeDropDown(),s=this.$("li.csui-wrapper");s.prepend(n);var o=s.find("> ul.binf-dropdown-menu");i.$el.attr("role","menuitem"),i.$el.find(".csui-flyout-arrow").addClass("binf-hidden"),i.$el.find(".csui-flyout-arrow-enabled").removeClass("csui-flyout-arrow-enabled"),o.append(i.$el);var r=this;return this.$el.on({"show.binf.dropdown":e.bind(function(){var e=o.closest(r.parentScrollElement);if(e&&e.length>0){var t=e.height(),i=parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"));if(o.height()+i>t){var n=t-i;o.css({"overflow":"hidden","padding":"0","max-height":n+"px"}),setTimeout(function(){o.perfectScrollbar({"suppressScrollX":!0}),o.perfectScrollbar("update")},1)}}},r)}),o},"_unwrapDropDown":function(){var e=this.$("li.csui-wrapper"),i=e.find("> ul.binf-dropdown-menu"),n=this.$el.find(".csui-loading-parent-wrapper");if(n&&n.remove(),i.length>0){i.children().each(function(i,n){t(n).removeAttr("role"),e.before(n)}),e.remove()}},"_makeDropDown":function(){var e='<a href="#" class="binf-dropdown-toggle csui-acc-focusable" data-binf-toggle="dropdown" aria-expanded="false" aria-haspopup="true"';return this.options.dropDownText?e+=' title="'+this.options.dropDownText+'" aria-label="'+this.options.dropDownText+'">':e+=">",this.options.dropDownIcon?e+='<span class="'+this.options.dropDownIcon+'"></span>':this.options.dropDownText&&(e+=this.options.dropDownText),e+="</a>"},"_renderLazyActions":function(t){if(!t.lazyActionsRetrieved){var i=this;this.fetchingNonPromotedActions=!0,t.setEnabledLazyActionCommands(!0).done(e.bind(function(){i.fetchingNonPromotedActions=!1;var t=i.$el.find(".csui-loading-parent-wrapper");t.animate("width: 0",300,function(){t.remove(),i.$el.find(".csui-toolbar-hide-child").removeClass("csui-toolbar-hide-child"),i.collection.silentFetch=!0,i.collection.refilter();var n=0;e.each(i.collection.models,function(t){var r=e.sortBy(i.children.toArray(),"cid"),a=r[n],l=t.get("signature");if(a&&a instanceof o)t.get("flyout")&&t.toolItems.length!==a.model.toolItems.length&&a.collection.reset(t.toolItems.models),n++;else if(a&&a.model.get("signature")===l)n++;else{i.options.toolbarItemViewOptions.index++;var c=t.get("flyout")?o:s,u=i.addChild(t,c,i.options.toolbarItemViewOptions.index);i._wrapToolItemView(u)}}),i.triggerMethod("dom:refresh"),i.trigger("render:lazy:actions")})}),this)}}})}),csui.define("csui/controls/toolbar/toolbar.command.controller",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/commandhelper","csui/utils/commands"],function(e,t,i,n,s){"use strict";function o(e){e||(e={}),this.commands=e.commands||s,this.nameAttribute=e.nameAttribute}return e.extend(o.prototype,i.Events,{"toolitemClicked":function(t,s){var o=t.get("signature"),r=this.commands.findWhere({"signature":o}),a=t.get("name"),l=t.get("type"),c=e.extend({},s.data,t.get("commandData"));s=e.defaults({"toolItem":t,"data":c},s);var u={"status":s,"commandSignature":o,"addableType":l,"addableTypeName":a,"command":r};this.trigger("before:execute:command",u),i.trigger("closeToggleAction");var d=this;d.commandSignature=o;try{var h={"context":s.context,"addableType":l,"addableTypeName":a,"nameAttribute":d.nameAttribute},p=r.execute(s,h);n.handleExecutionResults(p,{"command":r,"suppressSuccessMessage":s.forwardToTable||s.suppressSuccessMessage,"suppressFailMessage":s.suppressFailMessage}).done(function(e){e&&!e[0].cancelled&&(u.newNodes=e,d.trigger("after:execute:command",u))}).fail(function(e){void 0===e&&(e={"cancelled":!0,"commandSignature":d.commandSignature}),d.trigger("after:execute:command",e)})}catch(e){d.trigger("after:execute:command",u)}}}),o.extend=i.View.extend,o}),csui.define("csui/controls/toolbar/toolitems.mask",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";function i(e,t){t||(t={}),!1!==t.normalize&&(e=this._normalizeMask(e)),this.blacklist=e.blacklist,this.whitelist=e.whitelist,this.storeMask()}return e.extend(i.prototype,t.Events,{"toJSON":function(){return{"blacklist":e.clone(this.blacklist),"whitelist":e.clone(this.whitelist)}},"clone":function(){return new this.constructor(this)},"clearMask":function(e){var t=this.blacklist.length||this.whitelist.length;return this.blacklist.splice(0),this.whitelist.splice(0),!t||e&&e.silent||this.trigger("update",this),t},"extendMask":function(e,t){t||(t={}),!1!==t.normalize&&(e=this._normalizeMask(e));var i=this._extendList(this.blacklist,e.blacklist);return i=this._extendList(this.whitelist,e.whitelist)||i,i&&!t.silent&&this.trigger("update",this),i},"resetMask":function(e,t){t||(t={}),!1!==t.normalize&&(e=this._normalizeMask(e));var i=this._replaceList(this.blacklist,e.blacklist);return i=this._replaceList(this.whitelist,e.whitelist)||i,i&&!t.silent&&this.trigger("update",this),i},"storeMask":function(){this.originalBlacklist=e.clone(this.blacklist),this.originalWhitelist=e.clone(this.whitelist)},"restoreMask":function(e){return e||(e={}),this.resetMask({"blacklist":this.originalBlacklist,"whitelist":this.originalWhitelist},{"silent":e.silent,"normalize":!1})},"restoreAndResetMask":function(e,t){t||(t={}),!1!==t.normalize&&(e=this._normalizeMask(e));var i=this.restoreMask({"silent":!0});return i=this.extendMask(e,{"silent":!0,"normalize":!1})||i,i&&!t.silent&&this.trigger("update",this),i},"maskItems":function(i){return i instanceof t.Collection&&(i=i.models),e.filter(i,this.passItem,this)},"passItem":function(e){return e instanceof t.Model&&(e=e.attributes),!this._containsRule(e,this.blacklist)&&(!this.whitelist.length||this._containsRule(e,this.whitelist))},"_containsRule":function(t,i){return e.any(i,e.bind(this._matchesRule,this,t))},"_matchesRule":function(t,i){if(t.signature!=i.signature)return!1;var n=t.commandData||{};return e.all(i.commandData,function(e,t){return e==n[t]})},"_extendList":function(t,i){return e.reduce(i,function(i,n){return e.any(t,function(t){return e.isEqual(n,t)})||(t.push(n),i=!0),i},!1)},"_reduceList":function(t,i){var n=e.chain(t).map(function(t,n){return e.any(i,function(i){return e.isEqual(t,i)})?void 0:n}).compact().value(),s=0;return e.each(n,function(e){t.splice(e-s++,1)}),!!n.length},"_replaceList":function(e,t){var i=this._reduceList(e,t);return this._extendList(e,t)||i},"_normalizeMask":function(e){return e||(e={}),{"blacklist":this._normalizeList(e.blacklist),"whitelist":this._normalizeList(e.whitelist)}},"_normalizeList":function(t){return t?e.map(t,this._normalizeRule,this):[]},"_normalizeRule":function(t){return e.isObject(t)?t:{"signature":t}}}),i.extend=t.Model.extend,i}),csui.define("hbs!csui/controls/toolbar/impl/toolbar.state",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return"<p>"+this.escapeExpression((s=null!=(s=t.message||(null!=e?e.message:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"message","hash":{}}):s))+"</p>\r\n"}});return i.registerPartial("csui_controls_toolbar_impl_toolbar.state",n),n}),csui.define("csui/controls/toolbar/toolbar.state.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/toolbar/impl/toolbar.state","i18n!csui/controls/toolbar/impl/nls/localized.strings"],function(e,t,i,n){"use strict";return t.ItemView.extend({"tagName":"li","className":"csui-toolbar-state","template":i,"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",function(){this.isDestroyed||this.render()}),this.statusMessages={"loading":n.loadingActionsMessage,"failed":n.failedActionsMessage}},"serializeData":function(){var t=this.model.get("showMessage")?this.statusMessages[this.model.get("state")]:void 0;return e.extend(this.model.toJSON(),{"message":t})}})}),csui.define("csui/controls/toolbar/toolbar.state.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/toolbar/toolbar.state.view"],function(e,t,i,n){"use strict";return i.Behavior.extend({"constructor":function(s,o){i.Behavior.prototype.constructor.apply(this,arguments),this.view=o;var r=o.collection||o.options.collection,a=this.getOption("delayedActions");!e.isFunction(a)||a instanceof t.Collection||(a=a.call(o)),!a&&r&&(a=r.delayedActions),a&&this.listenTo(a,"request",this._fetchingActionsStarted).listenTo(a,"sync",this._fetchingActionsSucceeded).listenTo(a,"error",this._fetchingActionsFailed),this.listenTo(r,"reset change",this._fetchingActionsSucceeded),o.actionState=new t.Model({"state":a&&(a.fetching?"loading":a.error?"failed":r.length?"full":"empty"),"showMessage":!0}),o.emptyView=n,o.emptyViewOptions={"model":o.actionState,"toolbarView":o},this.listenTo(o,"render",this._updateClasses)},"_fetchingActionsStarted":function(){this.view.actionState.set("state","loading"),this._updateClasses()},"_fetchingActionsSucceeded":function(e){this.view.actionState.set("state",e.length?"":"emptyfull"),this._updateClasses()},"_fetchingActionsFailed":function(){this.view.actionState.set("state","failed"),this._updateClasses()},"_updateClasses":function(){this.view.$el.removeClass("csui-state-empty csui-state-loading csui-state-failed").addClass("csui-state-"+this.view.actionState.get("state"))}})}),csui.define("csui/controls/toolbar/delayed.toolbar.view",["csui/controls/toolbar/toolbar.view","csui/controls/toolbar/toolbar.state.behavior"],function(e,t){"use strict";return e.extend({"behaviors":{"ToolbarState":{"behaviorClass":t,"delayedActions":function(){return this.options.delayedActions}}},"constructor":function(t){e.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/utils/taskqueue",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log"],function(e,t,i,n,s){"use strict";function o(e){this.parallelism=e&&e.parallelism||1/0,this.pending=new a(void 0,{"model":r}),this.pending.on("add",this.dequeue,this),this.active=new a(void 0,{"model":r})}s=s(e.id);var r=n.Model.extend({"constructor":function(e,i){n.Model.prototype.constructor.apply(this,arguments),this.deferred=t.Deferred()},"promise":function(){return this.deferred.promise()}}),a=n.Collection.extend({"model":r});return i.extend(o.prototype,{"dequeue":function(){var e;s.debug("Pending queue {0} contains {1} tasks, active queue {0} contains {1} tasks.",this.pending.cid,this.pending.length,this.active.cid,this.active.length)&&console.log(s.last),this.active.length<this.parallelism&&(e=this.pending.shift())&&(this.execute(e),this.dequeue())},"execute":function(e){s.debug("Executing task {0}...",e.cid)&&console.log(s.last),this.active.add(e),e.get("worker")().done(e.deferred.done).fail(e.deferred.fail).always(i.bind(function(){this.active.remove(e),this.dequeue()},this))}}),o.Task=r,o.TaskCollection=a,o.version="1.0",o}),csui.define("csui/controls/fileupload/impl/upload.controller",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/taskqueue","csui/models/version","csui/utils/commandhelper","csui/lib/underscore.deepExtend"],function(e,t,i,n,s,o,r,a){"use strict";function l(e){e||(e={}),this.container=e.container?e.container.clone():null,this.queue=new o({"parallelism":e.parallelism||c.parallelism})}var c=e.config();return t.defaults(c,{"parallelism":3}),t.extend(l.prototype,n.Events,{"scheduleFileForUpload":function(e){this.queue.pending.add({"worker":t.bind(this._uploadFile,this,e)})},"_uploadFile":function(e){var i,n=e.container||this.container,o=e.deferred,a=e.node,l=e.version||e.get("newVersion"),c=e.get("file"),u=e.get("extended_data");if(t.isArray(a.get("versions"))&&!!a.attributes&&!!a.attributes.versions&&a.attributes.versions.push(l.attributes),l)a.has("id")||a.set("id",e.get("id")),l instanceof r||(l=new r({"id":a.get("id")})),i={};else{if(!n)throw new Error("Container node is missing.");i={"name":e.get("newName")||c.name,"type":e.get("type")||144,"parent_id":n&&n.get("id")}}if(u&&t.deepExtend(i,u),!a.connector){if(!n)throw new Error("Either node or container have to be connected.");n.connector.assignTo(a)}l&&!l.connector&&a.connector.assignTo(l);var d=(l||a).save(i,{"data":i,"files":{"file":c}});return d.progress(function(t,i){o.notify(e,t)}).then(function(e,t,i){if(a)return a.setFields("versions.element(0)"),a.fetch({"refreshCache":!0})}).done(function(t,i,n){o.resolve(e)}).fail(function(t,i,n){var r=new s.RequestErrorMessage(t);o.reject(e,r)}),o.fail(function(e,t){t||d.abort()}),e.promise()}}),l.extend=n.View.extend,l}),csui.define("csui/controls/checkbox/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/checkbox/impl/nls/root/lang",{"ariaLabel":"Item selection","title":"Item selection"}),csui.define("hbs!csui/controls/checkbox/impl/checkbox.view",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return'<button type="button" role="checkbox" class="csui-control csui-checkbox" aria-label="'+this.escapeExpression((s=null!=(s=t.ariaLabel||(null!=e?e.ariaLabel:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"ariaLabel","hash":{}}):s))+'"\r\n  '+this.escapeExpression((s=null!=(s=t.disabled||(null!=e?e.disabled:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"disabled","hash":{}}):s))+'\r\n        title="'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+'" aria-checked="'+this.escapeExpression((s=null!=(s=t.ariaChecked||(null!=e?e.ariaChecked:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"ariaChecked","hash":{}}):s))+'" >\r\n  <span class="csui-icon"></span>\r\n</button>'}});return i.registerPartial("csui_controls_checkbox_impl_checkbox.view",n),n}),csui.define("css!csui/controls/control/impl/control",[],function(){}),csui.define("css!csui/controls/checkbox/impl/checkbox.view",[],function(){}),csui.define("csui/controls/checkbox/checkbox.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","i18n!csui/controls/checkbox/impl/nls/lang","hbs!csui/controls/checkbox/impl/checkbox.view","css!csui/controls/control/impl/control","css!csui/controls/checkbox/impl/checkbox.view"],function(e,t,i,n,s,o){"use strict";return n.ItemView.extend({"className":"csui-control-view csui-checkbox-view","template":o,"templateHelpers":function(){var e=this.model.get("checked");return{"disabled":this.model.get("disabled")?"disabled":"","ariaChecked":e,"title":this.title?this.title:s.title,"ariaLabel":this.ariaLabel?this.ariaLabel:s.ariaLabel}},"modelEvents":{"change:disabled":"_handleDisableChanged","change:checked":"_handleCheckedChanged"},"ui":{"cb":"button.csui-control.csui-checkbox"},"events":{"click":"_toggleChecked"},"constructor":function(e){e||(e={}),this.ariaLabel=e.ariaLabel,this.title=e.title,e.model||(e.model=new i.Model({"disabled":void 0!==e.disabled&&e.disabled})),n.ItemView.prototype.constructor.call(this,e),this._setChecked(e.checked,{"silent":!0})},"setDisabled":function(e){this.model.set("disabled",!!e)},"setChecked":function(e){var t={"silent":!1};this.model.get("disabled")&&(t.silent=!0),this._setChecked(e,t)},"_handleDisableChanged":function(){this.ui.cb.prop("disabled",this.model.get("disabled"))},"_handleCheckedChanged":function(){var e=this.model.get("checked");this.ui.cb.attr("aria-checked",e)},"_setChecked":function(e,t){switch(e){case"true":case!0:this.model.set("checked","true",t);break;case"mixed":this.model.set("checked","mixed",t);break;default:this.model.set("checked","false",t)}},"_toggleChecked":function(){if(!this.model.get("disabled")){var e=this.model.get("checked"),t={"sender":this,"model":this.model};this.triggerMethod("clicked",t),t.cancel||(e&&"false"!==e&&"mixed"!==e?this.model.set("checked","false"):this.model.set("checked","true"))}}})}),csui.define("csui/behaviors/keyboard.navigation/retainfocus.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,n,s){"use strict";return s.Behavior.extend({"ui":{"control":".csui-control"},"events":{"mousedown @ui.control":"_startActive","focusout @ui.control":"_stopActive","keydown @ui.control":"_stopActive"},"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this._isFocused=!1,this.listenTo(t,"before:render",function(){if(this._isRendering=!0,t.isRendered){var e=this.ui.control[0];this._isFocused=document.activeElement===e}}),this.listenTo(t,"render",function(){this._isRendering=!1}),this.listenTo(t,"dom:refresh",function(){this._reApplyFocus()})},"_reApplyFocus":function(){this._isActive?this.ui.control.addClass("csui-control-active"):this.ui.control.removeClass("csui-control-active"),this._isFocused&&this.ui.control.focus()},"_startActive":function(){this._isActive=!0,this.ui.control.addClass("csui-control-active")},"_stopActive":function(){this._isRendering||(this.ui.control.removeClass("csui-control-active"),this._isActive=!1)}},{})}),csui.define("csui/controls/disclosure/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/disclosure/impl/nls/root/lang",{"ariaLabel":"Information disclosure","titleDisclosed":"See all","titleExpanded":"See less"}),csui.define("hbs!csui/controls/disclosure/impl/disclosure.view",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return'<button class="csui-control csui-disclosure" aria-expanded="'+this.escapeExpression((s=null!=(s=t.ariaExpanded||(null!=e?e.ariaExpanded:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"ariaExpanded","hash":{}}):s))+'"\r\n        aria-label="'+this.escapeExpression((s=null!=(s=t.ariaLabel||(null!=e?e.ariaLabel:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"ariaLabel","hash":{}}):s))+'" '+this.escapeExpression((s=null!=(s=t.disabled||(null!=e?e.disabled:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"disabled","hash":{}}):s))+' title="'+this.escapeExpression((s=null!=(s=t.title||(null!=e?e.title:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"title","hash":{}}):s))+'">\r\n  <span class="csui-icon"></span>\r\n</button>'}});return i.registerPartial("csui_controls_disclosure_impl_disclosure.view",n),n}),csui.define("css!csui/controls/disclosure/impl/disclosure.view",[],function(){}),csui.define("csui/controls/disclosure/disclosure.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/behaviors/keyboard.navigation/retainfocus.behavior","i18n!csui/controls/disclosure/impl/nls/lang","hbs!csui/controls/disclosure/impl/disclosure.view","css!csui/controls/control/impl/control","css!csui/controls/disclosure/impl/disclosure.view"],function(e,t,i,n,s,o,r){"use strict";return n.ItemView.extend({"className":"csui-control-view csui-disclosure-view","template":r,"templateHelpers":function(){var e=this.model.get("expanded");return{"disabled":this.model.get("disabled")?"disabled":"","ariaExpanded":e,"title":e?this.titleExpanded?this.titleExpanded:o.titleExpanded:this.titleDisclosed?this.titleDisclosed:o.titleDisclosed,"ariaLabel":this.ariaLabel?this.ariaLabel:o.ariaLabel}},"modelEvents":{"change:disabled":"render","change:expanded":"render"},"events":{"click":"_toggleExpanded"},"behaviors":{"RetainFocusBehavior":{"behaviorClass":s}},"constructor":function(e){e||(e={}),this.ariaLabel=e.ariaLabel,this.titleDisclosed=e.titleDisclosed,this.titleExpanded=e.titleExpanded,e.model||(e.model=new i.Model({"disabled":void 0!==e.disabled&&e.disabled})),n.ItemView.prototype.constructor.call(this,e),this.setExpanded(e.expanded)},"setDisabled":function(e){this.model.set("disabled",!!e)},"setExpanded":function(e){var t={"silent":!1};switch(this.model.get("disabled")&&(t.silent=!0),e){case"true":case!0:this.model.set("expanded",!0,t);break;default:this.model.set("expanded",!1,t)}},"_toggleExpanded":function(){if(!this.model.get("disabled")){var e=this.model.get("expanded"),t={"sender":this,"model":this.model};this.triggerMethod("clicked",t),t.cancel||this.model.set("expanded",!e)}}})}),csui.define("csui/models/appliedcategory",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/uploadable/uploadable.mixin"],function(e,t,i,n){var s=t.Model.extend({"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(i).makeUploadable(i)},"isNew":function(){return!!this.get("category_id")},"parse":function(e,t){var i=this.attributes;return i.category_id&&(e.id=i.category_id,delete i.category_id),e}});return n.mixin(s.prototype),i.mixin(s.prototype),s}),csui.define("csui/models/appliedcategories",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/node.resource/node.resource.mixin","csui/models/appliedcategory"],function(e,t,i,n,s){"use strict";var o=t.Collection.extend({"model":s,"constructor":function(e,i){this.sortInitially=i.sortInitially?i.sortInitially:this.sortInitially,t.Collection.prototype.constructor.apply(this,arguments),this.makeNodeResource(i)},"clone":function(){return new this.constructor(this.models,{"node":this.node})},"url":function(){
return i.combine(this.node.urlBase(),"categories")},"parse":function(e,t){return this.sortInitially(e.data)},"sortInitially":function(t){return e.isArray(t)?e.sortBy(t,function(e){return e.name.toLowerCase()}):t}});return n.mixin(o.prototype),o}),csui.define("csui/models/fileupload",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/log","csui/models/node/node.model","csui/models/version"],function(e,t,i,n,s,o,r){"use strict";var a=t.extend({"idAttribute":null},e.config());return n.Model.extend({"defaults":{"state":"pending","count":0,"total":0,"errorMessage":""},"idAttribute":a.idAttribute,"constructor":function(e,s){n.Model.prototype.constructor.apply(this,arguments),s||(s={}),this.node=s.node,this.node?(this.set("newVersion",!0,{"silent":!0}),this.version=new r({"id":this.node.get("id")},{"connector":s.connector||this.node.connector})):(this.container=s.container,this.node=new o(void 0,t.extend({"connector":s.connector||this.container&&this.container.connector},s,{"collection":this.get("collection")}))),this.deferred=i.Deferred(),this.deferred.progress(t.bind(this.onStateChange,this)).done(t.bind(this.onStateChange,this)).fail(t.bind(this.onStateChange,this)),this._updateFileAttributes(!0),this.listenTo(this,"change:file",t.bind(this._updateFileAttributes,this,!1))},"abort":function(e){this.deferred.reject(this,e)},"promise":function(){return this.deferred.promise()},"onStateChange":function(e,t){var i=this.deferred.state();"pending"==i?i="processing":"rejected"===i&&(t?this.set("errorMessage",t.message):i="aborted");var n={"state":i};if(t&&"progress"===t.type){var s=t.loaded,o=this.get("total");t.lengthComputable&&t.total>o&&(o=t.total,n.total=o),this.get("count")<s&&s<=o&&(n.count=s)}this.set(n)},"_updateFileAttributes":function(e){var t=this.get("file");t&&this.set({"name":t.name,"total":t.size},e?{"silent":!0}:{})}})}),csui.define("csui/models/fileuploads",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/log","csui/models/fileupload"],function(e,t,i,n,s,o){var r=n.Collection.extend({"model":o,"constructor":function(e,t){n.Collection.prototype.constructor.apply(this,arguments)},"state":function(){var e=!1,t=!1;return this.all(function(i){var n=i.get("state"),s="rejected"==n;return e=e||s,t=t||"processing"==n,s||"resolved"==n})?e?"rejected":"resolved":t?"processing":"pending"}});return r.version="1.0",r}),csui.define("csui/models/namequery",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/fileupload","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/uploadable/uploadable.mixin"],function(e,t,i,n,s,o,r,a){"use strict";var l=e.config();i.defaults(l,{"filesPerQuery":10});var c=n.Model.extend({"constructor":function(e,t){n.Model.prototype.constructor.apply(this,arguments),this.conflictFiles=[],this.cleanFiles=[],this.makeConnectable(t).makeUploadable(t)},"idAttribute":null,"url":function(){return s.combine(this.connector.connection.url,"validation/nodes")},"queryNames":function(e){var i=this.get("containerId"),n=t.Deferred();return this.fileGroups=this._getFileNameGroups(e),0===this.fileGroups.length?n.reject():this._runQuery(0,i,n),n.promise()},"runQuery":function(e,t){var i={"parent_id":e,"names":t};return this._jqxhr(i)},"_jqxhr":function(e){var i=t.Deferred();return this.save(e,{"data":e}).done(i.resolve).fail(i.reject),i.promise()},"_runQuery":function(e,t,i){var n=this,s=this.fileGroups;if(s&&s[e]){var o={"parent_id":t,"names":this._getFileNames(s[e])};this._jqxhr(o).done(function(o,r,a){n._addResults(o,s[e]),s[++e]?n._runQuery(e,t,i):i.resolve(n.cleanFiles,n.conflictFiles)}).fail(function(e,t,n){i.reject(e)})}},"_addResults":function(e,t){function n(e,t){e instanceof o?(e.set({"type":e.get("subType")||t.type,"versioned":t.versioned}),t.id&&e.set("id",t.id)):i.extend(e,{"id":t.id,"type":t.type,"versioned":t.versioned})}i.each(t,function(t){var s=t.newName||t.name||t.get("newName")||t.get("name"),o=i.find(e.results,function(e){return e.name===s})||{};n.call(this,t,o),o.id?this.conflictFiles.push(t):this.cleanFiles.push(t)},this)},"_getFileNames":function(e){var t=[];return i.each(e,function(e){var i="";i=e instanceof o?e.get("newName")||e.get("name"):e.newName||e.name,t.push(i)}),t},"_getFileNameGroups":function(e){for(var i=t.isArray(e)?e:e.models,n=0,s=1,o=i.length,r=[];n<o;){for(var a=[],c=l.filesPerQuery*s++;n<o&&n<c;n++)i[n].index=n,a.push(i[n]);r.push(a)}return r}});return a.mixin(c.prototype),r.mixin(c.prototype),c}),csui.define("csui/models/versions",["module","csui/lib/backbone","csui/utils/log","csui/models/version"],function(e,t,i,n){"use strict";var s=t.Collection.extend({"model":n,"constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments),this.options=i||{},this.options.connector&&this.options.connector.assignTo(this)},"setOrder":function(e,t){if(this.orderBy!==e)return this.orderBy=e,!0},"resetOrder":function(e){if(this.orderBy)return this.orderBy=void 0,!1!==e&&this.fetch(),!0},"setLimit":function(e,t,i){if(this.skipCount!==e||this.topCount!==t)return this.skipCount=e,this.topCount=t,!1!==i&&this.fetch(),!0},"resetLimit":function(e){if(this.skipCount)return this.skipCount=0,!1!==e&&this.fetch(),!0}});return s.version="1.0",s}),csui.define("csui/models/server.adaptors/nodeversions.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";function i(e,t){var i=[];(e.actions.findRecursively("download")||e.actions.findRecursively("Download"))&&i.push({"signature":"versions_download"},{"signature":"versions_open"}),(e.actions.findRecursively("delete")||e.actions.findRecursively("Delete"))&&i.push({"signature":"versions_delete"}),(e.actions.findRecursively("properties")||e.actions.findRecursively("Properties"))&&i.push({"signature":"versions_properties"}),t.actions=i}return{"mixin":function(n){return e.extend(n,{"makeServerAdaptor":function(e){return this},"url":function(){var e=t.combineQueryString(this.getExpandableResourcesUrlQuery(),{"extra":!1,"commands":this.options.commands||[]});return t.combine(this.node.urlBase(),"/versions?"+e)},"parse":function(t){var n=t.definitions,s=e.keys(n);if(!this.options.onlyClientSideDefinedColumns&&t.definitions_order)for(var o=0;o<t.definitions_order.length;o++){var r=t.definitions_order[o];n[r].definitions_order=500+o}return this.columns.reset(this.getColumnModels(s,n)),t.data&&e.each(t.data,function(e){e.id_expand={},e.id_expand.type=this.node.get("type"),e.commands||e.actions||i(this.node,e)},this),t.data},"getColumnModels":function(t,i){return e.reduce(t,function(t,n){if(n.indexOf("_formatted")>=0){var s=n.replace(/_formatted$/,"");if(i[s])return t}else{var o=i[n];if(!o.definitions_order){var r=i[n+"_formatted"];r&&r.definitions_order&&(o.definitions_order=r.definitions_order)}}var a=i[n];switch(n){case"name":a=e.extend(a,{"default_action":!0,"contextual_menu":!1,"editable":!0,"filter_key":"name"})}return a.sort=!0,t.push(e.extend({"column_key":n},a)),t},[])}})}}}),csui.define("csui/models/nodeversions",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/utils/log","csui/utils/url","csui/models/versions","csui/models/actions","csui/models/columns","csui/models/mixins/node.resource/node.resource.mixin","csui/models/mixins/expandable/expandable.mixin","csui/models/browsable/client-side.mixin","csui/models/server.adaptors/nodeversions.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u,d,h){"use strict";var p=r.extend({"constructor":function(e,t){r.prototype.constructor.apply(this,arguments),this.makeNodeResource(t).makeExpandable(t).makeClientSideBrowsable(t).makeServerAdaptor(t),this.columns=new l},"clone":function(){return new this.constructor(this.models,{"node":this.node,"skip":this.skipCount,"top":this.topCount,"filter":t.deepClone(this.filters),"orderBy":t.clone(this.orderBy),"expand":t.clone(this.expand),"commands":t.clone(this.options.commands)})}});d.mixin(p.prototype),u.mixin(p.prototype),c.mixin(p.prototype),h.mixin(p.prototype);var f=p.prototype.setOrder;return p.prototype.setOrder=function(e,t){return f.call(this,e,t)},p}),csui.define("csui/models/node.facets/facet.query.mixin",["csui/lib/underscore","csui/lib/jquery"],function(e,t){"use strict";function i(e,i){var s=n(e);if(s.length){var o={};return o[i]=s,t.param(o,!0)}return""}function n(t){return t&&e.map(t,s)||[]}function s(t){return t.id+":"+e.reduce(t.values,function(e,t){return e&&(e+="|"),e+t.id.toString()},"")}return{"mixin":function(t){return e.extend(t,{"makeFacetQuery":function(e){return this},"getFilterQuery":function(e){return i(e||this.filters,this.filterQueryParameterName)},"getFilterQueryValue":function(e){return n(e||this.filters)}})}}}),csui.define("csui/models/node.facets/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/models/node.facets/facet.query.mixin"],function(e,t,i,n){"use strict";function s(t,i){var n=e.keys(i)[0],s=i[n];e.each(s,function(e){e.value=e.value.toString(),e.selected=t})}function o(t,i){var n=e.keys(i)[0],s=i[n],o=t[n]||{};return e.extend({"items_to_show":5,"select_multiple":!0,"topics":s},o,{"id":n.toString()})}function r(t){var i=[];if(899===t.get("type")){var n=t.get("selected_facets");i=e.map(n,function(e){var t={"id":e[0],"values":[]};return e[1].forEach(function(e){t.values.push({"id":e})}),t})}return i}return{"mixin":function(t){t.fetch;return n.mixin(t),e.extend(t,{"filterQueryParameterName":"where_facet","makeServerAdaptor":function(e){return this.makeFacetQuery(e)},"isFetchable":function(){var e=this.node,t=e.get("type"),i=e.get("location_id");return 899!==t||0!==i},"url":function(){var t=this.node.get(899===this.node.get("type")?"location_id":"id"),n=e.union(r(this.node),this.filters),s=this.getFilterQuery(n),o=i.combine(this.connector.connection.url,"nodes",t,"/facets");return s&&(o+="?"+s),o},"parse":function(t,i){var n=t.facets||{},r=n.properties||{},a=n.selected_values||[],l=n.available_values||[];if(a.forEach(s.bind(null,!0)),l.forEach(s.bind(null,!1)),899===this.node.get("type")){var c=this.node.get("selected_facets")||[];c=c.map(function(e){return e[0]}),a=a.filter(function(t){var i=e.keys(t)[0];return!e.contains(c,i)})}return a.concat(l).map(o.bind(null,r))}})}}}),csui.define("csui/models/nodefacets",["csui/lib/underscore","csui/models/facets","csui/models/mixins/node.resource/node.resource.mixin","csui/models/node.facets/server.adaptor.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,n){"use strict";var s=t.extend({"constructor":function(e,i){t.prototype.constructor.apply(this,arguments),this.makeNodeResource(i).makeServerAdaptor(i)},"clone":function(){return new this.constructor(this.models,{"node":this.node,"filters":e.deepClone(this.filters)})}});return i.mixin(s.prototype),n.mixin(s.prototype),s}),csui.define("csui/models/node/node.facet.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/nodefacets"],function(e,t,i,n,s,o){return n.extend({"propertyPrefix":"facets","constructor":function(r,a){n.prototype.constructor.apply(this,arguments);var l=this.options.facets||{};if(!(l instanceof i.Collection)){var c=l.options&&l.options.node||r.getModel(s,a),u=e.config();l=new o(l.models,t.defaults(u.options,l.options,{"autoreset":!0},{"node":c}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/models/widget/search.results/search.response.mixin",["csui/lib/underscore","csui/utils/base","csui/models/ancestor","csui/models/node/node.model"],function(e,t,i,n){"use strict";return{"mixin":function(t){return e.extend(t,{"makeSearchResponse":function(e){return this},"parseSearchResponse":function(e,t){e.collection.sorting&&(this.previousQuery=this.options.query.attributes.where),this.previousOrderBy=this.orderBy,this.excludeSelectedAndInvalidFacets(e);var s=e.results;if(s)for(var o in s)if(s.hasOwnProperty(o)){if(s[o].data&&s[o].data.properties&&(s[o].data.versions&&s[o].data.versions.file_size&&(s[o].data.properties.size=s[o].data.versions.file_size),s[o].data.versions&&s[o].data.versions.version_id&&(s[o].data.properties.version_id=s[o].data.versions.version_id),s[o].data.properties&&s[o].data.properties.container&&s[o].data.properties.container&&(s[o].data.properties.size=s[o].data.properties.container_size),s[o].data.properties.summary&&(s[o].data.properties.summary=this.jsonToStringTokenizer(s[o].data.properties.summary)),s[o].data.properties.reserved_user_id_expand&&(s[o].data.properties.reserved_user_id=s[o].data.properties.reserved_user_id_expand)),s[o].links&&s[o].links.ancestors){var r=[],a=s[o].links.ancestors,l=[];if(a)for(var c in a)if(a.hasOwnProperty(c)){var u=new i,d=parseInt(c,10),h={},p=a[d];h.id=p.href.substring(p.href.lastIndexOf("/")+1,p.href.length),h.volume_id=0===d?h.id:l[0],h.parent_id=0===d?"-1":l[d-1],n.usesIntegerId&&(h.id=parseInt(h.id),h.volume_id=parseInt(h.volume_id),h.parent_id=parseInt(h.parent_id)),l.push(h.id),h.name=p.name,h.showAsLink=!0,u.attributes=h,r.push(u)}s[o].data.properties.ancestors=r}s[o].search_result_metadata&&(s[o].data.properties.search_result_metadata=s[o].search_result_metadata)}},"jsonToStringTokenizer":function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=e[i].type?" <HH>"+e[i].text+"</HH> ":e[i]);return t},"parseBrowsedItems":function(e,t){return e.results},"excludeSelectedAndInvalidFacets":function(e){var t=e.collection.searching;if(t&&t.facets&&t.facets.available){var i=t.facets.available;if(t.facets.selected)for(var n=t.facets.selected,s=n.length,o=0;o<s;o++)for(var r=i.length,a=0;a<r;a++){var l=i[a].name;if("OTObjectSize"===l)i.splice(a,1),r=i.length,a--;else if(l===n[o].name)for(var c=n[o].facet_items.length,u=0;u<c;u++)for(var d=i[a].facet_items.length,h=0;h<d;h++)i[a].facet_items[h].display_name===n[o].facet_items[u].display_name&&(i[a].facet_items.splice(h,1),h--,d=i[a].facet_items.length);else 0===i[a].facet_items.length&&(i.splice(a,1),r=i.length,a--)}}}})}}}),csui.define("csui/models/widget/search.results/search.facets",["csui/models/facets"],function(e){"use strict";return e.extend({"constructor":function(t,i){e.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/models/widget/search.results/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url","csui/models/node.facets/facet.query.mixin"],function(e,t,i){"use strict";function n(t,i){return e.map(t,function(t){var n=e.map(t.facet_items,function(e){return{"name":e.display_name,"total":e.count,"value":e.value,"selected":i}});return{"id":t.name,"name":t.display_name,"type":t.type,"topics":n,"items_to_show":5}})}return{"mixin":function(s){return i.mixin(s),e.extend(s,{"filterQueryParameterName":"filter","makeServerAdaptor":function(e){return this.makeFacetQuery(e)},"cacheId":"","url":function(){var e=this.connector.connection.url.replace("/v1","/v2"),i=this.options.query.toJSON();return this.options.query.resetDefaults?(this.orderBy="",this.skipCount=0,this.options.query.resetDefaults=!1):(this.orderBy=this.orderBy&&this.previousQuery!==this.options.query.attributes.where?"":this.orderBy,this.skipCount=this.previousOrderBy!==this.orderBy?0:this.skipCount),i=t.combineQueryString(this.getBrowsableUrlQuery(),this.getFilterQuery(this.searchFacets.filters),{"expand":"properties{original_id,owner_user_id,create_user_id,owner_id,reserved_user_id}","options":"{'highlight_summaries','facets'}"},this.getRequestedCommandsUrlQuery(),i),(this.orderBy||this.pagination)&&this.cacheId&&(i=t.combineQueryString(i,"cache_id="+this.cacheId),this.pagination=!1),t.combine(e,"search?"+i)},"parse":function(e,t){return this.parseBrowsedState(e.collection,t),this.parseSearchResponse(e,t),this._parseFacets(e.collection.searching.facets),e.results.sorting=e.collection.sorting,this.cacheId=e.collection&&e.collection.searching&&e.collection.searching.cache_id?e.collection.searching.cache_id:"",this.parseBrowsedItems(e,t)},"_parseFacets":function(e){var t;e&&(t=n(e.selected,!0).concat(n(e.available,!1))),this.searchFacets.reset(t)}})}}}),csui.define("csui/models/widget/search.results/search.results.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/widget/search.results/search.response.mixin","csui/models/widget/search.results/search.facets","csui/models/widget/search.results/server.adaptor.mixin","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u,d,h,p,f,m){"use strict";var b=i.Collection.extend({"model":s,"constructor":function(e,t){this.options=t||(t={}),this.expand=t.expand||{"properties":"reserved_user_id"},i.Collection.prototype.constructor.call(this,e,t),this.includeCommands=t.commands||[],this.title=m.searchResults,this.searchFacets=new p,this.makeConnectable(t).makeFetchable(t).makeAdditionalResourcesV2Mixin(t).makeBrowsable(t).makeBrowsableV1Request(t).makeBrowsableV2Response(t).makeDelayedCommandableV2(t).makeSearchResponse(t).makeServerAdaptor(t)},"clone":function(){return new this.constructor(this.models,{"connector":this.connector,"skip":this.skipCount,"top":this.topCount,"filter":e.deepClone(this.filters),"orderBy":e.clone(this.orderBy),"expand":e.clone(this.expand),"includeActions":this.includeActions,"commands":e.clone(this.includeCommands),"includeCommands":e.clone(this.includeCommands),"defaultActionCommands":e.clone(this.defaultActionCommands),"delayRestCommands":this.delayRestCommands})},"isFetchable":function(){return!!this.options.query.get("where")||!!this.options.query.get("query_id")},"setDefaultPageNum":function(){this.skipCount=0},"getResourceScope":function(){return e.deepClone({"includeResources":this._additionalResources,"includeCommands":this.includeCommands,"commands":this.includeCommands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetCommands(),e.commands&&this.setCommands(e.commands),e.includeCommands&&(this.includeCommands=e.includeCommands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return a.mixin(b.prototype),l.mixin(b.prototype),c.mixin(b.prototype),o.mixin(b.prototype),r.mixin(b.prototype),d.mixin(b.prototype),h.mixin(b.prototype),f.mixin(b.prototype),u.mixin(b.prototype),b}),csui.define("csui/models/permission/permission.table.columns.model",["csui/lib/underscore","csui/lib/backbone"],function(e,t,i,n){return t.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}})}),csui.define("csui/utils/non-emptying.region/non-emptying.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){this.options.prependChild?this.el.insertBefore(e.el,this.el.childNodes[0]):this.el.appendChild(e.el)},"empty":function(e){var t=this.currentView;return t&&(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),e&&e.preventDestroy||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView),this},"_destroyView":function(){var t=this.currentView;!0===t.isDestroyed||t._isDestroyed||(t.supportsDestroyLifecycle||e.triggerMethodOn(t,"before:destroy",t),t.destroy?t.destroy():(t.remove(),"function"==typeof t.isDestroyed?t._isDestroyed=!0:t.isDestroyed=!0),t.supportsDestroyLifecycle||e.triggerMethodOn(t,"destroy",t))}})}),csui.define("hbs!csui/utils/commands/impl/full.page.modal/full.page.modal",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return'<div class="binf-modal-dialog">\r\n  <div class="binf-modal-content">\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_utils_commands_impl_full.page.modal_full.page.modal",n),n}),csui.define("css!csui/utils/commands/impl/full.page.modal/full.page.modal",[],function(){}),csui.define("csui/utils/commands/impl/full.page.modal/full.page.modal.view",["csui/lib/jquery","csui/lib/marionette","csui/utils/non-emptying.region/non-emptying.region","hbs!csui/utils/commands/impl/full.page.modal/full.page.modal","css!csui/utils/commands/impl/full.page.modal/full.page.modal","csui/lib/binf/js/binf"],function(e,t,i,n){"use strict";return t.LayoutView.extend({"className":"csui-full-page-modal binf-modal binf-fade","template":n,"regions":{"content":".binf-modal-content"},"events":{"shown.binf.modal":"_refresh","hidden.binf.modal":"destroy"},"constructor":function(e){t.LayoutView.prototype.constructor.apply(this,arguments),this.view=this.options.view},"show":function(){var t=e.fn.binf_modal.getDefaultContainer();return new i({"el":t}).show(this),this},"onRender":function(){this.listenTo(this.view,"destroy",function(){this.$el.binf_modal("hide")}),this.content.show(this.options.view),e(window).scrollTop(0),this.$el.binf_modal({"backdrop":"static","keyboard":!1})},"_refresh":function(){this.view.triggerMethod("dom:refresh")}})}),csui.define("csui/utils/commands/impl/thumbnail/thumbnail.object",["csui/lib/jquery","csui/lib/marionette","csui/utils/url","csui/utils/base"],function(e,t,i,n){"use strict";return t.Object.extend({"constructor":function(e){t.Object.prototype.constructor.apply(this,arguments),this.listenTo(this.options.node,"change:id",this.load).listenTo(this,"destroy",this._release)},"load":function(){var t=this.options.node,n=t.get("id"),s=t.get("version_number"),o=s?"&version_number="+s:"",r=this;return this._release(),n&&e.ajax(t.connector.extendAjaxOptions({"url":i.combine(t.connector.connection.url,"/nodes",n,"/thumbnails/medium/content?suppress_response_codes"+o),"dataType":"binary"})).then(function(e){if(!e.type||!e.type.match(/application\/json/i))return r.url=URL.createObjectURL(e),r.triggerMethod("load",r,r.url),r.url;var t=new window.FileReader;t.readAsText(e),t.onload=function(e){var t=JSON.parse(e.target.result);404===t.statusCode&&r._failureHandler(t.error)}},function(e){r._failureHandler(e)})},"_release":function(){this.url&&(URL.revokeObjectURL(this.url),this.url=void 0)},"_failureHandler":function(t){var i=new n.Error(t);return this.url=null,this.triggerMethod("error",this,i),e.Deferred().reject(i).promise()}})}),csui.define("hbs!csui/utils/commands/impl/thumbnail/loading.thumbnail",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return"<p>Loading...</p>\r\n"}});return i.registerPartial("csui_utils_commands_impl_thumbnail_loading.thumbnail",n),n}),csui.define("hbs!csui/utils/commands/impl/thumbnail/no.thumbnail",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return"<p>Not available.</p>\r\n"}});return i.registerPartial("csui_utils_commands_impl_thumbnail_no.thumbnail",n),n}),csui.define("hbs!csui/utils/commands/impl/thumbnail/thumbnail",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return'<img src="'+this.escapeExpression((s=null!=(s=t.url||(null!=e?e.url:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"url","hash":{}}):s))+'" alt="">\r\n'}});return i.registerPartial("csui_utils_commands_impl_thumbnail_thumbnail",n),n}),csui.define("css!csui/utils/commands/impl/thumbnail/thumbnail",[],function(){}),csui.define("csui/utils/commands/impl/thumbnail/thumbnail.view",["csui/lib/marionette","csui/utils/commands/impl/thumbnail/thumbnail.object","hbs!csui/utils/commands/impl/thumbnail/loading.thumbnail","hbs!csui/utils/commands/impl/thumbnail/no.thumbnail","hbs!csui/utils/commands/impl/thumbnail/thumbnail","css!csui/utils/commands/impl/thumbnail/thumbnail"],function(e,t,i,n,s){"use strict";return e.ItemView.extend({"className":"csui-thumbnail","getTemplate":function(){var e=this.thumbnail.url;return void 0===e?i:e?s:n},"constructor":function(i){e.ItemView.prototype.constructor.apply(this,arguments),this.thumbnail=this.options.thumbnail||new t({"node":this.options.node}),this.listenTo(this.thumbnail,"load",this.render).listenTo(this.thumbnail,"error",this.render).listenTo(this,"render",function(){void 0===this.thumbnail.url&&this.thumbnail.load()}).listenTo(this,"destroy",function(){this.thumbnail.destroy()})},"serializeData":function(){return{"url":this.thumbnail.url}}})}),csui.define("json!csui/utils/commands/open.types.json",{"mimeTypesForOpen":["application/atom+xml","application/font-woff","application/javascript","application/json","application/mathml+xml","application/ogg","application/pdf","application/postscript","application/rdf+xml","application/rss+xml","application/vnd.mozilla.xul+xml","application/xhtml+xml","application/xml","application/x-shockwave-flash","audio/3gpp","audio/3gpp2","audio/aac","audio/aiff","audio/amr","audio/basic","audio/flac","audio/midi","audio/mp3","audio/mp4","audio/mpeg","audio/mpeg3","audio/ogg","audio/vorbis","audio/wav","audio/webm","audio/x-m4a","audio/x-ms-wma","audio/x-wav","audio/vnd.rn-realaudio","audio/vnd.wave","image/bmp","image/cis-cod","image/gif","image/ief","image/jpeg","image/webp","image/pict","image/pipeg","image/png","image/svg+xml","image/tiff","image/vnd.microsoft.icon","image/webp","image/x-cmu-raster","image/x-cmx","image/x-icon","image/x-portable-anymap","image/x-portable-bitmap","image/x-portable-graymap","image/x-portable-pixmap","image/x-rgb","image/x-xbitmap","image/x-xpixmap","image/x-xwindowdump","message/rfc822","multipart/related","multipart/x-mixed-replace","text/css","text/html","text/plain","text/xml","video/3gpp","video/3gpp2","video/avi","video/divx","video/flc","video/mp4","video/mpeg","video/ogg","video/quicktime","video/sd-video","video/webm","video/x-dv","video/x-m4v","video/x-mpeg","video/x-ms-asf","video/x-ms-wmv","video/x-msvideo"],"officeMimeTypes":["application/msword","application/vnd.ms-word","application/vnd.msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.wordprocessing-openxml","application/vnd.ces-quickword","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.document.12","application/mspowerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ces-quickpoint","application/vnd.presentation-openxml","application/vnd.presentation-openxmlm","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/msexcel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ces-quicksheet","application/vnd.spreadsheet-openxml","application/vnd.ms-excel.sheet.macroEnabled.12","text/csv"]}),csui.define("csui/utils/commands/open.plugins/impl/brava.plugin",["csui/lib/underscore","csui/lib/jquery","csui/models/version"],function(e,t,i){"use strict";function n(){}var s=window.csui.requirejs.s.contexts._.config.config["csui/utils/commands/open"]||{};return s=e.extend({"isBravaViewerAvailable":!1,"supportedBravaViewerMimeTypes":[],"bravaView":"brava/widgets/bravaviewer/bravaviewer.view"},s),s.supportedBravaViewerMimeTypes=e.invoke(s.supportedBravaViewerMimeTypes,"toLowerCase"),n.prototype.widgetView=s.bravaView,n.prototype.getUrlQuery=function(e){var n={"func":"doc.ViewDoc","nodeid":e.get("id")};return e instanceof i&&(n.vernum=e.get("version_number")),t.Deferred().resolve(n).promise()},n.prototype.needsAuthentication=function(e){return!0},n.isSupported=function(e){var t=e.get("mime_type");return t&&s.isBravaViewerAvailable&&s.supportedBravaViewerMimeTypes.indexOf(t.toLowerCase())>=0},n}),csui.define("csui/utils/commands/open.plugins/impl/csv.plugin",["csui/lib/underscore","csui/lib/jquery","csui/models/version"],function(e,t,i){"use strict";function n(){}var s=window.csui.requirejs.s.contexts._.config.config["csui/utils/commands/open"]||{};return s=e.extend({"CSViewerIsAvailable":!1,"CSViewerSupportedMimeTypes":[],"csViewerView":"csv/widgets/csviewer/csviewer.view"},s),s.CSViewerSupportedMimeTypes=e.invoke(s.CSViewerSupportedMimeTypes,"toLowerCase"),n.prototype.widgetView=s.csViewerView,n.prototype.getUrlQuery=function(e){var n={"func":"doc.ViewDoc","nodeid":e.get("id")};return e instanceof i&&(n.vernum=e.get("version_number")),t.Deferred().resolve(n).promise()},n.prototype.needsAuthentication=function(e){return!0},n.isSupported=function(e){var t=e.get("mime_type");return t&&s.CSViewerIsAvailable&&s.CSViewerSupportedMimeTypes.indexOf(t.toLowerCase())>=0},n}),csui.define("csui/utils/commands/open.plugins/impl/browser.plugin",["csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/utils/base","csui/utils/command.error","csui/models/version","json!csui/utils/commands/open.types.json","csui/utils/content.helper"],function(e,t,i,n,s,o,r,a){"use strict";function l(){}function c(e){var i=a.getContentPageUrl(e);return t.Deferred().resolve(i).promise()}function u(e){return e.connector.requestContentAuthToken(e).then(function(t){var s=i.combine(new i(e.connector.connection.url).getApiBase(),"nodes",e.get("id"));s=e instanceof o?i.combine(s,"versions",e.get("version_number"),"content"):e.get("version_number")?i.combine(s,"versions",e.get("version_number"),"content"):i.combine(s,"content");var r=(e.get("mime_type")||"").toLowerCase(),a=!n.isAppleMobile()&&d.officeMimeTypes.indexOf(r)>=0?"download":"open",l=i.combineQueryString({"action":a,"token":t.token});return i.appendQuery(s,l)},function(e){return t.Deferred().reject(new s(e)).promise()})}var d=window.csui.requirejs.s.contexts._.config.config["csui/utils/commands/open"]||{},h=e.chain(navigator.plugins||[]).map(function(t){return e.chain(t).map(function(e){return e.type}).value()}).flatten().compact().invoke("toLowerCase").value();return d=e.extend({"mimeTypesForOpen":r.mimeTypesForOpen,"officeMimeTypes":r.officeMimeTypes,"forceDownloadForMimeTypes":[],"useContentPage":!1},d),d.mimeTypesForOpen=e.invoke(d.mimeTypesForOpen,"toLowerCase"),d.officeMimeTypes=e.invoke(d.officeMimeTypes,"toLowerCase"),d.forceDownloadForMimeTypes=e.invoke(d.forceDownloadForMimeTypes,"toLowerCase"),d.mimeTypesForOpen=e.chain(d.mimeTypesForOpen).concat(h).unique().invoke("toLowerCase").value(),l.prototype.getUrl=function(e){return d.useContentPage?c(e):u(e)},l.isSupported=function(e){var t=e.get("mime_type");if(t)return t=t.toLowerCase(),n.isAppleMobile()||d.mimeTypesForOpen.indexOf(t)>=0&&d.forceDownloadForMimeTypes.indexOf(t)<0},l.prototype.needsAuthentication=function(e){return d.useContentPage},l}),csui.define("csui/utils/commands/open.plugins/impl/core.open.plugins",["csui/utils/commands/open.plugins/impl/brava.plugin","csui/utils/commands/open.plugins/impl/csv.plugin","csui/utils/commands/open.plugins/impl/browser.plugin"],function(e,t,i){"use strict";return[{"sequence":200,"plugin":e,"decides":e.isSupported},{"sequence":400,"plugin":t,"decides":t.isSupported},{"sequence":600,"plugin":i,"decides":i.isSupported}]}),csui.define("csui/utils/contexts/factories/search.results.factory",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/search.query.factory","csui/models/widget/search.results/search.results.model","csui/utils/commands","csui/utils/base"],function(e,t,i,n,s,o,r,a,l,c){return s.extend({"propertyPrefix":"searchResults","constructor":function(e,r){
s.prototype.constructor.apply(this,arguments);var c=this.options.searchResults||{};if(!(c instanceof n.Collection)){var u=e.getObject(o,r),d=r.searchResults.query,h=t.config();c=new a(c.models,i.extend({"connector":u,"query":d,"commands":l.getAllSignatures()},c.options,h.options,{"autofetch":!0,"autoreset":!0}))}this.property=c},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){this.property.fetch({"success":i.bind(this._onSearchResultsFetched,this,e),"error":i.bind(this._onSearchResultsFailed,this,e)})},"_onSearchResultsFetched":function(e){return!0},"_onSearchResultsFailed":function(e,t,i){var n=new c.RequestErrorMessage(i);csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.showError(n.toString())})}},{"getDefaultResourceScope":function(){return i.deepClone({"commands":l.getAllSignatures()})}})}),csui.define("csui/utils/high.contrast/detector",[],function(){"use strict";function e(){var e=document.createElement("div"),i=e.style;i.borderWidth="1px",i.borderStyle="solid",i.borderTopColor="#F00",i.borderRightColor="#0FF",i.position="absolute",i.left="-9999px",i.width=e.style.height="2px";var n=document.body;n.appendChild(e),i=window.getComputedStyle(e),t=i.borderTopColor===i.borderRightColor,n.removeChild(e);var s=t?"add":"remove";document.documentElement.classList[s]("csui-highcontrast")}var t;return{"load":function(i,n,s,o){function r(){if("complete"===document.readyState)return void 0===t&&e(),s(t),!0}o.isBuild?s(null):r()||document.addEventListener("readystatechange",r)}}}),csui.define("hbs!csui/controls/signin/impl/signin",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var s;return'<div class="login-container">\r\n  <div class="login-controls">\r\n    <div class="branding"><span role="presentation" class="ot-logo">&nbsp;</span></div>\r\n    <div class="login-error" id="loginError"></div>\r\n    <div class="login-form-wrapper">\r\n      <form>\r\n        <div class="binf-form-group binf-has-feedback">\r\n          <div class="col-md-20">\r\n            <input id="inputUsername" type="text" class="binf-form-control binf-input-lg textbox hasclear"\r\n                   placeholder="'+this.escapeExpression((s=null!=(s=t.placeholderusername||(null!=e?e.placeholderusername:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"placeholderusername","hash":{}}):s))+'" aria-label="'+this.escapeExpression((s=null!=(s=t.userNameAria||(null!=e?e.userNameAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"userNameAria","hash":{}}):s))+'">\r\n              <span id="usernameclearer" class="clearer clear-icon binf-form-control-feedback"></span>\r\n\r\n          </div>\r\n        </div>\r\n        <div class="binf-form-group binf-has-feedback">\r\n          <div class="col-md-20">\r\n            <input id="inputPassword" type="password"\r\n                   class="binf-form-control binf-input-lg textbox hasclear"\r\n                   placeholder="'+this.escapeExpression((s=null!=(s=t.placeholderpassword||(null!=e?e.placeholderpassword:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"placeholderpassword","hash":{}}):s))+'" aria-label="'+this.escapeExpression((s=null!=(s=t.passwordAria||(null!=e?e.passwordAria:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"passwordAria","hash":{}}):s))+'">\r\n              <span id="passwordclearer" class="clearer clear-icon binf-form-control-feedback"></span>\r\n          </div>\r\n        </div>\r\n        <button id="buttonSubmit" type="button" class="login-btn">'+this.escapeExpression((s=null!=(s=t.buttontext||(null!=e?e.buttontext:e))?s:t.helperMissing,"function"==typeof s?s.call(e,{"name":"buttontext","hash":{}}):s))+"</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_signin_impl_signin",n),n}),csui.define("csui/controls/signin/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/signin/impl/nls/root/localized.strings",{"signinButtonText":"Sign in","signinForgotPassword":"Forgot password?","signinPlaceholderUsername":"User name","usernameAria":"Enter user name","signinPlaceholderPassword":"Password","passwordAria":"Enter password","signinInvalidUsernameOrPassword":"You have entered an invalid user name or password. Please try again."}),csui.define("css!csui/controls/signin/impl/css/signin",[],function(){}),csui.define("csui/controls/signin/signin.view",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/authenticators/basic.authenticator","csui/utils/authenticators/credentials.authenticator","csui/utils/contexts/page/page.context","csui/utils/connector","csui/utils/contexts/factories/connector","csui/lib/marionette","hbs!csui/controls/signin/impl/signin","i18n!csui/controls/signin/impl/nls/localized.strings","css!csui/controls/signin/impl/css/signin"],function(e,t,i,n,s,o,r,a,l,c,u){"use strict";var d=t.extend({"useBasicAuthentication":!1},e.config());return l.ItemView.extend({"constructor":function(){l.ItemView.apply(this,arguments)},"className":"cs-signin","template":c,"triggers":{"click button":"click:button","mousedown @ui.usernameclearer":"click:usernameclearer","mousedown @ui.passwordclearer":"click:passwordclearer","focus @ui.username":"focus:username","focus @ui.password":"focus:password","change @ui.password":"change:password","change @ui.username":"change:username"},"ui":{"username":"#inputUsername","password":"#inputPassword","button":"#buttonSubmit","passwordclearer":"#passwordclearer","usernameclearer":"#usernameclearer","loginerror":"#loginError"},"onRender":function(){this.ui.usernameclearer.toggle(!1),this.ui.passwordclearer.toggle(!1),this.ui.username.prop("autofocus",!0)},"onClickPasswordclearer":function(e){this.ui.password.val("").focus(),this._unsetErrorStyle(),this.ui.passwordclearer.hide()},"onClickUsernameclearer":function(e){this.ui.username.val("").focus(),this._unsetErrorStyle(),this.ui.usernameclearer.hide()},"onFocusUsername":function(){this.validate()},"onFocusPassword":function(){this.validate()},"onChangeUsername":function(){this.validate()},"onChangePassword":function(){this.validate()},"templateHelpers":function(){return{"buttontext":u.signinButtonText,"copyright":u.signinCopyright,"forgotpassword":u.signinForgotPassword,"placeholderusername":u.signinPlaceholderUsername,"usernameAria":u.usernameAria,"placeholderpassword":u.signinPlaceholderPassword,"passwordAria":u.passwordAria}},"events":{"keyup .binf-form-control":"validate","keydown button":"onKeyPress"},"onKeyPress":function(e){this.ui.button.prop("disabled")||13!==e.which||this.ui.button.toggleClass("login-btn-enabled")},"validate":function(e){this._unsetErrorStyle();var t=!!this.ui.username.val().length,n=t&&!0,s=i(document.activeElement).is(this.ui.username),o=i(document.activeElement).is(this.ui.password);this.ui.usernameclearer.toggle(t&&s),this.ui.passwordclearer.toggle(o),this.ui.button.prop("disabled",!n),this.ui.button.toggleClass("login-btn-enabled",n),n&&e&&13===e.which&&(e.preventDefault(),this.ui.button.click())},"onClickButton":function(){this.ui.button.toggleClass("login-btn-enabled",!1);var e={"username":this.ui.username.val(),"password":this.ui.password.val()},i=d.useBasicAuthentication;if(!this.authenticator){var r=t.defaults({"credentials":e},this.options.connection),l=i?n:s,c=new l({"connection":r}).on("loggedIn",t.bind(function(){this.ui.button.toggleClass("login-btn-enabled",!0),this.trigger("success",{"username":e.username,"session":r.session})},this));this.authenticator=c}var u=t.bind(function(){var e=new o,t=e.getObject(a),i=this.authenticator.connection.session;t.authenticator.updateAuthenticatedSession(i)},this),h=t.bind(function(t,i){this.ui.button.toggleClass("login-btn-enabled",!0),this._setErrorStyle(),this.trigger("failure",{"username":e.username,"error":t})},this);i?this.authenticator.check({"credentials":e},u,h):this.authenticator.login({"data":e},u,h)},"_setErrorStyle":function(){this.ui.username.focus().select(),this.ui.password.val(""),this.ui.usernameclearer.toggle(!0),this.ui.passwordclearer.toggle(!0),this.ui.loginerror.html(u.signinInvalidUsernameOrPassword),this.$(".binf-form-group").addClass("binf-has-error"),this.$(".clearer").removeClass("clear-icon").addClass("error-icon")},"_unsetErrorStyle":function(){this.ui.loginerror.html(""),this.$(".binf-form-group").removeClass("binf-has-error"),this.$(".clearer").removeClass("error-icon").addClass("clear-icon")}})}),csui.define("hbs!csui/utils/impl/signin.dialog/signin",["module","hbs","csui/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){return'<div class="csui-signin binf-modal">\r\n  <div class="binf-modal-dialog">\r\n    <div class="binf-modal-content"></div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_utils_impl_signin.dialog_signin",n),n}),csui.define("css!csui/utils/impl/signin.dialog/signin",[],function(){}),csui.define("csui/utils/impl/signin.dialog/signin.dialog",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/signin/signin.view","hbs!csui/utils/impl/signin.dialog/signin","css!csui/utils/impl/signin.dialog/signin","csui/lib/binf/js/binf"],function(e,t,i,n,s){"use strict";function o(e){this.connection=e.connection}return e.extend(o.prototype,{"show":function(){var e=t.Deferred(),o=t.fn.binf_modal.getDefaultContainer(),r=t(s()).appendTo(o),a=new i.Region({"el":r.find(".binf-modal-content")[0]}),l=new n({"connection":this.connection});return l.on("success",function(t){r.binf_modal("hide"),e.resolve(t)}),a.show(l),r.on("shown.binf.modal",function(){l.triggerMethod("dom:refresh")}).on("hidden.binf.modal",function(){l.destroy()}).binf_modal({"backdrop":"static","keyboard":!1}),e.promise()}}),o}),csui.define("csui/utils/non-attaching.region/non-attaching.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){}})}),csui.define("csui/utils/script-executing.region/script-executing.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){this.$el.html("").append(e.el)}})}),csui.define("csui/utils/toolitem.masks/global.toolitems.mask",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask"],function(e,t,i){"use strict";return i.extend({"constructor":function(){i.prototype.constructor.apply(this);var n=e.config();t.each(n,function(e,t){this.extendMask(e)},this),this.storeMask()}})}),csui.define("csui/behaviors/keyboard.navigation/tabkey.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabables.behavior"],function(e,t,i,n,s,o){"use strict";return o.extend({"constructor":function(e,t){o.prototype.constructor.apply(this,arguments)},"_clearTabIndexes":function(e){n.debug("_clearTabIndexes of TabKeyBehavior for view "+e.constructor.name)&&console.log(n.last)}},{})}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"half"},"widget":{"type":"csui/widgets/placeholder","options":{"label":"Saved Query","color":"#fff","bgcolor":"#cccc88"}}},{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"csui/widgets/search.results","options":{}}}]}]}}),csui.define("css!csui/controls/form/impl/form",[],function(){}),csui.define("csui/models/form",["csui/lib/underscore","csui/lib/backbone","csui/lib/jsonpath"],function(e,t,i){"use strict";var n=t.Model.extend({"constructor":function(e,i){this.options=i||(i={}),t.Model.prototype.constructor.call(this,e,i)},"getValue":function(e){var t=this.get("data");return t=t&&e?n.getValueOnPath(t,e):null},"setValue":function(e,t){var i=this.get("data");return i=i&&e?n.setValueOnPath(i,e,t):null}},{"getValueOnPath":function(e,t){return t&&(t=t.replace(/^\//,"$.").replace(/\//,"."),e=i(e,t),e=e?e[0]:null),e},"setValueOnPath":function(e,t,n){if(t){var s=t.replace(/^.*\/([^\/]+)$/,"$1"),o=s.indexOf("[")>0?s.replace(/^.*\[(\d+)\]$/,"$1"):void 0;void 0!==o?(t=t.replace(/^(.*)\[[^\]]\]+$/,"$1").replace(/^\//,"$.").replace(/\//,"."),e=i(e,t),e?(e=e[0],e[parseInt(o,10)]=n):e=null):(t=t.replace(/^(.*)\/[^\/]+$/,"$1").replace(/^\//,"$.").replace(/\//,"."),t&&"/"!==t&&(e=i(e,t))&&(e=e[0]),e?e[s]=n:e=null)}return e},"pluckPrimitiveFields":function(t){function i(t,s){return e.reduce(e.keys(t),function(s,o){var r=t[o];return e.isArray(r)?s[o]=n(r):e.isObject(r)?s=i(r,s):s[o]=r,s},s||{},this)}function n(t){return e.map(t,function(t){return e.isArray(t)?n(t):e.isObject(t)?i(t):t})}return i(t)}});return n}),csui.define("csui/models/appliedcategoryform",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/form","csui/models/mixins/node.connectable/node.connectable.mixin"],function(e,t,i,n,s){"use strict";var o=n.extend({"constructor":function(e,t){n.prototype.constructor.call(this,e,t),this.makeNodeConnectable(t)},"clone":function(){return new this.constructor(this.attributes,{"node":this.node})},"url":function(){var t=e.str.sformat("forms/nodes/categories/{0}?id={1}&category_id={2}",this.options.action,this.options.node.get("id"),this.options.categoryId);return i.combine(this.connector.connection.url,t)},"parse":function(t,i){var n=e.extend({"data":{},"schema":{},"options":{}},t.form||t.forms&&t.forms[0]||t),s=n.title||this.get("title");return n.options=e.omit(n.options,"form"),void 0===n.schema.title&&(n.schema.title=s),n.title||(n.title=s),void 0===n.role_name&&(n.role_name="categories"),n}});return s.mixin(o.prototype),o}),csui.define("csui/widgets/metadata/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/metadata/impl/nls/root/lang",{"properties":"Properties","versions":"Versions","general":"General","MenuItemRename":"Rename","MenuItemEdit":"Edit","MenuItemCopy":"Copy","MenuItemMove":"Move","MenuItemDownload":"Download","MenuItemEmailLink":"Email Link","MenuItemShare":"Share","MenuItemReserve":"Reserve","MenuItemUnreserve":"Unreserve","MenuItemAddVersion":"Add version","MenuItemDelete":"Delete","addItemMetadataDialogButtonAddTitle":"Add","addItemMetadataDialogButtonCancelTitle":"Cancel","addItemMetadataDialogTitle1":"New {0}","addItemMetadataDialogTitleGeneric":"Item","addDocumentMetadataDialogTitle":"Upload file","addDocumentMetadataDialogAddButtonTitle":"Upload","addItemPlaceHolderName":"Enter name","emptyObjectNameAria":"Object name","editNameTooltip":"Edit name","cancelEditNameTooltip":"Cancel name edit","failedToSaveName":"Failed to save name.","failedToCreateItem":"Failed to create the new item.","failedToValidateForms":"Failed to validate all Forms.  Please check that all required fields are entered.","switchLanguageTooltip":"Switch language","gotoPreviousCategoryTooltip":"Show previous Category","gotoNextCategoryTooltip":"Show next Category","addNewProperties":"Add properties","addNewCategory":"Add a new Category","addNewCategoryDialogTitle":"Add Category","addNewCategoryDialogAddButtonTitle":"Add","removeCategoryTooltip":"Remove this Category","removeCategoryWarningTitle":"Remove Category","removeCategoryWarningMessage":'Do you want to remove Category "{0}"?',"removeCategoryFailMessageTitle":"Remove Category Failed","removeCategoryFailMessage":'Failed to remove Category "{0}". \n\n{1}',"getPropertyPanelsFailTitle":"Error Loading Properties","getCategoryActionsFailTitle":"Get Category Actions","getCategoryActionsFailMessage":'Failed to get Category actions for node "{0}". \n\n{1}',"getActionsForACategoryFailMessage":'Failed to get actions for Category "{0}" of node "{1}". \n\n{2}',"addNewCategoryFailTitle":"Add Category to node","addNewCategoryFailMessage":'Failed to add Category "{0}" to node "{1}" with node ID "{2}". \n\n{3}',"categoryExistsMessage":'Error: Category "{0}" already exists.',"loadNewCategoryFailTitle":"Get new Category Form","loadNewCategoryFailMessage":'Failed to get Form for Category "{0}" on node "{1}" with node ID "{2}". \n\n{3}',"selectCategoryTitle":"Select a Category to add","selectCategoryButtonLabel":"Add","viewShortcutMessage":"View shortcut","viewOriginalMessage":"View original","shortcutLocationLabel":"Original location","closeMetadataButtonTooltip":"Close metadata","formValidationErrorMessage":"Required fields must be filled","hideValidationErrorMessageIconTooltip":"Hide validation error","missingRequiredMetadataForDocuments":"Missing required metadata for some document(s).","goBackTooltip":"Go back","onlyRequiredFieldsLabel":"Only required fields (*)","defaultDialogTitle":"Metadata","defaultDialogOkButtonTitle":"OK","defaultDialogCancelButtonTitle":"Cancel","moveOneItemMetadataDialogTitle":"Move item","moveMultipleItemsMetadataDialogTitle":"Move {0} items","moveItemsMetadataDialogButtonTitle":"Move","copyOneItemMetadataDialogTitle":"Copy item","copyMultipleItemsMetadataDialogTitle":"Copy {0} items","copyItemsMetadataDialogButtonTitle":"Copy","missingRequiredMetadataForObjects":"Missing required metadata for some object(s).","inheritanceOriginalProperties":"with original properties","inheritanceDestinationProperties":"with destination properties","inheritanceMergedProperties":"with combined properties","requiredTooltip":"Required","requiredPassedTooltip":"Required fields satisfied.","ToolbarItemVersionInfo":"Properties","ToolbarItemVersionDelete":"Delete","ToolbarItemVersionPurgeAll":"Purge all previous Versions","ToolbarItemVersionDownload":"Download","versionColumnSizeTitle":"Size","versionColumnVersionNumberTitle":"Versions","openDoc":"Open {0}","openDocAria":"Open {0} {1}","versionNumInBrowserTitle":"Version {0}","docPreviewAlt":"Document Preview","formFieldItemIdLabel":"Item ID","formFieldSizeLabel":"Size","formFieldTypeLabel":"Type","formFieldReservedStatusLabel":"Status","formFieldReservedByLabel":"Reserved by","UrlLabel":"Web address","UrlTitle":"Web address","alpacaPlaceholderNotAvailable":"n/a","alpacaPlaceholderUrl":"Add web address","alpacaPlaceholderOTNodePicker":"Select object","alpacaPlaceholderDescription":"Add description","NoOwner":"<No Owner>","showMore":"Show more","showMoreAria":"Show more actions","collapse":"Hide item list","expand":"Show item list","permissionPage":"Permission Page of {0}"}),csui.define("csui/models/forms",["csui/lib/backbone","csui/models/form"],function(e,t){"use strict";return e.Collection.extend({"model":t,"constructor":function(t,i){this.options=i||(i={}),e.Collection.prototype.constructor.call(this,t,i)}})}),csui.define("csui/models/nodeforms",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/base","csui/models/forms","csui/models/mixins/node.resource/node.resource.mixin"],function(e,t,i,n,s,o,r,a){"use strict";var l=r.extend({"constructor":function(e,t){r.prototype.constructor.apply(this,arguments),this.makeNodeResource(t)},"parse":function(e){return e.forms}});return a.mixin(l.prototype),l}),csui.define("csui/models/nodecreateforms",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/base","csui/models/nodeforms"],function(e,t,i,n,s,o,r){"use strict";var a=r.extend({"constructor":function(e,t){if(r.prototype.constructor.apply(this,arguments),this.type=t.type,this.docParentId=t.docParentId,void 0===this.type)throw new Error(this.ERR_CONSTRUCTOR_NO_TYPE_GIVEN)},"clone":function(){return new this.constructor(this.models,{"node":this.node,"type":this.type})},"url":function(){var e={"parent_id":this.docParentId?this.docParentId:this.node.get("id"),"type":this.type},i="forms/nodes/create?"+t.param(e);return o.Url.combine(this.node.connector.connection.url,i)},"parse":function(e){var t=e.forms;return i.each(t,function(e){e.id=e.schema.title}),t.length&&(t[0].id="general"),t}},{"ERR_CONSTRUCTOR_NO_TYPE_GIVEN":"No creation type given in constructor"});return i.extend(a,{"version":"1.0"}),a}),csui.define("csui/models/nodeupdateforms",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/base","csui/models/nodeforms","csui/models/form"],function(e,t,i,n,s,o,r,a){"use strict";var l=r.extend({"constructor":function(e,t){r.prototype.constructor.apply(this,arguments),this.makeNodeResource(t)},"model":a,"clone":function(){return new this.constructor(this.models,{"node":this.node})},"url":function(){return i.str.sformat("{0}/forms/nodes/update?id={1}",this.connector.connection.url,this.node.get("id"))},"parse":function(e){if(e.forms){var t=[];return i.each(e.forms,function(e){"categories"===e.role_name?t=t.concat(Object.keys(e.schema.properties).map(function(t){return t=Number(t),e.data[t]&&delete e.data[t][t+"_1"],e.options.fields[t]&&delete e.options.fields[t][t+"_1"],e.schema.properties[t]&&delete e.schema.properties[t][t+"_1"],{"id":t,"name":e.schema.properties[t].title,"title":e.schema.properties[t].title,"data":e.data[t],"role_name":"categories","allow_delete":!0,"categoryId":t,"options":e.options.fields[t],"schema":e.schema.properties[t]}})):t.push(e)}),t}return e.data}});return i.extend(l,{"version":"1.0"}),l}),csui.define("csui/widgets/metadata/metadata.forms/server.adaptor.mixin",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/base","csui/utils/url","csui/models/appliedcategories","csui/models/form","csui/models/appliedcategoryform","i18n!csui/widgets/metadata/impl/nls/lang","csui/models/nodecreateforms","csui/models/nodeupdateforms","csui/models/node/node.model","csui/models/version"],function(e,t,i,n,s,o,r,a,l,c,u,d,h,p){"use strict";var f={"makeServerAdaptor":function(e){return this},"sync":function(e,t,n){return"read"===e?"copy"===this.action||"move"===this.action?this._getMetadataCopyMoveItemForms(e,t,n):"create"===this.action||void 0===this.node.get("id")?this._getMetadataAddItemForms(e,t,n):this.node instanceof p?this._getMetadataVersionsForms(e,t,n):this._getMetadataForms(e,t,n):i.Collection.prototype.sync.apply(this,arguments)},"_getMetadataForms":function(e,i,n){i.trigger("request",i,void 0,n);var s=this.node,o=(s.get("type"),new d(void 0,{"node":s}));return o.fetch().then(t.bind(function(e,t,i){this.options=n,this.forms=o.models,n.success&&n.success(this.forms,"success")},this)).fail(function(e,t,i){n.error&&n.error(e,t,i)})},"_getMetadataVersionsForms":function(i,n,s){n.trigger("request",n,void 0,s);var r=e.Deferred(),a=this.node,c=a.get("id"),u=a.get("version_number"),d=a.connector,p=o.combine(d.connection.url,"forms/nodes/versions/categories"),f=d.extendAjaxOptions({"url":p+"?"+e.param({"id":c,"version_number":u})});return e.ajax(f).done(t.bind(function(e,i,n){var o=[],a=e.forms[0];if(a){void 0===this.roles&&(this.roles={}),void 0===this.roles.categories&&(this.roles.categories={});var c=t.keys(a.options.fields);t.each(c,function(e){var i=a.schema.properties[e].title,n=a.data[e],s=a.options.fields[e],r=a.schema.properties[e];h.usesIntegerId&&(e=parseInt(e));var c=new l({"id":e,"title":i,"allow_delete":!1},{"node":this.node,"categoryId":e,"action":"none"});o.push(c),c.set({"data":n,"options":s,"schema":t.omit(r,["description"]),"role_name":"categories","removeable":!1})},this)}s.success&&s.success(o,"success"),r.resolve()},this)).fail(function(){r.reject.apply(r,arguments)}),r.promise()},"_getMetadataAddItemForms":function(i,n,s){n.trigger("request",n,void 0,s);var o=this.node.get("data"),r=this.formCollection||new u(void 0,{"node":this.container,"docParentId":this.node.get("docParentId"),"type":this.node.get("type")}),a=this.node.get("forms")||void 0,l=this.node.get("xhr")||void 0;return a&&l?(a.forms[0].id="general",this._pushForms(a,o,s),this.fetching=!1,this.fetched=!0,e.Deferred().resolve()):r.fetch().then(t.bind(function(e,t,i){this._pushForms(e,o,s)},this)).fail(function(e,t,i){s.error&&s.error(e,t,i)})},"_pushForms":function(e,i,n){var s=[],o=this.node.get("name");void 0!==o&&(e.forms[0].data.name=o);var r=this.node.get("type");if(1===r){var l=this.node.get("original_id");void 0!==l&&(e.forms[0].data.original_id=l)}else if(140===r){var c=this.node.get("url");c&&c.length>0&&(e.forms[0].data.url=c)}else if(144===r&&(void 0!==o&&(e.forms[0].data.file=o),i)){var u=e.forms[0].data;i.name&&(u.name=i.name),i.description&&(u.description=i.description),i.advanced_versioning&&(u.advanced_versioning=i.advanced_versioning)}t.each(e.forms,function(e){"categories"===e.role_name?this._pushCategoryForms(e,s,n):s.push(new a(e))},this),n.success&&n.success(s,"success")},"_pushCategoryForms":function(e,i,n){var s=this.node.get("data"),o=t.keys(e.options.fields);t.each(o,function(o){if(-1===t.indexOf(this.node.removedCategories,o)){var r=e.schema.properties[o].title,a=e.data[o];s&&s.roles&&s.roles.categories&&s.roles.categories[o]&&(a=t.extend(a,s.roles.categories[o]));var c=e.options.fields[o],u=t.omit(e.schema.properties[o],"description");h.usesIntegerId&&(o=parseInt(o));var d=new l({"id":o,"title":r,"data":a,"options":c,"schema":u,"role_name":"categories","allow_delete":!c||!1!==c.removeable,"removeable":!c||!1!==c.removeable},{"node":this.node,"categoryId":o,"action":"none"});n.reset?i.push(d):this.add(d)}},this)},"_getMetadataCopyMoveItemForms":function(i,n,s){n.trigger("request",n,void 0,s);var o,r=e.Deferred(),a=this,c=this.node.get("id"),u=this.container.connector,d={"original":0,"destination":1,"merged":2};"copy"===a.action?o="/forms/nodes/copy":"move"===a.action&&(o="/forms/nodes/move");var p=u.extendAjaxOptions({"url":u.connection.url+o+"?"+e.param({"id":c,"parent_id":a.container.get("id"),"inheritance":d[a.inheritance]})});return e.ajax(p).done(function(e,i,n){var o,c=[];if(e.forms.length>1&&(o=t.find(e.forms,function(e){return"categories"===e.role_name})),o){var u=o.role_name;void 0===a.roles&&(a.roles={}),void 0===a.roles[u]&&(a.roles[u]={});var d=a.node.get("data"),p={};d&&d.roles&&d.roles[u]&&(p=d.roles[u]);var f=t.keys(o.options.fields);t.each(f,function(e){if(-1===t.indexOf(a.node.removedCategories,e)){var i=o.schema.properties[e].title,n=o.data[e],s=o.options.fields[e],r=o.schema.properties[e],d=h.usesIntegerId?parseInt(e):e,f=new l({"id":d,"title":i,"allow_delete":!0},{"node":a.node,"categoryId":d,"action":"none"});c.push(f),!1===t.isEmpty(p[e])&&t.each(n,function(i,s){t.has(p[e],s)&&(n[s]=p[e][s])}),f.set({"data":n,"options":s,"schema":t.omit(r,["description"]),"role_name":u,"removeable":!0})}})}s.success&&s.success(c,"success"),r.resolve()}).fail(function(e,t,i){s.error&&s.error(e,t,i),r.reject.apply(r,arguments)}),r.promise()}};return{"mixin":function(e){return t.extend(e,f)}}}),csui.define("csui/widgets/metadata/metadata.forms",["csui/lib/backbone","csui/utils/log","csui/models/mixins/node.connectable/node.connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/widgets/metadata/metadata.forms/server.adaptor.mixin"],function(e,t,i,n,s){"use strict";var o=e.Collection.extend({"constructor":function(t,i){i||(i={}),this.action=i.action,this.inheritance=i.inheritance,this.container=i.container,this.formCollection=i.formCollection,e.Collection.prototype.constructor.apply(this,arguments),this.makeNodeConnectable(i).makeFetchable(i).makeServerAdaptor(i)}});return i.mixin(o.prototype),n.mixin(o.prototype),s.mixin(o.prototype),o}),csui.define("csui/widgets/metadata/impl/metadata.forms",["csui/widgets/metadata/metadata.forms"],function(e){return e}),csui.define("csui/widgets/metadata/impl/metadata.utils",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/widgets/metadata/impl/metadata.forms"],function(e,t,i,n,s){function o(){}return e.extend(o.prototype,i.Events,{"ContainerHasEnforcedEmptyRequiredMetadata":function(n){var o=t.Deferred(),r=new i.Model({"name":n.name,"id":n.id,"docParentId":n.docParentId,"type":n.addableType});n.enforcedRequiredAttrs&&(r.options||(r.options={}),r.options.enforcedRequiredAttrs=!0);var a=new s(void 0,{"node":r,"action":n.action,"connector":n.container.connector,"container":n.container,"inheritance":n.inheritance,"autofetch":!0,"autoreset":!0});return a.fetch().done(e.bind(function(){if(0===a.models.length)o.resolve({"hasRequiredMetadata":!1});else{var e=this.FormsCollectionHasRequiredAttributes(a);o.resolve({"hasRequiredMetadata":!e,"initialFormData":a})}},this)),o.promise()},"FormsCollectionHasRequiredAttributes":function(t){var i=!0;return e.each(t.models,e.bind(function(e){var t=this._checkForAlpacaRequiredFields(e);i=i&&t},this)),i},"jsonObjTraverse":function(t,i,n,s,o,r){for(var a in t)t.hasOwnProperty(a)&&(t[n]&&t[n]===s&&-1===e.indexOf(o,r)&&o.push(r),"object"==typeof t[a]&&this.jsonObjTraverse(t[a],i+"."+a,n,s,o,a))},"_checkForAlpacaRequiredFields":function(t){var i=!0,n=t.get("data"),s=t.get("options"),o=t.get("schema"),r=[],a=[],l=[];this.jsonObjTraverse(o,"","required",!0,a,"properties"),this.jsonObjTraverse(s,"","validate",!1,l,"fields");var c=function(e,t){var i=e.filter(function(e){return-1!=t.indexOf(e)});return i.length>0?i:t}(l,a),u=function(e,t,i,n){for(var s in e)e.hasOwnProperty(s)&&(s===i&&n.push(e[i]),"object"==typeof e[s]&&u(e[s],t+"."+s,i,n))};if(c){var d=!1;e.each(c,function(t){if(r=[],u(n,"",t.toString(),r),e.each(r,function(t){var n=function(t){if(t instanceof Array&&(null!==t||""!==t))e.each(t,function(e){n(e)});else if(null===t||""===t)return void(d=!0)};if(d)return void(i=!1);n(t)}),d)return void(i=!1)})}return i},"AlpacaFormOptionsSchemaHaveRequiredFields":function(e,t,i){var n=!1,s=[];if(i&&"general"===i){if(t&&t.properties){t.properties.name&&(t.properties.name.required=!1),t.properties.advanced_versioning&&(t.properties.advanced_versioning.required=!1),t.properties.file&&(t.properties.file.required=!1);for(var o in t.properties)t.properties.hasOwnProperty(o)&&t.properties[o].required&&!e.fields[o].hidden&&(n=!0)}}else t&&!1===n&&(this.jsonObjTraverse(t,"","required",!0,s,"properties"),s.length>0&&(n=!0));return n},"ContainerHasEnforcedEmptyRequiredMetadataOnNodes":function(i){if(!i.items||i.items.length<1||!i.container)return t.Deferred().reject({});var s=t.Deferred(),o=e.map(i.items,function(e){return e.id}),r=new FormData;r.append("body",JSON.stringify({"ids":o}));var a=i.container.connector,l={"type":"POST","url":n.combine(a.connection.url,"validation/nodes/categories/enforcement"),"data":r,"contentType":!1,"processData":!1};return a.extendAjaxOptions(l),t.ajax(l).done(e.bind(function(e){if("original"===i.inheritance)s.resolve({"requiredMetadata":!1,"enforcedItems":e.results});else if(e.results&&e.results.length>0){var t={"action":i.action,"id":e.results[0].id,"inheritance":i.inheritance,"container":i.container,"enforcedRequiredAttrs":!0};this.ContainerHasEnforcedEmptyRequiredMetadata(t).done(function(t){!0===t.hasRequiredMetadata?s.resolve({"requiredMetadata":!0,"enforcedItems":e.results}):s.resolve({"requiredMetadata":!1,"enforcedItems":e.results})}).fail(function(e){s.reject(e)})}else s.resolve({"requiredMetadata":!1,"enforcedItems":e.results})},this)).fail(function(e){s.reject(e)}),s.promise()}}),o.prototype.get=i.Model.prototype.get,e.extend(o,{"version":"1.0"}),o}),csui.define("csui/controls/form/pub.sub",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";return e.extend({},t.Events)}),csui.define("csui/temporary/cop/commands/defaultactionitems",[],function(){"use strict";return[{"equals":{"type":[356,357]},"signature":"OpenBlog","sequence":30},{"equals":{"type":[123475,123476]},"signature":"OpenFAQ","sequence":30},{"equals":{"type":[123469,123470]},"signature":"OpenForum","sequence":30},{"equals":{"type":[5573,5574]},"signature":"OpenWiki","sequence":30},{"equals":{"type":3030331},"signature":"OpenMailStore","sequence":30}]}),csui.define("csui/temporary/activeviews/commands/defaultactionitems",[],function(){"use strict";return[{"equals":{"type":30309},
"signature":"Disabled","sequence":30}]}),csui.define("csui/temporary/appearances/commands/defaultactionitems",[],function(){"use strict";return[{"equals":{"type":480},"signature":"Disabled","sequence":30}]}),csui.define("csui/utils/letter-avatar-random-color/letter-avatar-colors",["module"],function(e){var t={"colors":["#414979","#2e3d98","#4f3690","#e00051","#006353","#007599","#147bbc","#a0006b","#ba004C"]};return{"getLetterAvatarColor":function(e){if(!e)return"";var i=0,n=0,s=e.length;e=e.toUpperCase();for(var o=0;o<s;o++)i+=e.charCodeAt(o);return n=parseInt(i.toString().split("").pop()),n=9===n?n-1:n,t.colors[n]}}}),csui.define("csui/utils/user.avatar.color",["csui/lib/underscore","csui/utils/letter-avatar-random-color/letter-avatar-colors"],function(e,t){return{"getUserAvatarColor":function(i){if(!i||e.isEmpty(i))return"";var n=i.initials&&i.initials.length>1?i.initials:i.name?i.name.substring(0,2):"";return t.getLetterAvatarColor(n)}}}),csui.define("bundles/csui-view-support",["csui/lib/ally","csui/lib/bootstrap3-typeahead","csui/lib/jquery.mousehover","csui/lib/jsonpath","csui/behaviors/collection.error/collection.error.behavior","csui/behaviors/collection.state/collection.state.behavior","csui/behaviors/collection.state/collection.state.view","csui/controls/facet.bar/facet.bar.view","csui/controls/facet.panel/facet.panel.view","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/controls/list/emptylist.view","csui/controls/list/list.view","csui/controls/list/list.state.view","css!csui/controls/list/impl/list","csui/controls/list/simplelist.view","csui/controls/list/simpletreelist.view","csui/controls/listitem/listitemobject.view","csui/controls/listitem/listitemstandard.view","csui/controls/listitem/listitemstateful.view","csui/controls/listitem/simpletreelistitem.view","csui/controls/toolbar/toolbar.view","csui/controls/toolbar/toolbar.command.controller","csui/controls/toolbar/toolitem.model","csui/controls/toolbar/toolitem.custom.view","csui/controls/toolbar/toolitem.view","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolitems.mask","csui/controls/toolbar/delayed.toolbar.view","csui/controls/toolbar/toolbar.state.behavior","hbs!csui/controls/toolbar/toolitem","csui/controls/fileupload/impl/upload.controller","csui/controls/checkbox/checkbox.view","csui/controls/disclosure/disclosure.view","csui/models/appliedcategories","csui/models/appliedcategory","csui/models/fileupload","csui/models/fileuploads","csui/models/namequery","csui/models/nodeversions","csui/models/versions","csui/models/facet","csui/models/facets","csui/models/facettopic","csui/models/facettopics","csui/models/node.facets/facet.query.mixin","csui/models/node/node.facet.factory","csui/models/nodefacets","csui/models/widget/search.results/search.results.model","csui/models/permission/permission.table.columns.model","csui/utils/commands/impl/full.page.modal/full.page.modal.view","csui/utils/commands/impl/thumbnail/thumbnail.object","csui/utils/commands/impl/thumbnail/thumbnail.view","json!csui/utils/commands/open.types.json","csui/utils/commands/open.plugins/impl/core.open.plugins","csui/utils/contexts/factories/search.results.factory","csui/utils/high.contrast/detector","csui/utils/impl/signin.dialog/signin.dialog","csui/utils/non-attaching.region/non-attaching.region","csui/utils/non-emptying.region/non-emptying.region","csui/utils/script-executing.region/script-executing.region","csui/utils/taskqueue","csui/utils/toolitem.masks/global.toolitems.mask","csui/behaviors/keyboard.navigation/retainfocus.behavior","csui/behaviors/keyboard.navigation/tabkey.behavior","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json","css!csui/controls/form/impl/form","csui/widgets/metadata/metadata.forms","csui/widgets/metadata/impl/metadata.forms","csui/widgets/metadata/impl/metadata.utils","i18n!csui/widgets/metadata/impl/nls/lang","csui/models/appliedcategoryform","csui/models/form","csui/models/forms","csui/models/nodeforms","csui/controls/form/pub.sub","csui/temporary/cop/commands/defaultactionitems","csui/temporary/activeviews/commands/defaultactionitems","csui/temporary/appearances/commands/defaultactionitems","csui/models/node.facets/server.adaptor.mixin","csui/widgets/metadata/metadata.forms/server.adaptor.mixin","csui/utils/user.avatar.color","csui/utils/letter-avatar-random-color/letter-avatar-colors"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-view-support",!0)});
//# sourceMappingURL=csui-view-support.js.map